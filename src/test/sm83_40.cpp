// File autogenerated by ./scripts/generate_tests_sm83.py
#include <test/include/acutest.h>

#include <cpu/include/instruction_ld.hpp>
#include <cpu/include/registers.hpp>
#include <memory/include/memory.hpp>

using namespace pgb::common;
using namespace pgb::memory;
using namespace pgb::cpu;

static auto registers = RegisterFile();
static auto mmap      = MemoryMap(registers, MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount);


#define WriteRegisterWord(register, value) do { auto result = mmap.WriteWord(register, value); TEST_ASSERT(result.IsSuccess()); } while(0)
#define WriteRegisterByte(register, value) do { auto result = mmap.WriteByte(register, value); TEST_ASSERT(result.IsSuccess()); } while(0)
#define WriteRegisterFlag(value) do { TEST_ASSERT(static_cast<const Byte>(mmap.WriteFlagByte(static_cast<const Byte&>(value))) == 0x00); } while(0)
#define WriteMemory(address, value) do { auto result = mmap.WriteByte(address, value); TEST_ASSERT(result.IsSuccess()); } while(0)

#define CheckRegisterWord(register, value) do { auto result = mmap.ReadWord(register); TEST_ASSERT(result.IsSuccess()); TEST_ASSERT(static_cast<const Word&>(result) == value); } while(0)
#define CheckRegisterByte(register, value) do { auto result = mmap.ReadByte(register); TEST_ASSERT(result.IsSuccess()); TEST_ASSERT(static_cast<const Byte&>(result) == value); } while(0)
#define CheckRegisterFlag(value) do { TEST_ASSERT(static_cast<const Byte>(mmap.ReadFlagByte()) == value); } while(0)
#define CheckMemory(address, value) do { auto result = mmap.ReadByte(address); TEST_ASSERT(result.IsSuccess()); TEST_ASSERT(static_cast<const Byte&>(result) == value); } while(0)

static_assert(instruction::InstructionRegistryNoPrefix::Callbacks[0x40] != nullptr);
static_assert(instruction::InstructionRegistryNoPrefix::Ticks[0x40] != 0);

const bool skip_test_40_0000 = false;
const bool skip_test_40_0001 = false;
const bool skip_test_40_0002 = false;
const bool skip_test_40_0003 = false;
const bool skip_test_40_0004 = false;
const bool skip_test_40_0005 = false;
const bool skip_test_40_0006 = false;
const bool skip_test_40_0007 = false;
const bool skip_test_40_0008 = false;
const bool skip_test_40_0009 = false;
const bool skip_test_40_000A = false;
const bool skip_test_40_000B = false;
const bool skip_test_40_000C = false;
const bool skip_test_40_000D = false;
const bool skip_test_40_000E = false;
const bool skip_test_40_000F = false;
const bool skip_test_40_0010 = false;
const bool skip_test_40_0011 = false;
const bool skip_test_40_0012 = false;
const bool skip_test_40_0013 = false;
const bool skip_test_40_0014 = false;
const bool skip_test_40_0015 = false;
const bool skip_test_40_0016 = false;
const bool skip_test_40_0017 = false;
const bool skip_test_40_0018 = false;
const bool skip_test_40_0019 = false;
const bool skip_test_40_001A = false;
const bool skip_test_40_001B = false;
const bool skip_test_40_001C = false;
const bool skip_test_40_001D = false;
const bool skip_test_40_001E = false;
const bool skip_test_40_001F = false;
const bool skip_test_40_0020 = false;
const bool skip_test_40_0021 = false;
const bool skip_test_40_0022 = false;
const bool skip_test_40_0023 = false;
const bool skip_test_40_0024 = false;
const bool skip_test_40_0025 = false;
const bool skip_test_40_0026 = false;
const bool skip_test_40_0027 = false;
const bool skip_test_40_0028 = false;
const bool skip_test_40_0029 = false;
const bool skip_test_40_002A = false;
const bool skip_test_40_002B = false;
const bool skip_test_40_002C = false;
const bool skip_test_40_002D = false;
const bool skip_test_40_002E = false;
const bool skip_test_40_002F = false;
const bool skip_test_40_0030 = false;
const bool skip_test_40_0031 = false;
const bool skip_test_40_0032 = false;
const bool skip_test_40_0033 = false;
const bool skip_test_40_0034 = false;
const bool skip_test_40_0035 = false;
const bool skip_test_40_0036 = false;
const bool skip_test_40_0037 = false;
const bool skip_test_40_0038 = false;
const bool skip_test_40_0039 = false;
const bool skip_test_40_003A = false;
const bool skip_test_40_003B = false;
const bool skip_test_40_003C = false;
const bool skip_test_40_003D = false;
const bool skip_test_40_003E = false;
const bool skip_test_40_003F = false;
const bool skip_test_40_0040 = false;
const bool skip_test_40_0041 = false;
const bool skip_test_40_0042 = false;
const bool skip_test_40_0043 = false;
const bool skip_test_40_0044 = false;
const bool skip_test_40_0045 = false;
const bool skip_test_40_0046 = false;
const bool skip_test_40_0047 = false;
const bool skip_test_40_0048 = false;
const bool skip_test_40_0049 = false;
const bool skip_test_40_004A = false;
const bool skip_test_40_004B = false;
const bool skip_test_40_004C = false;
const bool skip_test_40_004D = false;
const bool skip_test_40_004E = false;
const bool skip_test_40_004F = false;
const bool skip_test_40_0050 = false;
const bool skip_test_40_0051 = false;
const bool skip_test_40_0052 = false;
const bool skip_test_40_0053 = false;
const bool skip_test_40_0054 = false;
const bool skip_test_40_0055 = false;
const bool skip_test_40_0056 = false;
const bool skip_test_40_0057 = false;
const bool skip_test_40_0058 = false;
const bool skip_test_40_0059 = false;
const bool skip_test_40_005A = false;
const bool skip_test_40_005B = false;
const bool skip_test_40_005C = false;
const bool skip_test_40_005D = false;
const bool skip_test_40_005E = false;
const bool skip_test_40_005F = false;
const bool skip_test_40_0060 = false;
const bool skip_test_40_0061 = false;
const bool skip_test_40_0062 = false;
const bool skip_test_40_0063 = false;
const bool skip_test_40_0064 = false;
const bool skip_test_40_0065 = false;
const bool skip_test_40_0066 = false;
const bool skip_test_40_0067 = false;
const bool skip_test_40_0068 = false;
const bool skip_test_40_0069 = false;
const bool skip_test_40_006A = false;
const bool skip_test_40_006B = false;
const bool skip_test_40_006C = false;
const bool skip_test_40_006D = false;
const bool skip_test_40_006E = false;
const bool skip_test_40_006F = false;
const bool skip_test_40_0070 = false;
const bool skip_test_40_0071 = false;
const bool skip_test_40_0072 = false;
const bool skip_test_40_0073 = false;
const bool skip_test_40_0074 = false;
const bool skip_test_40_0075 = false;
const bool skip_test_40_0076 = false;
const bool skip_test_40_0077 = false;
const bool skip_test_40_0078 = false;
const bool skip_test_40_0079 = false;
const bool skip_test_40_007A = false;
const bool skip_test_40_007B = false;
const bool skip_test_40_007C = false;
const bool skip_test_40_007D = false;
const bool skip_test_40_007E = false;
const bool skip_test_40_007F = false;
const bool skip_test_40_0080 = false;
const bool skip_test_40_0081 = false;
const bool skip_test_40_0082 = false;
const bool skip_test_40_0083 = false;
const bool skip_test_40_0084 = false;
const bool skip_test_40_0085 = false;
const bool skip_test_40_0086 = false;
const bool skip_test_40_0087 = false;
const bool skip_test_40_0088 = false;
const bool skip_test_40_0089 = false;
const bool skip_test_40_008A = false;
const bool skip_test_40_008B = false;
const bool skip_test_40_008C = false;
const bool skip_test_40_008D = false;
const bool skip_test_40_008E = false;
const bool skip_test_40_008F = false;
const bool skip_test_40_0090 = false;
const bool skip_test_40_0091 = false;
const bool skip_test_40_0092 = false;
const bool skip_test_40_0093 = false;
const bool skip_test_40_0094 = false;
const bool skip_test_40_0095 = false;
const bool skip_test_40_0096 = false;
const bool skip_test_40_0097 = false;
const bool skip_test_40_0098 = false;
const bool skip_test_40_0099 = false;
const bool skip_test_40_009A = false;
const bool skip_test_40_009B = false;
const bool skip_test_40_009C = false;
const bool skip_test_40_009D = false;
const bool skip_test_40_009E = false;
const bool skip_test_40_009F = false;
const bool skip_test_40_00A0 = false;
const bool skip_test_40_00A1 = false;
const bool skip_test_40_00A2 = false;
const bool skip_test_40_00A3 = false;
const bool skip_test_40_00A4 = false;
const bool skip_test_40_00A5 = false;
const bool skip_test_40_00A6 = false;
const bool skip_test_40_00A7 = false;
const bool skip_test_40_00A8 = false;
const bool skip_test_40_00A9 = false;
const bool skip_test_40_00AA = false;
const bool skip_test_40_00AB = false;
const bool skip_test_40_00AC = false;
const bool skip_test_40_00AD = false;
const bool skip_test_40_00AE = false;
const bool skip_test_40_00AF = false;
const bool skip_test_40_00B0 = false;
const bool skip_test_40_00B1 = false;
const bool skip_test_40_00B2 = false;
const bool skip_test_40_00B3 = false;
const bool skip_test_40_00B4 = false;
const bool skip_test_40_00B5 = false;
const bool skip_test_40_00B6 = false;
const bool skip_test_40_00B7 = false;
const bool skip_test_40_00B8 = false;
const bool skip_test_40_00B9 = false;
const bool skip_test_40_00BA = false;
const bool skip_test_40_00BB = false;
const bool skip_test_40_00BC = false;
const bool skip_test_40_00BD = false;
const bool skip_test_40_00BE = false;
const bool skip_test_40_00BF = false;
const bool skip_test_40_00C0 = false;
const bool skip_test_40_00C1 = false;
const bool skip_test_40_00C2 = false;
const bool skip_test_40_00C3 = false;
const bool skip_test_40_00C4 = false;
const bool skip_test_40_00C5 = false;
const bool skip_test_40_00C6 = false;
const bool skip_test_40_00C7 = false;
const bool skip_test_40_00C8 = false;
const bool skip_test_40_00C9 = false;
const bool skip_test_40_00CA = false;
const bool skip_test_40_00CB = false;
const bool skip_test_40_00CC = false;
const bool skip_test_40_00CD = false;
const bool skip_test_40_00CE = false;
const bool skip_test_40_00CF = false;
const bool skip_test_40_00D0 = false;
const bool skip_test_40_00D1 = false;
const bool skip_test_40_00D2 = false;
const bool skip_test_40_00D3 = false;
const bool skip_test_40_00D4 = false;
const bool skip_test_40_00D5 = false;
const bool skip_test_40_00D6 = false;
const bool skip_test_40_00D7 = false;
const bool skip_test_40_00D8 = false;
const bool skip_test_40_00D9 = false;
const bool skip_test_40_00DA = false;
const bool skip_test_40_00DB = false;
const bool skip_test_40_00DC = false;
const bool skip_test_40_00DD = false;
const bool skip_test_40_00DE = false;
const bool skip_test_40_00DF = false;
const bool skip_test_40_00E0 = false;
const bool skip_test_40_00E1 = false;
const bool skip_test_40_00E2 = false;
const bool skip_test_40_00E3 = false;
const bool skip_test_40_00E4 = false;
const bool skip_test_40_00E5 = false;
const bool skip_test_40_00E6 = false;
const bool skip_test_40_00E7 = false;
const bool skip_test_40_00E8 = false;
const bool skip_test_40_00E9 = false;
const bool skip_test_40_00EA = false;
const bool skip_test_40_00EB = false;
const bool skip_test_40_00EC = false;
const bool skip_test_40_00ED = false;
const bool skip_test_40_00EE = false;
const bool skip_test_40_00EF = false;
const bool skip_test_40_00F0 = false;
const bool skip_test_40_00F1 = false;
const bool skip_test_40_00F2 = false;
const bool skip_test_40_00F3 = false;
const bool skip_test_40_00F4 = false;
const bool skip_test_40_00F5 = false;
const bool skip_test_40_00F6 = false;
const bool skip_test_40_00F7 = false;
const bool skip_test_40_00F8 = false;
const bool skip_test_40_00F9 = false;
const bool skip_test_40_00FA = false;
const bool skip_test_40_00FB = false;
const bool skip_test_40_00FC = false;
const bool skip_test_40_00FD = false;
const bool skip_test_40_00FE = false;
const bool skip_test_40_00FF = false;
const bool skip_test_40_0100 = false;
const bool skip_test_40_0101 = false;
const bool skip_test_40_0102 = false;
const bool skip_test_40_0103 = false;
const bool skip_test_40_0104 = false;
const bool skip_test_40_0105 = false;
const bool skip_test_40_0106 = false;
const bool skip_test_40_0107 = false;
const bool skip_test_40_0108 = false;
const bool skip_test_40_0109 = false;
const bool skip_test_40_010A = false;
const bool skip_test_40_010B = false;
const bool skip_test_40_010C = false;
const bool skip_test_40_010D = false;
const bool skip_test_40_010E = false;
const bool skip_test_40_010F = false;
const bool skip_test_40_0110 = false;
const bool skip_test_40_0111 = false;
const bool skip_test_40_0112 = false;
const bool skip_test_40_0113 = false;
const bool skip_test_40_0114 = false;
const bool skip_test_40_0115 = false;
const bool skip_test_40_0116 = false;
const bool skip_test_40_0117 = false;
const bool skip_test_40_0118 = false;
const bool skip_test_40_0119 = false;
const bool skip_test_40_011A = false;
const bool skip_test_40_011B = false;
const bool skip_test_40_011C = false;
const bool skip_test_40_011D = false;
const bool skip_test_40_011E = false;
const bool skip_test_40_011F = false;
const bool skip_test_40_0120 = false;
const bool skip_test_40_0121 = false;
const bool skip_test_40_0122 = false;
const bool skip_test_40_0123 = false;
const bool skip_test_40_0124 = false;
const bool skip_test_40_0125 = false;
const bool skip_test_40_0126 = false;
const bool skip_test_40_0127 = false;
const bool skip_test_40_0128 = false;
const bool skip_test_40_0129 = false;
const bool skip_test_40_012A = false;
const bool skip_test_40_012B = false;
const bool skip_test_40_012C = false;
const bool skip_test_40_012D = false;
const bool skip_test_40_012E = false;
const bool skip_test_40_012F = false;
const bool skip_test_40_0130 = false;
const bool skip_test_40_0131 = false;
const bool skip_test_40_0132 = false;
const bool skip_test_40_0133 = false;
const bool skip_test_40_0134 = false;
const bool skip_test_40_0135 = false;
const bool skip_test_40_0136 = false;
const bool skip_test_40_0137 = false;
const bool skip_test_40_0138 = false;
const bool skip_test_40_0139 = false;
const bool skip_test_40_013A = false;
const bool skip_test_40_013B = false;
const bool skip_test_40_013C = false;
const bool skip_test_40_013D = false;
const bool skip_test_40_013E = false;
const bool skip_test_40_013F = false;
const bool skip_test_40_0140 = false;
const bool skip_test_40_0141 = false;
const bool skip_test_40_0142 = false;
const bool skip_test_40_0143 = false;
const bool skip_test_40_0144 = false;
const bool skip_test_40_0145 = false;
const bool skip_test_40_0146 = false;
const bool skip_test_40_0147 = false;
const bool skip_test_40_0148 = false;
const bool skip_test_40_0149 = false;
const bool skip_test_40_014A = false;
const bool skip_test_40_014B = false;
const bool skip_test_40_014C = false;
const bool skip_test_40_014D = false;
const bool skip_test_40_014E = false;
const bool skip_test_40_014F = false;
const bool skip_test_40_0150 = false;
const bool skip_test_40_0151 = false;
const bool skip_test_40_0152 = false;
const bool skip_test_40_0153 = false;
const bool skip_test_40_0154 = false;
const bool skip_test_40_0155 = false;
const bool skip_test_40_0156 = false;
const bool skip_test_40_0157 = false;
const bool skip_test_40_0158 = false;
const bool skip_test_40_0159 = false;
const bool skip_test_40_015A = false;
const bool skip_test_40_015B = false;
const bool skip_test_40_015C = false;
const bool skip_test_40_015D = false;
const bool skip_test_40_015E = false;
const bool skip_test_40_015F = false;
const bool skip_test_40_0160 = false;
const bool skip_test_40_0161 = false;
const bool skip_test_40_0162 = false;
const bool skip_test_40_0163 = false;
const bool skip_test_40_0164 = false;
const bool skip_test_40_0165 = false;
const bool skip_test_40_0166 = false;
const bool skip_test_40_0167 = false;
const bool skip_test_40_0168 = false;
const bool skip_test_40_0169 = false;
const bool skip_test_40_016A = false;
const bool skip_test_40_016B = false;
const bool skip_test_40_016C = false;
const bool skip_test_40_016D = false;
const bool skip_test_40_016E = false;
const bool skip_test_40_016F = false;
const bool skip_test_40_0170 = false;
const bool skip_test_40_0171 = false;
const bool skip_test_40_0172 = false;
const bool skip_test_40_0173 = false;
const bool skip_test_40_0174 = false;
const bool skip_test_40_0175 = false;
const bool skip_test_40_0176 = false;
const bool skip_test_40_0177 = false;
const bool skip_test_40_0178 = false;
const bool skip_test_40_0179 = false;
const bool skip_test_40_017A = false;
const bool skip_test_40_017B = false;
const bool skip_test_40_017C = false;
const bool skip_test_40_017D = false;
const bool skip_test_40_017E = false;
const bool skip_test_40_017F = false;
const bool skip_test_40_0180 = false;
const bool skip_test_40_0181 = false;
const bool skip_test_40_0182 = false;
const bool skip_test_40_0183 = false;
const bool skip_test_40_0184 = false;
const bool skip_test_40_0185 = false;
const bool skip_test_40_0186 = false;
const bool skip_test_40_0187 = false;
const bool skip_test_40_0188 = false;
const bool skip_test_40_0189 = false;
const bool skip_test_40_018A = false;
const bool skip_test_40_018B = false;
const bool skip_test_40_018C = false;
const bool skip_test_40_018D = false;
const bool skip_test_40_018E = false;
const bool skip_test_40_018F = false;
const bool skip_test_40_0190 = false;
const bool skip_test_40_0191 = false;
const bool skip_test_40_0192 = false;
const bool skip_test_40_0193 = false;
const bool skip_test_40_0194 = false;
const bool skip_test_40_0195 = false;
const bool skip_test_40_0196 = false;
const bool skip_test_40_0197 = false;
const bool skip_test_40_0198 = false;
const bool skip_test_40_0199 = false;
const bool skip_test_40_019A = false;
const bool skip_test_40_019B = false;
const bool skip_test_40_019C = false;
const bool skip_test_40_019D = false;
const bool skip_test_40_019E = false;
const bool skip_test_40_019F = false;
const bool skip_test_40_01A0 = false;
const bool skip_test_40_01A1 = false;
const bool skip_test_40_01A2 = false;
const bool skip_test_40_01A3 = false;
const bool skip_test_40_01A4 = false;
const bool skip_test_40_01A5 = false;
const bool skip_test_40_01A6 = false;
const bool skip_test_40_01A7 = false;
const bool skip_test_40_01A8 = false;
const bool skip_test_40_01A9 = false;
const bool skip_test_40_01AA = false;
const bool skip_test_40_01AB = false;
const bool skip_test_40_01AC = false;
const bool skip_test_40_01AD = false;
const bool skip_test_40_01AE = false;
const bool skip_test_40_01AF = false;
const bool skip_test_40_01B0 = false;
const bool skip_test_40_01B1 = false;
const bool skip_test_40_01B2 = false;
const bool skip_test_40_01B3 = false;
const bool skip_test_40_01B4 = false;
const bool skip_test_40_01B5 = false;
const bool skip_test_40_01B6 = false;
const bool skip_test_40_01B7 = false;
const bool skip_test_40_01B8 = false;
const bool skip_test_40_01B9 = false;
const bool skip_test_40_01BA = false;
const bool skip_test_40_01BB = false;
const bool skip_test_40_01BC = false;
const bool skip_test_40_01BD = false;
const bool skip_test_40_01BE = false;
const bool skip_test_40_01BF = false;
const bool skip_test_40_01C0 = false;
const bool skip_test_40_01C1 = false;
const bool skip_test_40_01C2 = false;
const bool skip_test_40_01C3 = false;
const bool skip_test_40_01C4 = false;
const bool skip_test_40_01C5 = false;
const bool skip_test_40_01C6 = false;
const bool skip_test_40_01C7 = false;
const bool skip_test_40_01C8 = false;
const bool skip_test_40_01C9 = false;
const bool skip_test_40_01CA = false;
const bool skip_test_40_01CB = false;
const bool skip_test_40_01CC = false;
const bool skip_test_40_01CD = false;
const bool skip_test_40_01CE = false;
const bool skip_test_40_01CF = false;
const bool skip_test_40_01D0 = false;
const bool skip_test_40_01D1 = false;
const bool skip_test_40_01D2 = false;
const bool skip_test_40_01D3 = false;
const bool skip_test_40_01D4 = false;
const bool skip_test_40_01D5 = false;
const bool skip_test_40_01D6 = false;
const bool skip_test_40_01D7 = false;
const bool skip_test_40_01D8 = false;
const bool skip_test_40_01D9 = false;
const bool skip_test_40_01DA = false;
const bool skip_test_40_01DB = false;
const bool skip_test_40_01DC = false;
const bool skip_test_40_01DD = false;
const bool skip_test_40_01DE = false;
const bool skip_test_40_01DF = false;
const bool skip_test_40_01E0 = false;
const bool skip_test_40_01E1 = false;
const bool skip_test_40_01E2 = false;
const bool skip_test_40_01E3 = false;
const bool skip_test_40_01E4 = false;
const bool skip_test_40_01E5 = false;
const bool skip_test_40_01E6 = false;
const bool skip_test_40_01E7 = false;
const bool skip_test_40_01E8 = false;
const bool skip_test_40_01E9 = false;
const bool skip_test_40_01EA = false;
const bool skip_test_40_01EB = false;
const bool skip_test_40_01EC = false;
const bool skip_test_40_01ED = false;
const bool skip_test_40_01EE = false;
const bool skip_test_40_01EF = false;
const bool skip_test_40_01F0 = false;
const bool skip_test_40_01F1 = false;
const bool skip_test_40_01F2 = false;
const bool skip_test_40_01F3 = false;
const bool skip_test_40_01F4 = false;
const bool skip_test_40_01F5 = false;
const bool skip_test_40_01F6 = false;
const bool skip_test_40_01F7 = false;
const bool skip_test_40_01F8 = false;
const bool skip_test_40_01F9 = false;
const bool skip_test_40_01FA = false;
const bool skip_test_40_01FB = false;
const bool skip_test_40_01FC = false;
const bool skip_test_40_01FD = false;
const bool skip_test_40_01FE = false;
const bool skip_test_40_01FF = false;
const bool skip_test_40_0200 = false;
const bool skip_test_40_0201 = false;
const bool skip_test_40_0202 = false;
const bool skip_test_40_0203 = false;
const bool skip_test_40_0204 = false;
const bool skip_test_40_0205 = false;
const bool skip_test_40_0206 = false;
const bool skip_test_40_0207 = false;
const bool skip_test_40_0208 = false;
const bool skip_test_40_0209 = false;
const bool skip_test_40_020A = false;
const bool skip_test_40_020B = false;
const bool skip_test_40_020C = false;
const bool skip_test_40_020D = false;
const bool skip_test_40_020E = false;
const bool skip_test_40_020F = false;
const bool skip_test_40_0210 = false;
const bool skip_test_40_0211 = false;
const bool skip_test_40_0212 = false;
const bool skip_test_40_0213 = false;
const bool skip_test_40_0214 = false;
const bool skip_test_40_0215 = false;
const bool skip_test_40_0216 = false;
const bool skip_test_40_0217 = false;
const bool skip_test_40_0218 = false;
const bool skip_test_40_0219 = false;
const bool skip_test_40_021A = false;
const bool skip_test_40_021B = false;
const bool skip_test_40_021C = false;
const bool skip_test_40_021D = false;
const bool skip_test_40_021E = false;
const bool skip_test_40_021F = false;
const bool skip_test_40_0220 = false;
const bool skip_test_40_0221 = false;
const bool skip_test_40_0222 = false;
const bool skip_test_40_0223 = false;
const bool skip_test_40_0224 = false;
const bool skip_test_40_0225 = false;
const bool skip_test_40_0226 = false;
const bool skip_test_40_0227 = false;
const bool skip_test_40_0228 = false;
const bool skip_test_40_0229 = false;
const bool skip_test_40_022A = false;
const bool skip_test_40_022B = false;
const bool skip_test_40_022C = false;
const bool skip_test_40_022D = false;
const bool skip_test_40_022E = false;
const bool skip_test_40_022F = false;
const bool skip_test_40_0230 = false;
const bool skip_test_40_0231 = false;
const bool skip_test_40_0232 = false;
const bool skip_test_40_0233 = false;
const bool skip_test_40_0234 = false;
const bool skip_test_40_0235 = false;
const bool skip_test_40_0236 = false;
const bool skip_test_40_0237 = false;
const bool skip_test_40_0238 = false;
const bool skip_test_40_0239 = false;
const bool skip_test_40_023A = false;
const bool skip_test_40_023B = false;
const bool skip_test_40_023C = false;
const bool skip_test_40_023D = false;
const bool skip_test_40_023E = false;
const bool skip_test_40_023F = false;
const bool skip_test_40_0240 = false;
const bool skip_test_40_0241 = false;
const bool skip_test_40_0242 = false;
const bool skip_test_40_0243 = false;
const bool skip_test_40_0244 = false;
const bool skip_test_40_0245 = true;
const bool skip_test_40_0246 = false;
const bool skip_test_40_0247 = false;
const bool skip_test_40_0248 = false;
const bool skip_test_40_0249 = false;
const bool skip_test_40_024A = false;
const bool skip_test_40_024B = false;
const bool skip_test_40_024C = false;
const bool skip_test_40_024D = false;
const bool skip_test_40_024E = false;
const bool skip_test_40_024F = false;
const bool skip_test_40_0250 = false;
const bool skip_test_40_0251 = false;
const bool skip_test_40_0252 = false;
const bool skip_test_40_0253 = false;
const bool skip_test_40_0254 = false;
const bool skip_test_40_0255 = false;
const bool skip_test_40_0256 = false;
const bool skip_test_40_0257 = false;
const bool skip_test_40_0258 = false;
const bool skip_test_40_0259 = false;
const bool skip_test_40_025A = false;
const bool skip_test_40_025B = false;
const bool skip_test_40_025C = false;
const bool skip_test_40_025D = false;
const bool skip_test_40_025E = false;
const bool skip_test_40_025F = false;
const bool skip_test_40_0260 = false;
const bool skip_test_40_0261 = false;
const bool skip_test_40_0262 = false;
const bool skip_test_40_0263 = false;
const bool skip_test_40_0264 = false;
const bool skip_test_40_0265 = false;
const bool skip_test_40_0266 = false;
const bool skip_test_40_0267 = false;
const bool skip_test_40_0268 = false;
const bool skip_test_40_0269 = false;
const bool skip_test_40_026A = false;
const bool skip_test_40_026B = false;
const bool skip_test_40_026C = false;
const bool skip_test_40_026D = false;
const bool skip_test_40_026E = false;
const bool skip_test_40_026F = false;
const bool skip_test_40_0270 = false;
const bool skip_test_40_0271 = false;
const bool skip_test_40_0272 = false;
const bool skip_test_40_0273 = false;
const bool skip_test_40_0274 = false;
const bool skip_test_40_0275 = false;
const bool skip_test_40_0276 = false;
const bool skip_test_40_0277 = false;
const bool skip_test_40_0278 = false;
const bool skip_test_40_0279 = false;
const bool skip_test_40_027A = false;
const bool skip_test_40_027B = false;
const bool skip_test_40_027C = false;
const bool skip_test_40_027D = false;
const bool skip_test_40_027E = false;
const bool skip_test_40_027F = false;
const bool skip_test_40_0280 = false;
const bool skip_test_40_0281 = false;
const bool skip_test_40_0282 = false;
const bool skip_test_40_0283 = false;
const bool skip_test_40_0284 = false;
const bool skip_test_40_0285 = false;
const bool skip_test_40_0286 = false;
const bool skip_test_40_0287 = false;
const bool skip_test_40_0288 = false;
const bool skip_test_40_0289 = false;
const bool skip_test_40_028A = false;
const bool skip_test_40_028B = false;
const bool skip_test_40_028C = false;
const bool skip_test_40_028D = false;
const bool skip_test_40_028E = false;
const bool skip_test_40_028F = false;
const bool skip_test_40_0290 = false;
const bool skip_test_40_0291 = false;
const bool skip_test_40_0292 = false;
const bool skip_test_40_0293 = false;
const bool skip_test_40_0294 = false;
const bool skip_test_40_0295 = false;
const bool skip_test_40_0296 = false;
const bool skip_test_40_0297 = false;
const bool skip_test_40_0298 = false;
const bool skip_test_40_0299 = false;
const bool skip_test_40_029A = false;
const bool skip_test_40_029B = false;
const bool skip_test_40_029C = false;
const bool skip_test_40_029D = false;
const bool skip_test_40_029E = false;
const bool skip_test_40_029F = false;
const bool skip_test_40_02A0 = false;
const bool skip_test_40_02A1 = false;
const bool skip_test_40_02A2 = false;
const bool skip_test_40_02A3 = false;
const bool skip_test_40_02A4 = false;
const bool skip_test_40_02A5 = false;
const bool skip_test_40_02A6 = false;
const bool skip_test_40_02A7 = false;
const bool skip_test_40_02A8 = false;
const bool skip_test_40_02A9 = false;
const bool skip_test_40_02AA = false;
const bool skip_test_40_02AB = false;
const bool skip_test_40_02AC = false;
const bool skip_test_40_02AD = false;
const bool skip_test_40_02AE = false;
const bool skip_test_40_02AF = false;
const bool skip_test_40_02B0 = false;
const bool skip_test_40_02B1 = false;
const bool skip_test_40_02B2 = false;
const bool skip_test_40_02B3 = false;
const bool skip_test_40_02B4 = false;
const bool skip_test_40_02B5 = false;
const bool skip_test_40_02B6 = false;
const bool skip_test_40_02B7 = false;
const bool skip_test_40_02B8 = false;
const bool skip_test_40_02B9 = false;
const bool skip_test_40_02BA = false;
const bool skip_test_40_02BB = false;
const bool skip_test_40_02BC = false;
const bool skip_test_40_02BD = false;
const bool skip_test_40_02BE = false;
const bool skip_test_40_02BF = false;
const bool skip_test_40_02C0 = false;
const bool skip_test_40_02C1 = false;
const bool skip_test_40_02C2 = false;
const bool skip_test_40_02C3 = false;
const bool skip_test_40_02C4 = false;
const bool skip_test_40_02C5 = false;
const bool skip_test_40_02C6 = false;
const bool skip_test_40_02C7 = false;
const bool skip_test_40_02C8 = false;
const bool skip_test_40_02C9 = false;
const bool skip_test_40_02CA = false;
const bool skip_test_40_02CB = false;
const bool skip_test_40_02CC = false;
const bool skip_test_40_02CD = false;
const bool skip_test_40_02CE = false;
const bool skip_test_40_02CF = true;
const bool skip_test_40_02D0 = false;
const bool skip_test_40_02D1 = false;
const bool skip_test_40_02D2 = false;
const bool skip_test_40_02D3 = false;
const bool skip_test_40_02D4 = false;
const bool skip_test_40_02D5 = false;
const bool skip_test_40_02D6 = false;
const bool skip_test_40_02D7 = false;
const bool skip_test_40_02D8 = false;
const bool skip_test_40_02D9 = false;
const bool skip_test_40_02DA = false;
const bool skip_test_40_02DB = false;
const bool skip_test_40_02DC = false;
const bool skip_test_40_02DD = false;
const bool skip_test_40_02DE = false;
const bool skip_test_40_02DF = false;
const bool skip_test_40_02E0 = false;
const bool skip_test_40_02E1 = false;
const bool skip_test_40_02E2 = false;
const bool skip_test_40_02E3 = false;
const bool skip_test_40_02E4 = false;
const bool skip_test_40_02E5 = false;
const bool skip_test_40_02E6 = false;
const bool skip_test_40_02E7 = false;
const bool skip_test_40_02E8 = false;
const bool skip_test_40_02E9 = false;
const bool skip_test_40_02EA = false;
const bool skip_test_40_02EB = false;
const bool skip_test_40_02EC = false;
const bool skip_test_40_02ED = false;
const bool skip_test_40_02EE = false;
const bool skip_test_40_02EF = false;
const bool skip_test_40_02F0 = false;
const bool skip_test_40_02F1 = false;
const bool skip_test_40_02F2 = false;
const bool skip_test_40_02F3 = false;
const bool skip_test_40_02F4 = false;
const bool skip_test_40_02F5 = false;
const bool skip_test_40_02F6 = false;
const bool skip_test_40_02F7 = false;
const bool skip_test_40_02F8 = false;
const bool skip_test_40_02F9 = false;
const bool skip_test_40_02FA = false;
const bool skip_test_40_02FB = false;
const bool skip_test_40_02FC = false;
const bool skip_test_40_02FD = false;
const bool skip_test_40_02FE = false;
const bool skip_test_40_02FF = false;
const bool skip_test_40_0300 = false;
const bool skip_test_40_0301 = false;
const bool skip_test_40_0302 = false;
const bool skip_test_40_0303 = false;
const bool skip_test_40_0304 = false;
const bool skip_test_40_0305 = false;
const bool skip_test_40_0306 = false;
const bool skip_test_40_0307 = false;
const bool skip_test_40_0308 = false;
const bool skip_test_40_0309 = false;
const bool skip_test_40_030A = false;
const bool skip_test_40_030B = false;
const bool skip_test_40_030C = false;
const bool skip_test_40_030D = false;
const bool skip_test_40_030E = false;
const bool skip_test_40_030F = false;
const bool skip_test_40_0310 = false;
const bool skip_test_40_0311 = false;
const bool skip_test_40_0312 = false;
const bool skip_test_40_0313 = false;
const bool skip_test_40_0314 = false;
const bool skip_test_40_0315 = false;
const bool skip_test_40_0316 = false;
const bool skip_test_40_0317 = false;
const bool skip_test_40_0318 = false;
const bool skip_test_40_0319 = false;
const bool skip_test_40_031A = false;
const bool skip_test_40_031B = false;
const bool skip_test_40_031C = false;
const bool skip_test_40_031D = false;
const bool skip_test_40_031E = false;
const bool skip_test_40_031F = false;
const bool skip_test_40_0320 = false;
const bool skip_test_40_0321 = false;
const bool skip_test_40_0322 = false;
const bool skip_test_40_0323 = false;
const bool skip_test_40_0324 = false;
const bool skip_test_40_0325 = false;
const bool skip_test_40_0326 = false;
const bool skip_test_40_0327 = false;
const bool skip_test_40_0328 = false;
const bool skip_test_40_0329 = false;
const bool skip_test_40_032A = false;
const bool skip_test_40_032B = false;
const bool skip_test_40_032C = false;
const bool skip_test_40_032D = false;
const bool skip_test_40_032E = false;
const bool skip_test_40_032F = false;
const bool skip_test_40_0330 = false;
const bool skip_test_40_0331 = false;
const bool skip_test_40_0332 = false;
const bool skip_test_40_0333 = false;
const bool skip_test_40_0334 = false;
const bool skip_test_40_0335 = false;
const bool skip_test_40_0336 = false;
const bool skip_test_40_0337 = false;
const bool skip_test_40_0338 = false;
const bool skip_test_40_0339 = false;
const bool skip_test_40_033A = false;
const bool skip_test_40_033B = false;
const bool skip_test_40_033C = false;
const bool skip_test_40_033D = false;
const bool skip_test_40_033E = false;
const bool skip_test_40_033F = false;
const bool skip_test_40_0340 = false;
const bool skip_test_40_0341 = false;
const bool skip_test_40_0342 = false;
const bool skip_test_40_0343 = false;
const bool skip_test_40_0344 = false;
const bool skip_test_40_0345 = false;
const bool skip_test_40_0346 = false;
const bool skip_test_40_0347 = false;
const bool skip_test_40_0348 = false;
const bool skip_test_40_0349 = true;
const bool skip_test_40_034A = false;
const bool skip_test_40_034B = false;
const bool skip_test_40_034C = false;
const bool skip_test_40_034D = false;
const bool skip_test_40_034E = false;
const bool skip_test_40_034F = false;
const bool skip_test_40_0350 = false;
const bool skip_test_40_0351 = false;
const bool skip_test_40_0352 = false;
const bool skip_test_40_0353 = false;
const bool skip_test_40_0354 = false;
const bool skip_test_40_0355 = false;
const bool skip_test_40_0356 = false;
const bool skip_test_40_0357 = false;
const bool skip_test_40_0358 = false;
const bool skip_test_40_0359 = false;
const bool skip_test_40_035A = false;
const bool skip_test_40_035B = false;
const bool skip_test_40_035C = false;
const bool skip_test_40_035D = false;
const bool skip_test_40_035E = false;
const bool skip_test_40_035F = false;
const bool skip_test_40_0360 = false;
const bool skip_test_40_0361 = false;
const bool skip_test_40_0362 = false;
const bool skip_test_40_0363 = false;
const bool skip_test_40_0364 = false;
const bool skip_test_40_0365 = false;
const bool skip_test_40_0366 = false;
const bool skip_test_40_0367 = false;
const bool skip_test_40_0368 = false;
const bool skip_test_40_0369 = false;
const bool skip_test_40_036A = false;
const bool skip_test_40_036B = false;
const bool skip_test_40_036C = false;
const bool skip_test_40_036D = false;
const bool skip_test_40_036E = false;
const bool skip_test_40_036F = false;
const bool skip_test_40_0370 = false;
const bool skip_test_40_0371 = false;
const bool skip_test_40_0372 = false;
const bool skip_test_40_0373 = false;
const bool skip_test_40_0374 = false;
const bool skip_test_40_0375 = false;
const bool skip_test_40_0376 = false;
const bool skip_test_40_0377 = false;
const bool skip_test_40_0378 = false;
const bool skip_test_40_0379 = false;
const bool skip_test_40_037A = false;
const bool skip_test_40_037B = false;
const bool skip_test_40_037C = false;
const bool skip_test_40_037D = false;
const bool skip_test_40_037E = false;
const bool skip_test_40_037F = false;
const bool skip_test_40_0380 = false;
const bool skip_test_40_0381 = false;
const bool skip_test_40_0382 = false;
const bool skip_test_40_0383 = false;
const bool skip_test_40_0384 = false;
const bool skip_test_40_0385 = false;
const bool skip_test_40_0386 = false;
const bool skip_test_40_0387 = false;
const bool skip_test_40_0388 = false;
const bool skip_test_40_0389 = false;
const bool skip_test_40_038A = false;
const bool skip_test_40_038B = false;
const bool skip_test_40_038C = false;
const bool skip_test_40_038D = false;
const bool skip_test_40_038E = false;
const bool skip_test_40_038F = false;
const bool skip_test_40_0390 = false;
const bool skip_test_40_0391 = false;
const bool skip_test_40_0392 = false;
const bool skip_test_40_0393 = false;
const bool skip_test_40_0394 = false;
const bool skip_test_40_0395 = false;
const bool skip_test_40_0396 = false;
const bool skip_test_40_0397 = false;
const bool skip_test_40_0398 = false;
const bool skip_test_40_0399 = false;
const bool skip_test_40_039A = false;
const bool skip_test_40_039B = false;
const bool skip_test_40_039C = false;
const bool skip_test_40_039D = false;
const bool skip_test_40_039E = false;
const bool skip_test_40_039F = false;
const bool skip_test_40_03A0 = false;
const bool skip_test_40_03A1 = false;
const bool skip_test_40_03A2 = false;
const bool skip_test_40_03A3 = false;
const bool skip_test_40_03A4 = false;
const bool skip_test_40_03A5 = false;
const bool skip_test_40_03A6 = false;
const bool skip_test_40_03A7 = false;
const bool skip_test_40_03A8 = false;
const bool skip_test_40_03A9 = false;
const bool skip_test_40_03AA = false;
const bool skip_test_40_03AB = false;
const bool skip_test_40_03AC = false;
const bool skip_test_40_03AD = false;
const bool skip_test_40_03AE = false;
const bool skip_test_40_03AF = false;
const bool skip_test_40_03B0 = false;
const bool skip_test_40_03B1 = false;
const bool skip_test_40_03B2 = false;
const bool skip_test_40_03B3 = false;
const bool skip_test_40_03B4 = false;
const bool skip_test_40_03B5 = false;
const bool skip_test_40_03B6 = false;
const bool skip_test_40_03B7 = false;
const bool skip_test_40_03B8 = false;
const bool skip_test_40_03B9 = false;
const bool skip_test_40_03BA = false;
const bool skip_test_40_03BB = false;
const bool skip_test_40_03BC = false;
const bool skip_test_40_03BD = false;
const bool skip_test_40_03BE = false;
const bool skip_test_40_03BF = false;
const bool skip_test_40_03C0 = false;
const bool skip_test_40_03C1 = false;
const bool skip_test_40_03C2 = false;
const bool skip_test_40_03C3 = false;
const bool skip_test_40_03C4 = false;
const bool skip_test_40_03C5 = false;
const bool skip_test_40_03C6 = false;
const bool skip_test_40_03C7 = false;
const bool skip_test_40_03C8 = false;
const bool skip_test_40_03C9 = false;
const bool skip_test_40_03CA = false;
const bool skip_test_40_03CB = false;
const bool skip_test_40_03CC = false;
const bool skip_test_40_03CD = false;
const bool skip_test_40_03CE = false;
const bool skip_test_40_03CF = false;
const bool skip_test_40_03D0 = false;
const bool skip_test_40_03D1 = false;
const bool skip_test_40_03D2 = false;
const bool skip_test_40_03D3 = false;
const bool skip_test_40_03D4 = false;
const bool skip_test_40_03D5 = false;
const bool skip_test_40_03D6 = false;
const bool skip_test_40_03D7 = false;
const bool skip_test_40_03D8 = false;
const bool skip_test_40_03D9 = false;
const bool skip_test_40_03DA = false;
const bool skip_test_40_03DB = false;
const bool skip_test_40_03DC = false;
const bool skip_test_40_03DD = false;
const bool skip_test_40_03DE = false;
const bool skip_test_40_03DF = false;
const bool skip_test_40_03E0 = false;
const bool skip_test_40_03E1 = false;
const bool skip_test_40_03E2 = false;
const bool skip_test_40_03E3 = false;
const bool skip_test_40_03E4 = false;
const bool skip_test_40_03E5 = false;
const bool skip_test_40_03E6 = false;
const bool skip_test_40_03E7 = false;
void test_40_0000(void);
void test_40_0001(void);
void test_40_0002(void);
void test_40_0003(void);
void test_40_0004(void);
void test_40_0005(void);
void test_40_0006(void);
void test_40_0007(void);
void test_40_0008(void);
void test_40_0009(void);
void test_40_000A(void);
void test_40_000B(void);
void test_40_000C(void);
void test_40_000D(void);
void test_40_000E(void);
void test_40_000F(void);
void test_40_0010(void);
void test_40_0011(void);
void test_40_0012(void);
void test_40_0013(void);
void test_40_0014(void);
void test_40_0015(void);
void test_40_0016(void);
void test_40_0017(void);
void test_40_0018(void);
void test_40_0019(void);
void test_40_001A(void);
void test_40_001B(void);
void test_40_001C(void);
void test_40_001D(void);
void test_40_001E(void);
void test_40_001F(void);
void test_40_0020(void);
void test_40_0021(void);
void test_40_0022(void);
void test_40_0023(void);
void test_40_0024(void);
void test_40_0025(void);
void test_40_0026(void);
void test_40_0027(void);
void test_40_0028(void);
void test_40_0029(void);
void test_40_002A(void);
void test_40_002B(void);
void test_40_002C(void);
void test_40_002D(void);
void test_40_002E(void);
void test_40_002F(void);
void test_40_0030(void);
void test_40_0031(void);
void test_40_0032(void);
void test_40_0033(void);
void test_40_0034(void);
void test_40_0035(void);
void test_40_0036(void);
void test_40_0037(void);
void test_40_0038(void);
void test_40_0039(void);
void test_40_003A(void);
void test_40_003B(void);
void test_40_003C(void);
void test_40_003D(void);
void test_40_003E(void);
void test_40_003F(void);
void test_40_0040(void);
void test_40_0041(void);
void test_40_0042(void);
void test_40_0043(void);
void test_40_0044(void);
void test_40_0045(void);
void test_40_0046(void);
void test_40_0047(void);
void test_40_0048(void);
void test_40_0049(void);
void test_40_004A(void);
void test_40_004B(void);
void test_40_004C(void);
void test_40_004D(void);
void test_40_004E(void);
void test_40_004F(void);
void test_40_0050(void);
void test_40_0051(void);
void test_40_0052(void);
void test_40_0053(void);
void test_40_0054(void);
void test_40_0055(void);
void test_40_0056(void);
void test_40_0057(void);
void test_40_0058(void);
void test_40_0059(void);
void test_40_005A(void);
void test_40_005B(void);
void test_40_005C(void);
void test_40_005D(void);
void test_40_005E(void);
void test_40_005F(void);
void test_40_0060(void);
void test_40_0061(void);
void test_40_0062(void);
void test_40_0063(void);
void test_40_0064(void);
void test_40_0065(void);
void test_40_0066(void);
void test_40_0067(void);
void test_40_0068(void);
void test_40_0069(void);
void test_40_006A(void);
void test_40_006B(void);
void test_40_006C(void);
void test_40_006D(void);
void test_40_006E(void);
void test_40_006F(void);
void test_40_0070(void);
void test_40_0071(void);
void test_40_0072(void);
void test_40_0073(void);
void test_40_0074(void);
void test_40_0075(void);
void test_40_0076(void);
void test_40_0077(void);
void test_40_0078(void);
void test_40_0079(void);
void test_40_007A(void);
void test_40_007B(void);
void test_40_007C(void);
void test_40_007D(void);
void test_40_007E(void);
void test_40_007F(void);
void test_40_0080(void);
void test_40_0081(void);
void test_40_0082(void);
void test_40_0083(void);
void test_40_0084(void);
void test_40_0085(void);
void test_40_0086(void);
void test_40_0087(void);
void test_40_0088(void);
void test_40_0089(void);
void test_40_008A(void);
void test_40_008B(void);
void test_40_008C(void);
void test_40_008D(void);
void test_40_008E(void);
void test_40_008F(void);
void test_40_0090(void);
void test_40_0091(void);
void test_40_0092(void);
void test_40_0093(void);
void test_40_0094(void);
void test_40_0095(void);
void test_40_0096(void);
void test_40_0097(void);
void test_40_0098(void);
void test_40_0099(void);
void test_40_009A(void);
void test_40_009B(void);
void test_40_009C(void);
void test_40_009D(void);
void test_40_009E(void);
void test_40_009F(void);
void test_40_00A0(void);
void test_40_00A1(void);
void test_40_00A2(void);
void test_40_00A3(void);
void test_40_00A4(void);
void test_40_00A5(void);
void test_40_00A6(void);
void test_40_00A7(void);
void test_40_00A8(void);
void test_40_00A9(void);
void test_40_00AA(void);
void test_40_00AB(void);
void test_40_00AC(void);
void test_40_00AD(void);
void test_40_00AE(void);
void test_40_00AF(void);
void test_40_00B0(void);
void test_40_00B1(void);
void test_40_00B2(void);
void test_40_00B3(void);
void test_40_00B4(void);
void test_40_00B5(void);
void test_40_00B6(void);
void test_40_00B7(void);
void test_40_00B8(void);
void test_40_00B9(void);
void test_40_00BA(void);
void test_40_00BB(void);
void test_40_00BC(void);
void test_40_00BD(void);
void test_40_00BE(void);
void test_40_00BF(void);
void test_40_00C0(void);
void test_40_00C1(void);
void test_40_00C2(void);
void test_40_00C3(void);
void test_40_00C4(void);
void test_40_00C5(void);
void test_40_00C6(void);
void test_40_00C7(void);
void test_40_00C8(void);
void test_40_00C9(void);
void test_40_00CA(void);
void test_40_00CB(void);
void test_40_00CC(void);
void test_40_00CD(void);
void test_40_00CE(void);
void test_40_00CF(void);
void test_40_00D0(void);
void test_40_00D1(void);
void test_40_00D2(void);
void test_40_00D3(void);
void test_40_00D4(void);
void test_40_00D5(void);
void test_40_00D6(void);
void test_40_00D7(void);
void test_40_00D8(void);
void test_40_00D9(void);
void test_40_00DA(void);
void test_40_00DB(void);
void test_40_00DC(void);
void test_40_00DD(void);
void test_40_00DE(void);
void test_40_00DF(void);
void test_40_00E0(void);
void test_40_00E1(void);
void test_40_00E2(void);
void test_40_00E3(void);
void test_40_00E4(void);
void test_40_00E5(void);
void test_40_00E6(void);
void test_40_00E7(void);
void test_40_00E8(void);
void test_40_00E9(void);
void test_40_00EA(void);
void test_40_00EB(void);
void test_40_00EC(void);
void test_40_00ED(void);
void test_40_00EE(void);
void test_40_00EF(void);
void test_40_00F0(void);
void test_40_00F1(void);
void test_40_00F2(void);
void test_40_00F3(void);
void test_40_00F4(void);
void test_40_00F5(void);
void test_40_00F6(void);
void test_40_00F7(void);
void test_40_00F8(void);
void test_40_00F9(void);
void test_40_00FA(void);
void test_40_00FB(void);
void test_40_00FC(void);
void test_40_00FD(void);
void test_40_00FE(void);
void test_40_00FF(void);
void test_40_0100(void);
void test_40_0101(void);
void test_40_0102(void);
void test_40_0103(void);
void test_40_0104(void);
void test_40_0105(void);
void test_40_0106(void);
void test_40_0107(void);
void test_40_0108(void);
void test_40_0109(void);
void test_40_010A(void);
void test_40_010B(void);
void test_40_010C(void);
void test_40_010D(void);
void test_40_010E(void);
void test_40_010F(void);
void test_40_0110(void);
void test_40_0111(void);
void test_40_0112(void);
void test_40_0113(void);
void test_40_0114(void);
void test_40_0115(void);
void test_40_0116(void);
void test_40_0117(void);
void test_40_0118(void);
void test_40_0119(void);
void test_40_011A(void);
void test_40_011B(void);
void test_40_011C(void);
void test_40_011D(void);
void test_40_011E(void);
void test_40_011F(void);
void test_40_0120(void);
void test_40_0121(void);
void test_40_0122(void);
void test_40_0123(void);
void test_40_0124(void);
void test_40_0125(void);
void test_40_0126(void);
void test_40_0127(void);
void test_40_0128(void);
void test_40_0129(void);
void test_40_012A(void);
void test_40_012B(void);
void test_40_012C(void);
void test_40_012D(void);
void test_40_012E(void);
void test_40_012F(void);
void test_40_0130(void);
void test_40_0131(void);
void test_40_0132(void);
void test_40_0133(void);
void test_40_0134(void);
void test_40_0135(void);
void test_40_0136(void);
void test_40_0137(void);
void test_40_0138(void);
void test_40_0139(void);
void test_40_013A(void);
void test_40_013B(void);
void test_40_013C(void);
void test_40_013D(void);
void test_40_013E(void);
void test_40_013F(void);
void test_40_0140(void);
void test_40_0141(void);
void test_40_0142(void);
void test_40_0143(void);
void test_40_0144(void);
void test_40_0145(void);
void test_40_0146(void);
void test_40_0147(void);
void test_40_0148(void);
void test_40_0149(void);
void test_40_014A(void);
void test_40_014B(void);
void test_40_014C(void);
void test_40_014D(void);
void test_40_014E(void);
void test_40_014F(void);
void test_40_0150(void);
void test_40_0151(void);
void test_40_0152(void);
void test_40_0153(void);
void test_40_0154(void);
void test_40_0155(void);
void test_40_0156(void);
void test_40_0157(void);
void test_40_0158(void);
void test_40_0159(void);
void test_40_015A(void);
void test_40_015B(void);
void test_40_015C(void);
void test_40_015D(void);
void test_40_015E(void);
void test_40_015F(void);
void test_40_0160(void);
void test_40_0161(void);
void test_40_0162(void);
void test_40_0163(void);
void test_40_0164(void);
void test_40_0165(void);
void test_40_0166(void);
void test_40_0167(void);
void test_40_0168(void);
void test_40_0169(void);
void test_40_016A(void);
void test_40_016B(void);
void test_40_016C(void);
void test_40_016D(void);
void test_40_016E(void);
void test_40_016F(void);
void test_40_0170(void);
void test_40_0171(void);
void test_40_0172(void);
void test_40_0173(void);
void test_40_0174(void);
void test_40_0175(void);
void test_40_0176(void);
void test_40_0177(void);
void test_40_0178(void);
void test_40_0179(void);
void test_40_017A(void);
void test_40_017B(void);
void test_40_017C(void);
void test_40_017D(void);
void test_40_017E(void);
void test_40_017F(void);
void test_40_0180(void);
void test_40_0181(void);
void test_40_0182(void);
void test_40_0183(void);
void test_40_0184(void);
void test_40_0185(void);
void test_40_0186(void);
void test_40_0187(void);
void test_40_0188(void);
void test_40_0189(void);
void test_40_018A(void);
void test_40_018B(void);
void test_40_018C(void);
void test_40_018D(void);
void test_40_018E(void);
void test_40_018F(void);
void test_40_0190(void);
void test_40_0191(void);
void test_40_0192(void);
void test_40_0193(void);
void test_40_0194(void);
void test_40_0195(void);
void test_40_0196(void);
void test_40_0197(void);
void test_40_0198(void);
void test_40_0199(void);
void test_40_019A(void);
void test_40_019B(void);
void test_40_019C(void);
void test_40_019D(void);
void test_40_019E(void);
void test_40_019F(void);
void test_40_01A0(void);
void test_40_01A1(void);
void test_40_01A2(void);
void test_40_01A3(void);
void test_40_01A4(void);
void test_40_01A5(void);
void test_40_01A6(void);
void test_40_01A7(void);
void test_40_01A8(void);
void test_40_01A9(void);
void test_40_01AA(void);
void test_40_01AB(void);
void test_40_01AC(void);
void test_40_01AD(void);
void test_40_01AE(void);
void test_40_01AF(void);
void test_40_01B0(void);
void test_40_01B1(void);
void test_40_01B2(void);
void test_40_01B3(void);
void test_40_01B4(void);
void test_40_01B5(void);
void test_40_01B6(void);
void test_40_01B7(void);
void test_40_01B8(void);
void test_40_01B9(void);
void test_40_01BA(void);
void test_40_01BB(void);
void test_40_01BC(void);
void test_40_01BD(void);
void test_40_01BE(void);
void test_40_01BF(void);
void test_40_01C0(void);
void test_40_01C1(void);
void test_40_01C2(void);
void test_40_01C3(void);
void test_40_01C4(void);
void test_40_01C5(void);
void test_40_01C6(void);
void test_40_01C7(void);
void test_40_01C8(void);
void test_40_01C9(void);
void test_40_01CA(void);
void test_40_01CB(void);
void test_40_01CC(void);
void test_40_01CD(void);
void test_40_01CE(void);
void test_40_01CF(void);
void test_40_01D0(void);
void test_40_01D1(void);
void test_40_01D2(void);
void test_40_01D3(void);
void test_40_01D4(void);
void test_40_01D5(void);
void test_40_01D6(void);
void test_40_01D7(void);
void test_40_01D8(void);
void test_40_01D9(void);
void test_40_01DA(void);
void test_40_01DB(void);
void test_40_01DC(void);
void test_40_01DD(void);
void test_40_01DE(void);
void test_40_01DF(void);
void test_40_01E0(void);
void test_40_01E1(void);
void test_40_01E2(void);
void test_40_01E3(void);
void test_40_01E4(void);
void test_40_01E5(void);
void test_40_01E6(void);
void test_40_01E7(void);
void test_40_01E8(void);
void test_40_01E9(void);
void test_40_01EA(void);
void test_40_01EB(void);
void test_40_01EC(void);
void test_40_01ED(void);
void test_40_01EE(void);
void test_40_01EF(void);
void test_40_01F0(void);
void test_40_01F1(void);
void test_40_01F2(void);
void test_40_01F3(void);
void test_40_01F4(void);
void test_40_01F5(void);
void test_40_01F6(void);
void test_40_01F7(void);
void test_40_01F8(void);
void test_40_01F9(void);
void test_40_01FA(void);
void test_40_01FB(void);
void test_40_01FC(void);
void test_40_01FD(void);
void test_40_01FE(void);
void test_40_01FF(void);
void test_40_0200(void);
void test_40_0201(void);
void test_40_0202(void);
void test_40_0203(void);
void test_40_0204(void);
void test_40_0205(void);
void test_40_0206(void);
void test_40_0207(void);
void test_40_0208(void);
void test_40_0209(void);
void test_40_020A(void);
void test_40_020B(void);
void test_40_020C(void);
void test_40_020D(void);
void test_40_020E(void);
void test_40_020F(void);
void test_40_0210(void);
void test_40_0211(void);
void test_40_0212(void);
void test_40_0213(void);
void test_40_0214(void);
void test_40_0215(void);
void test_40_0216(void);
void test_40_0217(void);
void test_40_0218(void);
void test_40_0219(void);
void test_40_021A(void);
void test_40_021B(void);
void test_40_021C(void);
void test_40_021D(void);
void test_40_021E(void);
void test_40_021F(void);
void test_40_0220(void);
void test_40_0221(void);
void test_40_0222(void);
void test_40_0223(void);
void test_40_0224(void);
void test_40_0225(void);
void test_40_0226(void);
void test_40_0227(void);
void test_40_0228(void);
void test_40_0229(void);
void test_40_022A(void);
void test_40_022B(void);
void test_40_022C(void);
void test_40_022D(void);
void test_40_022E(void);
void test_40_022F(void);
void test_40_0230(void);
void test_40_0231(void);
void test_40_0232(void);
void test_40_0233(void);
void test_40_0234(void);
void test_40_0235(void);
void test_40_0236(void);
void test_40_0237(void);
void test_40_0238(void);
void test_40_0239(void);
void test_40_023A(void);
void test_40_023B(void);
void test_40_023C(void);
void test_40_023D(void);
void test_40_023E(void);
void test_40_023F(void);
void test_40_0240(void);
void test_40_0241(void);
void test_40_0242(void);
void test_40_0243(void);
void test_40_0244(void);
void test_40_0245(void);
void test_40_0246(void);
void test_40_0247(void);
void test_40_0248(void);
void test_40_0249(void);
void test_40_024A(void);
void test_40_024B(void);
void test_40_024C(void);
void test_40_024D(void);
void test_40_024E(void);
void test_40_024F(void);
void test_40_0250(void);
void test_40_0251(void);
void test_40_0252(void);
void test_40_0253(void);
void test_40_0254(void);
void test_40_0255(void);
void test_40_0256(void);
void test_40_0257(void);
void test_40_0258(void);
void test_40_0259(void);
void test_40_025A(void);
void test_40_025B(void);
void test_40_025C(void);
void test_40_025D(void);
void test_40_025E(void);
void test_40_025F(void);
void test_40_0260(void);
void test_40_0261(void);
void test_40_0262(void);
void test_40_0263(void);
void test_40_0264(void);
void test_40_0265(void);
void test_40_0266(void);
void test_40_0267(void);
void test_40_0268(void);
void test_40_0269(void);
void test_40_026A(void);
void test_40_026B(void);
void test_40_026C(void);
void test_40_026D(void);
void test_40_026E(void);
void test_40_026F(void);
void test_40_0270(void);
void test_40_0271(void);
void test_40_0272(void);
void test_40_0273(void);
void test_40_0274(void);
void test_40_0275(void);
void test_40_0276(void);
void test_40_0277(void);
void test_40_0278(void);
void test_40_0279(void);
void test_40_027A(void);
void test_40_027B(void);
void test_40_027C(void);
void test_40_027D(void);
void test_40_027E(void);
void test_40_027F(void);
void test_40_0280(void);
void test_40_0281(void);
void test_40_0282(void);
void test_40_0283(void);
void test_40_0284(void);
void test_40_0285(void);
void test_40_0286(void);
void test_40_0287(void);
void test_40_0288(void);
void test_40_0289(void);
void test_40_028A(void);
void test_40_028B(void);
void test_40_028C(void);
void test_40_028D(void);
void test_40_028E(void);
void test_40_028F(void);
void test_40_0290(void);
void test_40_0291(void);
void test_40_0292(void);
void test_40_0293(void);
void test_40_0294(void);
void test_40_0295(void);
void test_40_0296(void);
void test_40_0297(void);
void test_40_0298(void);
void test_40_0299(void);
void test_40_029A(void);
void test_40_029B(void);
void test_40_029C(void);
void test_40_029D(void);
void test_40_029E(void);
void test_40_029F(void);
void test_40_02A0(void);
void test_40_02A1(void);
void test_40_02A2(void);
void test_40_02A3(void);
void test_40_02A4(void);
void test_40_02A5(void);
void test_40_02A6(void);
void test_40_02A7(void);
void test_40_02A8(void);
void test_40_02A9(void);
void test_40_02AA(void);
void test_40_02AB(void);
void test_40_02AC(void);
void test_40_02AD(void);
void test_40_02AE(void);
void test_40_02AF(void);
void test_40_02B0(void);
void test_40_02B1(void);
void test_40_02B2(void);
void test_40_02B3(void);
void test_40_02B4(void);
void test_40_02B5(void);
void test_40_02B6(void);
void test_40_02B7(void);
void test_40_02B8(void);
void test_40_02B9(void);
void test_40_02BA(void);
void test_40_02BB(void);
void test_40_02BC(void);
void test_40_02BD(void);
void test_40_02BE(void);
void test_40_02BF(void);
void test_40_02C0(void);
void test_40_02C1(void);
void test_40_02C2(void);
void test_40_02C3(void);
void test_40_02C4(void);
void test_40_02C5(void);
void test_40_02C6(void);
void test_40_02C7(void);
void test_40_02C8(void);
void test_40_02C9(void);
void test_40_02CA(void);
void test_40_02CB(void);
void test_40_02CC(void);
void test_40_02CD(void);
void test_40_02CE(void);
void test_40_02CF(void);
void test_40_02D0(void);
void test_40_02D1(void);
void test_40_02D2(void);
void test_40_02D3(void);
void test_40_02D4(void);
void test_40_02D5(void);
void test_40_02D6(void);
void test_40_02D7(void);
void test_40_02D8(void);
void test_40_02D9(void);
void test_40_02DA(void);
void test_40_02DB(void);
void test_40_02DC(void);
void test_40_02DD(void);
void test_40_02DE(void);
void test_40_02DF(void);
void test_40_02E0(void);
void test_40_02E1(void);
void test_40_02E2(void);
void test_40_02E3(void);
void test_40_02E4(void);
void test_40_02E5(void);
void test_40_02E6(void);
void test_40_02E7(void);
void test_40_02E8(void);
void test_40_02E9(void);
void test_40_02EA(void);
void test_40_02EB(void);
void test_40_02EC(void);
void test_40_02ED(void);
void test_40_02EE(void);
void test_40_02EF(void);
void test_40_02F0(void);
void test_40_02F1(void);
void test_40_02F2(void);
void test_40_02F3(void);
void test_40_02F4(void);
void test_40_02F5(void);
void test_40_02F6(void);
void test_40_02F7(void);
void test_40_02F8(void);
void test_40_02F9(void);
void test_40_02FA(void);
void test_40_02FB(void);
void test_40_02FC(void);
void test_40_02FD(void);
void test_40_02FE(void);
void test_40_02FF(void);
void test_40_0300(void);
void test_40_0301(void);
void test_40_0302(void);
void test_40_0303(void);
void test_40_0304(void);
void test_40_0305(void);
void test_40_0306(void);
void test_40_0307(void);
void test_40_0308(void);
void test_40_0309(void);
void test_40_030A(void);
void test_40_030B(void);
void test_40_030C(void);
void test_40_030D(void);
void test_40_030E(void);
void test_40_030F(void);
void test_40_0310(void);
void test_40_0311(void);
void test_40_0312(void);
void test_40_0313(void);
void test_40_0314(void);
void test_40_0315(void);
void test_40_0316(void);
void test_40_0317(void);
void test_40_0318(void);
void test_40_0319(void);
void test_40_031A(void);
void test_40_031B(void);
void test_40_031C(void);
void test_40_031D(void);
void test_40_031E(void);
void test_40_031F(void);
void test_40_0320(void);
void test_40_0321(void);
void test_40_0322(void);
void test_40_0323(void);
void test_40_0324(void);
void test_40_0325(void);
void test_40_0326(void);
void test_40_0327(void);
void test_40_0328(void);
void test_40_0329(void);
void test_40_032A(void);
void test_40_032B(void);
void test_40_032C(void);
void test_40_032D(void);
void test_40_032E(void);
void test_40_032F(void);
void test_40_0330(void);
void test_40_0331(void);
void test_40_0332(void);
void test_40_0333(void);
void test_40_0334(void);
void test_40_0335(void);
void test_40_0336(void);
void test_40_0337(void);
void test_40_0338(void);
void test_40_0339(void);
void test_40_033A(void);
void test_40_033B(void);
void test_40_033C(void);
void test_40_033D(void);
void test_40_033E(void);
void test_40_033F(void);
void test_40_0340(void);
void test_40_0341(void);
void test_40_0342(void);
void test_40_0343(void);
void test_40_0344(void);
void test_40_0345(void);
void test_40_0346(void);
void test_40_0347(void);
void test_40_0348(void);
void test_40_0349(void);
void test_40_034A(void);
void test_40_034B(void);
void test_40_034C(void);
void test_40_034D(void);
void test_40_034E(void);
void test_40_034F(void);
void test_40_0350(void);
void test_40_0351(void);
void test_40_0352(void);
void test_40_0353(void);
void test_40_0354(void);
void test_40_0355(void);
void test_40_0356(void);
void test_40_0357(void);
void test_40_0358(void);
void test_40_0359(void);
void test_40_035A(void);
void test_40_035B(void);
void test_40_035C(void);
void test_40_035D(void);
void test_40_035E(void);
void test_40_035F(void);
void test_40_0360(void);
void test_40_0361(void);
void test_40_0362(void);
void test_40_0363(void);
void test_40_0364(void);
void test_40_0365(void);
void test_40_0366(void);
void test_40_0367(void);
void test_40_0368(void);
void test_40_0369(void);
void test_40_036A(void);
void test_40_036B(void);
void test_40_036C(void);
void test_40_036D(void);
void test_40_036E(void);
void test_40_036F(void);
void test_40_0370(void);
void test_40_0371(void);
void test_40_0372(void);
void test_40_0373(void);
void test_40_0374(void);
void test_40_0375(void);
void test_40_0376(void);
void test_40_0377(void);
void test_40_0378(void);
void test_40_0379(void);
void test_40_037A(void);
void test_40_037B(void);
void test_40_037C(void);
void test_40_037D(void);
void test_40_037E(void);
void test_40_037F(void);
void test_40_0380(void);
void test_40_0381(void);
void test_40_0382(void);
void test_40_0383(void);
void test_40_0384(void);
void test_40_0385(void);
void test_40_0386(void);
void test_40_0387(void);
void test_40_0388(void);
void test_40_0389(void);
void test_40_038A(void);
void test_40_038B(void);
void test_40_038C(void);
void test_40_038D(void);
void test_40_038E(void);
void test_40_038F(void);
void test_40_0390(void);
void test_40_0391(void);
void test_40_0392(void);
void test_40_0393(void);
void test_40_0394(void);
void test_40_0395(void);
void test_40_0396(void);
void test_40_0397(void);
void test_40_0398(void);
void test_40_0399(void);
void test_40_039A(void);
void test_40_039B(void);
void test_40_039C(void);
void test_40_039D(void);
void test_40_039E(void);
void test_40_039F(void);
void test_40_03A0(void);
void test_40_03A1(void);
void test_40_03A2(void);
void test_40_03A3(void);
void test_40_03A4(void);
void test_40_03A5(void);
void test_40_03A6(void);
void test_40_03A7(void);
void test_40_03A8(void);
void test_40_03A9(void);
void test_40_03AA(void);
void test_40_03AB(void);
void test_40_03AC(void);
void test_40_03AD(void);
void test_40_03AE(void);
void test_40_03AF(void);
void test_40_03B0(void);
void test_40_03B1(void);
void test_40_03B2(void);
void test_40_03B3(void);
void test_40_03B4(void);
void test_40_03B5(void);
void test_40_03B6(void);
void test_40_03B7(void);
void test_40_03B8(void);
void test_40_03B9(void);
void test_40_03BA(void);
void test_40_03BB(void);
void test_40_03BC(void);
void test_40_03BD(void);
void test_40_03BE(void);
void test_40_03BF(void);
void test_40_03C0(void);
void test_40_03C1(void);
void test_40_03C2(void);
void test_40_03C3(void);
void test_40_03C4(void);
void test_40_03C5(void);
void test_40_03C6(void);
void test_40_03C7(void);
void test_40_03C8(void);
void test_40_03C9(void);
void test_40_03CA(void);
void test_40_03CB(void);
void test_40_03CC(void);
void test_40_03CD(void);
void test_40_03CE(void);
void test_40_03CF(void);
void test_40_03D0(void);
void test_40_03D1(void);
void test_40_03D2(void);
void test_40_03D3(void);
void test_40_03D4(void);
void test_40_03D5(void);
void test_40_03D6(void);
void test_40_03D7(void);
void test_40_03D8(void);
void test_40_03D9(void);
void test_40_03DA(void);
void test_40_03DB(void);
void test_40_03DC(void);
void test_40_03DD(void);
void test_40_03DE(void);
void test_40_03DF(void);
void test_40_03E0(void);
void test_40_03E1(void);
void test_40_03E2(void);
void test_40_03E3(void);
void test_40_03E4(void);
void test_40_03E5(void);
void test_40_03E6(void);
void test_40_03E7(void);
TEST_LIST = {
    { "40_0000", test_40_0000 },
    { "40_0001", test_40_0001 },
    { "40_0002", test_40_0002 },
    { "40_0003", test_40_0003 },
    { "40_0004", test_40_0004 },
    { "40_0005", test_40_0005 },
    { "40_0006", test_40_0006 },
    { "40_0007", test_40_0007 },
    { "40_0008", test_40_0008 },
    { "40_0009", test_40_0009 },
    { "40_000A", test_40_000A },
    { "40_000B", test_40_000B },
    { "40_000C", test_40_000C },
    { "40_000D", test_40_000D },
    { "40_000E", test_40_000E },
    { "40_000F", test_40_000F },
    { "40_0010", test_40_0010 },
    { "40_0011", test_40_0011 },
    { "40_0012", test_40_0012 },
    { "40_0013", test_40_0013 },
    { "40_0014", test_40_0014 },
    { "40_0015", test_40_0015 },
    { "40_0016", test_40_0016 },
    { "40_0017", test_40_0017 },
    { "40_0018", test_40_0018 },
    { "40_0019", test_40_0019 },
    { "40_001A", test_40_001A },
    { "40_001B", test_40_001B },
    { "40_001C", test_40_001C },
    { "40_001D", test_40_001D },
    { "40_001E", test_40_001E },
    { "40_001F", test_40_001F },
    { "40_0020", test_40_0020 },
    { "40_0021", test_40_0021 },
    { "40_0022", test_40_0022 },
    { "40_0023", test_40_0023 },
    { "40_0024", test_40_0024 },
    { "40_0025", test_40_0025 },
    { "40_0026", test_40_0026 },
    { "40_0027", test_40_0027 },
    { "40_0028", test_40_0028 },
    { "40_0029", test_40_0029 },
    { "40_002A", test_40_002A },
    { "40_002B", test_40_002B },
    { "40_002C", test_40_002C },
    { "40_002D", test_40_002D },
    { "40_002E", test_40_002E },
    { "40_002F", test_40_002F },
    { "40_0030", test_40_0030 },
    { "40_0031", test_40_0031 },
    { "40_0032", test_40_0032 },
    { "40_0033", test_40_0033 },
    { "40_0034", test_40_0034 },
    { "40_0035", test_40_0035 },
    { "40_0036", test_40_0036 },
    { "40_0037", test_40_0037 },
    { "40_0038", test_40_0038 },
    { "40_0039", test_40_0039 },
    { "40_003A", test_40_003A },
    { "40_003B", test_40_003B },
    { "40_003C", test_40_003C },
    { "40_003D", test_40_003D },
    { "40_003E", test_40_003E },
    { "40_003F", test_40_003F },
    { "40_0040", test_40_0040 },
    { "40_0041", test_40_0041 },
    { "40_0042", test_40_0042 },
    { "40_0043", test_40_0043 },
    { "40_0044", test_40_0044 },
    { "40_0045", test_40_0045 },
    { "40_0046", test_40_0046 },
    { "40_0047", test_40_0047 },
    { "40_0048", test_40_0048 },
    { "40_0049", test_40_0049 },
    { "40_004A", test_40_004A },
    { "40_004B", test_40_004B },
    { "40_004C", test_40_004C },
    { "40_004D", test_40_004D },
    { "40_004E", test_40_004E },
    { "40_004F", test_40_004F },
    { "40_0050", test_40_0050 },
    { "40_0051", test_40_0051 },
    { "40_0052", test_40_0052 },
    { "40_0053", test_40_0053 },
    { "40_0054", test_40_0054 },
    { "40_0055", test_40_0055 },
    { "40_0056", test_40_0056 },
    { "40_0057", test_40_0057 },
    { "40_0058", test_40_0058 },
    { "40_0059", test_40_0059 },
    { "40_005A", test_40_005A },
    { "40_005B", test_40_005B },
    { "40_005C", test_40_005C },
    { "40_005D", test_40_005D },
    { "40_005E", test_40_005E },
    { "40_005F", test_40_005F },
    { "40_0060", test_40_0060 },
    { "40_0061", test_40_0061 },
    { "40_0062", test_40_0062 },
    { "40_0063", test_40_0063 },
    { "40_0064", test_40_0064 },
    { "40_0065", test_40_0065 },
    { "40_0066", test_40_0066 },
    { "40_0067", test_40_0067 },
    { "40_0068", test_40_0068 },
    { "40_0069", test_40_0069 },
    { "40_006A", test_40_006A },
    { "40_006B", test_40_006B },
    { "40_006C", test_40_006C },
    { "40_006D", test_40_006D },
    { "40_006E", test_40_006E },
    { "40_006F", test_40_006F },
    { "40_0070", test_40_0070 },
    { "40_0071", test_40_0071 },
    { "40_0072", test_40_0072 },
    { "40_0073", test_40_0073 },
    { "40_0074", test_40_0074 },
    { "40_0075", test_40_0075 },
    { "40_0076", test_40_0076 },
    { "40_0077", test_40_0077 },
    { "40_0078", test_40_0078 },
    { "40_0079", test_40_0079 },
    { "40_007A", test_40_007A },
    { "40_007B", test_40_007B },
    { "40_007C", test_40_007C },
    { "40_007D", test_40_007D },
    { "40_007E", test_40_007E },
    { "40_007F", test_40_007F },
    { "40_0080", test_40_0080 },
    { "40_0081", test_40_0081 },
    { "40_0082", test_40_0082 },
    { "40_0083", test_40_0083 },
    { "40_0084", test_40_0084 },
    { "40_0085", test_40_0085 },
    { "40_0086", test_40_0086 },
    { "40_0087", test_40_0087 },
    { "40_0088", test_40_0088 },
    { "40_0089", test_40_0089 },
    { "40_008A", test_40_008A },
    { "40_008B", test_40_008B },
    { "40_008C", test_40_008C },
    { "40_008D", test_40_008D },
    { "40_008E", test_40_008E },
    { "40_008F", test_40_008F },
    { "40_0090", test_40_0090 },
    { "40_0091", test_40_0091 },
    { "40_0092", test_40_0092 },
    { "40_0093", test_40_0093 },
    { "40_0094", test_40_0094 },
    { "40_0095", test_40_0095 },
    { "40_0096", test_40_0096 },
    { "40_0097", test_40_0097 },
    { "40_0098", test_40_0098 },
    { "40_0099", test_40_0099 },
    { "40_009A", test_40_009A },
    { "40_009B", test_40_009B },
    { "40_009C", test_40_009C },
    { "40_009D", test_40_009D },
    { "40_009E", test_40_009E },
    { "40_009F", test_40_009F },
    { "40_00A0", test_40_00A0 },
    { "40_00A1", test_40_00A1 },
    { "40_00A2", test_40_00A2 },
    { "40_00A3", test_40_00A3 },
    { "40_00A4", test_40_00A4 },
    { "40_00A5", test_40_00A5 },
    { "40_00A6", test_40_00A6 },
    { "40_00A7", test_40_00A7 },
    { "40_00A8", test_40_00A8 },
    { "40_00A9", test_40_00A9 },
    { "40_00AA", test_40_00AA },
    { "40_00AB", test_40_00AB },
    { "40_00AC", test_40_00AC },
    { "40_00AD", test_40_00AD },
    { "40_00AE", test_40_00AE },
    { "40_00AF", test_40_00AF },
    { "40_00B0", test_40_00B0 },
    { "40_00B1", test_40_00B1 },
    { "40_00B2", test_40_00B2 },
    { "40_00B3", test_40_00B3 },
    { "40_00B4", test_40_00B4 },
    { "40_00B5", test_40_00B5 },
    { "40_00B6", test_40_00B6 },
    { "40_00B7", test_40_00B7 },
    { "40_00B8", test_40_00B8 },
    { "40_00B9", test_40_00B9 },
    { "40_00BA", test_40_00BA },
    { "40_00BB", test_40_00BB },
    { "40_00BC", test_40_00BC },
    { "40_00BD", test_40_00BD },
    { "40_00BE", test_40_00BE },
    { "40_00BF", test_40_00BF },
    { "40_00C0", test_40_00C0 },
    { "40_00C1", test_40_00C1 },
    { "40_00C2", test_40_00C2 },
    { "40_00C3", test_40_00C3 },
    { "40_00C4", test_40_00C4 },
    { "40_00C5", test_40_00C5 },
    { "40_00C6", test_40_00C6 },
    { "40_00C7", test_40_00C7 },
    { "40_00C8", test_40_00C8 },
    { "40_00C9", test_40_00C9 },
    { "40_00CA", test_40_00CA },
    { "40_00CB", test_40_00CB },
    { "40_00CC", test_40_00CC },
    { "40_00CD", test_40_00CD },
    { "40_00CE", test_40_00CE },
    { "40_00CF", test_40_00CF },
    { "40_00D0", test_40_00D0 },
    { "40_00D1", test_40_00D1 },
    { "40_00D2", test_40_00D2 },
    { "40_00D3", test_40_00D3 },
    { "40_00D4", test_40_00D4 },
    { "40_00D5", test_40_00D5 },
    { "40_00D6", test_40_00D6 },
    { "40_00D7", test_40_00D7 },
    { "40_00D8", test_40_00D8 },
    { "40_00D9", test_40_00D9 },
    { "40_00DA", test_40_00DA },
    { "40_00DB", test_40_00DB },
    { "40_00DC", test_40_00DC },
    { "40_00DD", test_40_00DD },
    { "40_00DE", test_40_00DE },
    { "40_00DF", test_40_00DF },
    { "40_00E0", test_40_00E0 },
    { "40_00E1", test_40_00E1 },
    { "40_00E2", test_40_00E2 },
    { "40_00E3", test_40_00E3 },
    { "40_00E4", test_40_00E4 },
    { "40_00E5", test_40_00E5 },
    { "40_00E6", test_40_00E6 },
    { "40_00E7", test_40_00E7 },
    { "40_00E8", test_40_00E8 },
    { "40_00E9", test_40_00E9 },
    { "40_00EA", test_40_00EA },
    { "40_00EB", test_40_00EB },
    { "40_00EC", test_40_00EC },
    { "40_00ED", test_40_00ED },
    { "40_00EE", test_40_00EE },
    { "40_00EF", test_40_00EF },
    { "40_00F0", test_40_00F0 },
    { "40_00F1", test_40_00F1 },
    { "40_00F2", test_40_00F2 },
    { "40_00F3", test_40_00F3 },
    { "40_00F4", test_40_00F4 },
    { "40_00F5", test_40_00F5 },
    { "40_00F6", test_40_00F6 },
    { "40_00F7", test_40_00F7 },
    { "40_00F8", test_40_00F8 },
    { "40_00F9", test_40_00F9 },
    { "40_00FA", test_40_00FA },
    { "40_00FB", test_40_00FB },
    { "40_00FC", test_40_00FC },
    { "40_00FD", test_40_00FD },
    { "40_00FE", test_40_00FE },
    { "40_00FF", test_40_00FF },
    { "40_0100", test_40_0100 },
    { "40_0101", test_40_0101 },
    { "40_0102", test_40_0102 },
    { "40_0103", test_40_0103 },
    { "40_0104", test_40_0104 },
    { "40_0105", test_40_0105 },
    { "40_0106", test_40_0106 },
    { "40_0107", test_40_0107 },
    { "40_0108", test_40_0108 },
    { "40_0109", test_40_0109 },
    { "40_010A", test_40_010A },
    { "40_010B", test_40_010B },
    { "40_010C", test_40_010C },
    { "40_010D", test_40_010D },
    { "40_010E", test_40_010E },
    { "40_010F", test_40_010F },
    { "40_0110", test_40_0110 },
    { "40_0111", test_40_0111 },
    { "40_0112", test_40_0112 },
    { "40_0113", test_40_0113 },
    { "40_0114", test_40_0114 },
    { "40_0115", test_40_0115 },
    { "40_0116", test_40_0116 },
    { "40_0117", test_40_0117 },
    { "40_0118", test_40_0118 },
    { "40_0119", test_40_0119 },
    { "40_011A", test_40_011A },
    { "40_011B", test_40_011B },
    { "40_011C", test_40_011C },
    { "40_011D", test_40_011D },
    { "40_011E", test_40_011E },
    { "40_011F", test_40_011F },
    { "40_0120", test_40_0120 },
    { "40_0121", test_40_0121 },
    { "40_0122", test_40_0122 },
    { "40_0123", test_40_0123 },
    { "40_0124", test_40_0124 },
    { "40_0125", test_40_0125 },
    { "40_0126", test_40_0126 },
    { "40_0127", test_40_0127 },
    { "40_0128", test_40_0128 },
    { "40_0129", test_40_0129 },
    { "40_012A", test_40_012A },
    { "40_012B", test_40_012B },
    { "40_012C", test_40_012C },
    { "40_012D", test_40_012D },
    { "40_012E", test_40_012E },
    { "40_012F", test_40_012F },
    { "40_0130", test_40_0130 },
    { "40_0131", test_40_0131 },
    { "40_0132", test_40_0132 },
    { "40_0133", test_40_0133 },
    { "40_0134", test_40_0134 },
    { "40_0135", test_40_0135 },
    { "40_0136", test_40_0136 },
    { "40_0137", test_40_0137 },
    { "40_0138", test_40_0138 },
    { "40_0139", test_40_0139 },
    { "40_013A", test_40_013A },
    { "40_013B", test_40_013B },
    { "40_013C", test_40_013C },
    { "40_013D", test_40_013D },
    { "40_013E", test_40_013E },
    { "40_013F", test_40_013F },
    { "40_0140", test_40_0140 },
    { "40_0141", test_40_0141 },
    { "40_0142", test_40_0142 },
    { "40_0143", test_40_0143 },
    { "40_0144", test_40_0144 },
    { "40_0145", test_40_0145 },
    { "40_0146", test_40_0146 },
    { "40_0147", test_40_0147 },
    { "40_0148", test_40_0148 },
    { "40_0149", test_40_0149 },
    { "40_014A", test_40_014A },
    { "40_014B", test_40_014B },
    { "40_014C", test_40_014C },
    { "40_014D", test_40_014D },
    { "40_014E", test_40_014E },
    { "40_014F", test_40_014F },
    { "40_0150", test_40_0150 },
    { "40_0151", test_40_0151 },
    { "40_0152", test_40_0152 },
    { "40_0153", test_40_0153 },
    { "40_0154", test_40_0154 },
    { "40_0155", test_40_0155 },
    { "40_0156", test_40_0156 },
    { "40_0157", test_40_0157 },
    { "40_0158", test_40_0158 },
    { "40_0159", test_40_0159 },
    { "40_015A", test_40_015A },
    { "40_015B", test_40_015B },
    { "40_015C", test_40_015C },
    { "40_015D", test_40_015D },
    { "40_015E", test_40_015E },
    { "40_015F", test_40_015F },
    { "40_0160", test_40_0160 },
    { "40_0161", test_40_0161 },
    { "40_0162", test_40_0162 },
    { "40_0163", test_40_0163 },
    { "40_0164", test_40_0164 },
    { "40_0165", test_40_0165 },
    { "40_0166", test_40_0166 },
    { "40_0167", test_40_0167 },
    { "40_0168", test_40_0168 },
    { "40_0169", test_40_0169 },
    { "40_016A", test_40_016A },
    { "40_016B", test_40_016B },
    { "40_016C", test_40_016C },
    { "40_016D", test_40_016D },
    { "40_016E", test_40_016E },
    { "40_016F", test_40_016F },
    { "40_0170", test_40_0170 },
    { "40_0171", test_40_0171 },
    { "40_0172", test_40_0172 },
    { "40_0173", test_40_0173 },
    { "40_0174", test_40_0174 },
    { "40_0175", test_40_0175 },
    { "40_0176", test_40_0176 },
    { "40_0177", test_40_0177 },
    { "40_0178", test_40_0178 },
    { "40_0179", test_40_0179 },
    { "40_017A", test_40_017A },
    { "40_017B", test_40_017B },
    { "40_017C", test_40_017C },
    { "40_017D", test_40_017D },
    { "40_017E", test_40_017E },
    { "40_017F", test_40_017F },
    { "40_0180", test_40_0180 },
    { "40_0181", test_40_0181 },
    { "40_0182", test_40_0182 },
    { "40_0183", test_40_0183 },
    { "40_0184", test_40_0184 },
    { "40_0185", test_40_0185 },
    { "40_0186", test_40_0186 },
    { "40_0187", test_40_0187 },
    { "40_0188", test_40_0188 },
    { "40_0189", test_40_0189 },
    { "40_018A", test_40_018A },
    { "40_018B", test_40_018B },
    { "40_018C", test_40_018C },
    { "40_018D", test_40_018D },
    { "40_018E", test_40_018E },
    { "40_018F", test_40_018F },
    { "40_0190", test_40_0190 },
    { "40_0191", test_40_0191 },
    { "40_0192", test_40_0192 },
    { "40_0193", test_40_0193 },
    { "40_0194", test_40_0194 },
    { "40_0195", test_40_0195 },
    { "40_0196", test_40_0196 },
    { "40_0197", test_40_0197 },
    { "40_0198", test_40_0198 },
    { "40_0199", test_40_0199 },
    { "40_019A", test_40_019A },
    { "40_019B", test_40_019B },
    { "40_019C", test_40_019C },
    { "40_019D", test_40_019D },
    { "40_019E", test_40_019E },
    { "40_019F", test_40_019F },
    { "40_01A0", test_40_01A0 },
    { "40_01A1", test_40_01A1 },
    { "40_01A2", test_40_01A2 },
    { "40_01A3", test_40_01A3 },
    { "40_01A4", test_40_01A4 },
    { "40_01A5", test_40_01A5 },
    { "40_01A6", test_40_01A6 },
    { "40_01A7", test_40_01A7 },
    { "40_01A8", test_40_01A8 },
    { "40_01A9", test_40_01A9 },
    { "40_01AA", test_40_01AA },
    { "40_01AB", test_40_01AB },
    { "40_01AC", test_40_01AC },
    { "40_01AD", test_40_01AD },
    { "40_01AE", test_40_01AE },
    { "40_01AF", test_40_01AF },
    { "40_01B0", test_40_01B0 },
    { "40_01B1", test_40_01B1 },
    { "40_01B2", test_40_01B2 },
    { "40_01B3", test_40_01B3 },
    { "40_01B4", test_40_01B4 },
    { "40_01B5", test_40_01B5 },
    { "40_01B6", test_40_01B6 },
    { "40_01B7", test_40_01B7 },
    { "40_01B8", test_40_01B8 },
    { "40_01B9", test_40_01B9 },
    { "40_01BA", test_40_01BA },
    { "40_01BB", test_40_01BB },
    { "40_01BC", test_40_01BC },
    { "40_01BD", test_40_01BD },
    { "40_01BE", test_40_01BE },
    { "40_01BF", test_40_01BF },
    { "40_01C0", test_40_01C0 },
    { "40_01C1", test_40_01C1 },
    { "40_01C2", test_40_01C2 },
    { "40_01C3", test_40_01C3 },
    { "40_01C4", test_40_01C4 },
    { "40_01C5", test_40_01C5 },
    { "40_01C6", test_40_01C6 },
    { "40_01C7", test_40_01C7 },
    { "40_01C8", test_40_01C8 },
    { "40_01C9", test_40_01C9 },
    { "40_01CA", test_40_01CA },
    { "40_01CB", test_40_01CB },
    { "40_01CC", test_40_01CC },
    { "40_01CD", test_40_01CD },
    { "40_01CE", test_40_01CE },
    { "40_01CF", test_40_01CF },
    { "40_01D0", test_40_01D0 },
    { "40_01D1", test_40_01D1 },
    { "40_01D2", test_40_01D2 },
    { "40_01D3", test_40_01D3 },
    { "40_01D4", test_40_01D4 },
    { "40_01D5", test_40_01D5 },
    { "40_01D6", test_40_01D6 },
    { "40_01D7", test_40_01D7 },
    { "40_01D8", test_40_01D8 },
    { "40_01D9", test_40_01D9 },
    { "40_01DA", test_40_01DA },
    { "40_01DB", test_40_01DB },
    { "40_01DC", test_40_01DC },
    { "40_01DD", test_40_01DD },
    { "40_01DE", test_40_01DE },
    { "40_01DF", test_40_01DF },
    { "40_01E0", test_40_01E0 },
    { "40_01E1", test_40_01E1 },
    { "40_01E2", test_40_01E2 },
    { "40_01E3", test_40_01E3 },
    { "40_01E4", test_40_01E4 },
    { "40_01E5", test_40_01E5 },
    { "40_01E6", test_40_01E6 },
    { "40_01E7", test_40_01E7 },
    { "40_01E8", test_40_01E8 },
    { "40_01E9", test_40_01E9 },
    { "40_01EA", test_40_01EA },
    { "40_01EB", test_40_01EB },
    { "40_01EC", test_40_01EC },
    { "40_01ED", test_40_01ED },
    { "40_01EE", test_40_01EE },
    { "40_01EF", test_40_01EF },
    { "40_01F0", test_40_01F0 },
    { "40_01F1", test_40_01F1 },
    { "40_01F2", test_40_01F2 },
    { "40_01F3", test_40_01F3 },
    { "40_01F4", test_40_01F4 },
    { "40_01F5", test_40_01F5 },
    { "40_01F6", test_40_01F6 },
    { "40_01F7", test_40_01F7 },
    { "40_01F8", test_40_01F8 },
    { "40_01F9", test_40_01F9 },
    { "40_01FA", test_40_01FA },
    { "40_01FB", test_40_01FB },
    { "40_01FC", test_40_01FC },
    { "40_01FD", test_40_01FD },
    { "40_01FE", test_40_01FE },
    { "40_01FF", test_40_01FF },
    { "40_0200", test_40_0200 },
    { "40_0201", test_40_0201 },
    { "40_0202", test_40_0202 },
    { "40_0203", test_40_0203 },
    { "40_0204", test_40_0204 },
    { "40_0205", test_40_0205 },
    { "40_0206", test_40_0206 },
    { "40_0207", test_40_0207 },
    { "40_0208", test_40_0208 },
    { "40_0209", test_40_0209 },
    { "40_020A", test_40_020A },
    { "40_020B", test_40_020B },
    { "40_020C", test_40_020C },
    { "40_020D", test_40_020D },
    { "40_020E", test_40_020E },
    { "40_020F", test_40_020F },
    { "40_0210", test_40_0210 },
    { "40_0211", test_40_0211 },
    { "40_0212", test_40_0212 },
    { "40_0213", test_40_0213 },
    { "40_0214", test_40_0214 },
    { "40_0215", test_40_0215 },
    { "40_0216", test_40_0216 },
    { "40_0217", test_40_0217 },
    { "40_0218", test_40_0218 },
    { "40_0219", test_40_0219 },
    { "40_021A", test_40_021A },
    { "40_021B", test_40_021B },
    { "40_021C", test_40_021C },
    { "40_021D", test_40_021D },
    { "40_021E", test_40_021E },
    { "40_021F", test_40_021F },
    { "40_0220", test_40_0220 },
    { "40_0221", test_40_0221 },
    { "40_0222", test_40_0222 },
    { "40_0223", test_40_0223 },
    { "40_0224", test_40_0224 },
    { "40_0225", test_40_0225 },
    { "40_0226", test_40_0226 },
    { "40_0227", test_40_0227 },
    { "40_0228", test_40_0228 },
    { "40_0229", test_40_0229 },
    { "40_022A", test_40_022A },
    { "40_022B", test_40_022B },
    { "40_022C", test_40_022C },
    { "40_022D", test_40_022D },
    { "40_022E", test_40_022E },
    { "40_022F", test_40_022F },
    { "40_0230", test_40_0230 },
    { "40_0231", test_40_0231 },
    { "40_0232", test_40_0232 },
    { "40_0233", test_40_0233 },
    { "40_0234", test_40_0234 },
    { "40_0235", test_40_0235 },
    { "40_0236", test_40_0236 },
    { "40_0237", test_40_0237 },
    { "40_0238", test_40_0238 },
    { "40_0239", test_40_0239 },
    { "40_023A", test_40_023A },
    { "40_023B", test_40_023B },
    { "40_023C", test_40_023C },
    { "40_023D", test_40_023D },
    { "40_023E", test_40_023E },
    { "40_023F", test_40_023F },
    { "40_0240", test_40_0240 },
    { "40_0241", test_40_0241 },
    { "40_0242", test_40_0242 },
    { "40_0243", test_40_0243 },
    { "40_0244", test_40_0244 },
    { "40_0245", test_40_0245 },
    { "40_0246", test_40_0246 },
    { "40_0247", test_40_0247 },
    { "40_0248", test_40_0248 },
    { "40_0249", test_40_0249 },
    { "40_024A", test_40_024A },
    { "40_024B", test_40_024B },
    { "40_024C", test_40_024C },
    { "40_024D", test_40_024D },
    { "40_024E", test_40_024E },
    { "40_024F", test_40_024F },
    { "40_0250", test_40_0250 },
    { "40_0251", test_40_0251 },
    { "40_0252", test_40_0252 },
    { "40_0253", test_40_0253 },
    { "40_0254", test_40_0254 },
    { "40_0255", test_40_0255 },
    { "40_0256", test_40_0256 },
    { "40_0257", test_40_0257 },
    { "40_0258", test_40_0258 },
    { "40_0259", test_40_0259 },
    { "40_025A", test_40_025A },
    { "40_025B", test_40_025B },
    { "40_025C", test_40_025C },
    { "40_025D", test_40_025D },
    { "40_025E", test_40_025E },
    { "40_025F", test_40_025F },
    { "40_0260", test_40_0260 },
    { "40_0261", test_40_0261 },
    { "40_0262", test_40_0262 },
    { "40_0263", test_40_0263 },
    { "40_0264", test_40_0264 },
    { "40_0265", test_40_0265 },
    { "40_0266", test_40_0266 },
    { "40_0267", test_40_0267 },
    { "40_0268", test_40_0268 },
    { "40_0269", test_40_0269 },
    { "40_026A", test_40_026A },
    { "40_026B", test_40_026B },
    { "40_026C", test_40_026C },
    { "40_026D", test_40_026D },
    { "40_026E", test_40_026E },
    { "40_026F", test_40_026F },
    { "40_0270", test_40_0270 },
    { "40_0271", test_40_0271 },
    { "40_0272", test_40_0272 },
    { "40_0273", test_40_0273 },
    { "40_0274", test_40_0274 },
    { "40_0275", test_40_0275 },
    { "40_0276", test_40_0276 },
    { "40_0277", test_40_0277 },
    { "40_0278", test_40_0278 },
    { "40_0279", test_40_0279 },
    { "40_027A", test_40_027A },
    { "40_027B", test_40_027B },
    { "40_027C", test_40_027C },
    { "40_027D", test_40_027D },
    { "40_027E", test_40_027E },
    { "40_027F", test_40_027F },
    { "40_0280", test_40_0280 },
    { "40_0281", test_40_0281 },
    { "40_0282", test_40_0282 },
    { "40_0283", test_40_0283 },
    { "40_0284", test_40_0284 },
    { "40_0285", test_40_0285 },
    { "40_0286", test_40_0286 },
    { "40_0287", test_40_0287 },
    { "40_0288", test_40_0288 },
    { "40_0289", test_40_0289 },
    { "40_028A", test_40_028A },
    { "40_028B", test_40_028B },
    { "40_028C", test_40_028C },
    { "40_028D", test_40_028D },
    { "40_028E", test_40_028E },
    { "40_028F", test_40_028F },
    { "40_0290", test_40_0290 },
    { "40_0291", test_40_0291 },
    { "40_0292", test_40_0292 },
    { "40_0293", test_40_0293 },
    { "40_0294", test_40_0294 },
    { "40_0295", test_40_0295 },
    { "40_0296", test_40_0296 },
    { "40_0297", test_40_0297 },
    { "40_0298", test_40_0298 },
    { "40_0299", test_40_0299 },
    { "40_029A", test_40_029A },
    { "40_029B", test_40_029B },
    { "40_029C", test_40_029C },
    { "40_029D", test_40_029D },
    { "40_029E", test_40_029E },
    { "40_029F", test_40_029F },
    { "40_02A0", test_40_02A0 },
    { "40_02A1", test_40_02A1 },
    { "40_02A2", test_40_02A2 },
    { "40_02A3", test_40_02A3 },
    { "40_02A4", test_40_02A4 },
    { "40_02A5", test_40_02A5 },
    { "40_02A6", test_40_02A6 },
    { "40_02A7", test_40_02A7 },
    { "40_02A8", test_40_02A8 },
    { "40_02A9", test_40_02A9 },
    { "40_02AA", test_40_02AA },
    { "40_02AB", test_40_02AB },
    { "40_02AC", test_40_02AC },
    { "40_02AD", test_40_02AD },
    { "40_02AE", test_40_02AE },
    { "40_02AF", test_40_02AF },
    { "40_02B0", test_40_02B0 },
    { "40_02B1", test_40_02B1 },
    { "40_02B2", test_40_02B2 },
    { "40_02B3", test_40_02B3 },
    { "40_02B4", test_40_02B4 },
    { "40_02B5", test_40_02B5 },
    { "40_02B6", test_40_02B6 },
    { "40_02B7", test_40_02B7 },
    { "40_02B8", test_40_02B8 },
    { "40_02B9", test_40_02B9 },
    { "40_02BA", test_40_02BA },
    { "40_02BB", test_40_02BB },
    { "40_02BC", test_40_02BC },
    { "40_02BD", test_40_02BD },
    { "40_02BE", test_40_02BE },
    { "40_02BF", test_40_02BF },
    { "40_02C0", test_40_02C0 },
    { "40_02C1", test_40_02C1 },
    { "40_02C2", test_40_02C2 },
    { "40_02C3", test_40_02C3 },
    { "40_02C4", test_40_02C4 },
    { "40_02C5", test_40_02C5 },
    { "40_02C6", test_40_02C6 },
    { "40_02C7", test_40_02C7 },
    { "40_02C8", test_40_02C8 },
    { "40_02C9", test_40_02C9 },
    { "40_02CA", test_40_02CA },
    { "40_02CB", test_40_02CB },
    { "40_02CC", test_40_02CC },
    { "40_02CD", test_40_02CD },
    { "40_02CE", test_40_02CE },
    { "40_02CF", test_40_02CF },
    { "40_02D0", test_40_02D0 },
    { "40_02D1", test_40_02D1 },
    { "40_02D2", test_40_02D2 },
    { "40_02D3", test_40_02D3 },
    { "40_02D4", test_40_02D4 },
    { "40_02D5", test_40_02D5 },
    { "40_02D6", test_40_02D6 },
    { "40_02D7", test_40_02D7 },
    { "40_02D8", test_40_02D8 },
    { "40_02D9", test_40_02D9 },
    { "40_02DA", test_40_02DA },
    { "40_02DB", test_40_02DB },
    { "40_02DC", test_40_02DC },
    { "40_02DD", test_40_02DD },
    { "40_02DE", test_40_02DE },
    { "40_02DF", test_40_02DF },
    { "40_02E0", test_40_02E0 },
    { "40_02E1", test_40_02E1 },
    { "40_02E2", test_40_02E2 },
    { "40_02E3", test_40_02E3 },
    { "40_02E4", test_40_02E4 },
    { "40_02E5", test_40_02E5 },
    { "40_02E6", test_40_02E6 },
    { "40_02E7", test_40_02E7 },
    { "40_02E8", test_40_02E8 },
    { "40_02E9", test_40_02E9 },
    { "40_02EA", test_40_02EA },
    { "40_02EB", test_40_02EB },
    { "40_02EC", test_40_02EC },
    { "40_02ED", test_40_02ED },
    { "40_02EE", test_40_02EE },
    { "40_02EF", test_40_02EF },
    { "40_02F0", test_40_02F0 },
    { "40_02F1", test_40_02F1 },
    { "40_02F2", test_40_02F2 },
    { "40_02F3", test_40_02F3 },
    { "40_02F4", test_40_02F4 },
    { "40_02F5", test_40_02F5 },
    { "40_02F6", test_40_02F6 },
    { "40_02F7", test_40_02F7 },
    { "40_02F8", test_40_02F8 },
    { "40_02F9", test_40_02F9 },
    { "40_02FA", test_40_02FA },
    { "40_02FB", test_40_02FB },
    { "40_02FC", test_40_02FC },
    { "40_02FD", test_40_02FD },
    { "40_02FE", test_40_02FE },
    { "40_02FF", test_40_02FF },
    { "40_0300", test_40_0300 },
    { "40_0301", test_40_0301 },
    { "40_0302", test_40_0302 },
    { "40_0303", test_40_0303 },
    { "40_0304", test_40_0304 },
    { "40_0305", test_40_0305 },
    { "40_0306", test_40_0306 },
    { "40_0307", test_40_0307 },
    { "40_0308", test_40_0308 },
    { "40_0309", test_40_0309 },
    { "40_030A", test_40_030A },
    { "40_030B", test_40_030B },
    { "40_030C", test_40_030C },
    { "40_030D", test_40_030D },
    { "40_030E", test_40_030E },
    { "40_030F", test_40_030F },
    { "40_0310", test_40_0310 },
    { "40_0311", test_40_0311 },
    { "40_0312", test_40_0312 },
    { "40_0313", test_40_0313 },
    { "40_0314", test_40_0314 },
    { "40_0315", test_40_0315 },
    { "40_0316", test_40_0316 },
    { "40_0317", test_40_0317 },
    { "40_0318", test_40_0318 },
    { "40_0319", test_40_0319 },
    { "40_031A", test_40_031A },
    { "40_031B", test_40_031B },
    { "40_031C", test_40_031C },
    { "40_031D", test_40_031D },
    { "40_031E", test_40_031E },
    { "40_031F", test_40_031F },
    { "40_0320", test_40_0320 },
    { "40_0321", test_40_0321 },
    { "40_0322", test_40_0322 },
    { "40_0323", test_40_0323 },
    { "40_0324", test_40_0324 },
    { "40_0325", test_40_0325 },
    { "40_0326", test_40_0326 },
    { "40_0327", test_40_0327 },
    { "40_0328", test_40_0328 },
    { "40_0329", test_40_0329 },
    { "40_032A", test_40_032A },
    { "40_032B", test_40_032B },
    { "40_032C", test_40_032C },
    { "40_032D", test_40_032D },
    { "40_032E", test_40_032E },
    { "40_032F", test_40_032F },
    { "40_0330", test_40_0330 },
    { "40_0331", test_40_0331 },
    { "40_0332", test_40_0332 },
    { "40_0333", test_40_0333 },
    { "40_0334", test_40_0334 },
    { "40_0335", test_40_0335 },
    { "40_0336", test_40_0336 },
    { "40_0337", test_40_0337 },
    { "40_0338", test_40_0338 },
    { "40_0339", test_40_0339 },
    { "40_033A", test_40_033A },
    { "40_033B", test_40_033B },
    { "40_033C", test_40_033C },
    { "40_033D", test_40_033D },
    { "40_033E", test_40_033E },
    { "40_033F", test_40_033F },
    { "40_0340", test_40_0340 },
    { "40_0341", test_40_0341 },
    { "40_0342", test_40_0342 },
    { "40_0343", test_40_0343 },
    { "40_0344", test_40_0344 },
    { "40_0345", test_40_0345 },
    { "40_0346", test_40_0346 },
    { "40_0347", test_40_0347 },
    { "40_0348", test_40_0348 },
    { "40_0349", test_40_0349 },
    { "40_034A", test_40_034A },
    { "40_034B", test_40_034B },
    { "40_034C", test_40_034C },
    { "40_034D", test_40_034D },
    { "40_034E", test_40_034E },
    { "40_034F", test_40_034F },
    { "40_0350", test_40_0350 },
    { "40_0351", test_40_0351 },
    { "40_0352", test_40_0352 },
    { "40_0353", test_40_0353 },
    { "40_0354", test_40_0354 },
    { "40_0355", test_40_0355 },
    { "40_0356", test_40_0356 },
    { "40_0357", test_40_0357 },
    { "40_0358", test_40_0358 },
    { "40_0359", test_40_0359 },
    { "40_035A", test_40_035A },
    { "40_035B", test_40_035B },
    { "40_035C", test_40_035C },
    { "40_035D", test_40_035D },
    { "40_035E", test_40_035E },
    { "40_035F", test_40_035F },
    { "40_0360", test_40_0360 },
    { "40_0361", test_40_0361 },
    { "40_0362", test_40_0362 },
    { "40_0363", test_40_0363 },
    { "40_0364", test_40_0364 },
    { "40_0365", test_40_0365 },
    { "40_0366", test_40_0366 },
    { "40_0367", test_40_0367 },
    { "40_0368", test_40_0368 },
    { "40_0369", test_40_0369 },
    { "40_036A", test_40_036A },
    { "40_036B", test_40_036B },
    { "40_036C", test_40_036C },
    { "40_036D", test_40_036D },
    { "40_036E", test_40_036E },
    { "40_036F", test_40_036F },
    { "40_0370", test_40_0370 },
    { "40_0371", test_40_0371 },
    { "40_0372", test_40_0372 },
    { "40_0373", test_40_0373 },
    { "40_0374", test_40_0374 },
    { "40_0375", test_40_0375 },
    { "40_0376", test_40_0376 },
    { "40_0377", test_40_0377 },
    { "40_0378", test_40_0378 },
    { "40_0379", test_40_0379 },
    { "40_037A", test_40_037A },
    { "40_037B", test_40_037B },
    { "40_037C", test_40_037C },
    { "40_037D", test_40_037D },
    { "40_037E", test_40_037E },
    { "40_037F", test_40_037F },
    { "40_0380", test_40_0380 },
    { "40_0381", test_40_0381 },
    { "40_0382", test_40_0382 },
    { "40_0383", test_40_0383 },
    { "40_0384", test_40_0384 },
    { "40_0385", test_40_0385 },
    { "40_0386", test_40_0386 },
    { "40_0387", test_40_0387 },
    { "40_0388", test_40_0388 },
    { "40_0389", test_40_0389 },
    { "40_038A", test_40_038A },
    { "40_038B", test_40_038B },
    { "40_038C", test_40_038C },
    { "40_038D", test_40_038D },
    { "40_038E", test_40_038E },
    { "40_038F", test_40_038F },
    { "40_0390", test_40_0390 },
    { "40_0391", test_40_0391 },
    { "40_0392", test_40_0392 },
    { "40_0393", test_40_0393 },
    { "40_0394", test_40_0394 },
    { "40_0395", test_40_0395 },
    { "40_0396", test_40_0396 },
    { "40_0397", test_40_0397 },
    { "40_0398", test_40_0398 },
    { "40_0399", test_40_0399 },
    { "40_039A", test_40_039A },
    { "40_039B", test_40_039B },
    { "40_039C", test_40_039C },
    { "40_039D", test_40_039D },
    { "40_039E", test_40_039E },
    { "40_039F", test_40_039F },
    { "40_03A0", test_40_03A0 },
    { "40_03A1", test_40_03A1 },
    { "40_03A2", test_40_03A2 },
    { "40_03A3", test_40_03A3 },
    { "40_03A4", test_40_03A4 },
    { "40_03A5", test_40_03A5 },
    { "40_03A6", test_40_03A6 },
    { "40_03A7", test_40_03A7 },
    { "40_03A8", test_40_03A8 },
    { "40_03A9", test_40_03A9 },
    { "40_03AA", test_40_03AA },
    { "40_03AB", test_40_03AB },
    { "40_03AC", test_40_03AC },
    { "40_03AD", test_40_03AD },
    { "40_03AE", test_40_03AE },
    { "40_03AF", test_40_03AF },
    { "40_03B0", test_40_03B0 },
    { "40_03B1", test_40_03B1 },
    { "40_03B2", test_40_03B2 },
    { "40_03B3", test_40_03B3 },
    { "40_03B4", test_40_03B4 },
    { "40_03B5", test_40_03B5 },
    { "40_03B6", test_40_03B6 },
    { "40_03B7", test_40_03B7 },
    { "40_03B8", test_40_03B8 },
    { "40_03B9", test_40_03B9 },
    { "40_03BA", test_40_03BA },
    { "40_03BB", test_40_03BB },
    { "40_03BC", test_40_03BC },
    { "40_03BD", test_40_03BD },
    { "40_03BE", test_40_03BE },
    { "40_03BF", test_40_03BF },
    { "40_03C0", test_40_03C0 },
    { "40_03C1", test_40_03C1 },
    { "40_03C2", test_40_03C2 },
    { "40_03C3", test_40_03C3 },
    { "40_03C4", test_40_03C4 },
    { "40_03C5", test_40_03C5 },
    { "40_03C6", test_40_03C6 },
    { "40_03C7", test_40_03C7 },
    { "40_03C8", test_40_03C8 },
    { "40_03C9", test_40_03C9 },
    { "40_03CA", test_40_03CA },
    { "40_03CB", test_40_03CB },
    { "40_03CC", test_40_03CC },
    { "40_03CD", test_40_03CD },
    { "40_03CE", test_40_03CE },
    { "40_03CF", test_40_03CF },
    { "40_03D0", test_40_03D0 },
    { "40_03D1", test_40_03D1 },
    { "40_03D2", test_40_03D2 },
    { "40_03D3", test_40_03D3 },
    { "40_03D4", test_40_03D4 },
    { "40_03D5", test_40_03D5 },
    { "40_03D6", test_40_03D6 },
    { "40_03D7", test_40_03D7 },
    { "40_03D8", test_40_03D8 },
    { "40_03D9", test_40_03D9 },
    { "40_03DA", test_40_03DA },
    { "40_03DB", test_40_03DB },
    { "40_03DC", test_40_03DC },
    { "40_03DD", test_40_03DD },
    { "40_03DE", test_40_03DE },
    { "40_03DF", test_40_03DF },
    { "40_03E0", test_40_03E0 },
    { "40_03E1", test_40_03E1 },
    { "40_03E2", test_40_03E2 },
    { "40_03E3", test_40_03E3 },
    { "40_03E4", test_40_03E4 },
    { "40_03E5", test_40_03E5 },
    { "40_03E6", test_40_03E6 },
    { "40_03E7", test_40_03E7 },
    {NULL, NULL}
};

void test_40_0000()
{
    if (skip_test_40_0000)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA677);
    WriteRegisterWord(RegisterType::SP, 0x2077);
    WriteRegisterByte(RegisterType::A, 0x47);
    WriteRegisterByte(RegisterType::B, 0x6B);
    WriteRegisterByte(RegisterType::C, 0x28);
    WriteRegisterByte(RegisterType::D, 0x90);
    WriteRegisterByte(RegisterType::E, 0x4E);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xE8);
    WriteRegisterByte(RegisterType::L, 0x09);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA677, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x47);
    CheckRegisterByte(RegisterType::B, 0x6B);
    CheckRegisterByte(RegisterType::C, 0x28);
    CheckRegisterByte(RegisterType::D, 0x90);
    CheckRegisterByte(RegisterType::E, 0x4E);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xE8);
    CheckRegisterByte(RegisterType::L, 0x09);
    WriteRegisterWord(RegisterType::PC, 0xA678);
    WriteRegisterWord(RegisterType::SP, 0x2077);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA677, 0x40);
}

void test_40_0001()
{
    if (skip_test_40_0001)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA1F7);
    WriteRegisterWord(RegisterType::SP, 0xB7DC);
    WriteRegisterByte(RegisterType::A, 0xD4);
    WriteRegisterByte(RegisterType::B, 0xAF);
    WriteRegisterByte(RegisterType::C, 0xD7);
    WriteRegisterByte(RegisterType::D, 0x0F);
    WriteRegisterByte(RegisterType::E, 0x07);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xC2);
    WriteRegisterByte(RegisterType::L, 0x14);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA1F7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD4);
    CheckRegisterByte(RegisterType::B, 0xAF);
    CheckRegisterByte(RegisterType::C, 0xD7);
    CheckRegisterByte(RegisterType::D, 0x0F);
    CheckRegisterByte(RegisterType::E, 0x07);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xC2);
    CheckRegisterByte(RegisterType::L, 0x14);
    WriteRegisterWord(RegisterType::PC, 0xA1F8);
    WriteRegisterWord(RegisterType::SP, 0xB7DC);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA1F7, 0x40);
}

void test_40_0002()
{
    if (skip_test_40_0002)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0D04);
    WriteRegisterWord(RegisterType::SP, 0x01AA);
    WriteRegisterByte(RegisterType::A, 0x73);
    WriteRegisterByte(RegisterType::B, 0xAA);
    WriteRegisterByte(RegisterType::C, 0x4E);
    WriteRegisterByte(RegisterType::D, 0x1C);
    WriteRegisterByte(RegisterType::E, 0xEF);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xF1);
    WriteRegisterByte(RegisterType::L, 0x8A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0D04, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x73);
    CheckRegisterByte(RegisterType::B, 0xAA);
    CheckRegisterByte(RegisterType::C, 0x4E);
    CheckRegisterByte(RegisterType::D, 0x1C);
    CheckRegisterByte(RegisterType::E, 0xEF);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xF1);
    CheckRegisterByte(RegisterType::L, 0x8A);
    WriteRegisterWord(RegisterType::PC, 0x0D05);
    WriteRegisterWord(RegisterType::SP, 0x01AA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0D04, 0x40);
}

void test_40_0003()
{
    if (skip_test_40_0003)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6E39);
    WriteRegisterWord(RegisterType::SP, 0x4C9A);
    WriteRegisterByte(RegisterType::A, 0x99);
    WriteRegisterByte(RegisterType::B, 0x28);
    WriteRegisterByte(RegisterType::C, 0x63);
    WriteRegisterByte(RegisterType::D, 0x02);
    WriteRegisterByte(RegisterType::E, 0x87);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xE6);
    WriteRegisterByte(RegisterType::L, 0xDC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6E39, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x99);
    CheckRegisterByte(RegisterType::B, 0x28);
    CheckRegisterByte(RegisterType::C, 0x63);
    CheckRegisterByte(RegisterType::D, 0x02);
    CheckRegisterByte(RegisterType::E, 0x87);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xE6);
    CheckRegisterByte(RegisterType::L, 0xDC);
    WriteRegisterWord(RegisterType::PC, 0x6E3A);
    WriteRegisterWord(RegisterType::SP, 0x4C9A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6E39, 0x40);
}

void test_40_0004()
{
    if (skip_test_40_0004)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x88B5);
    WriteRegisterWord(RegisterType::SP, 0xB451);
    WriteRegisterByte(RegisterType::A, 0x8A);
    WriteRegisterByte(RegisterType::B, 0x08);
    WriteRegisterByte(RegisterType::C, 0xC7);
    WriteRegisterByte(RegisterType::D, 0x6A);
    WriteRegisterByte(RegisterType::E, 0xEA);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x6D);
    WriteRegisterByte(RegisterType::L, 0xEB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x88B5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8A);
    CheckRegisterByte(RegisterType::B, 0x08);
    CheckRegisterByte(RegisterType::C, 0xC7);
    CheckRegisterByte(RegisterType::D, 0x6A);
    CheckRegisterByte(RegisterType::E, 0xEA);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x6D);
    CheckRegisterByte(RegisterType::L, 0xEB);
    WriteRegisterWord(RegisterType::PC, 0x88B6);
    WriteRegisterWord(RegisterType::SP, 0xB451);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x88B5, 0x40);
}

void test_40_0005()
{
    if (skip_test_40_0005)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2B88);
    WriteRegisterWord(RegisterType::SP, 0x438B);
    WriteRegisterByte(RegisterType::A, 0xA4);
    WriteRegisterByte(RegisterType::B, 0xE1);
    WriteRegisterByte(RegisterType::C, 0x07);
    WriteRegisterByte(RegisterType::D, 0x64);
    WriteRegisterByte(RegisterType::E, 0xC8);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x26);
    WriteRegisterByte(RegisterType::L, 0x77);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2B88, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA4);
    CheckRegisterByte(RegisterType::B, 0xE1);
    CheckRegisterByte(RegisterType::C, 0x07);
    CheckRegisterByte(RegisterType::D, 0x64);
    CheckRegisterByte(RegisterType::E, 0xC8);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x26);
    CheckRegisterByte(RegisterType::L, 0x77);
    WriteRegisterWord(RegisterType::PC, 0x2B89);
    WriteRegisterWord(RegisterType::SP, 0x438B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2B88, 0x40);
}

void test_40_0006()
{
    if (skip_test_40_0006)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xED09);
    WriteRegisterWord(RegisterType::SP, 0xE24F);
    WriteRegisterByte(RegisterType::A, 0xF7);
    WriteRegisterByte(RegisterType::B, 0xB6);
    WriteRegisterByte(RegisterType::C, 0xD4);
    WriteRegisterByte(RegisterType::D, 0x0A);
    WriteRegisterByte(RegisterType::E, 0x5E);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x5C);
    WriteRegisterByte(RegisterType::L, 0xBD);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xED09, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF7);
    CheckRegisterByte(RegisterType::B, 0xB6);
    CheckRegisterByte(RegisterType::C, 0xD4);
    CheckRegisterByte(RegisterType::D, 0x0A);
    CheckRegisterByte(RegisterType::E, 0x5E);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x5C);
    CheckRegisterByte(RegisterType::L, 0xBD);
    WriteRegisterWord(RegisterType::PC, 0xED0A);
    WriteRegisterWord(RegisterType::SP, 0xE24F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xED09, 0x40);
}

void test_40_0007()
{
    if (skip_test_40_0007)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x53E7);
    WriteRegisterWord(RegisterType::SP, 0x7BD6);
    WriteRegisterByte(RegisterType::A, 0xD3);
    WriteRegisterByte(RegisterType::B, 0xD6);
    WriteRegisterByte(RegisterType::C, 0x18);
    WriteRegisterByte(RegisterType::D, 0x8F);
    WriteRegisterByte(RegisterType::E, 0xB7);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xA3);
    WriteRegisterByte(RegisterType::L, 0x6D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x53E7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD3);
    CheckRegisterByte(RegisterType::B, 0xD6);
    CheckRegisterByte(RegisterType::C, 0x18);
    CheckRegisterByte(RegisterType::D, 0x8F);
    CheckRegisterByte(RegisterType::E, 0xB7);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xA3);
    CheckRegisterByte(RegisterType::L, 0x6D);
    WriteRegisterWord(RegisterType::PC, 0x53E8);
    WriteRegisterWord(RegisterType::SP, 0x7BD6);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x53E7, 0x40);
}

void test_40_0008()
{
    if (skip_test_40_0008)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA9CF);
    WriteRegisterWord(RegisterType::SP, 0xDC0C);
    WriteRegisterByte(RegisterType::A, 0x02);
    WriteRegisterByte(RegisterType::B, 0x69);
    WriteRegisterByte(RegisterType::C, 0x6C);
    WriteRegisterByte(RegisterType::D, 0xA3);
    WriteRegisterByte(RegisterType::E, 0x93);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x0E);
    WriteRegisterByte(RegisterType::L, 0x10);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA9CF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x02);
    CheckRegisterByte(RegisterType::B, 0x69);
    CheckRegisterByte(RegisterType::C, 0x6C);
    CheckRegisterByte(RegisterType::D, 0xA3);
    CheckRegisterByte(RegisterType::E, 0x93);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x0E);
    CheckRegisterByte(RegisterType::L, 0x10);
    WriteRegisterWord(RegisterType::PC, 0xA9D0);
    WriteRegisterWord(RegisterType::SP, 0xDC0C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA9CF, 0x40);
}

void test_40_0009()
{
    if (skip_test_40_0009)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7661);
    WriteRegisterWord(RegisterType::SP, 0xC3DD);
    WriteRegisterByte(RegisterType::A, 0x27);
    WriteRegisterByte(RegisterType::B, 0x0F);
    WriteRegisterByte(RegisterType::C, 0xDF);
    WriteRegisterByte(RegisterType::D, 0xAB);
    WriteRegisterByte(RegisterType::E, 0xE4);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xE3);
    WriteRegisterByte(RegisterType::L, 0xB4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7661, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x27);
    CheckRegisterByte(RegisterType::B, 0x0F);
    CheckRegisterByte(RegisterType::C, 0xDF);
    CheckRegisterByte(RegisterType::D, 0xAB);
    CheckRegisterByte(RegisterType::E, 0xE4);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xE3);
    CheckRegisterByte(RegisterType::L, 0xB4);
    WriteRegisterWord(RegisterType::PC, 0x7662);
    WriteRegisterWord(RegisterType::SP, 0xC3DD);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7661, 0x40);
}

void test_40_000A()
{
    if (skip_test_40_000A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDF01);
    WriteRegisterWord(RegisterType::SP, 0x37A3);
    WriteRegisterByte(RegisterType::A, 0xF1);
    WriteRegisterByte(RegisterType::B, 0xD2);
    WriteRegisterByte(RegisterType::C, 0x0D);
    WriteRegisterByte(RegisterType::D, 0x52);
    WriteRegisterByte(RegisterType::E, 0xD1);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x4F);
    WriteRegisterByte(RegisterType::L, 0x2C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDF01, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF1);
    CheckRegisterByte(RegisterType::B, 0xD2);
    CheckRegisterByte(RegisterType::C, 0x0D);
    CheckRegisterByte(RegisterType::D, 0x52);
    CheckRegisterByte(RegisterType::E, 0xD1);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x4F);
    CheckRegisterByte(RegisterType::L, 0x2C);
    WriteRegisterWord(RegisterType::PC, 0xDF02);
    WriteRegisterWord(RegisterType::SP, 0x37A3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDF01, 0x40);
}

void test_40_000B()
{
    if (skip_test_40_000B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9D38);
    WriteRegisterWord(RegisterType::SP, 0x7AAE);
    WriteRegisterByte(RegisterType::A, 0x8C);
    WriteRegisterByte(RegisterType::B, 0x0F);
    WriteRegisterByte(RegisterType::C, 0x2C);
    WriteRegisterByte(RegisterType::D, 0x9D);
    WriteRegisterByte(RegisterType::E, 0x49);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x14);
    WriteRegisterByte(RegisterType::L, 0xFB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x9D38, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8C);
    CheckRegisterByte(RegisterType::B, 0x0F);
    CheckRegisterByte(RegisterType::C, 0x2C);
    CheckRegisterByte(RegisterType::D, 0x9D);
    CheckRegisterByte(RegisterType::E, 0x49);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x14);
    CheckRegisterByte(RegisterType::L, 0xFB);
    WriteRegisterWord(RegisterType::PC, 0x9D39);
    WriteRegisterWord(RegisterType::SP, 0x7AAE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9D38, 0x40);
}

void test_40_000C()
{
    if (skip_test_40_000C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x95ED);
    WriteRegisterWord(RegisterType::SP, 0x4ADF);
    WriteRegisterByte(RegisterType::A, 0x99);
    WriteRegisterByte(RegisterType::B, 0x3A);
    WriteRegisterByte(RegisterType::C, 0xF0);
    WriteRegisterByte(RegisterType::D, 0x26);
    WriteRegisterByte(RegisterType::E, 0xED);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x41);
    WriteRegisterByte(RegisterType::L, 0x1D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x95ED, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x99);
    CheckRegisterByte(RegisterType::B, 0x3A);
    CheckRegisterByte(RegisterType::C, 0xF0);
    CheckRegisterByte(RegisterType::D, 0x26);
    CheckRegisterByte(RegisterType::E, 0xED);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x41);
    CheckRegisterByte(RegisterType::L, 0x1D);
    WriteRegisterWord(RegisterType::PC, 0x95EE);
    WriteRegisterWord(RegisterType::SP, 0x4ADF);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x95ED, 0x40);
}

void test_40_000D()
{
    if (skip_test_40_000D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3037);
    WriteRegisterWord(RegisterType::SP, 0x7C85);
    WriteRegisterByte(RegisterType::A, 0x75);
    WriteRegisterByte(RegisterType::B, 0xE1);
    WriteRegisterByte(RegisterType::C, 0x3A);
    WriteRegisterByte(RegisterType::D, 0xDA);
    WriteRegisterByte(RegisterType::E, 0xF2);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xD1);
    WriteRegisterByte(RegisterType::L, 0x87);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3037, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x75);
    CheckRegisterByte(RegisterType::B, 0xE1);
    CheckRegisterByte(RegisterType::C, 0x3A);
    CheckRegisterByte(RegisterType::D, 0xDA);
    CheckRegisterByte(RegisterType::E, 0xF2);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xD1);
    CheckRegisterByte(RegisterType::L, 0x87);
    WriteRegisterWord(RegisterType::PC, 0x3038);
    WriteRegisterWord(RegisterType::SP, 0x7C85);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3037, 0x40);
}

void test_40_000E()
{
    if (skip_test_40_000E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAE39);
    WriteRegisterWord(RegisterType::SP, 0x8866);
    WriteRegisterByte(RegisterType::A, 0xBE);
    WriteRegisterByte(RegisterType::B, 0xA4);
    WriteRegisterByte(RegisterType::C, 0x35);
    WriteRegisterByte(RegisterType::D, 0x9B);
    WriteRegisterByte(RegisterType::E, 0x9B);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x3B);
    WriteRegisterByte(RegisterType::L, 0x51);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xAE39, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBE);
    CheckRegisterByte(RegisterType::B, 0xA4);
    CheckRegisterByte(RegisterType::C, 0x35);
    CheckRegisterByte(RegisterType::D, 0x9B);
    CheckRegisterByte(RegisterType::E, 0x9B);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x3B);
    CheckRegisterByte(RegisterType::L, 0x51);
    WriteRegisterWord(RegisterType::PC, 0xAE3A);
    WriteRegisterWord(RegisterType::SP, 0x8866);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAE39, 0x40);
}

void test_40_000F()
{
    if (skip_test_40_000F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3DE4);
    WriteRegisterWord(RegisterType::SP, 0x01A1);
    WriteRegisterByte(RegisterType::A, 0xDE);
    WriteRegisterByte(RegisterType::B, 0x3F);
    WriteRegisterByte(RegisterType::C, 0xAF);
    WriteRegisterByte(RegisterType::D, 0xC1);
    WriteRegisterByte(RegisterType::E, 0xC5);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x5C);
    WriteRegisterByte(RegisterType::L, 0xB7);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3DE4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDE);
    CheckRegisterByte(RegisterType::B, 0x3F);
    CheckRegisterByte(RegisterType::C, 0xAF);
    CheckRegisterByte(RegisterType::D, 0xC1);
    CheckRegisterByte(RegisterType::E, 0xC5);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x5C);
    CheckRegisterByte(RegisterType::L, 0xB7);
    WriteRegisterWord(RegisterType::PC, 0x3DE5);
    WriteRegisterWord(RegisterType::SP, 0x01A1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3DE4, 0x40);
}

void test_40_0010()
{
    if (skip_test_40_0010)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x355D);
    WriteRegisterWord(RegisterType::SP, 0x7396);
    WriteRegisterByte(RegisterType::A, 0xCC);
    WriteRegisterByte(RegisterType::B, 0xD4);
    WriteRegisterByte(RegisterType::C, 0xBC);
    WriteRegisterByte(RegisterType::D, 0xA8);
    WriteRegisterByte(RegisterType::E, 0x5F);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x79);
    WriteRegisterByte(RegisterType::L, 0x4F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x355D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCC);
    CheckRegisterByte(RegisterType::B, 0xD4);
    CheckRegisterByte(RegisterType::C, 0xBC);
    CheckRegisterByte(RegisterType::D, 0xA8);
    CheckRegisterByte(RegisterType::E, 0x5F);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x79);
    CheckRegisterByte(RegisterType::L, 0x4F);
    WriteRegisterWord(RegisterType::PC, 0x355E);
    WriteRegisterWord(RegisterType::SP, 0x7396);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x355D, 0x40);
}

void test_40_0011()
{
    if (skip_test_40_0011)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA502);
    WriteRegisterWord(RegisterType::SP, 0xE80A);
    WriteRegisterByte(RegisterType::A, 0x6A);
    WriteRegisterByte(RegisterType::B, 0xF5);
    WriteRegisterByte(RegisterType::C, 0x85);
    WriteRegisterByte(RegisterType::D, 0xBA);
    WriteRegisterByte(RegisterType::E, 0xE0);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x73);
    WriteRegisterByte(RegisterType::L, 0x46);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA502, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6A);
    CheckRegisterByte(RegisterType::B, 0xF5);
    CheckRegisterByte(RegisterType::C, 0x85);
    CheckRegisterByte(RegisterType::D, 0xBA);
    CheckRegisterByte(RegisterType::E, 0xE0);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x73);
    CheckRegisterByte(RegisterType::L, 0x46);
    WriteRegisterWord(RegisterType::PC, 0xA503);
    WriteRegisterWord(RegisterType::SP, 0xE80A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA502, 0x40);
}

void test_40_0012()
{
    if (skip_test_40_0012)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE76F);
    WriteRegisterWord(RegisterType::SP, 0xB1F1);
    WriteRegisterByte(RegisterType::A, 0x30);
    WriteRegisterByte(RegisterType::B, 0x89);
    WriteRegisterByte(RegisterType::C, 0x62);
    WriteRegisterByte(RegisterType::D, 0x2E);
    WriteRegisterByte(RegisterType::E, 0x51);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x00);
    WriteRegisterByte(RegisterType::L, 0x15);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE76F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x30);
    CheckRegisterByte(RegisterType::B, 0x89);
    CheckRegisterByte(RegisterType::C, 0x62);
    CheckRegisterByte(RegisterType::D, 0x2E);
    CheckRegisterByte(RegisterType::E, 0x51);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x00);
    CheckRegisterByte(RegisterType::L, 0x15);
    WriteRegisterWord(RegisterType::PC, 0xE770);
    WriteRegisterWord(RegisterType::SP, 0xB1F1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xE76F, 0x40);
}

void test_40_0013()
{
    if (skip_test_40_0013)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF949);
    WriteRegisterWord(RegisterType::SP, 0x47F2);
    WriteRegisterByte(RegisterType::A, 0x62);
    WriteRegisterByte(RegisterType::B, 0x52);
    WriteRegisterByte(RegisterType::C, 0x8E);
    WriteRegisterByte(RegisterType::D, 0x24);
    WriteRegisterByte(RegisterType::E, 0x3E);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x1B);
    WriteRegisterByte(RegisterType::L, 0x34);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF949, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x62);
    CheckRegisterByte(RegisterType::B, 0x52);
    CheckRegisterByte(RegisterType::C, 0x8E);
    CheckRegisterByte(RegisterType::D, 0x24);
    CheckRegisterByte(RegisterType::E, 0x3E);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x1B);
    CheckRegisterByte(RegisterType::L, 0x34);
    WriteRegisterWord(RegisterType::PC, 0xF94A);
    WriteRegisterWord(RegisterType::SP, 0x47F2);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF949, 0x40);
}

void test_40_0014()
{
    if (skip_test_40_0014)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDA5B);
    WriteRegisterWord(RegisterType::SP, 0x5CB4);
    WriteRegisterByte(RegisterType::A, 0x5E);
    WriteRegisterByte(RegisterType::B, 0x54);
    WriteRegisterByte(RegisterType::C, 0xDC);
    WriteRegisterByte(RegisterType::D, 0x13);
    WriteRegisterByte(RegisterType::E, 0x8F);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x3B);
    WriteRegisterByte(RegisterType::L, 0x6D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDA5B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5E);
    CheckRegisterByte(RegisterType::B, 0x54);
    CheckRegisterByte(RegisterType::C, 0xDC);
    CheckRegisterByte(RegisterType::D, 0x13);
    CheckRegisterByte(RegisterType::E, 0x8F);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x3B);
    CheckRegisterByte(RegisterType::L, 0x6D);
    WriteRegisterWord(RegisterType::PC, 0xDA5C);
    WriteRegisterWord(RegisterType::SP, 0x5CB4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xDA5B, 0x40);
}

void test_40_0015()
{
    if (skip_test_40_0015)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6D4C);
    WriteRegisterWord(RegisterType::SP, 0x7D8E);
    WriteRegisterByte(RegisterType::A, 0xCC);
    WriteRegisterByte(RegisterType::B, 0xEE);
    WriteRegisterByte(RegisterType::C, 0xB2);
    WriteRegisterByte(RegisterType::D, 0x0C);
    WriteRegisterByte(RegisterType::E, 0x0B);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xF2);
    WriteRegisterByte(RegisterType::L, 0xF3);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6D4C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCC);
    CheckRegisterByte(RegisterType::B, 0xEE);
    CheckRegisterByte(RegisterType::C, 0xB2);
    CheckRegisterByte(RegisterType::D, 0x0C);
    CheckRegisterByte(RegisterType::E, 0x0B);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xF2);
    CheckRegisterByte(RegisterType::L, 0xF3);
    WriteRegisterWord(RegisterType::PC, 0x6D4D);
    WriteRegisterWord(RegisterType::SP, 0x7D8E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6D4C, 0x40);
}

void test_40_0016()
{
    if (skip_test_40_0016)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE446);
    WriteRegisterWord(RegisterType::SP, 0xB0E4);
    WriteRegisterByte(RegisterType::A, 0xA5);
    WriteRegisterByte(RegisterType::B, 0xFE);
    WriteRegisterByte(RegisterType::C, 0x6F);
    WriteRegisterByte(RegisterType::D, 0x35);
    WriteRegisterByte(RegisterType::E, 0xA3);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x55);
    WriteRegisterByte(RegisterType::L, 0x9C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE446, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA5);
    CheckRegisterByte(RegisterType::B, 0xFE);
    CheckRegisterByte(RegisterType::C, 0x6F);
    CheckRegisterByte(RegisterType::D, 0x35);
    CheckRegisterByte(RegisterType::E, 0xA3);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x55);
    CheckRegisterByte(RegisterType::L, 0x9C);
    WriteRegisterWord(RegisterType::PC, 0xE447);
    WriteRegisterWord(RegisterType::SP, 0xB0E4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE446, 0x40);
}

void test_40_0017()
{
    if (skip_test_40_0017)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6E9C);
    WriteRegisterWord(RegisterType::SP, 0xE07A);
    WriteRegisterByte(RegisterType::A, 0x1A);
    WriteRegisterByte(RegisterType::B, 0xFF);
    WriteRegisterByte(RegisterType::C, 0x95);
    WriteRegisterByte(RegisterType::D, 0x73);
    WriteRegisterByte(RegisterType::E, 0x87);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xA6);
    WriteRegisterByte(RegisterType::L, 0x0F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6E9C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1A);
    CheckRegisterByte(RegisterType::B, 0xFF);
    CheckRegisterByte(RegisterType::C, 0x95);
    CheckRegisterByte(RegisterType::D, 0x73);
    CheckRegisterByte(RegisterType::E, 0x87);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xA6);
    CheckRegisterByte(RegisterType::L, 0x0F);
    WriteRegisterWord(RegisterType::PC, 0x6E9D);
    WriteRegisterWord(RegisterType::SP, 0xE07A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6E9C, 0x40);
}

void test_40_0018()
{
    if (skip_test_40_0018)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xED05);
    WriteRegisterWord(RegisterType::SP, 0xAF19);
    WriteRegisterByte(RegisterType::A, 0x68);
    WriteRegisterByte(RegisterType::B, 0xC5);
    WriteRegisterByte(RegisterType::C, 0xEE);
    WriteRegisterByte(RegisterType::D, 0xA2);
    WriteRegisterByte(RegisterType::E, 0x3C);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x0F);
    WriteRegisterByte(RegisterType::L, 0x4B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xED05, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x68);
    CheckRegisterByte(RegisterType::B, 0xC5);
    CheckRegisterByte(RegisterType::C, 0xEE);
    CheckRegisterByte(RegisterType::D, 0xA2);
    CheckRegisterByte(RegisterType::E, 0x3C);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x0F);
    CheckRegisterByte(RegisterType::L, 0x4B);
    WriteRegisterWord(RegisterType::PC, 0xED06);
    WriteRegisterWord(RegisterType::SP, 0xAF19);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xED05, 0x40);
}

void test_40_0019()
{
    if (skip_test_40_0019)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFD9E);
    WriteRegisterWord(RegisterType::SP, 0x0989);
    WriteRegisterByte(RegisterType::A, 0x7B);
    WriteRegisterByte(RegisterType::B, 0x75);
    WriteRegisterByte(RegisterType::C, 0x6D);
    WriteRegisterByte(RegisterType::D, 0x0B);
    WriteRegisterByte(RegisterType::E, 0xE4);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xF1);
    WriteRegisterByte(RegisterType::L, 0x69);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFD9E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7B);
    CheckRegisterByte(RegisterType::B, 0x75);
    CheckRegisterByte(RegisterType::C, 0x6D);
    CheckRegisterByte(RegisterType::D, 0x0B);
    CheckRegisterByte(RegisterType::E, 0xE4);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xF1);
    CheckRegisterByte(RegisterType::L, 0x69);
    WriteRegisterWord(RegisterType::PC, 0xFD9F);
    WriteRegisterWord(RegisterType::SP, 0x0989);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFD9E, 0x40);
}

void test_40_001A()
{
    if (skip_test_40_001A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3EC3);
    WriteRegisterWord(RegisterType::SP, 0x6216);
    WriteRegisterByte(RegisterType::A, 0x78);
    WriteRegisterByte(RegisterType::B, 0x18);
    WriteRegisterByte(RegisterType::C, 0x4A);
    WriteRegisterByte(RegisterType::D, 0x1B);
    WriteRegisterByte(RegisterType::E, 0xE5);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xC5);
    WriteRegisterByte(RegisterType::L, 0x53);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3EC3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x78);
    CheckRegisterByte(RegisterType::B, 0x18);
    CheckRegisterByte(RegisterType::C, 0x4A);
    CheckRegisterByte(RegisterType::D, 0x1B);
    CheckRegisterByte(RegisterType::E, 0xE5);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xC5);
    CheckRegisterByte(RegisterType::L, 0x53);
    WriteRegisterWord(RegisterType::PC, 0x3EC4);
    WriteRegisterWord(RegisterType::SP, 0x6216);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3EC3, 0x40);
}

void test_40_001B()
{
    if (skip_test_40_001B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x86A5);
    WriteRegisterWord(RegisterType::SP, 0x276F);
    WriteRegisterByte(RegisterType::A, 0x12);
    WriteRegisterByte(RegisterType::B, 0xC4);
    WriteRegisterByte(RegisterType::C, 0x6E);
    WriteRegisterByte(RegisterType::D, 0xFE);
    WriteRegisterByte(RegisterType::E, 0xC4);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xB0);
    WriteRegisterByte(RegisterType::L, 0x2A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x86A5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x12);
    CheckRegisterByte(RegisterType::B, 0xC4);
    CheckRegisterByte(RegisterType::C, 0x6E);
    CheckRegisterByte(RegisterType::D, 0xFE);
    CheckRegisterByte(RegisterType::E, 0xC4);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xB0);
    CheckRegisterByte(RegisterType::L, 0x2A);
    WriteRegisterWord(RegisterType::PC, 0x86A6);
    WriteRegisterWord(RegisterType::SP, 0x276F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x86A5, 0x40);
}

void test_40_001C()
{
    if (skip_test_40_001C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAF6A);
    WriteRegisterWord(RegisterType::SP, 0xE51A);
    WriteRegisterByte(RegisterType::A, 0xB1);
    WriteRegisterByte(RegisterType::B, 0x3A);
    WriteRegisterByte(RegisterType::C, 0x5A);
    WriteRegisterByte(RegisterType::D, 0xCB);
    WriteRegisterByte(RegisterType::E, 0xCE);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x0E);
    WriteRegisterByte(RegisterType::L, 0xFB);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xAF6A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB1);
    CheckRegisterByte(RegisterType::B, 0x3A);
    CheckRegisterByte(RegisterType::C, 0x5A);
    CheckRegisterByte(RegisterType::D, 0xCB);
    CheckRegisterByte(RegisterType::E, 0xCE);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x0E);
    CheckRegisterByte(RegisterType::L, 0xFB);
    WriteRegisterWord(RegisterType::PC, 0xAF6B);
    WriteRegisterWord(RegisterType::SP, 0xE51A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xAF6A, 0x40);
}

void test_40_001D()
{
    if (skip_test_40_001D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x736E);
    WriteRegisterWord(RegisterType::SP, 0xFD16);
    WriteRegisterByte(RegisterType::A, 0x33);
    WriteRegisterByte(RegisterType::B, 0x65);
    WriteRegisterByte(RegisterType::C, 0xEF);
    WriteRegisterByte(RegisterType::D, 0xAA);
    WriteRegisterByte(RegisterType::E, 0x4B);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x82);
    WriteRegisterByte(RegisterType::L, 0x1D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x736E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x33);
    CheckRegisterByte(RegisterType::B, 0x65);
    CheckRegisterByte(RegisterType::C, 0xEF);
    CheckRegisterByte(RegisterType::D, 0xAA);
    CheckRegisterByte(RegisterType::E, 0x4B);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x82);
    CheckRegisterByte(RegisterType::L, 0x1D);
    WriteRegisterWord(RegisterType::PC, 0x736F);
    WriteRegisterWord(RegisterType::SP, 0xFD16);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x736E, 0x40);
}

void test_40_001E()
{
    if (skip_test_40_001E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0630);
    WriteRegisterWord(RegisterType::SP, 0x0BAA);
    WriteRegisterByte(RegisterType::A, 0x32);
    WriteRegisterByte(RegisterType::B, 0x54);
    WriteRegisterByte(RegisterType::C, 0xE0);
    WriteRegisterByte(RegisterType::D, 0x3E);
    WriteRegisterByte(RegisterType::E, 0x34);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x23);
    WriteRegisterByte(RegisterType::L, 0x52);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0630, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x32);
    CheckRegisterByte(RegisterType::B, 0x54);
    CheckRegisterByte(RegisterType::C, 0xE0);
    CheckRegisterByte(RegisterType::D, 0x3E);
    CheckRegisterByte(RegisterType::E, 0x34);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x23);
    CheckRegisterByte(RegisterType::L, 0x52);
    WriteRegisterWord(RegisterType::PC, 0x0631);
    WriteRegisterWord(RegisterType::SP, 0x0BAA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0630, 0x40);
}

void test_40_001F()
{
    if (skip_test_40_001F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7295);
    WriteRegisterWord(RegisterType::SP, 0x037A);
    WriteRegisterByte(RegisterType::A, 0x4B);
    WriteRegisterByte(RegisterType::B, 0xA7);
    WriteRegisterByte(RegisterType::C, 0x76);
    WriteRegisterByte(RegisterType::D, 0xAB);
    WriteRegisterByte(RegisterType::E, 0xB1);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x79);
    WriteRegisterByte(RegisterType::L, 0x9F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7295, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4B);
    CheckRegisterByte(RegisterType::B, 0xA7);
    CheckRegisterByte(RegisterType::C, 0x76);
    CheckRegisterByte(RegisterType::D, 0xAB);
    CheckRegisterByte(RegisterType::E, 0xB1);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x79);
    CheckRegisterByte(RegisterType::L, 0x9F);
    WriteRegisterWord(RegisterType::PC, 0x7296);
    WriteRegisterWord(RegisterType::SP, 0x037A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7295, 0x40);
}

void test_40_0020()
{
    if (skip_test_40_0020)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8096);
    WriteRegisterWord(RegisterType::SP, 0x8373);
    WriteRegisterByte(RegisterType::A, 0xA9);
    WriteRegisterByte(RegisterType::B, 0x4B);
    WriteRegisterByte(RegisterType::C, 0xC2);
    WriteRegisterByte(RegisterType::D, 0x8F);
    WriteRegisterByte(RegisterType::E, 0xBA);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xD5);
    WriteRegisterByte(RegisterType::L, 0x8B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8096, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA9);
    CheckRegisterByte(RegisterType::B, 0x4B);
    CheckRegisterByte(RegisterType::C, 0xC2);
    CheckRegisterByte(RegisterType::D, 0x8F);
    CheckRegisterByte(RegisterType::E, 0xBA);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xD5);
    CheckRegisterByte(RegisterType::L, 0x8B);
    WriteRegisterWord(RegisterType::PC, 0x8097);
    WriteRegisterWord(RegisterType::SP, 0x8373);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8096, 0x40);
}

void test_40_0021()
{
    if (skip_test_40_0021)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB047);
    WriteRegisterWord(RegisterType::SP, 0x50C5);
    WriteRegisterByte(RegisterType::A, 0x79);
    WriteRegisterByte(RegisterType::B, 0x6D);
    WriteRegisterByte(RegisterType::C, 0x05);
    WriteRegisterByte(RegisterType::D, 0x08);
    WriteRegisterByte(RegisterType::E, 0x9E);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xB1);
    WriteRegisterByte(RegisterType::L, 0x6B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB047, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x79);
    CheckRegisterByte(RegisterType::B, 0x6D);
    CheckRegisterByte(RegisterType::C, 0x05);
    CheckRegisterByte(RegisterType::D, 0x08);
    CheckRegisterByte(RegisterType::E, 0x9E);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xB1);
    CheckRegisterByte(RegisterType::L, 0x6B);
    WriteRegisterWord(RegisterType::PC, 0xB048);
    WriteRegisterWord(RegisterType::SP, 0x50C5);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB047, 0x40);
}

void test_40_0022()
{
    if (skip_test_40_0022)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x82C0);
    WriteRegisterWord(RegisterType::SP, 0xFF3D);
    WriteRegisterByte(RegisterType::A, 0x59);
    WriteRegisterByte(RegisterType::B, 0x3B);
    WriteRegisterByte(RegisterType::C, 0x6D);
    WriteRegisterByte(RegisterType::D, 0x69);
    WriteRegisterByte(RegisterType::E, 0xC7);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x91);
    WriteRegisterByte(RegisterType::L, 0xF4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x82C0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x59);
    CheckRegisterByte(RegisterType::B, 0x3B);
    CheckRegisterByte(RegisterType::C, 0x6D);
    CheckRegisterByte(RegisterType::D, 0x69);
    CheckRegisterByte(RegisterType::E, 0xC7);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x91);
    CheckRegisterByte(RegisterType::L, 0xF4);
    WriteRegisterWord(RegisterType::PC, 0x82C1);
    WriteRegisterWord(RegisterType::SP, 0xFF3D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x82C0, 0x40);
}

void test_40_0023()
{
    if (skip_test_40_0023)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5778);
    WriteRegisterWord(RegisterType::SP, 0x6D2A);
    WriteRegisterByte(RegisterType::A, 0x8B);
    WriteRegisterByte(RegisterType::B, 0xD9);
    WriteRegisterByte(RegisterType::C, 0x0E);
    WriteRegisterByte(RegisterType::D, 0xC4);
    WriteRegisterByte(RegisterType::E, 0x9D);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xA4);
    WriteRegisterByte(RegisterType::L, 0xD1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5778, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8B);
    CheckRegisterByte(RegisterType::B, 0xD9);
    CheckRegisterByte(RegisterType::C, 0x0E);
    CheckRegisterByte(RegisterType::D, 0xC4);
    CheckRegisterByte(RegisterType::E, 0x9D);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xA4);
    CheckRegisterByte(RegisterType::L, 0xD1);
    WriteRegisterWord(RegisterType::PC, 0x5779);
    WriteRegisterWord(RegisterType::SP, 0x6D2A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5778, 0x40);
}

void test_40_0024()
{
    if (skip_test_40_0024)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC6E4);
    WriteRegisterWord(RegisterType::SP, 0xA72E);
    WriteRegisterByte(RegisterType::A, 0xF9);
    WriteRegisterByte(RegisterType::B, 0xAD);
    WriteRegisterByte(RegisterType::C, 0xF3);
    WriteRegisterByte(RegisterType::D, 0x71);
    WriteRegisterByte(RegisterType::E, 0x78);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xD0);
    WriteRegisterByte(RegisterType::L, 0x66);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC6E4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF9);
    CheckRegisterByte(RegisterType::B, 0xAD);
    CheckRegisterByte(RegisterType::C, 0xF3);
    CheckRegisterByte(RegisterType::D, 0x71);
    CheckRegisterByte(RegisterType::E, 0x78);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xD0);
    CheckRegisterByte(RegisterType::L, 0x66);
    WriteRegisterWord(RegisterType::PC, 0xC6E5);
    WriteRegisterWord(RegisterType::SP, 0xA72E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC6E4, 0x40);
}

void test_40_0025()
{
    if (skip_test_40_0025)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x10E2);
    WriteRegisterWord(RegisterType::SP, 0xB9CC);
    WriteRegisterByte(RegisterType::A, 0x42);
    WriteRegisterByte(RegisterType::B, 0x43);
    WriteRegisterByte(RegisterType::C, 0xE6);
    WriteRegisterByte(RegisterType::D, 0xDC);
    WriteRegisterByte(RegisterType::E, 0x15);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x8D);
    WriteRegisterByte(RegisterType::L, 0x10);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x10E2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x42);
    CheckRegisterByte(RegisterType::B, 0x43);
    CheckRegisterByte(RegisterType::C, 0xE6);
    CheckRegisterByte(RegisterType::D, 0xDC);
    CheckRegisterByte(RegisterType::E, 0x15);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x8D);
    CheckRegisterByte(RegisterType::L, 0x10);
    WriteRegisterWord(RegisterType::PC, 0x10E3);
    WriteRegisterWord(RegisterType::SP, 0xB9CC);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x10E2, 0x40);
}

void test_40_0026()
{
    if (skip_test_40_0026)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3A62);
    WriteRegisterWord(RegisterType::SP, 0xD210);
    WriteRegisterByte(RegisterType::A, 0x9D);
    WriteRegisterByte(RegisterType::B, 0xCC);
    WriteRegisterByte(RegisterType::C, 0x06);
    WriteRegisterByte(RegisterType::D, 0x5E);
    WriteRegisterByte(RegisterType::E, 0x5F);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xD2);
    WriteRegisterByte(RegisterType::L, 0xF7);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3A62, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9D);
    CheckRegisterByte(RegisterType::B, 0xCC);
    CheckRegisterByte(RegisterType::C, 0x06);
    CheckRegisterByte(RegisterType::D, 0x5E);
    CheckRegisterByte(RegisterType::E, 0x5F);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xD2);
    CheckRegisterByte(RegisterType::L, 0xF7);
    WriteRegisterWord(RegisterType::PC, 0x3A63);
    WriteRegisterWord(RegisterType::SP, 0xD210);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3A62, 0x40);
}

void test_40_0027()
{
    if (skip_test_40_0027)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE686);
    WriteRegisterWord(RegisterType::SP, 0x6D3D);
    WriteRegisterByte(RegisterType::A, 0x01);
    WriteRegisterByte(RegisterType::B, 0x6D);
    WriteRegisterByte(RegisterType::C, 0x3A);
    WriteRegisterByte(RegisterType::D, 0xF3);
    WriteRegisterByte(RegisterType::E, 0xB8);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xF2);
    WriteRegisterByte(RegisterType::L, 0x0C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE686, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x01);
    CheckRegisterByte(RegisterType::B, 0x6D);
    CheckRegisterByte(RegisterType::C, 0x3A);
    CheckRegisterByte(RegisterType::D, 0xF3);
    CheckRegisterByte(RegisterType::E, 0xB8);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xF2);
    CheckRegisterByte(RegisterType::L, 0x0C);
    WriteRegisterWord(RegisterType::PC, 0xE687);
    WriteRegisterWord(RegisterType::SP, 0x6D3D);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xE686, 0x40);
}

void test_40_0028()
{
    if (skip_test_40_0028)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8F33);
    WriteRegisterWord(RegisterType::SP, 0x28AB);
    WriteRegisterByte(RegisterType::A, 0x51);
    WriteRegisterByte(RegisterType::B, 0x19);
    WriteRegisterByte(RegisterType::C, 0xAA);
    WriteRegisterByte(RegisterType::D, 0xA3);
    WriteRegisterByte(RegisterType::E, 0x47);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x79);
    WriteRegisterByte(RegisterType::L, 0x1F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8F33, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x51);
    CheckRegisterByte(RegisterType::B, 0x19);
    CheckRegisterByte(RegisterType::C, 0xAA);
    CheckRegisterByte(RegisterType::D, 0xA3);
    CheckRegisterByte(RegisterType::E, 0x47);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x79);
    CheckRegisterByte(RegisterType::L, 0x1F);
    WriteRegisterWord(RegisterType::PC, 0x8F34);
    WriteRegisterWord(RegisterType::SP, 0x28AB);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8F33, 0x40);
}

void test_40_0029()
{
    if (skip_test_40_0029)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x80BB);
    WriteRegisterWord(RegisterType::SP, 0x2ED8);
    WriteRegisterByte(RegisterType::A, 0xC3);
    WriteRegisterByte(RegisterType::B, 0xEF);
    WriteRegisterByte(RegisterType::C, 0xDC);
    WriteRegisterByte(RegisterType::D, 0x71);
    WriteRegisterByte(RegisterType::E, 0x7B);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x41);
    WriteRegisterByte(RegisterType::L, 0xAB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x80BB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC3);
    CheckRegisterByte(RegisterType::B, 0xEF);
    CheckRegisterByte(RegisterType::C, 0xDC);
    CheckRegisterByte(RegisterType::D, 0x71);
    CheckRegisterByte(RegisterType::E, 0x7B);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x41);
    CheckRegisterByte(RegisterType::L, 0xAB);
    WriteRegisterWord(RegisterType::PC, 0x80BC);
    WriteRegisterWord(RegisterType::SP, 0x2ED8);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x80BB, 0x40);
}

void test_40_002A()
{
    if (skip_test_40_002A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB27E);
    WriteRegisterWord(RegisterType::SP, 0x11F1);
    WriteRegisterByte(RegisterType::A, 0x51);
    WriteRegisterByte(RegisterType::B, 0xAD);
    WriteRegisterByte(RegisterType::C, 0x80);
    WriteRegisterByte(RegisterType::D, 0x6A);
    WriteRegisterByte(RegisterType::E, 0xBD);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x25);
    WriteRegisterByte(RegisterType::L, 0x59);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB27E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x51);
    CheckRegisterByte(RegisterType::B, 0xAD);
    CheckRegisterByte(RegisterType::C, 0x80);
    CheckRegisterByte(RegisterType::D, 0x6A);
    CheckRegisterByte(RegisterType::E, 0xBD);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x25);
    CheckRegisterByte(RegisterType::L, 0x59);
    WriteRegisterWord(RegisterType::PC, 0xB27F);
    WriteRegisterWord(RegisterType::SP, 0x11F1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB27E, 0x40);
}

void test_40_002B()
{
    if (skip_test_40_002B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x674C);
    WriteRegisterWord(RegisterType::SP, 0xF323);
    WriteRegisterByte(RegisterType::A, 0x07);
    WriteRegisterByte(RegisterType::B, 0xD7);
    WriteRegisterByte(RegisterType::C, 0x4E);
    WriteRegisterByte(RegisterType::D, 0xD5);
    WriteRegisterByte(RegisterType::E, 0x50);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x3D);
    WriteRegisterByte(RegisterType::L, 0xFE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x674C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x07);
    CheckRegisterByte(RegisterType::B, 0xD7);
    CheckRegisterByte(RegisterType::C, 0x4E);
    CheckRegisterByte(RegisterType::D, 0xD5);
    CheckRegisterByte(RegisterType::E, 0x50);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x3D);
    CheckRegisterByte(RegisterType::L, 0xFE);
    WriteRegisterWord(RegisterType::PC, 0x674D);
    WriteRegisterWord(RegisterType::SP, 0xF323);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x674C, 0x40);
}

void test_40_002C()
{
    if (skip_test_40_002C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFC63);
    WriteRegisterWord(RegisterType::SP, 0xE768);
    WriteRegisterByte(RegisterType::A, 0x9C);
    WriteRegisterByte(RegisterType::B, 0x81);
    WriteRegisterByte(RegisterType::C, 0x18);
    WriteRegisterByte(RegisterType::D, 0x5C);
    WriteRegisterByte(RegisterType::E, 0xD1);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x78);
    WriteRegisterByte(RegisterType::L, 0xF0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFC63, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9C);
    CheckRegisterByte(RegisterType::B, 0x81);
    CheckRegisterByte(RegisterType::C, 0x18);
    CheckRegisterByte(RegisterType::D, 0x5C);
    CheckRegisterByte(RegisterType::E, 0xD1);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x78);
    CheckRegisterByte(RegisterType::L, 0xF0);
    WriteRegisterWord(RegisterType::PC, 0xFC64);
    WriteRegisterWord(RegisterType::SP, 0xE768);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFC63, 0x40);
}

void test_40_002D()
{
    if (skip_test_40_002D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF304);
    WriteRegisterWord(RegisterType::SP, 0xA207);
    WriteRegisterByte(RegisterType::A, 0x8C);
    WriteRegisterByte(RegisterType::B, 0x9F);
    WriteRegisterByte(RegisterType::C, 0x68);
    WriteRegisterByte(RegisterType::D, 0xC2);
    WriteRegisterByte(RegisterType::E, 0x2C);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x35);
    WriteRegisterByte(RegisterType::L, 0x0F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF304, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8C);
    CheckRegisterByte(RegisterType::B, 0x9F);
    CheckRegisterByte(RegisterType::C, 0x68);
    CheckRegisterByte(RegisterType::D, 0xC2);
    CheckRegisterByte(RegisterType::E, 0x2C);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x35);
    CheckRegisterByte(RegisterType::L, 0x0F);
    WriteRegisterWord(RegisterType::PC, 0xF305);
    WriteRegisterWord(RegisterType::SP, 0xA207);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF304, 0x40);
}

void test_40_002E()
{
    if (skip_test_40_002E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEB6D);
    WriteRegisterWord(RegisterType::SP, 0x25A8);
    WriteRegisterByte(RegisterType::A, 0xA6);
    WriteRegisterByte(RegisterType::B, 0xD5);
    WriteRegisterByte(RegisterType::C, 0x18);
    WriteRegisterByte(RegisterType::D, 0x9A);
    WriteRegisterByte(RegisterType::E, 0x3B);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x64);
    WriteRegisterByte(RegisterType::L, 0xD8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xEB6D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA6);
    CheckRegisterByte(RegisterType::B, 0xD5);
    CheckRegisterByte(RegisterType::C, 0x18);
    CheckRegisterByte(RegisterType::D, 0x9A);
    CheckRegisterByte(RegisterType::E, 0x3B);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x64);
    CheckRegisterByte(RegisterType::L, 0xD8);
    WriteRegisterWord(RegisterType::PC, 0xEB6E);
    WriteRegisterWord(RegisterType::SP, 0x25A8);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xEB6D, 0x40);
}

void test_40_002F()
{
    if (skip_test_40_002F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8E1B);
    WriteRegisterWord(RegisterType::SP, 0xC041);
    WriteRegisterByte(RegisterType::A, 0xAE);
    WriteRegisterByte(RegisterType::B, 0x34);
    WriteRegisterByte(RegisterType::C, 0x9A);
    WriteRegisterByte(RegisterType::D, 0xF5);
    WriteRegisterByte(RegisterType::E, 0x83);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x91);
    WriteRegisterByte(RegisterType::L, 0x85);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8E1B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAE);
    CheckRegisterByte(RegisterType::B, 0x34);
    CheckRegisterByte(RegisterType::C, 0x9A);
    CheckRegisterByte(RegisterType::D, 0xF5);
    CheckRegisterByte(RegisterType::E, 0x83);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x91);
    CheckRegisterByte(RegisterType::L, 0x85);
    WriteRegisterWord(RegisterType::PC, 0x8E1C);
    WriteRegisterWord(RegisterType::SP, 0xC041);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8E1B, 0x40);
}

void test_40_0030()
{
    if (skip_test_40_0030)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2E75);
    WriteRegisterWord(RegisterType::SP, 0x4D13);
    WriteRegisterByte(RegisterType::A, 0xC1);
    WriteRegisterByte(RegisterType::B, 0x09);
    WriteRegisterByte(RegisterType::C, 0x73);
    WriteRegisterByte(RegisterType::D, 0x79);
    WriteRegisterByte(RegisterType::E, 0x51);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xCB);
    WriteRegisterByte(RegisterType::L, 0x97);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2E75, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC1);
    CheckRegisterByte(RegisterType::B, 0x09);
    CheckRegisterByte(RegisterType::C, 0x73);
    CheckRegisterByte(RegisterType::D, 0x79);
    CheckRegisterByte(RegisterType::E, 0x51);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xCB);
    CheckRegisterByte(RegisterType::L, 0x97);
    WriteRegisterWord(RegisterType::PC, 0x2E76);
    WriteRegisterWord(RegisterType::SP, 0x4D13);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2E75, 0x40);
}

void test_40_0031()
{
    if (skip_test_40_0031)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA610);
    WriteRegisterWord(RegisterType::SP, 0x1C62);
    WriteRegisterByte(RegisterType::A, 0x51);
    WriteRegisterByte(RegisterType::B, 0x12);
    WriteRegisterByte(RegisterType::C, 0xAE);
    WriteRegisterByte(RegisterType::D, 0x54);
    WriteRegisterByte(RegisterType::E, 0x25);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x71);
    WriteRegisterByte(RegisterType::L, 0x04);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA610, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x51);
    CheckRegisterByte(RegisterType::B, 0x12);
    CheckRegisterByte(RegisterType::C, 0xAE);
    CheckRegisterByte(RegisterType::D, 0x54);
    CheckRegisterByte(RegisterType::E, 0x25);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x71);
    CheckRegisterByte(RegisterType::L, 0x04);
    WriteRegisterWord(RegisterType::PC, 0xA611);
    WriteRegisterWord(RegisterType::SP, 0x1C62);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA610, 0x40);
}

void test_40_0032()
{
    if (skip_test_40_0032)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3224);
    WriteRegisterWord(RegisterType::SP, 0xE110);
    WriteRegisterByte(RegisterType::A, 0x95);
    WriteRegisterByte(RegisterType::B, 0x26);
    WriteRegisterByte(RegisterType::C, 0x17);
    WriteRegisterByte(RegisterType::D, 0xD5);
    WriteRegisterByte(RegisterType::E, 0x2D);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xEC);
    WriteRegisterByte(RegisterType::L, 0xF0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3224, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x95);
    CheckRegisterByte(RegisterType::B, 0x26);
    CheckRegisterByte(RegisterType::C, 0x17);
    CheckRegisterByte(RegisterType::D, 0xD5);
    CheckRegisterByte(RegisterType::E, 0x2D);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xEC);
    CheckRegisterByte(RegisterType::L, 0xF0);
    WriteRegisterWord(RegisterType::PC, 0x3225);
    WriteRegisterWord(RegisterType::SP, 0xE110);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3224, 0x40);
}

void test_40_0033()
{
    if (skip_test_40_0033)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC2BC);
    WriteRegisterWord(RegisterType::SP, 0x2DF6);
    WriteRegisterByte(RegisterType::A, 0x2E);
    WriteRegisterByte(RegisterType::B, 0x0D);
    WriteRegisterByte(RegisterType::C, 0xA3);
    WriteRegisterByte(RegisterType::D, 0x7E);
    WriteRegisterByte(RegisterType::E, 0x33);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xD6);
    WriteRegisterByte(RegisterType::L, 0xE7);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC2BC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2E);
    CheckRegisterByte(RegisterType::B, 0x0D);
    CheckRegisterByte(RegisterType::C, 0xA3);
    CheckRegisterByte(RegisterType::D, 0x7E);
    CheckRegisterByte(RegisterType::E, 0x33);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xD6);
    CheckRegisterByte(RegisterType::L, 0xE7);
    WriteRegisterWord(RegisterType::PC, 0xC2BD);
    WriteRegisterWord(RegisterType::SP, 0x2DF6);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC2BC, 0x40);
}

void test_40_0034()
{
    if (skip_test_40_0034)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFC94);
    WriteRegisterWord(RegisterType::SP, 0x0C77);
    WriteRegisterByte(RegisterType::A, 0x94);
    WriteRegisterByte(RegisterType::B, 0x01);
    WriteRegisterByte(RegisterType::C, 0xF9);
    WriteRegisterByte(RegisterType::D, 0xAF);
    WriteRegisterByte(RegisterType::E, 0x97);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xA4);
    WriteRegisterByte(RegisterType::L, 0x3B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFC94, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x94);
    CheckRegisterByte(RegisterType::B, 0x01);
    CheckRegisterByte(RegisterType::C, 0xF9);
    CheckRegisterByte(RegisterType::D, 0xAF);
    CheckRegisterByte(RegisterType::E, 0x97);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xA4);
    CheckRegisterByte(RegisterType::L, 0x3B);
    WriteRegisterWord(RegisterType::PC, 0xFC95);
    WriteRegisterWord(RegisterType::SP, 0x0C77);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFC94, 0x40);
}

void test_40_0035()
{
    if (skip_test_40_0035)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8027);
    WriteRegisterWord(RegisterType::SP, 0xB67E);
    WriteRegisterByte(RegisterType::A, 0xA1);
    WriteRegisterByte(RegisterType::B, 0x45);
    WriteRegisterByte(RegisterType::C, 0xE4);
    WriteRegisterByte(RegisterType::D, 0xEA);
    WriteRegisterByte(RegisterType::E, 0xA2);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x1F);
    WriteRegisterByte(RegisterType::L, 0x8B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8027, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA1);
    CheckRegisterByte(RegisterType::B, 0x45);
    CheckRegisterByte(RegisterType::C, 0xE4);
    CheckRegisterByte(RegisterType::D, 0xEA);
    CheckRegisterByte(RegisterType::E, 0xA2);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x1F);
    CheckRegisterByte(RegisterType::L, 0x8B);
    WriteRegisterWord(RegisterType::PC, 0x8028);
    WriteRegisterWord(RegisterType::SP, 0xB67E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8027, 0x40);
}

void test_40_0036()
{
    if (skip_test_40_0036)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1C02);
    WriteRegisterWord(RegisterType::SP, 0xBD6A);
    WriteRegisterByte(RegisterType::A, 0x64);
    WriteRegisterByte(RegisterType::B, 0xC7);
    WriteRegisterByte(RegisterType::C, 0xC2);
    WriteRegisterByte(RegisterType::D, 0x1D);
    WriteRegisterByte(RegisterType::E, 0xCA);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x6D);
    WriteRegisterByte(RegisterType::L, 0xC1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1C02, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x64);
    CheckRegisterByte(RegisterType::B, 0xC7);
    CheckRegisterByte(RegisterType::C, 0xC2);
    CheckRegisterByte(RegisterType::D, 0x1D);
    CheckRegisterByte(RegisterType::E, 0xCA);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x6D);
    CheckRegisterByte(RegisterType::L, 0xC1);
    WriteRegisterWord(RegisterType::PC, 0x1C03);
    WriteRegisterWord(RegisterType::SP, 0xBD6A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1C02, 0x40);
}

void test_40_0037()
{
    if (skip_test_40_0037)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7B15);
    WriteRegisterWord(RegisterType::SP, 0xC48C);
    WriteRegisterByte(RegisterType::A, 0x47);
    WriteRegisterByte(RegisterType::B, 0x22);
    WriteRegisterByte(RegisterType::C, 0xF3);
    WriteRegisterByte(RegisterType::D, 0x4B);
    WriteRegisterByte(RegisterType::E, 0xC7);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x46);
    WriteRegisterByte(RegisterType::L, 0xF2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7B15, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x47);
    CheckRegisterByte(RegisterType::B, 0x22);
    CheckRegisterByte(RegisterType::C, 0xF3);
    CheckRegisterByte(RegisterType::D, 0x4B);
    CheckRegisterByte(RegisterType::E, 0xC7);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x46);
    CheckRegisterByte(RegisterType::L, 0xF2);
    WriteRegisterWord(RegisterType::PC, 0x7B16);
    WriteRegisterWord(RegisterType::SP, 0xC48C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7B15, 0x40);
}

void test_40_0038()
{
    if (skip_test_40_0038)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x32D3);
    WriteRegisterWord(RegisterType::SP, 0x57CE);
    WriteRegisterByte(RegisterType::A, 0x46);
    WriteRegisterByte(RegisterType::B, 0xF8);
    WriteRegisterByte(RegisterType::C, 0x3F);
    WriteRegisterByte(RegisterType::D, 0x67);
    WriteRegisterByte(RegisterType::E, 0xB1);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x0C);
    WriteRegisterByte(RegisterType::L, 0xCB);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x32D3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x46);
    CheckRegisterByte(RegisterType::B, 0xF8);
    CheckRegisterByte(RegisterType::C, 0x3F);
    CheckRegisterByte(RegisterType::D, 0x67);
    CheckRegisterByte(RegisterType::E, 0xB1);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x0C);
    CheckRegisterByte(RegisterType::L, 0xCB);
    WriteRegisterWord(RegisterType::PC, 0x32D4);
    WriteRegisterWord(RegisterType::SP, 0x57CE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x32D3, 0x40);
}

void test_40_0039()
{
    if (skip_test_40_0039)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3E05);
    WriteRegisterWord(RegisterType::SP, 0x7988);
    WriteRegisterByte(RegisterType::A, 0x1C);
    WriteRegisterByte(RegisterType::B, 0x53);
    WriteRegisterByte(RegisterType::C, 0x22);
    WriteRegisterByte(RegisterType::D, 0x5E);
    WriteRegisterByte(RegisterType::E, 0xD4);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x4E);
    WriteRegisterByte(RegisterType::L, 0x47);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3E05, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1C);
    CheckRegisterByte(RegisterType::B, 0x53);
    CheckRegisterByte(RegisterType::C, 0x22);
    CheckRegisterByte(RegisterType::D, 0x5E);
    CheckRegisterByte(RegisterType::E, 0xD4);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x4E);
    CheckRegisterByte(RegisterType::L, 0x47);
    WriteRegisterWord(RegisterType::PC, 0x3E06);
    WriteRegisterWord(RegisterType::SP, 0x7988);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3E05, 0x40);
}

void test_40_003A()
{
    if (skip_test_40_003A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5D4C);
    WriteRegisterWord(RegisterType::SP, 0x0B48);
    WriteRegisterByte(RegisterType::A, 0x71);
    WriteRegisterByte(RegisterType::B, 0x02);
    WriteRegisterByte(RegisterType::C, 0x9C);
    WriteRegisterByte(RegisterType::D, 0x7D);
    WriteRegisterByte(RegisterType::E, 0x5E);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xC4);
    WriteRegisterByte(RegisterType::L, 0x10);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5D4C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x71);
    CheckRegisterByte(RegisterType::B, 0x02);
    CheckRegisterByte(RegisterType::C, 0x9C);
    CheckRegisterByte(RegisterType::D, 0x7D);
    CheckRegisterByte(RegisterType::E, 0x5E);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xC4);
    CheckRegisterByte(RegisterType::L, 0x10);
    WriteRegisterWord(RegisterType::PC, 0x5D4D);
    WriteRegisterWord(RegisterType::SP, 0x0B48);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5D4C, 0x40);
}

void test_40_003B()
{
    if (skip_test_40_003B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC02E);
    WriteRegisterWord(RegisterType::SP, 0x997E);
    WriteRegisterByte(RegisterType::A, 0x99);
    WriteRegisterByte(RegisterType::B, 0xE4);
    WriteRegisterByte(RegisterType::C, 0xAE);
    WriteRegisterByte(RegisterType::D, 0x4D);
    WriteRegisterByte(RegisterType::E, 0x87);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xFA);
    WriteRegisterByte(RegisterType::L, 0x1F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC02E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x99);
    CheckRegisterByte(RegisterType::B, 0xE4);
    CheckRegisterByte(RegisterType::C, 0xAE);
    CheckRegisterByte(RegisterType::D, 0x4D);
    CheckRegisterByte(RegisterType::E, 0x87);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xFA);
    CheckRegisterByte(RegisterType::L, 0x1F);
    WriteRegisterWord(RegisterType::PC, 0xC02F);
    WriteRegisterWord(RegisterType::SP, 0x997E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC02E, 0x40);
}

void test_40_003C()
{
    if (skip_test_40_003C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA357);
    WriteRegisterWord(RegisterType::SP, 0xF26E);
    WriteRegisterByte(RegisterType::A, 0x87);
    WriteRegisterByte(RegisterType::B, 0x7F);
    WriteRegisterByte(RegisterType::C, 0x27);
    WriteRegisterByte(RegisterType::D, 0x69);
    WriteRegisterByte(RegisterType::E, 0x42);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xAF);
    WriteRegisterByte(RegisterType::L, 0xB6);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA357, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x87);
    CheckRegisterByte(RegisterType::B, 0x7F);
    CheckRegisterByte(RegisterType::C, 0x27);
    CheckRegisterByte(RegisterType::D, 0x69);
    CheckRegisterByte(RegisterType::E, 0x42);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xAF);
    CheckRegisterByte(RegisterType::L, 0xB6);
    WriteRegisterWord(RegisterType::PC, 0xA358);
    WriteRegisterWord(RegisterType::SP, 0xF26E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA357, 0x40);
}

void test_40_003D()
{
    if (skip_test_40_003D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3E55);
    WriteRegisterWord(RegisterType::SP, 0xC7E4);
    WriteRegisterByte(RegisterType::A, 0x12);
    WriteRegisterByte(RegisterType::B, 0xA9);
    WriteRegisterByte(RegisterType::C, 0xC4);
    WriteRegisterByte(RegisterType::D, 0x6C);
    WriteRegisterByte(RegisterType::E, 0xBF);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x50);
    WriteRegisterByte(RegisterType::L, 0x60);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3E55, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x12);
    CheckRegisterByte(RegisterType::B, 0xA9);
    CheckRegisterByte(RegisterType::C, 0xC4);
    CheckRegisterByte(RegisterType::D, 0x6C);
    CheckRegisterByte(RegisterType::E, 0xBF);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x50);
    CheckRegisterByte(RegisterType::L, 0x60);
    WriteRegisterWord(RegisterType::PC, 0x3E56);
    WriteRegisterWord(RegisterType::SP, 0xC7E4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3E55, 0x40);
}

void test_40_003E()
{
    if (skip_test_40_003E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB673);
    WriteRegisterWord(RegisterType::SP, 0xAAED);
    WriteRegisterByte(RegisterType::A, 0xFE);
    WriteRegisterByte(RegisterType::B, 0xC8);
    WriteRegisterByte(RegisterType::C, 0xCB);
    WriteRegisterByte(RegisterType::D, 0xF8);
    WriteRegisterByte(RegisterType::E, 0xD7);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x15);
    WriteRegisterByte(RegisterType::L, 0x5D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB673, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFE);
    CheckRegisterByte(RegisterType::B, 0xC8);
    CheckRegisterByte(RegisterType::C, 0xCB);
    CheckRegisterByte(RegisterType::D, 0xF8);
    CheckRegisterByte(RegisterType::E, 0xD7);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x15);
    CheckRegisterByte(RegisterType::L, 0x5D);
    WriteRegisterWord(RegisterType::PC, 0xB674);
    WriteRegisterWord(RegisterType::SP, 0xAAED);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB673, 0x40);
}

void test_40_003F()
{
    if (skip_test_40_003F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCD9E);
    WriteRegisterWord(RegisterType::SP, 0x238F);
    WriteRegisterByte(RegisterType::A, 0xF2);
    WriteRegisterByte(RegisterType::B, 0xB8);
    WriteRegisterByte(RegisterType::C, 0x7A);
    WriteRegisterByte(RegisterType::D, 0x2C);
    WriteRegisterByte(RegisterType::E, 0x11);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xBC);
    WriteRegisterByte(RegisterType::L, 0xA7);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCD9E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF2);
    CheckRegisterByte(RegisterType::B, 0xB8);
    CheckRegisterByte(RegisterType::C, 0x7A);
    CheckRegisterByte(RegisterType::D, 0x2C);
    CheckRegisterByte(RegisterType::E, 0x11);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xBC);
    CheckRegisterByte(RegisterType::L, 0xA7);
    WriteRegisterWord(RegisterType::PC, 0xCD9F);
    WriteRegisterWord(RegisterType::SP, 0x238F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xCD9E, 0x40);
}

void test_40_0040()
{
    if (skip_test_40_0040)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6760);
    WriteRegisterWord(RegisterType::SP, 0xAE99);
    WriteRegisterByte(RegisterType::A, 0xF5);
    WriteRegisterByte(RegisterType::B, 0xC4);
    WriteRegisterByte(RegisterType::C, 0xCC);
    WriteRegisterByte(RegisterType::D, 0x2D);
    WriteRegisterByte(RegisterType::E, 0x2A);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xEF);
    WriteRegisterByte(RegisterType::L, 0x74);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6760, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF5);
    CheckRegisterByte(RegisterType::B, 0xC4);
    CheckRegisterByte(RegisterType::C, 0xCC);
    CheckRegisterByte(RegisterType::D, 0x2D);
    CheckRegisterByte(RegisterType::E, 0x2A);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xEF);
    CheckRegisterByte(RegisterType::L, 0x74);
    WriteRegisterWord(RegisterType::PC, 0x6761);
    WriteRegisterWord(RegisterType::SP, 0xAE99);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6760, 0x40);
}

void test_40_0041()
{
    if (skip_test_40_0041)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6884);
    WriteRegisterWord(RegisterType::SP, 0xE6CD);
    WriteRegisterByte(RegisterType::A, 0x7A);
    WriteRegisterByte(RegisterType::B, 0xB6);
    WriteRegisterByte(RegisterType::C, 0xB5);
    WriteRegisterByte(RegisterType::D, 0x2B);
    WriteRegisterByte(RegisterType::E, 0xBC);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xB5);
    WriteRegisterByte(RegisterType::L, 0x4D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6884, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7A);
    CheckRegisterByte(RegisterType::B, 0xB6);
    CheckRegisterByte(RegisterType::C, 0xB5);
    CheckRegisterByte(RegisterType::D, 0x2B);
    CheckRegisterByte(RegisterType::E, 0xBC);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xB5);
    CheckRegisterByte(RegisterType::L, 0x4D);
    WriteRegisterWord(RegisterType::PC, 0x6885);
    WriteRegisterWord(RegisterType::SP, 0xE6CD);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6884, 0x40);
}

void test_40_0042()
{
    if (skip_test_40_0042)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8C28);
    WriteRegisterWord(RegisterType::SP, 0xED41);
    WriteRegisterByte(RegisterType::A, 0xDD);
    WriteRegisterByte(RegisterType::B, 0x3D);
    WriteRegisterByte(RegisterType::C, 0xD3);
    WriteRegisterByte(RegisterType::D, 0xAA);
    WriteRegisterByte(RegisterType::E, 0x97);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x15);
    WriteRegisterByte(RegisterType::L, 0x1E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8C28, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDD);
    CheckRegisterByte(RegisterType::B, 0x3D);
    CheckRegisterByte(RegisterType::C, 0xD3);
    CheckRegisterByte(RegisterType::D, 0xAA);
    CheckRegisterByte(RegisterType::E, 0x97);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x15);
    CheckRegisterByte(RegisterType::L, 0x1E);
    WriteRegisterWord(RegisterType::PC, 0x8C29);
    WriteRegisterWord(RegisterType::SP, 0xED41);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8C28, 0x40);
}

void test_40_0043()
{
    if (skip_test_40_0043)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5E8D);
    WriteRegisterWord(RegisterType::SP, 0x3A83);
    WriteRegisterByte(RegisterType::A, 0xDB);
    WriteRegisterByte(RegisterType::B, 0x5D);
    WriteRegisterByte(RegisterType::C, 0x7C);
    WriteRegisterByte(RegisterType::D, 0x7A);
    WriteRegisterByte(RegisterType::E, 0x8E);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x9E);
    WriteRegisterByte(RegisterType::L, 0xD7);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5E8D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDB);
    CheckRegisterByte(RegisterType::B, 0x5D);
    CheckRegisterByte(RegisterType::C, 0x7C);
    CheckRegisterByte(RegisterType::D, 0x7A);
    CheckRegisterByte(RegisterType::E, 0x8E);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x9E);
    CheckRegisterByte(RegisterType::L, 0xD7);
    WriteRegisterWord(RegisterType::PC, 0x5E8E);
    WriteRegisterWord(RegisterType::SP, 0x3A83);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5E8D, 0x40);
}

void test_40_0044()
{
    if (skip_test_40_0044)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF321);
    WriteRegisterWord(RegisterType::SP, 0x743F);
    WriteRegisterByte(RegisterType::A, 0x00);
    WriteRegisterByte(RegisterType::B, 0x72);
    WriteRegisterByte(RegisterType::C, 0x22);
    WriteRegisterByte(RegisterType::D, 0x79);
    WriteRegisterByte(RegisterType::E, 0x54);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x0F);
    WriteRegisterByte(RegisterType::L, 0x6D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF321, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x00);
    CheckRegisterByte(RegisterType::B, 0x72);
    CheckRegisterByte(RegisterType::C, 0x22);
    CheckRegisterByte(RegisterType::D, 0x79);
    CheckRegisterByte(RegisterType::E, 0x54);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x0F);
    CheckRegisterByte(RegisterType::L, 0x6D);
    WriteRegisterWord(RegisterType::PC, 0xF322);
    WriteRegisterWord(RegisterType::SP, 0x743F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF321, 0x40);
}

void test_40_0045()
{
    if (skip_test_40_0045)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9DB3);
    WriteRegisterWord(RegisterType::SP, 0x8E3E);
    WriteRegisterByte(RegisterType::A, 0xA2);
    WriteRegisterByte(RegisterType::B, 0xD6);
    WriteRegisterByte(RegisterType::C, 0xCE);
    WriteRegisterByte(RegisterType::D, 0x7B);
    WriteRegisterByte(RegisterType::E, 0x06);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xEA);
    WriteRegisterByte(RegisterType::L, 0x59);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x9DB3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA2);
    CheckRegisterByte(RegisterType::B, 0xD6);
    CheckRegisterByte(RegisterType::C, 0xCE);
    CheckRegisterByte(RegisterType::D, 0x7B);
    CheckRegisterByte(RegisterType::E, 0x06);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xEA);
    CheckRegisterByte(RegisterType::L, 0x59);
    WriteRegisterWord(RegisterType::PC, 0x9DB4);
    WriteRegisterWord(RegisterType::SP, 0x8E3E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9DB3, 0x40);
}

void test_40_0046()
{
    if (skip_test_40_0046)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7F5B);
    WriteRegisterWord(RegisterType::SP, 0x5118);
    WriteRegisterByte(RegisterType::A, 0xBE);
    WriteRegisterByte(RegisterType::B, 0x1E);
    WriteRegisterByte(RegisterType::C, 0xAF);
    WriteRegisterByte(RegisterType::D, 0x49);
    WriteRegisterByte(RegisterType::E, 0xA2);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xF0);
    WriteRegisterByte(RegisterType::L, 0x50);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7F5B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBE);
    CheckRegisterByte(RegisterType::B, 0x1E);
    CheckRegisterByte(RegisterType::C, 0xAF);
    CheckRegisterByte(RegisterType::D, 0x49);
    CheckRegisterByte(RegisterType::E, 0xA2);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xF0);
    CheckRegisterByte(RegisterType::L, 0x50);
    WriteRegisterWord(RegisterType::PC, 0x7F5C);
    WriteRegisterWord(RegisterType::SP, 0x5118);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7F5B, 0x40);
}

void test_40_0047()
{
    if (skip_test_40_0047)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDA22);
    WriteRegisterWord(RegisterType::SP, 0x10B4);
    WriteRegisterByte(RegisterType::A, 0x99);
    WriteRegisterByte(RegisterType::B, 0xFC);
    WriteRegisterByte(RegisterType::C, 0x3B);
    WriteRegisterByte(RegisterType::D, 0x7E);
    WriteRegisterByte(RegisterType::E, 0x24);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xA2);
    WriteRegisterByte(RegisterType::L, 0x81);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDA22, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x99);
    CheckRegisterByte(RegisterType::B, 0xFC);
    CheckRegisterByte(RegisterType::C, 0x3B);
    CheckRegisterByte(RegisterType::D, 0x7E);
    CheckRegisterByte(RegisterType::E, 0x24);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xA2);
    CheckRegisterByte(RegisterType::L, 0x81);
    WriteRegisterWord(RegisterType::PC, 0xDA23);
    WriteRegisterWord(RegisterType::SP, 0x10B4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xDA22, 0x40);
}

void test_40_0048()
{
    if (skip_test_40_0048)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x73BB);
    WriteRegisterWord(RegisterType::SP, 0xC2EB);
    WriteRegisterByte(RegisterType::A, 0x3B);
    WriteRegisterByte(RegisterType::B, 0x65);
    WriteRegisterByte(RegisterType::C, 0x3E);
    WriteRegisterByte(RegisterType::D, 0x00);
    WriteRegisterByte(RegisterType::E, 0x67);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x64);
    WriteRegisterByte(RegisterType::L, 0x32);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x73BB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3B);
    CheckRegisterByte(RegisterType::B, 0x65);
    CheckRegisterByte(RegisterType::C, 0x3E);
    CheckRegisterByte(RegisterType::D, 0x00);
    CheckRegisterByte(RegisterType::E, 0x67);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x64);
    CheckRegisterByte(RegisterType::L, 0x32);
    WriteRegisterWord(RegisterType::PC, 0x73BC);
    WriteRegisterWord(RegisterType::SP, 0xC2EB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x73BB, 0x40);
}

void test_40_0049()
{
    if (skip_test_40_0049)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA697);
    WriteRegisterWord(RegisterType::SP, 0x2DB8);
    WriteRegisterByte(RegisterType::A, 0xAD);
    WriteRegisterByte(RegisterType::B, 0xE1);
    WriteRegisterByte(RegisterType::C, 0xCF);
    WriteRegisterByte(RegisterType::D, 0x50);
    WriteRegisterByte(RegisterType::E, 0x53);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x46);
    WriteRegisterByte(RegisterType::L, 0x8E);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA697, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAD);
    CheckRegisterByte(RegisterType::B, 0xE1);
    CheckRegisterByte(RegisterType::C, 0xCF);
    CheckRegisterByte(RegisterType::D, 0x50);
    CheckRegisterByte(RegisterType::E, 0x53);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x46);
    CheckRegisterByte(RegisterType::L, 0x8E);
    WriteRegisterWord(RegisterType::PC, 0xA698);
    WriteRegisterWord(RegisterType::SP, 0x2DB8);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA697, 0x40);
}

void test_40_004A()
{
    if (skip_test_40_004A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4822);
    WriteRegisterWord(RegisterType::SP, 0x98D5);
    WriteRegisterByte(RegisterType::A, 0x3D);
    WriteRegisterByte(RegisterType::B, 0x91);
    WriteRegisterByte(RegisterType::C, 0xF4);
    WriteRegisterByte(RegisterType::D, 0x32);
    WriteRegisterByte(RegisterType::E, 0x07);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x13);
    WriteRegisterByte(RegisterType::L, 0x3D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4822, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3D);
    CheckRegisterByte(RegisterType::B, 0x91);
    CheckRegisterByte(RegisterType::C, 0xF4);
    CheckRegisterByte(RegisterType::D, 0x32);
    CheckRegisterByte(RegisterType::E, 0x07);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x13);
    CheckRegisterByte(RegisterType::L, 0x3D);
    WriteRegisterWord(RegisterType::PC, 0x4823);
    WriteRegisterWord(RegisterType::SP, 0x98D5);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4822, 0x40);
}

void test_40_004B()
{
    if (skip_test_40_004B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x42B0);
    WriteRegisterWord(RegisterType::SP, 0xB708);
    WriteRegisterByte(RegisterType::A, 0x86);
    WriteRegisterByte(RegisterType::B, 0x69);
    WriteRegisterByte(RegisterType::C, 0xD5);
    WriteRegisterByte(RegisterType::D, 0x47);
    WriteRegisterByte(RegisterType::E, 0x07);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x8D);
    WriteRegisterByte(RegisterType::L, 0x89);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x42B0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x86);
    CheckRegisterByte(RegisterType::B, 0x69);
    CheckRegisterByte(RegisterType::C, 0xD5);
    CheckRegisterByte(RegisterType::D, 0x47);
    CheckRegisterByte(RegisterType::E, 0x07);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x8D);
    CheckRegisterByte(RegisterType::L, 0x89);
    WriteRegisterWord(RegisterType::PC, 0x42B1);
    WriteRegisterWord(RegisterType::SP, 0xB708);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x42B0, 0x40);
}

void test_40_004C()
{
    if (skip_test_40_004C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x47A6);
    WriteRegisterWord(RegisterType::SP, 0x191C);
    WriteRegisterByte(RegisterType::A, 0x50);
    WriteRegisterByte(RegisterType::B, 0x56);
    WriteRegisterByte(RegisterType::C, 0x7C);
    WriteRegisterByte(RegisterType::D, 0x6D);
    WriteRegisterByte(RegisterType::E, 0xF4);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x8E);
    WriteRegisterByte(RegisterType::L, 0xC0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x47A6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x50);
    CheckRegisterByte(RegisterType::B, 0x56);
    CheckRegisterByte(RegisterType::C, 0x7C);
    CheckRegisterByte(RegisterType::D, 0x6D);
    CheckRegisterByte(RegisterType::E, 0xF4);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x8E);
    CheckRegisterByte(RegisterType::L, 0xC0);
    WriteRegisterWord(RegisterType::PC, 0x47A7);
    WriteRegisterWord(RegisterType::SP, 0x191C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x47A6, 0x40);
}

void test_40_004D()
{
    if (skip_test_40_004D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x435C);
    WriteRegisterWord(RegisterType::SP, 0x9AC3);
    WriteRegisterByte(RegisterType::A, 0x10);
    WriteRegisterByte(RegisterType::B, 0x2C);
    WriteRegisterByte(RegisterType::C, 0x46);
    WriteRegisterByte(RegisterType::D, 0x0A);
    WriteRegisterByte(RegisterType::E, 0x96);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x86);
    WriteRegisterByte(RegisterType::L, 0xB6);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x435C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x10);
    CheckRegisterByte(RegisterType::B, 0x2C);
    CheckRegisterByte(RegisterType::C, 0x46);
    CheckRegisterByte(RegisterType::D, 0x0A);
    CheckRegisterByte(RegisterType::E, 0x96);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x86);
    CheckRegisterByte(RegisterType::L, 0xB6);
    WriteRegisterWord(RegisterType::PC, 0x435D);
    WriteRegisterWord(RegisterType::SP, 0x9AC3);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x435C, 0x40);
}

void test_40_004E()
{
    if (skip_test_40_004E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x65F7);
    WriteRegisterWord(RegisterType::SP, 0x084C);
    WriteRegisterByte(RegisterType::A, 0x00);
    WriteRegisterByte(RegisterType::B, 0x70);
    WriteRegisterByte(RegisterType::C, 0x42);
    WriteRegisterByte(RegisterType::D, 0x36);
    WriteRegisterByte(RegisterType::E, 0x45);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x4D);
    WriteRegisterByte(RegisterType::L, 0xC7);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x65F7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x00);
    CheckRegisterByte(RegisterType::B, 0x70);
    CheckRegisterByte(RegisterType::C, 0x42);
    CheckRegisterByte(RegisterType::D, 0x36);
    CheckRegisterByte(RegisterType::E, 0x45);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x4D);
    CheckRegisterByte(RegisterType::L, 0xC7);
    WriteRegisterWord(RegisterType::PC, 0x65F8);
    WriteRegisterWord(RegisterType::SP, 0x084C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x65F7, 0x40);
}

void test_40_004F()
{
    if (skip_test_40_004F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC1B5);
    WriteRegisterWord(RegisterType::SP, 0xD8D1);
    WriteRegisterByte(RegisterType::A, 0x8E);
    WriteRegisterByte(RegisterType::B, 0x92);
    WriteRegisterByte(RegisterType::C, 0xBF);
    WriteRegisterByte(RegisterType::D, 0xB5);
    WriteRegisterByte(RegisterType::E, 0xBE);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xCA);
    WriteRegisterByte(RegisterType::L, 0xD9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC1B5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8E);
    CheckRegisterByte(RegisterType::B, 0x92);
    CheckRegisterByte(RegisterType::C, 0xBF);
    CheckRegisterByte(RegisterType::D, 0xB5);
    CheckRegisterByte(RegisterType::E, 0xBE);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xCA);
    CheckRegisterByte(RegisterType::L, 0xD9);
    WriteRegisterWord(RegisterType::PC, 0xC1B6);
    WriteRegisterWord(RegisterType::SP, 0xD8D1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC1B5, 0x40);
}

void test_40_0050()
{
    if (skip_test_40_0050)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC4ED);
    WriteRegisterWord(RegisterType::SP, 0x41AF);
    WriteRegisterByte(RegisterType::A, 0x35);
    WriteRegisterByte(RegisterType::B, 0x29);
    WriteRegisterByte(RegisterType::C, 0xAA);
    WriteRegisterByte(RegisterType::D, 0x25);
    WriteRegisterByte(RegisterType::E, 0x9F);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xDA);
    WriteRegisterByte(RegisterType::L, 0xDB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC4ED, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x35);
    CheckRegisterByte(RegisterType::B, 0x29);
    CheckRegisterByte(RegisterType::C, 0xAA);
    CheckRegisterByte(RegisterType::D, 0x25);
    CheckRegisterByte(RegisterType::E, 0x9F);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xDA);
    CheckRegisterByte(RegisterType::L, 0xDB);
    WriteRegisterWord(RegisterType::PC, 0xC4EE);
    WriteRegisterWord(RegisterType::SP, 0x41AF);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC4ED, 0x40);
}

void test_40_0051()
{
    if (skip_test_40_0051)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x48DB);
    WriteRegisterWord(RegisterType::SP, 0x86BA);
    WriteRegisterByte(RegisterType::A, 0x05);
    WriteRegisterByte(RegisterType::B, 0x77);
    WriteRegisterByte(RegisterType::C, 0xDA);
    WriteRegisterByte(RegisterType::D, 0xC1);
    WriteRegisterByte(RegisterType::E, 0x64);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xBF);
    WriteRegisterByte(RegisterType::L, 0xC7);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x48DB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x05);
    CheckRegisterByte(RegisterType::B, 0x77);
    CheckRegisterByte(RegisterType::C, 0xDA);
    CheckRegisterByte(RegisterType::D, 0xC1);
    CheckRegisterByte(RegisterType::E, 0x64);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xBF);
    CheckRegisterByte(RegisterType::L, 0xC7);
    WriteRegisterWord(RegisterType::PC, 0x48DC);
    WriteRegisterWord(RegisterType::SP, 0x86BA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x48DB, 0x40);
}

void test_40_0052()
{
    if (skip_test_40_0052)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEF87);
    WriteRegisterWord(RegisterType::SP, 0xEC30);
    WriteRegisterByte(RegisterType::A, 0x61);
    WriteRegisterByte(RegisterType::B, 0x97);
    WriteRegisterByte(RegisterType::C, 0xD9);
    WriteRegisterByte(RegisterType::D, 0xC8);
    WriteRegisterByte(RegisterType::E, 0xFB);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x70);
    WriteRegisterByte(RegisterType::L, 0x8B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEF87, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x61);
    CheckRegisterByte(RegisterType::B, 0x97);
    CheckRegisterByte(RegisterType::C, 0xD9);
    CheckRegisterByte(RegisterType::D, 0xC8);
    CheckRegisterByte(RegisterType::E, 0xFB);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x70);
    CheckRegisterByte(RegisterType::L, 0x8B);
    WriteRegisterWord(RegisterType::PC, 0xEF88);
    WriteRegisterWord(RegisterType::SP, 0xEC30);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEF87, 0x40);
}

void test_40_0053()
{
    if (skip_test_40_0053)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBCBB);
    WriteRegisterWord(RegisterType::SP, 0x3EDD);
    WriteRegisterByte(RegisterType::A, 0xBA);
    WriteRegisterByte(RegisterType::B, 0x15);
    WriteRegisterByte(RegisterType::C, 0xA8);
    WriteRegisterByte(RegisterType::D, 0xC2);
    WriteRegisterByte(RegisterType::E, 0x60);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xFD);
    WriteRegisterByte(RegisterType::L, 0x52);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xBCBB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBA);
    CheckRegisterByte(RegisterType::B, 0x15);
    CheckRegisterByte(RegisterType::C, 0xA8);
    CheckRegisterByte(RegisterType::D, 0xC2);
    CheckRegisterByte(RegisterType::E, 0x60);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xFD);
    CheckRegisterByte(RegisterType::L, 0x52);
    WriteRegisterWord(RegisterType::PC, 0xBCBC);
    WriteRegisterWord(RegisterType::SP, 0x3EDD);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xBCBB, 0x40);
}

void test_40_0054()
{
    if (skip_test_40_0054)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDE1C);
    WriteRegisterWord(RegisterType::SP, 0xC3A3);
    WriteRegisterByte(RegisterType::A, 0x08);
    WriteRegisterByte(RegisterType::B, 0xBB);
    WriteRegisterByte(RegisterType::C, 0x53);
    WriteRegisterByte(RegisterType::D, 0x72);
    WriteRegisterByte(RegisterType::E, 0xA2);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x96);
    WriteRegisterByte(RegisterType::L, 0x99);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDE1C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x08);
    CheckRegisterByte(RegisterType::B, 0xBB);
    CheckRegisterByte(RegisterType::C, 0x53);
    CheckRegisterByte(RegisterType::D, 0x72);
    CheckRegisterByte(RegisterType::E, 0xA2);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x96);
    CheckRegisterByte(RegisterType::L, 0x99);
    WriteRegisterWord(RegisterType::PC, 0xDE1D);
    WriteRegisterWord(RegisterType::SP, 0xC3A3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDE1C, 0x40);
}

void test_40_0055()
{
    if (skip_test_40_0055)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5DDC);
    WriteRegisterWord(RegisterType::SP, 0x27D7);
    WriteRegisterByte(RegisterType::A, 0xE5);
    WriteRegisterByte(RegisterType::B, 0x4B);
    WriteRegisterByte(RegisterType::C, 0x95);
    WriteRegisterByte(RegisterType::D, 0x26);
    WriteRegisterByte(RegisterType::E, 0xB3);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xE6);
    WriteRegisterByte(RegisterType::L, 0xDF);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5DDC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE5);
    CheckRegisterByte(RegisterType::B, 0x4B);
    CheckRegisterByte(RegisterType::C, 0x95);
    CheckRegisterByte(RegisterType::D, 0x26);
    CheckRegisterByte(RegisterType::E, 0xB3);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xE6);
    CheckRegisterByte(RegisterType::L, 0xDF);
    WriteRegisterWord(RegisterType::PC, 0x5DDD);
    WriteRegisterWord(RegisterType::SP, 0x27D7);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5DDC, 0x40);
}

void test_40_0056()
{
    if (skip_test_40_0056)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x205E);
    WriteRegisterWord(RegisterType::SP, 0x04AB);
    WriteRegisterByte(RegisterType::A, 0x23);
    WriteRegisterByte(RegisterType::B, 0x47);
    WriteRegisterByte(RegisterType::C, 0x82);
    WriteRegisterByte(RegisterType::D, 0xB8);
    WriteRegisterByte(RegisterType::E, 0x2C);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x93);
    WriteRegisterByte(RegisterType::L, 0x5B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x205E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x23);
    CheckRegisterByte(RegisterType::B, 0x47);
    CheckRegisterByte(RegisterType::C, 0x82);
    CheckRegisterByte(RegisterType::D, 0xB8);
    CheckRegisterByte(RegisterType::E, 0x2C);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x93);
    CheckRegisterByte(RegisterType::L, 0x5B);
    WriteRegisterWord(RegisterType::PC, 0x205F);
    WriteRegisterWord(RegisterType::SP, 0x04AB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x205E, 0x40);
}

void test_40_0057()
{
    if (skip_test_40_0057)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6BDA);
    WriteRegisterWord(RegisterType::SP, 0xAD44);
    WriteRegisterByte(RegisterType::A, 0x6D);
    WriteRegisterByte(RegisterType::B, 0x86);
    WriteRegisterByte(RegisterType::C, 0xAC);
    WriteRegisterByte(RegisterType::D, 0xC8);
    WriteRegisterByte(RegisterType::E, 0x28);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xE8);
    WriteRegisterByte(RegisterType::L, 0x83);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6BDA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6D);
    CheckRegisterByte(RegisterType::B, 0x86);
    CheckRegisterByte(RegisterType::C, 0xAC);
    CheckRegisterByte(RegisterType::D, 0xC8);
    CheckRegisterByte(RegisterType::E, 0x28);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xE8);
    CheckRegisterByte(RegisterType::L, 0x83);
    WriteRegisterWord(RegisterType::PC, 0x6BDB);
    WriteRegisterWord(RegisterType::SP, 0xAD44);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6BDA, 0x40);
}

void test_40_0058()
{
    if (skip_test_40_0058)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7993);
    WriteRegisterWord(RegisterType::SP, 0x6137);
    WriteRegisterByte(RegisterType::A, 0xAE);
    WriteRegisterByte(RegisterType::B, 0x2F);
    WriteRegisterByte(RegisterType::C, 0x2D);
    WriteRegisterByte(RegisterType::D, 0x44);
    WriteRegisterByte(RegisterType::E, 0x44);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x5C);
    WriteRegisterByte(RegisterType::L, 0x11);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7993, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAE);
    CheckRegisterByte(RegisterType::B, 0x2F);
    CheckRegisterByte(RegisterType::C, 0x2D);
    CheckRegisterByte(RegisterType::D, 0x44);
    CheckRegisterByte(RegisterType::E, 0x44);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x5C);
    CheckRegisterByte(RegisterType::L, 0x11);
    WriteRegisterWord(RegisterType::PC, 0x7994);
    WriteRegisterWord(RegisterType::SP, 0x6137);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7993, 0x40);
}

void test_40_0059()
{
    if (skip_test_40_0059)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC4DB);
    WriteRegisterWord(RegisterType::SP, 0x3EFB);
    WriteRegisterByte(RegisterType::A, 0xAD);
    WriteRegisterByte(RegisterType::B, 0x2E);
    WriteRegisterByte(RegisterType::C, 0xBD);
    WriteRegisterByte(RegisterType::D, 0x8F);
    WriteRegisterByte(RegisterType::E, 0xAF);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x9E);
    WriteRegisterByte(RegisterType::L, 0x7D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC4DB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAD);
    CheckRegisterByte(RegisterType::B, 0x2E);
    CheckRegisterByte(RegisterType::C, 0xBD);
    CheckRegisterByte(RegisterType::D, 0x8F);
    CheckRegisterByte(RegisterType::E, 0xAF);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x9E);
    CheckRegisterByte(RegisterType::L, 0x7D);
    WriteRegisterWord(RegisterType::PC, 0xC4DC);
    WriteRegisterWord(RegisterType::SP, 0x3EFB);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC4DB, 0x40);
}

void test_40_005A()
{
    if (skip_test_40_005A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCC7D);
    WriteRegisterWord(RegisterType::SP, 0x97C4);
    WriteRegisterByte(RegisterType::A, 0xB4);
    WriteRegisterByte(RegisterType::B, 0x3A);
    WriteRegisterByte(RegisterType::C, 0x64);
    WriteRegisterByte(RegisterType::D, 0xFB);
    WriteRegisterByte(RegisterType::E, 0x42);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x7D);
    WriteRegisterByte(RegisterType::L, 0x8A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCC7D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB4);
    CheckRegisterByte(RegisterType::B, 0x3A);
    CheckRegisterByte(RegisterType::C, 0x64);
    CheckRegisterByte(RegisterType::D, 0xFB);
    CheckRegisterByte(RegisterType::E, 0x42);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x7D);
    CheckRegisterByte(RegisterType::L, 0x8A);
    WriteRegisterWord(RegisterType::PC, 0xCC7E);
    WriteRegisterWord(RegisterType::SP, 0x97C4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCC7D, 0x40);
}

void test_40_005B()
{
    if (skip_test_40_005B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2B73);
    WriteRegisterWord(RegisterType::SP, 0x0E67);
    WriteRegisterByte(RegisterType::A, 0x37);
    WriteRegisterByte(RegisterType::B, 0x5B);
    WriteRegisterByte(RegisterType::C, 0x78);
    WriteRegisterByte(RegisterType::D, 0xC2);
    WriteRegisterByte(RegisterType::E, 0x66);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x61);
    WriteRegisterByte(RegisterType::L, 0xEE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2B73, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x37);
    CheckRegisterByte(RegisterType::B, 0x5B);
    CheckRegisterByte(RegisterType::C, 0x78);
    CheckRegisterByte(RegisterType::D, 0xC2);
    CheckRegisterByte(RegisterType::E, 0x66);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x61);
    CheckRegisterByte(RegisterType::L, 0xEE);
    WriteRegisterWord(RegisterType::PC, 0x2B74);
    WriteRegisterWord(RegisterType::SP, 0x0E67);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2B73, 0x40);
}

void test_40_005C()
{
    if (skip_test_40_005C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8BE6);
    WriteRegisterWord(RegisterType::SP, 0x7E7E);
    WriteRegisterByte(RegisterType::A, 0x82);
    WriteRegisterByte(RegisterType::B, 0x81);
    WriteRegisterByte(RegisterType::C, 0x0F);
    WriteRegisterByte(RegisterType::D, 0x84);
    WriteRegisterByte(RegisterType::E, 0x83);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xFD);
    WriteRegisterByte(RegisterType::L, 0x5E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8BE6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x82);
    CheckRegisterByte(RegisterType::B, 0x81);
    CheckRegisterByte(RegisterType::C, 0x0F);
    CheckRegisterByte(RegisterType::D, 0x84);
    CheckRegisterByte(RegisterType::E, 0x83);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xFD);
    CheckRegisterByte(RegisterType::L, 0x5E);
    WriteRegisterWord(RegisterType::PC, 0x8BE7);
    WriteRegisterWord(RegisterType::SP, 0x7E7E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8BE6, 0x40);
}

void test_40_005D()
{
    if (skip_test_40_005D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4215);
    WriteRegisterWord(RegisterType::SP, 0xD48B);
    WriteRegisterByte(RegisterType::A, 0xA2);
    WriteRegisterByte(RegisterType::B, 0x4F);
    WriteRegisterByte(RegisterType::C, 0x0A);
    WriteRegisterByte(RegisterType::D, 0x1A);
    WriteRegisterByte(RegisterType::E, 0xB4);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xEA);
    WriteRegisterByte(RegisterType::L, 0x4D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4215, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA2);
    CheckRegisterByte(RegisterType::B, 0x4F);
    CheckRegisterByte(RegisterType::C, 0x0A);
    CheckRegisterByte(RegisterType::D, 0x1A);
    CheckRegisterByte(RegisterType::E, 0xB4);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xEA);
    CheckRegisterByte(RegisterType::L, 0x4D);
    WriteRegisterWord(RegisterType::PC, 0x4216);
    WriteRegisterWord(RegisterType::SP, 0xD48B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4215, 0x40);
}

void test_40_005E()
{
    if (skip_test_40_005E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD384);
    WriteRegisterWord(RegisterType::SP, 0x5E36);
    WriteRegisterByte(RegisterType::A, 0x61);
    WriteRegisterByte(RegisterType::B, 0xA8);
    WriteRegisterByte(RegisterType::C, 0xCD);
    WriteRegisterByte(RegisterType::D, 0x1F);
    WriteRegisterByte(RegisterType::E, 0xA7);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x65);
    WriteRegisterByte(RegisterType::L, 0x2F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD384, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x61);
    CheckRegisterByte(RegisterType::B, 0xA8);
    CheckRegisterByte(RegisterType::C, 0xCD);
    CheckRegisterByte(RegisterType::D, 0x1F);
    CheckRegisterByte(RegisterType::E, 0xA7);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x65);
    CheckRegisterByte(RegisterType::L, 0x2F);
    WriteRegisterWord(RegisterType::PC, 0xD385);
    WriteRegisterWord(RegisterType::SP, 0x5E36);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD384, 0x40);
}

void test_40_005F()
{
    if (skip_test_40_005F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x11AF);
    WriteRegisterWord(RegisterType::SP, 0x9CA3);
    WriteRegisterByte(RegisterType::A, 0xC8);
    WriteRegisterByte(RegisterType::B, 0x60);
    WriteRegisterByte(RegisterType::C, 0x3B);
    WriteRegisterByte(RegisterType::D, 0xB5);
    WriteRegisterByte(RegisterType::E, 0xD8);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xE9);
    WriteRegisterByte(RegisterType::L, 0xE5);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x11AF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC8);
    CheckRegisterByte(RegisterType::B, 0x60);
    CheckRegisterByte(RegisterType::C, 0x3B);
    CheckRegisterByte(RegisterType::D, 0xB5);
    CheckRegisterByte(RegisterType::E, 0xD8);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xE9);
    CheckRegisterByte(RegisterType::L, 0xE5);
    WriteRegisterWord(RegisterType::PC, 0x11B0);
    WriteRegisterWord(RegisterType::SP, 0x9CA3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x11AF, 0x40);
}

void test_40_0060()
{
    if (skip_test_40_0060)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6C1C);
    WriteRegisterWord(RegisterType::SP, 0xCDB8);
    WriteRegisterByte(RegisterType::A, 0xF8);
    WriteRegisterByte(RegisterType::B, 0xFE);
    WriteRegisterByte(RegisterType::C, 0x96);
    WriteRegisterByte(RegisterType::D, 0x4D);
    WriteRegisterByte(RegisterType::E, 0x42);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x13);
    WriteRegisterByte(RegisterType::L, 0x90);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6C1C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF8);
    CheckRegisterByte(RegisterType::B, 0xFE);
    CheckRegisterByte(RegisterType::C, 0x96);
    CheckRegisterByte(RegisterType::D, 0x4D);
    CheckRegisterByte(RegisterType::E, 0x42);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x13);
    CheckRegisterByte(RegisterType::L, 0x90);
    WriteRegisterWord(RegisterType::PC, 0x6C1D);
    WriteRegisterWord(RegisterType::SP, 0xCDB8);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6C1C, 0x40);
}

void test_40_0061()
{
    if (skip_test_40_0061)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4372);
    WriteRegisterWord(RegisterType::SP, 0x6231);
    WriteRegisterByte(RegisterType::A, 0x97);
    WriteRegisterByte(RegisterType::B, 0x2C);
    WriteRegisterByte(RegisterType::C, 0x67);
    WriteRegisterByte(RegisterType::D, 0x13);
    WriteRegisterByte(RegisterType::E, 0x28);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x4B);
    WriteRegisterByte(RegisterType::L, 0x93);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4372, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x97);
    CheckRegisterByte(RegisterType::B, 0x2C);
    CheckRegisterByte(RegisterType::C, 0x67);
    CheckRegisterByte(RegisterType::D, 0x13);
    CheckRegisterByte(RegisterType::E, 0x28);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x4B);
    CheckRegisterByte(RegisterType::L, 0x93);
    WriteRegisterWord(RegisterType::PC, 0x4373);
    WriteRegisterWord(RegisterType::SP, 0x6231);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4372, 0x40);
}

void test_40_0062()
{
    if (skip_test_40_0062)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x44D9);
    WriteRegisterWord(RegisterType::SP, 0x1A5C);
    WriteRegisterByte(RegisterType::A, 0xFE);
    WriteRegisterByte(RegisterType::B, 0x51);
    WriteRegisterByte(RegisterType::C, 0x70);
    WriteRegisterByte(RegisterType::D, 0xC8);
    WriteRegisterByte(RegisterType::E, 0xC9);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xC2);
    WriteRegisterByte(RegisterType::L, 0x10);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x44D9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFE);
    CheckRegisterByte(RegisterType::B, 0x51);
    CheckRegisterByte(RegisterType::C, 0x70);
    CheckRegisterByte(RegisterType::D, 0xC8);
    CheckRegisterByte(RegisterType::E, 0xC9);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xC2);
    CheckRegisterByte(RegisterType::L, 0x10);
    WriteRegisterWord(RegisterType::PC, 0x44DA);
    WriteRegisterWord(RegisterType::SP, 0x1A5C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x44D9, 0x40);
}

void test_40_0063()
{
    if (skip_test_40_0063)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB7BD);
    WriteRegisterWord(RegisterType::SP, 0xEA9A);
    WriteRegisterByte(RegisterType::A, 0x28);
    WriteRegisterByte(RegisterType::B, 0x36);
    WriteRegisterByte(RegisterType::C, 0x09);
    WriteRegisterByte(RegisterType::D, 0xCC);
    WriteRegisterByte(RegisterType::E, 0xB3);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x3A);
    WriteRegisterByte(RegisterType::L, 0x56);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB7BD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x28);
    CheckRegisterByte(RegisterType::B, 0x36);
    CheckRegisterByte(RegisterType::C, 0x09);
    CheckRegisterByte(RegisterType::D, 0xCC);
    CheckRegisterByte(RegisterType::E, 0xB3);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x3A);
    CheckRegisterByte(RegisterType::L, 0x56);
    WriteRegisterWord(RegisterType::PC, 0xB7BE);
    WriteRegisterWord(RegisterType::SP, 0xEA9A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB7BD, 0x40);
}

void test_40_0064()
{
    if (skip_test_40_0064)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8736);
    WriteRegisterWord(RegisterType::SP, 0x21AB);
    WriteRegisterByte(RegisterType::A, 0xBC);
    WriteRegisterByte(RegisterType::B, 0x16);
    WriteRegisterByte(RegisterType::C, 0x8C);
    WriteRegisterByte(RegisterType::D, 0x10);
    WriteRegisterByte(RegisterType::E, 0xCE);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x39);
    WriteRegisterByte(RegisterType::L, 0x3D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8736, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBC);
    CheckRegisterByte(RegisterType::B, 0x16);
    CheckRegisterByte(RegisterType::C, 0x8C);
    CheckRegisterByte(RegisterType::D, 0x10);
    CheckRegisterByte(RegisterType::E, 0xCE);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x39);
    CheckRegisterByte(RegisterType::L, 0x3D);
    WriteRegisterWord(RegisterType::PC, 0x8737);
    WriteRegisterWord(RegisterType::SP, 0x21AB);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8736, 0x40);
}

void test_40_0065()
{
    if (skip_test_40_0065)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2F49);
    WriteRegisterWord(RegisterType::SP, 0xB982);
    WriteRegisterByte(RegisterType::A, 0xA0);
    WriteRegisterByte(RegisterType::B, 0x7F);
    WriteRegisterByte(RegisterType::C, 0x55);
    WriteRegisterByte(RegisterType::D, 0x3A);
    WriteRegisterByte(RegisterType::E, 0xCA);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xFD);
    WriteRegisterByte(RegisterType::L, 0x95);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2F49, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA0);
    CheckRegisterByte(RegisterType::B, 0x7F);
    CheckRegisterByte(RegisterType::C, 0x55);
    CheckRegisterByte(RegisterType::D, 0x3A);
    CheckRegisterByte(RegisterType::E, 0xCA);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xFD);
    CheckRegisterByte(RegisterType::L, 0x95);
    WriteRegisterWord(RegisterType::PC, 0x2F4A);
    WriteRegisterWord(RegisterType::SP, 0xB982);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2F49, 0x40);
}

void test_40_0066()
{
    if (skip_test_40_0066)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3FD0);
    WriteRegisterWord(RegisterType::SP, 0xECBA);
    WriteRegisterByte(RegisterType::A, 0x67);
    WriteRegisterByte(RegisterType::B, 0x56);
    WriteRegisterByte(RegisterType::C, 0x58);
    WriteRegisterByte(RegisterType::D, 0xA8);
    WriteRegisterByte(RegisterType::E, 0xF3);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xEC);
    WriteRegisterByte(RegisterType::L, 0x2E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3FD0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x67);
    CheckRegisterByte(RegisterType::B, 0x56);
    CheckRegisterByte(RegisterType::C, 0x58);
    CheckRegisterByte(RegisterType::D, 0xA8);
    CheckRegisterByte(RegisterType::E, 0xF3);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xEC);
    CheckRegisterByte(RegisterType::L, 0x2E);
    WriteRegisterWord(RegisterType::PC, 0x3FD1);
    WriteRegisterWord(RegisterType::SP, 0xECBA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3FD0, 0x40);
}

void test_40_0067()
{
    if (skip_test_40_0067)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5B4B);
    WriteRegisterWord(RegisterType::SP, 0x3E1A);
    WriteRegisterByte(RegisterType::A, 0x94);
    WriteRegisterByte(RegisterType::B, 0x5F);
    WriteRegisterByte(RegisterType::C, 0x02);
    WriteRegisterByte(RegisterType::D, 0xEA);
    WriteRegisterByte(RegisterType::E, 0x70);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xB9);
    WriteRegisterByte(RegisterType::L, 0xC1);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5B4B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x94);
    CheckRegisterByte(RegisterType::B, 0x5F);
    CheckRegisterByte(RegisterType::C, 0x02);
    CheckRegisterByte(RegisterType::D, 0xEA);
    CheckRegisterByte(RegisterType::E, 0x70);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xB9);
    CheckRegisterByte(RegisterType::L, 0xC1);
    WriteRegisterWord(RegisterType::PC, 0x5B4C);
    WriteRegisterWord(RegisterType::SP, 0x3E1A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5B4B, 0x40);
}

void test_40_0068()
{
    if (skip_test_40_0068)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9B5C);
    WriteRegisterWord(RegisterType::SP, 0x1339);
    WriteRegisterByte(RegisterType::A, 0x47);
    WriteRegisterByte(RegisterType::B, 0x60);
    WriteRegisterByte(RegisterType::C, 0xE3);
    WriteRegisterByte(RegisterType::D, 0x56);
    WriteRegisterByte(RegisterType::E, 0x1C);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x01);
    WriteRegisterByte(RegisterType::L, 0x32);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x9B5C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x47);
    CheckRegisterByte(RegisterType::B, 0x60);
    CheckRegisterByte(RegisterType::C, 0xE3);
    CheckRegisterByte(RegisterType::D, 0x56);
    CheckRegisterByte(RegisterType::E, 0x1C);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x01);
    CheckRegisterByte(RegisterType::L, 0x32);
    WriteRegisterWord(RegisterType::PC, 0x9B5D);
    WriteRegisterWord(RegisterType::SP, 0x1339);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9B5C, 0x40);
}

void test_40_0069()
{
    if (skip_test_40_0069)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE9A5);
    WriteRegisterWord(RegisterType::SP, 0x90A0);
    WriteRegisterByte(RegisterType::A, 0x7C);
    WriteRegisterByte(RegisterType::B, 0x1D);
    WriteRegisterByte(RegisterType::C, 0xF5);
    WriteRegisterByte(RegisterType::D, 0xBA);
    WriteRegisterByte(RegisterType::E, 0xE1);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xDB);
    WriteRegisterByte(RegisterType::L, 0x04);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE9A5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7C);
    CheckRegisterByte(RegisterType::B, 0x1D);
    CheckRegisterByte(RegisterType::C, 0xF5);
    CheckRegisterByte(RegisterType::D, 0xBA);
    CheckRegisterByte(RegisterType::E, 0xE1);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xDB);
    CheckRegisterByte(RegisterType::L, 0x04);
    WriteRegisterWord(RegisterType::PC, 0xE9A6);
    WriteRegisterWord(RegisterType::SP, 0x90A0);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE9A5, 0x40);
}

void test_40_006A()
{
    if (skip_test_40_006A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB3DE);
    WriteRegisterWord(RegisterType::SP, 0xFAEA);
    WriteRegisterByte(RegisterType::A, 0x8F);
    WriteRegisterByte(RegisterType::B, 0xBD);
    WriteRegisterByte(RegisterType::C, 0xFB);
    WriteRegisterByte(RegisterType::D, 0xAF);
    WriteRegisterByte(RegisterType::E, 0xEF);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x72);
    WriteRegisterByte(RegisterType::L, 0x3C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB3DE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8F);
    CheckRegisterByte(RegisterType::B, 0xBD);
    CheckRegisterByte(RegisterType::C, 0xFB);
    CheckRegisterByte(RegisterType::D, 0xAF);
    CheckRegisterByte(RegisterType::E, 0xEF);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x72);
    CheckRegisterByte(RegisterType::L, 0x3C);
    WriteRegisterWord(RegisterType::PC, 0xB3DF);
    WriteRegisterWord(RegisterType::SP, 0xFAEA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB3DE, 0x40);
}

void test_40_006B()
{
    if (skip_test_40_006B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEB2C);
    WriteRegisterWord(RegisterType::SP, 0x85AC);
    WriteRegisterByte(RegisterType::A, 0x2D);
    WriteRegisterByte(RegisterType::B, 0xB9);
    WriteRegisterByte(RegisterType::C, 0xCF);
    WriteRegisterByte(RegisterType::D, 0x21);
    WriteRegisterByte(RegisterType::E, 0x22);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x79);
    WriteRegisterByte(RegisterType::L, 0x10);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEB2C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2D);
    CheckRegisterByte(RegisterType::B, 0xB9);
    CheckRegisterByte(RegisterType::C, 0xCF);
    CheckRegisterByte(RegisterType::D, 0x21);
    CheckRegisterByte(RegisterType::E, 0x22);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x79);
    CheckRegisterByte(RegisterType::L, 0x10);
    WriteRegisterWord(RegisterType::PC, 0xEB2D);
    WriteRegisterWord(RegisterType::SP, 0x85AC);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xEB2C, 0x40);
}

void test_40_006C()
{
    if (skip_test_40_006C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5CB1);
    WriteRegisterWord(RegisterType::SP, 0x54C9);
    WriteRegisterByte(RegisterType::A, 0xFB);
    WriteRegisterByte(RegisterType::B, 0xBA);
    WriteRegisterByte(RegisterType::C, 0x1A);
    WriteRegisterByte(RegisterType::D, 0xD0);
    WriteRegisterByte(RegisterType::E, 0x5B);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xFB);
    WriteRegisterByte(RegisterType::L, 0x72);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5CB1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFB);
    CheckRegisterByte(RegisterType::B, 0xBA);
    CheckRegisterByte(RegisterType::C, 0x1A);
    CheckRegisterByte(RegisterType::D, 0xD0);
    CheckRegisterByte(RegisterType::E, 0x5B);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xFB);
    CheckRegisterByte(RegisterType::L, 0x72);
    WriteRegisterWord(RegisterType::PC, 0x5CB2);
    WriteRegisterWord(RegisterType::SP, 0x54C9);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5CB1, 0x40);
}

void test_40_006D()
{
    if (skip_test_40_006D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD813);
    WriteRegisterWord(RegisterType::SP, 0x3C24);
    WriteRegisterByte(RegisterType::A, 0xA2);
    WriteRegisterByte(RegisterType::B, 0xC6);
    WriteRegisterByte(RegisterType::C, 0xFF);
    WriteRegisterByte(RegisterType::D, 0xE3);
    WriteRegisterByte(RegisterType::E, 0xEB);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x7A);
    WriteRegisterByte(RegisterType::L, 0x93);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD813, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA2);
    CheckRegisterByte(RegisterType::B, 0xC6);
    CheckRegisterByte(RegisterType::C, 0xFF);
    CheckRegisterByte(RegisterType::D, 0xE3);
    CheckRegisterByte(RegisterType::E, 0xEB);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x7A);
    CheckRegisterByte(RegisterType::L, 0x93);
    WriteRegisterWord(RegisterType::PC, 0xD814);
    WriteRegisterWord(RegisterType::SP, 0x3C24);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD813, 0x40);
}

void test_40_006E()
{
    if (skip_test_40_006E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x456D);
    WriteRegisterWord(RegisterType::SP, 0xE768);
    WriteRegisterByte(RegisterType::A, 0x73);
    WriteRegisterByte(RegisterType::B, 0xD1);
    WriteRegisterByte(RegisterType::C, 0xD9);
    WriteRegisterByte(RegisterType::D, 0x0A);
    WriteRegisterByte(RegisterType::E, 0x8B);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x89);
    WriteRegisterByte(RegisterType::L, 0x93);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x456D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x73);
    CheckRegisterByte(RegisterType::B, 0xD1);
    CheckRegisterByte(RegisterType::C, 0xD9);
    CheckRegisterByte(RegisterType::D, 0x0A);
    CheckRegisterByte(RegisterType::E, 0x8B);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x89);
    CheckRegisterByte(RegisterType::L, 0x93);
    WriteRegisterWord(RegisterType::PC, 0x456E);
    WriteRegisterWord(RegisterType::SP, 0xE768);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x456D, 0x40);
}

void test_40_006F()
{
    if (skip_test_40_006F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDE82);
    WriteRegisterWord(RegisterType::SP, 0x95C4);
    WriteRegisterByte(RegisterType::A, 0x3F);
    WriteRegisterByte(RegisterType::B, 0x42);
    WriteRegisterByte(RegisterType::C, 0x3F);
    WriteRegisterByte(RegisterType::D, 0xBF);
    WriteRegisterByte(RegisterType::E, 0xCE);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x24);
    WriteRegisterByte(RegisterType::L, 0x38);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDE82, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3F);
    CheckRegisterByte(RegisterType::B, 0x42);
    CheckRegisterByte(RegisterType::C, 0x3F);
    CheckRegisterByte(RegisterType::D, 0xBF);
    CheckRegisterByte(RegisterType::E, 0xCE);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x24);
    CheckRegisterByte(RegisterType::L, 0x38);
    WriteRegisterWord(RegisterType::PC, 0xDE83);
    WriteRegisterWord(RegisterType::SP, 0x95C4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xDE82, 0x40);
}

void test_40_0070()
{
    if (skip_test_40_0070)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3437);
    WriteRegisterWord(RegisterType::SP, 0xD0FA);
    WriteRegisterByte(RegisterType::A, 0xF1);
    WriteRegisterByte(RegisterType::B, 0x6D);
    WriteRegisterByte(RegisterType::C, 0xD0);
    WriteRegisterByte(RegisterType::D, 0x26);
    WriteRegisterByte(RegisterType::E, 0xD3);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xF1);
    WriteRegisterByte(RegisterType::L, 0x61);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3437, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF1);
    CheckRegisterByte(RegisterType::B, 0x6D);
    CheckRegisterByte(RegisterType::C, 0xD0);
    CheckRegisterByte(RegisterType::D, 0x26);
    CheckRegisterByte(RegisterType::E, 0xD3);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xF1);
    CheckRegisterByte(RegisterType::L, 0x61);
    WriteRegisterWord(RegisterType::PC, 0x3438);
    WriteRegisterWord(RegisterType::SP, 0xD0FA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3437, 0x40);
}

void test_40_0071()
{
    if (skip_test_40_0071)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFB57);
    WriteRegisterWord(RegisterType::SP, 0x248B);
    WriteRegisterByte(RegisterType::A, 0xD3);
    WriteRegisterByte(RegisterType::B, 0xF1);
    WriteRegisterByte(RegisterType::C, 0x97);
    WriteRegisterByte(RegisterType::D, 0x6D);
    WriteRegisterByte(RegisterType::E, 0x7C);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x7E);
    WriteRegisterByte(RegisterType::L, 0x66);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFB57, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD3);
    CheckRegisterByte(RegisterType::B, 0xF1);
    CheckRegisterByte(RegisterType::C, 0x97);
    CheckRegisterByte(RegisterType::D, 0x6D);
    CheckRegisterByte(RegisterType::E, 0x7C);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x7E);
    CheckRegisterByte(RegisterType::L, 0x66);
    WriteRegisterWord(RegisterType::PC, 0xFB58);
    WriteRegisterWord(RegisterType::SP, 0x248B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFB57, 0x40);
}

void test_40_0072()
{
    if (skip_test_40_0072)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBDC8);
    WriteRegisterWord(RegisterType::SP, 0x4335);
    WriteRegisterByte(RegisterType::A, 0xEB);
    WriteRegisterByte(RegisterType::B, 0x7C);
    WriteRegisterByte(RegisterType::C, 0xBB);
    WriteRegisterByte(RegisterType::D, 0x33);
    WriteRegisterByte(RegisterType::E, 0x50);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x06);
    WriteRegisterByte(RegisterType::L, 0x91);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBDC8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEB);
    CheckRegisterByte(RegisterType::B, 0x7C);
    CheckRegisterByte(RegisterType::C, 0xBB);
    CheckRegisterByte(RegisterType::D, 0x33);
    CheckRegisterByte(RegisterType::E, 0x50);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x06);
    CheckRegisterByte(RegisterType::L, 0x91);
    WriteRegisterWord(RegisterType::PC, 0xBDC9);
    WriteRegisterWord(RegisterType::SP, 0x4335);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xBDC8, 0x40);
}

void test_40_0073()
{
    if (skip_test_40_0073)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBDFE);
    WriteRegisterWord(RegisterType::SP, 0x3B80);
    WriteRegisterByte(RegisterType::A, 0x29);
    WriteRegisterByte(RegisterType::B, 0xDF);
    WriteRegisterByte(RegisterType::C, 0x03);
    WriteRegisterByte(RegisterType::D, 0x77);
    WriteRegisterByte(RegisterType::E, 0x54);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xB7);
    WriteRegisterByte(RegisterType::L, 0xA0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xBDFE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x29);
    CheckRegisterByte(RegisterType::B, 0xDF);
    CheckRegisterByte(RegisterType::C, 0x03);
    CheckRegisterByte(RegisterType::D, 0x77);
    CheckRegisterByte(RegisterType::E, 0x54);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xB7);
    CheckRegisterByte(RegisterType::L, 0xA0);
    WriteRegisterWord(RegisterType::PC, 0xBDFF);
    WriteRegisterWord(RegisterType::SP, 0x3B80);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xBDFE, 0x40);
}

void test_40_0074()
{
    if (skip_test_40_0074)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x349D);
    WriteRegisterWord(RegisterType::SP, 0x039D);
    WriteRegisterByte(RegisterType::A, 0x3F);
    WriteRegisterByte(RegisterType::B, 0x44);
    WriteRegisterByte(RegisterType::C, 0x81);
    WriteRegisterByte(RegisterType::D, 0x29);
    WriteRegisterByte(RegisterType::E, 0x2D);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xEB);
    WriteRegisterByte(RegisterType::L, 0x0F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x349D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3F);
    CheckRegisterByte(RegisterType::B, 0x44);
    CheckRegisterByte(RegisterType::C, 0x81);
    CheckRegisterByte(RegisterType::D, 0x29);
    CheckRegisterByte(RegisterType::E, 0x2D);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xEB);
    CheckRegisterByte(RegisterType::L, 0x0F);
    WriteRegisterWord(RegisterType::PC, 0x349E);
    WriteRegisterWord(RegisterType::SP, 0x039D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x349D, 0x40);
}

void test_40_0075()
{
    if (skip_test_40_0075)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x03AD);
    WriteRegisterWord(RegisterType::SP, 0x5671);
    WriteRegisterByte(RegisterType::A, 0xBA);
    WriteRegisterByte(RegisterType::B, 0x0C);
    WriteRegisterByte(RegisterType::C, 0x3A);
    WriteRegisterByte(RegisterType::D, 0xFC);
    WriteRegisterByte(RegisterType::E, 0xED);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x4C);
    WriteRegisterByte(RegisterType::L, 0xC6);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x03AD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBA);
    CheckRegisterByte(RegisterType::B, 0x0C);
    CheckRegisterByte(RegisterType::C, 0x3A);
    CheckRegisterByte(RegisterType::D, 0xFC);
    CheckRegisterByte(RegisterType::E, 0xED);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x4C);
    CheckRegisterByte(RegisterType::L, 0xC6);
    WriteRegisterWord(RegisterType::PC, 0x03AE);
    WriteRegisterWord(RegisterType::SP, 0x5671);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x03AD, 0x40);
}

void test_40_0076()
{
    if (skip_test_40_0076)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDE6F);
    WriteRegisterWord(RegisterType::SP, 0xFAF5);
    WriteRegisterByte(RegisterType::A, 0x1C);
    WriteRegisterByte(RegisterType::B, 0xE0);
    WriteRegisterByte(RegisterType::C, 0x95);
    WriteRegisterByte(RegisterType::D, 0x82);
    WriteRegisterByte(RegisterType::E, 0xD3);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x3F);
    WriteRegisterByte(RegisterType::L, 0x5F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDE6F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1C);
    CheckRegisterByte(RegisterType::B, 0xE0);
    CheckRegisterByte(RegisterType::C, 0x95);
    CheckRegisterByte(RegisterType::D, 0x82);
    CheckRegisterByte(RegisterType::E, 0xD3);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x3F);
    CheckRegisterByte(RegisterType::L, 0x5F);
    WriteRegisterWord(RegisterType::PC, 0xDE70);
    WriteRegisterWord(RegisterType::SP, 0xFAF5);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xDE6F, 0x40);
}

void test_40_0077()
{
    if (skip_test_40_0077)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x77CC);
    WriteRegisterWord(RegisterType::SP, 0xDAC8);
    WriteRegisterByte(RegisterType::A, 0xE6);
    WriteRegisterByte(RegisterType::B, 0x11);
    WriteRegisterByte(RegisterType::C, 0x62);
    WriteRegisterByte(RegisterType::D, 0xBE);
    WriteRegisterByte(RegisterType::E, 0x43);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xEC);
    WriteRegisterByte(RegisterType::L, 0xBC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x77CC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE6);
    CheckRegisterByte(RegisterType::B, 0x11);
    CheckRegisterByte(RegisterType::C, 0x62);
    CheckRegisterByte(RegisterType::D, 0xBE);
    CheckRegisterByte(RegisterType::E, 0x43);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xEC);
    CheckRegisterByte(RegisterType::L, 0xBC);
    WriteRegisterWord(RegisterType::PC, 0x77CD);
    WriteRegisterWord(RegisterType::SP, 0xDAC8);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x77CC, 0x40);
}

void test_40_0078()
{
    if (skip_test_40_0078)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8261);
    WriteRegisterWord(RegisterType::SP, 0xAFC0);
    WriteRegisterByte(RegisterType::A, 0x44);
    WriteRegisterByte(RegisterType::B, 0x8F);
    WriteRegisterByte(RegisterType::C, 0xFA);
    WriteRegisterByte(RegisterType::D, 0xEF);
    WriteRegisterByte(RegisterType::E, 0x56);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x85);
    WriteRegisterByte(RegisterType::L, 0x4B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8261, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x44);
    CheckRegisterByte(RegisterType::B, 0x8F);
    CheckRegisterByte(RegisterType::C, 0xFA);
    CheckRegisterByte(RegisterType::D, 0xEF);
    CheckRegisterByte(RegisterType::E, 0x56);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x85);
    CheckRegisterByte(RegisterType::L, 0x4B);
    WriteRegisterWord(RegisterType::PC, 0x8262);
    WriteRegisterWord(RegisterType::SP, 0xAFC0);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8261, 0x40);
}

void test_40_0079()
{
    if (skip_test_40_0079)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFE3A);
    WriteRegisterWord(RegisterType::SP, 0x352A);
    WriteRegisterByte(RegisterType::A, 0x71);
    WriteRegisterByte(RegisterType::B, 0x62);
    WriteRegisterByte(RegisterType::C, 0x29);
    WriteRegisterByte(RegisterType::D, 0xC1);
    WriteRegisterByte(RegisterType::E, 0xDA);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x9B);
    WriteRegisterByte(RegisterType::L, 0x61);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFE3A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x71);
    CheckRegisterByte(RegisterType::B, 0x62);
    CheckRegisterByte(RegisterType::C, 0x29);
    CheckRegisterByte(RegisterType::D, 0xC1);
    CheckRegisterByte(RegisterType::E, 0xDA);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x9B);
    CheckRegisterByte(RegisterType::L, 0x61);
    WriteRegisterWord(RegisterType::PC, 0xFE3B);
    WriteRegisterWord(RegisterType::SP, 0x352A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFE3A, 0x40);
}

void test_40_007A()
{
    if (skip_test_40_007A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF0A7);
    WriteRegisterWord(RegisterType::SP, 0x2585);
    WriteRegisterByte(RegisterType::A, 0xD7);
    WriteRegisterByte(RegisterType::B, 0xEC);
    WriteRegisterByte(RegisterType::C, 0xA3);
    WriteRegisterByte(RegisterType::D, 0x8C);
    WriteRegisterByte(RegisterType::E, 0x23);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xAF);
    WriteRegisterByte(RegisterType::L, 0x47);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF0A7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD7);
    CheckRegisterByte(RegisterType::B, 0xEC);
    CheckRegisterByte(RegisterType::C, 0xA3);
    CheckRegisterByte(RegisterType::D, 0x8C);
    CheckRegisterByte(RegisterType::E, 0x23);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xAF);
    CheckRegisterByte(RegisterType::L, 0x47);
    WriteRegisterWord(RegisterType::PC, 0xF0A8);
    WriteRegisterWord(RegisterType::SP, 0x2585);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF0A7, 0x40);
}

void test_40_007B()
{
    if (skip_test_40_007B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x918A);
    WriteRegisterWord(RegisterType::SP, 0xA76C);
    WriteRegisterByte(RegisterType::A, 0x48);
    WriteRegisterByte(RegisterType::B, 0xE6);
    WriteRegisterByte(RegisterType::C, 0x65);
    WriteRegisterByte(RegisterType::D, 0x98);
    WriteRegisterByte(RegisterType::E, 0x49);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x70);
    WriteRegisterByte(RegisterType::L, 0x87);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x918A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x48);
    CheckRegisterByte(RegisterType::B, 0xE6);
    CheckRegisterByte(RegisterType::C, 0x65);
    CheckRegisterByte(RegisterType::D, 0x98);
    CheckRegisterByte(RegisterType::E, 0x49);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x70);
    CheckRegisterByte(RegisterType::L, 0x87);
    WriteRegisterWord(RegisterType::PC, 0x918B);
    WriteRegisterWord(RegisterType::SP, 0xA76C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x918A, 0x40);
}

void test_40_007C()
{
    if (skip_test_40_007C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC03F);
    WriteRegisterWord(RegisterType::SP, 0x39FC);
    WriteRegisterByte(RegisterType::A, 0xAA);
    WriteRegisterByte(RegisterType::B, 0xB4);
    WriteRegisterByte(RegisterType::C, 0x9D);
    WriteRegisterByte(RegisterType::D, 0x98);
    WriteRegisterByte(RegisterType::E, 0xD0);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x2F);
    WriteRegisterByte(RegisterType::L, 0xB0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC03F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAA);
    CheckRegisterByte(RegisterType::B, 0xB4);
    CheckRegisterByte(RegisterType::C, 0x9D);
    CheckRegisterByte(RegisterType::D, 0x98);
    CheckRegisterByte(RegisterType::E, 0xD0);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x2F);
    CheckRegisterByte(RegisterType::L, 0xB0);
    WriteRegisterWord(RegisterType::PC, 0xC040);
    WriteRegisterWord(RegisterType::SP, 0x39FC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC03F, 0x40);
}

void test_40_007D()
{
    if (skip_test_40_007D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF439);
    WriteRegisterWord(RegisterType::SP, 0xFF41);
    WriteRegisterByte(RegisterType::A, 0xA3);
    WriteRegisterByte(RegisterType::B, 0xC5);
    WriteRegisterByte(RegisterType::C, 0x04);
    WriteRegisterByte(RegisterType::D, 0x3E);
    WriteRegisterByte(RegisterType::E, 0x7B);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x96);
    WriteRegisterByte(RegisterType::L, 0x6C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF439, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA3);
    CheckRegisterByte(RegisterType::B, 0xC5);
    CheckRegisterByte(RegisterType::C, 0x04);
    CheckRegisterByte(RegisterType::D, 0x3E);
    CheckRegisterByte(RegisterType::E, 0x7B);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x96);
    CheckRegisterByte(RegisterType::L, 0x6C);
    WriteRegisterWord(RegisterType::PC, 0xF43A);
    WriteRegisterWord(RegisterType::SP, 0xFF41);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF439, 0x40);
}

void test_40_007E()
{
    if (skip_test_40_007E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA21C);
    WriteRegisterWord(RegisterType::SP, 0xBADD);
    WriteRegisterByte(RegisterType::A, 0x20);
    WriteRegisterByte(RegisterType::B, 0x1B);
    WriteRegisterByte(RegisterType::C, 0xA7);
    WriteRegisterByte(RegisterType::D, 0xF4);
    WriteRegisterByte(RegisterType::E, 0x40);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xCF);
    WriteRegisterByte(RegisterType::L, 0xE9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA21C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x20);
    CheckRegisterByte(RegisterType::B, 0x1B);
    CheckRegisterByte(RegisterType::C, 0xA7);
    CheckRegisterByte(RegisterType::D, 0xF4);
    CheckRegisterByte(RegisterType::E, 0x40);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xCF);
    CheckRegisterByte(RegisterType::L, 0xE9);
    WriteRegisterWord(RegisterType::PC, 0xA21D);
    WriteRegisterWord(RegisterType::SP, 0xBADD);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA21C, 0x40);
}

void test_40_007F()
{
    if (skip_test_40_007F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3538);
    WriteRegisterWord(RegisterType::SP, 0x80F8);
    WriteRegisterByte(RegisterType::A, 0x12);
    WriteRegisterByte(RegisterType::B, 0x83);
    WriteRegisterByte(RegisterType::C, 0xC1);
    WriteRegisterByte(RegisterType::D, 0x90);
    WriteRegisterByte(RegisterType::E, 0xDB);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xDF);
    WriteRegisterByte(RegisterType::L, 0xB4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3538, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x12);
    CheckRegisterByte(RegisterType::B, 0x83);
    CheckRegisterByte(RegisterType::C, 0xC1);
    CheckRegisterByte(RegisterType::D, 0x90);
    CheckRegisterByte(RegisterType::E, 0xDB);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xDF);
    CheckRegisterByte(RegisterType::L, 0xB4);
    WriteRegisterWord(RegisterType::PC, 0x3539);
    WriteRegisterWord(RegisterType::SP, 0x80F8);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3538, 0x40);
}

void test_40_0080()
{
    if (skip_test_40_0080)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8F8B);
    WriteRegisterWord(RegisterType::SP, 0x4DE0);
    WriteRegisterByte(RegisterType::A, 0x9B);
    WriteRegisterByte(RegisterType::B, 0x2E);
    WriteRegisterByte(RegisterType::C, 0xB2);
    WriteRegisterByte(RegisterType::D, 0xEE);
    WriteRegisterByte(RegisterType::E, 0xCB);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x67);
    WriteRegisterByte(RegisterType::L, 0x54);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8F8B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9B);
    CheckRegisterByte(RegisterType::B, 0x2E);
    CheckRegisterByte(RegisterType::C, 0xB2);
    CheckRegisterByte(RegisterType::D, 0xEE);
    CheckRegisterByte(RegisterType::E, 0xCB);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x67);
    CheckRegisterByte(RegisterType::L, 0x54);
    WriteRegisterWord(RegisterType::PC, 0x8F8C);
    WriteRegisterWord(RegisterType::SP, 0x4DE0);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8F8B, 0x40);
}

void test_40_0081()
{
    if (skip_test_40_0081)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4920);
    WriteRegisterWord(RegisterType::SP, 0xF071);
    WriteRegisterByte(RegisterType::A, 0x4F);
    WriteRegisterByte(RegisterType::B, 0x09);
    WriteRegisterByte(RegisterType::C, 0x3B);
    WriteRegisterByte(RegisterType::D, 0xC4);
    WriteRegisterByte(RegisterType::E, 0xFE);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xE3);
    WriteRegisterByte(RegisterType::L, 0xFC);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4920, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4F);
    CheckRegisterByte(RegisterType::B, 0x09);
    CheckRegisterByte(RegisterType::C, 0x3B);
    CheckRegisterByte(RegisterType::D, 0xC4);
    CheckRegisterByte(RegisterType::E, 0xFE);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xE3);
    CheckRegisterByte(RegisterType::L, 0xFC);
    WriteRegisterWord(RegisterType::PC, 0x4921);
    WriteRegisterWord(RegisterType::SP, 0xF071);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4920, 0x40);
}

void test_40_0082()
{
    if (skip_test_40_0082)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCC7D);
    WriteRegisterWord(RegisterType::SP, 0xAD82);
    WriteRegisterByte(RegisterType::A, 0x5D);
    WriteRegisterByte(RegisterType::B, 0x56);
    WriteRegisterByte(RegisterType::C, 0xD7);
    WriteRegisterByte(RegisterType::D, 0x1E);
    WriteRegisterByte(RegisterType::E, 0x9F);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xBE);
    WriteRegisterByte(RegisterType::L, 0x3B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xCC7D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5D);
    CheckRegisterByte(RegisterType::B, 0x56);
    CheckRegisterByte(RegisterType::C, 0xD7);
    CheckRegisterByte(RegisterType::D, 0x1E);
    CheckRegisterByte(RegisterType::E, 0x9F);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xBE);
    CheckRegisterByte(RegisterType::L, 0x3B);
    WriteRegisterWord(RegisterType::PC, 0xCC7E);
    WriteRegisterWord(RegisterType::SP, 0xAD82);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCC7D, 0x40);
}

void test_40_0083()
{
    if (skip_test_40_0083)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xED44);
    WriteRegisterWord(RegisterType::SP, 0x38F1);
    WriteRegisterByte(RegisterType::A, 0x82);
    WriteRegisterByte(RegisterType::B, 0xBA);
    WriteRegisterByte(RegisterType::C, 0xDB);
    WriteRegisterByte(RegisterType::D, 0x9E);
    WriteRegisterByte(RegisterType::E, 0xC1);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xF0);
    WriteRegisterByte(RegisterType::L, 0x03);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xED44, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x82);
    CheckRegisterByte(RegisterType::B, 0xBA);
    CheckRegisterByte(RegisterType::C, 0xDB);
    CheckRegisterByte(RegisterType::D, 0x9E);
    CheckRegisterByte(RegisterType::E, 0xC1);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xF0);
    CheckRegisterByte(RegisterType::L, 0x03);
    WriteRegisterWord(RegisterType::PC, 0xED45);
    WriteRegisterWord(RegisterType::SP, 0x38F1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xED44, 0x40);
}

void test_40_0084()
{
    if (skip_test_40_0084)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6687);
    WriteRegisterWord(RegisterType::SP, 0x1895);
    WriteRegisterByte(RegisterType::A, 0x51);
    WriteRegisterByte(RegisterType::B, 0xA9);
    WriteRegisterByte(RegisterType::C, 0x55);
    WriteRegisterByte(RegisterType::D, 0x7B);
    WriteRegisterByte(RegisterType::E, 0xB6);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xFE);
    WriteRegisterByte(RegisterType::L, 0x75);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6687, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x51);
    CheckRegisterByte(RegisterType::B, 0xA9);
    CheckRegisterByte(RegisterType::C, 0x55);
    CheckRegisterByte(RegisterType::D, 0x7B);
    CheckRegisterByte(RegisterType::E, 0xB6);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xFE);
    CheckRegisterByte(RegisterType::L, 0x75);
    WriteRegisterWord(RegisterType::PC, 0x6688);
    WriteRegisterWord(RegisterType::SP, 0x1895);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6687, 0x40);
}

void test_40_0085()
{
    if (skip_test_40_0085)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5982);
    WriteRegisterWord(RegisterType::SP, 0x7D26);
    WriteRegisterByte(RegisterType::A, 0x9E);
    WriteRegisterByte(RegisterType::B, 0xF8);
    WriteRegisterByte(RegisterType::C, 0x39);
    WriteRegisterByte(RegisterType::D, 0x76);
    WriteRegisterByte(RegisterType::E, 0x97);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x72);
    WriteRegisterByte(RegisterType::L, 0x6A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5982, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9E);
    CheckRegisterByte(RegisterType::B, 0xF8);
    CheckRegisterByte(RegisterType::C, 0x39);
    CheckRegisterByte(RegisterType::D, 0x76);
    CheckRegisterByte(RegisterType::E, 0x97);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x72);
    CheckRegisterByte(RegisterType::L, 0x6A);
    WriteRegisterWord(RegisterType::PC, 0x5983);
    WriteRegisterWord(RegisterType::SP, 0x7D26);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5982, 0x40);
}

void test_40_0086()
{
    if (skip_test_40_0086)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4BD0);
    WriteRegisterWord(RegisterType::SP, 0xCBD6);
    WriteRegisterByte(RegisterType::A, 0xC6);
    WriteRegisterByte(RegisterType::B, 0x44);
    WriteRegisterByte(RegisterType::C, 0x18);
    WriteRegisterByte(RegisterType::D, 0xA6);
    WriteRegisterByte(RegisterType::E, 0x45);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x08);
    WriteRegisterByte(RegisterType::L, 0xD3);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4BD0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC6);
    CheckRegisterByte(RegisterType::B, 0x44);
    CheckRegisterByte(RegisterType::C, 0x18);
    CheckRegisterByte(RegisterType::D, 0xA6);
    CheckRegisterByte(RegisterType::E, 0x45);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x08);
    CheckRegisterByte(RegisterType::L, 0xD3);
    WriteRegisterWord(RegisterType::PC, 0x4BD1);
    WriteRegisterWord(RegisterType::SP, 0xCBD6);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4BD0, 0x40);
}

void test_40_0087()
{
    if (skip_test_40_0087)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA1BA);
    WriteRegisterWord(RegisterType::SP, 0xB142);
    WriteRegisterByte(RegisterType::A, 0x92);
    WriteRegisterByte(RegisterType::B, 0x3C);
    WriteRegisterByte(RegisterType::C, 0xB6);
    WriteRegisterByte(RegisterType::D, 0xC5);
    WriteRegisterByte(RegisterType::E, 0xB7);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x66);
    WriteRegisterByte(RegisterType::L, 0x60);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA1BA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x92);
    CheckRegisterByte(RegisterType::B, 0x3C);
    CheckRegisterByte(RegisterType::C, 0xB6);
    CheckRegisterByte(RegisterType::D, 0xC5);
    CheckRegisterByte(RegisterType::E, 0xB7);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x66);
    CheckRegisterByte(RegisterType::L, 0x60);
    WriteRegisterWord(RegisterType::PC, 0xA1BB);
    WriteRegisterWord(RegisterType::SP, 0xB142);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA1BA, 0x40);
}

void test_40_0088()
{
    if (skip_test_40_0088)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFA22);
    WriteRegisterWord(RegisterType::SP, 0x5CB2);
    WriteRegisterByte(RegisterType::A, 0xC1);
    WriteRegisterByte(RegisterType::B, 0xB4);
    WriteRegisterByte(RegisterType::C, 0x63);
    WriteRegisterByte(RegisterType::D, 0xB4);
    WriteRegisterByte(RegisterType::E, 0x04);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x37);
    WriteRegisterByte(RegisterType::L, 0x5B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFA22, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC1);
    CheckRegisterByte(RegisterType::B, 0xB4);
    CheckRegisterByte(RegisterType::C, 0x63);
    CheckRegisterByte(RegisterType::D, 0xB4);
    CheckRegisterByte(RegisterType::E, 0x04);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x37);
    CheckRegisterByte(RegisterType::L, 0x5B);
    WriteRegisterWord(RegisterType::PC, 0xFA23);
    WriteRegisterWord(RegisterType::SP, 0x5CB2);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFA22, 0x40);
}

void test_40_0089()
{
    if (skip_test_40_0089)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x239A);
    WriteRegisterWord(RegisterType::SP, 0x66DA);
    WriteRegisterByte(RegisterType::A, 0x02);
    WriteRegisterByte(RegisterType::B, 0x32);
    WriteRegisterByte(RegisterType::C, 0x6C);
    WriteRegisterByte(RegisterType::D, 0x03);
    WriteRegisterByte(RegisterType::E, 0x1A);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x6F);
    WriteRegisterByte(RegisterType::L, 0x92);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x239A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x02);
    CheckRegisterByte(RegisterType::B, 0x32);
    CheckRegisterByte(RegisterType::C, 0x6C);
    CheckRegisterByte(RegisterType::D, 0x03);
    CheckRegisterByte(RegisterType::E, 0x1A);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x6F);
    CheckRegisterByte(RegisterType::L, 0x92);
    WriteRegisterWord(RegisterType::PC, 0x239B);
    WriteRegisterWord(RegisterType::SP, 0x66DA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x239A, 0x40);
}

void test_40_008A()
{
    if (skip_test_40_008A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB248);
    WriteRegisterWord(RegisterType::SP, 0x2BB4);
    WriteRegisterByte(RegisterType::A, 0xE2);
    WriteRegisterByte(RegisterType::B, 0xDB);
    WriteRegisterByte(RegisterType::C, 0x84);
    WriteRegisterByte(RegisterType::D, 0x68);
    WriteRegisterByte(RegisterType::E, 0xA4);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x8F);
    WriteRegisterByte(RegisterType::L, 0x08);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB248, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE2);
    CheckRegisterByte(RegisterType::B, 0xDB);
    CheckRegisterByte(RegisterType::C, 0x84);
    CheckRegisterByte(RegisterType::D, 0x68);
    CheckRegisterByte(RegisterType::E, 0xA4);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x8F);
    CheckRegisterByte(RegisterType::L, 0x08);
    WriteRegisterWord(RegisterType::PC, 0xB249);
    WriteRegisterWord(RegisterType::SP, 0x2BB4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB248, 0x40);
}

void test_40_008B()
{
    if (skip_test_40_008B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAE99);
    WriteRegisterWord(RegisterType::SP, 0xDA5B);
    WriteRegisterByte(RegisterType::A, 0x17);
    WriteRegisterByte(RegisterType::B, 0x2B);
    WriteRegisterByte(RegisterType::C, 0xBE);
    WriteRegisterByte(RegisterType::D, 0x86);
    WriteRegisterByte(RegisterType::E, 0xE6);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x2E);
    WriteRegisterByte(RegisterType::L, 0xEB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xAE99, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x17);
    CheckRegisterByte(RegisterType::B, 0x2B);
    CheckRegisterByte(RegisterType::C, 0xBE);
    CheckRegisterByte(RegisterType::D, 0x86);
    CheckRegisterByte(RegisterType::E, 0xE6);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x2E);
    CheckRegisterByte(RegisterType::L, 0xEB);
    WriteRegisterWord(RegisterType::PC, 0xAE9A);
    WriteRegisterWord(RegisterType::SP, 0xDA5B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAE99, 0x40);
}

void test_40_008C()
{
    if (skip_test_40_008C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x03E9);
    WriteRegisterWord(RegisterType::SP, 0xA757);
    WriteRegisterByte(RegisterType::A, 0x70);
    WriteRegisterByte(RegisterType::B, 0x6F);
    WriteRegisterByte(RegisterType::C, 0xBD);
    WriteRegisterByte(RegisterType::D, 0x41);
    WriteRegisterByte(RegisterType::E, 0xF2);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x7C);
    WriteRegisterByte(RegisterType::L, 0x89);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x03E9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x70);
    CheckRegisterByte(RegisterType::B, 0x6F);
    CheckRegisterByte(RegisterType::C, 0xBD);
    CheckRegisterByte(RegisterType::D, 0x41);
    CheckRegisterByte(RegisterType::E, 0xF2);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x7C);
    CheckRegisterByte(RegisterType::L, 0x89);
    WriteRegisterWord(RegisterType::PC, 0x03EA);
    WriteRegisterWord(RegisterType::SP, 0xA757);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x03E9, 0x40);
}

void test_40_008D()
{
    if (skip_test_40_008D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4802);
    WriteRegisterWord(RegisterType::SP, 0x5A3E);
    WriteRegisterByte(RegisterType::A, 0x77);
    WriteRegisterByte(RegisterType::B, 0x1B);
    WriteRegisterByte(RegisterType::C, 0x92);
    WriteRegisterByte(RegisterType::D, 0xBC);
    WriteRegisterByte(RegisterType::E, 0x22);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x2E);
    WriteRegisterByte(RegisterType::L, 0xD1);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4802, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x77);
    CheckRegisterByte(RegisterType::B, 0x1B);
    CheckRegisterByte(RegisterType::C, 0x92);
    CheckRegisterByte(RegisterType::D, 0xBC);
    CheckRegisterByte(RegisterType::E, 0x22);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x2E);
    CheckRegisterByte(RegisterType::L, 0xD1);
    WriteRegisterWord(RegisterType::PC, 0x4803);
    WriteRegisterWord(RegisterType::SP, 0x5A3E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4802, 0x40);
}

void test_40_008E()
{
    if (skip_test_40_008E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA922);
    WriteRegisterWord(RegisterType::SP, 0x7AA5);
    WriteRegisterByte(RegisterType::A, 0x76);
    WriteRegisterByte(RegisterType::B, 0x88);
    WriteRegisterByte(RegisterType::C, 0x71);
    WriteRegisterByte(RegisterType::D, 0xA6);
    WriteRegisterByte(RegisterType::E, 0x57);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xD2);
    WriteRegisterByte(RegisterType::L, 0xA6);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA922, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x76);
    CheckRegisterByte(RegisterType::B, 0x88);
    CheckRegisterByte(RegisterType::C, 0x71);
    CheckRegisterByte(RegisterType::D, 0xA6);
    CheckRegisterByte(RegisterType::E, 0x57);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xD2);
    CheckRegisterByte(RegisterType::L, 0xA6);
    WriteRegisterWord(RegisterType::PC, 0xA923);
    WriteRegisterWord(RegisterType::SP, 0x7AA5);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA922, 0x40);
}

void test_40_008F()
{
    if (skip_test_40_008F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4496);
    WriteRegisterWord(RegisterType::SP, 0x900F);
    WriteRegisterByte(RegisterType::A, 0x98);
    WriteRegisterByte(RegisterType::B, 0x6E);
    WriteRegisterByte(RegisterType::C, 0x7D);
    WriteRegisterByte(RegisterType::D, 0x71);
    WriteRegisterByte(RegisterType::E, 0x2F);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xD8);
    WriteRegisterByte(RegisterType::L, 0x42);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4496, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x98);
    CheckRegisterByte(RegisterType::B, 0x6E);
    CheckRegisterByte(RegisterType::C, 0x7D);
    CheckRegisterByte(RegisterType::D, 0x71);
    CheckRegisterByte(RegisterType::E, 0x2F);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xD8);
    CheckRegisterByte(RegisterType::L, 0x42);
    WriteRegisterWord(RegisterType::PC, 0x4497);
    WriteRegisterWord(RegisterType::SP, 0x900F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4496, 0x40);
}

void test_40_0090()
{
    if (skip_test_40_0090)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCE63);
    WriteRegisterWord(RegisterType::SP, 0x95AB);
    WriteRegisterByte(RegisterType::A, 0xEE);
    WriteRegisterByte(RegisterType::B, 0x76);
    WriteRegisterByte(RegisterType::C, 0xFC);
    WriteRegisterByte(RegisterType::D, 0xEC);
    WriteRegisterByte(RegisterType::E, 0xFC);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x1A);
    WriteRegisterByte(RegisterType::L, 0x0C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xCE63, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEE);
    CheckRegisterByte(RegisterType::B, 0x76);
    CheckRegisterByte(RegisterType::C, 0xFC);
    CheckRegisterByte(RegisterType::D, 0xEC);
    CheckRegisterByte(RegisterType::E, 0xFC);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x1A);
    CheckRegisterByte(RegisterType::L, 0x0C);
    WriteRegisterWord(RegisterType::PC, 0xCE64);
    WriteRegisterWord(RegisterType::SP, 0x95AB);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCE63, 0x40);
}

void test_40_0091()
{
    if (skip_test_40_0091)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF1E3);
    WriteRegisterWord(RegisterType::SP, 0xDE78);
    WriteRegisterByte(RegisterType::A, 0x0C);
    WriteRegisterByte(RegisterType::B, 0x72);
    WriteRegisterByte(RegisterType::C, 0xA9);
    WriteRegisterByte(RegisterType::D, 0x93);
    WriteRegisterByte(RegisterType::E, 0x36);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x06);
    WriteRegisterByte(RegisterType::L, 0x73);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF1E3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0C);
    CheckRegisterByte(RegisterType::B, 0x72);
    CheckRegisterByte(RegisterType::C, 0xA9);
    CheckRegisterByte(RegisterType::D, 0x93);
    CheckRegisterByte(RegisterType::E, 0x36);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x06);
    CheckRegisterByte(RegisterType::L, 0x73);
    WriteRegisterWord(RegisterType::PC, 0xF1E4);
    WriteRegisterWord(RegisterType::SP, 0xDE78);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF1E3, 0x40);
}

void test_40_0092()
{
    if (skip_test_40_0092)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8B72);
    WriteRegisterWord(RegisterType::SP, 0x7862);
    WriteRegisterByte(RegisterType::A, 0x33);
    WriteRegisterByte(RegisterType::B, 0xFC);
    WriteRegisterByte(RegisterType::C, 0x76);
    WriteRegisterByte(RegisterType::D, 0xCA);
    WriteRegisterByte(RegisterType::E, 0x56);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x0D);
    WriteRegisterByte(RegisterType::L, 0xA6);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8B72, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x33);
    CheckRegisterByte(RegisterType::B, 0xFC);
    CheckRegisterByte(RegisterType::C, 0x76);
    CheckRegisterByte(RegisterType::D, 0xCA);
    CheckRegisterByte(RegisterType::E, 0x56);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x0D);
    CheckRegisterByte(RegisterType::L, 0xA6);
    WriteRegisterWord(RegisterType::PC, 0x8B73);
    WriteRegisterWord(RegisterType::SP, 0x7862);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8B72, 0x40);
}

void test_40_0093()
{
    if (skip_test_40_0093)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA6CF);
    WriteRegisterWord(RegisterType::SP, 0x7CAC);
    WriteRegisterByte(RegisterType::A, 0x46);
    WriteRegisterByte(RegisterType::B, 0x73);
    WriteRegisterByte(RegisterType::C, 0xA2);
    WriteRegisterByte(RegisterType::D, 0xA8);
    WriteRegisterByte(RegisterType::E, 0xF0);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xFA);
    WriteRegisterByte(RegisterType::L, 0xCE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA6CF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x46);
    CheckRegisterByte(RegisterType::B, 0x73);
    CheckRegisterByte(RegisterType::C, 0xA2);
    CheckRegisterByte(RegisterType::D, 0xA8);
    CheckRegisterByte(RegisterType::E, 0xF0);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xFA);
    CheckRegisterByte(RegisterType::L, 0xCE);
    WriteRegisterWord(RegisterType::PC, 0xA6D0);
    WriteRegisterWord(RegisterType::SP, 0x7CAC);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA6CF, 0x40);
}

void test_40_0094()
{
    if (skip_test_40_0094)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6641);
    WriteRegisterWord(RegisterType::SP, 0x9BC0);
    WriteRegisterByte(RegisterType::A, 0x47);
    WriteRegisterByte(RegisterType::B, 0xCF);
    WriteRegisterByte(RegisterType::C, 0x9D);
    WriteRegisterByte(RegisterType::D, 0x31);
    WriteRegisterByte(RegisterType::E, 0x74);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x8B);
    WriteRegisterByte(RegisterType::L, 0xEE);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6641, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x47);
    CheckRegisterByte(RegisterType::B, 0xCF);
    CheckRegisterByte(RegisterType::C, 0x9D);
    CheckRegisterByte(RegisterType::D, 0x31);
    CheckRegisterByte(RegisterType::E, 0x74);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x8B);
    CheckRegisterByte(RegisterType::L, 0xEE);
    WriteRegisterWord(RegisterType::PC, 0x6642);
    WriteRegisterWord(RegisterType::SP, 0x9BC0);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6641, 0x40);
}

void test_40_0095()
{
    if (skip_test_40_0095)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5B15);
    WriteRegisterWord(RegisterType::SP, 0x5185);
    WriteRegisterByte(RegisterType::A, 0xED);
    WriteRegisterByte(RegisterType::B, 0xA1);
    WriteRegisterByte(RegisterType::C, 0x47);
    WriteRegisterByte(RegisterType::D, 0xF1);
    WriteRegisterByte(RegisterType::E, 0x68);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xF4);
    WriteRegisterByte(RegisterType::L, 0x16);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5B15, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xED);
    CheckRegisterByte(RegisterType::B, 0xA1);
    CheckRegisterByte(RegisterType::C, 0x47);
    CheckRegisterByte(RegisterType::D, 0xF1);
    CheckRegisterByte(RegisterType::E, 0x68);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xF4);
    CheckRegisterByte(RegisterType::L, 0x16);
    WriteRegisterWord(RegisterType::PC, 0x5B16);
    WriteRegisterWord(RegisterType::SP, 0x5185);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5B15, 0x40);
}

void test_40_0096()
{
    if (skip_test_40_0096)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1EAE);
    WriteRegisterWord(RegisterType::SP, 0x0F98);
    WriteRegisterByte(RegisterType::A, 0x10);
    WriteRegisterByte(RegisterType::B, 0xE6);
    WriteRegisterByte(RegisterType::C, 0xA1);
    WriteRegisterByte(RegisterType::D, 0x2A);
    WriteRegisterByte(RegisterType::E, 0xB3);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x55);
    WriteRegisterByte(RegisterType::L, 0x6B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1EAE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x10);
    CheckRegisterByte(RegisterType::B, 0xE6);
    CheckRegisterByte(RegisterType::C, 0xA1);
    CheckRegisterByte(RegisterType::D, 0x2A);
    CheckRegisterByte(RegisterType::E, 0xB3);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x55);
    CheckRegisterByte(RegisterType::L, 0x6B);
    WriteRegisterWord(RegisterType::PC, 0x1EAF);
    WriteRegisterWord(RegisterType::SP, 0x0F98);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1EAE, 0x40);
}

void test_40_0097()
{
    if (skip_test_40_0097)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD097);
    WriteRegisterWord(RegisterType::SP, 0x5003);
    WriteRegisterByte(RegisterType::A, 0xF8);
    WriteRegisterByte(RegisterType::B, 0x5C);
    WriteRegisterByte(RegisterType::C, 0xAC);
    WriteRegisterByte(RegisterType::D, 0x3B);
    WriteRegisterByte(RegisterType::E, 0xD3);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x4A);
    WriteRegisterByte(RegisterType::L, 0xC9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD097, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF8);
    CheckRegisterByte(RegisterType::B, 0x5C);
    CheckRegisterByte(RegisterType::C, 0xAC);
    CheckRegisterByte(RegisterType::D, 0x3B);
    CheckRegisterByte(RegisterType::E, 0xD3);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x4A);
    CheckRegisterByte(RegisterType::L, 0xC9);
    WriteRegisterWord(RegisterType::PC, 0xD098);
    WriteRegisterWord(RegisterType::SP, 0x5003);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD097, 0x40);
}

void test_40_0098()
{
    if (skip_test_40_0098)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFA22);
    WriteRegisterWord(RegisterType::SP, 0xE2D3);
    WriteRegisterByte(RegisterType::A, 0x10);
    WriteRegisterByte(RegisterType::B, 0x15);
    WriteRegisterByte(RegisterType::C, 0x7B);
    WriteRegisterByte(RegisterType::D, 0x32);
    WriteRegisterByte(RegisterType::E, 0xCF);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x3F);
    WriteRegisterByte(RegisterType::L, 0xB4);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFA22, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x10);
    CheckRegisterByte(RegisterType::B, 0x15);
    CheckRegisterByte(RegisterType::C, 0x7B);
    CheckRegisterByte(RegisterType::D, 0x32);
    CheckRegisterByte(RegisterType::E, 0xCF);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x3F);
    CheckRegisterByte(RegisterType::L, 0xB4);
    WriteRegisterWord(RegisterType::PC, 0xFA23);
    WriteRegisterWord(RegisterType::SP, 0xE2D3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFA22, 0x40);
}

void test_40_0099()
{
    if (skip_test_40_0099)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCBC8);
    WriteRegisterWord(RegisterType::SP, 0xF8DE);
    WriteRegisterByte(RegisterType::A, 0xAC);
    WriteRegisterByte(RegisterType::B, 0xAD);
    WriteRegisterByte(RegisterType::C, 0xC4);
    WriteRegisterByte(RegisterType::D, 0x04);
    WriteRegisterByte(RegisterType::E, 0x39);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xE4);
    WriteRegisterByte(RegisterType::L, 0x5F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCBC8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAC);
    CheckRegisterByte(RegisterType::B, 0xAD);
    CheckRegisterByte(RegisterType::C, 0xC4);
    CheckRegisterByte(RegisterType::D, 0x04);
    CheckRegisterByte(RegisterType::E, 0x39);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xE4);
    CheckRegisterByte(RegisterType::L, 0x5F);
    WriteRegisterWord(RegisterType::PC, 0xCBC9);
    WriteRegisterWord(RegisterType::SP, 0xF8DE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCBC8, 0x40);
}

void test_40_009A()
{
    if (skip_test_40_009A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA59F);
    WriteRegisterWord(RegisterType::SP, 0xE492);
    WriteRegisterByte(RegisterType::A, 0x58);
    WriteRegisterByte(RegisterType::B, 0xFA);
    WriteRegisterByte(RegisterType::C, 0x7E);
    WriteRegisterByte(RegisterType::D, 0x88);
    WriteRegisterByte(RegisterType::E, 0xD6);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xC6);
    WriteRegisterByte(RegisterType::L, 0xBB);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA59F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x58);
    CheckRegisterByte(RegisterType::B, 0xFA);
    CheckRegisterByte(RegisterType::C, 0x7E);
    CheckRegisterByte(RegisterType::D, 0x88);
    CheckRegisterByte(RegisterType::E, 0xD6);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xC6);
    CheckRegisterByte(RegisterType::L, 0xBB);
    WriteRegisterWord(RegisterType::PC, 0xA5A0);
    WriteRegisterWord(RegisterType::SP, 0xE492);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA59F, 0x40);
}

void test_40_009B()
{
    if (skip_test_40_009B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2FD2);
    WriteRegisterWord(RegisterType::SP, 0xEAC0);
    WriteRegisterByte(RegisterType::A, 0x65);
    WriteRegisterByte(RegisterType::B, 0x38);
    WriteRegisterByte(RegisterType::C, 0x34);
    WriteRegisterByte(RegisterType::D, 0x44);
    WriteRegisterByte(RegisterType::E, 0xD1);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x8D);
    WriteRegisterByte(RegisterType::L, 0xF2);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2FD2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x65);
    CheckRegisterByte(RegisterType::B, 0x38);
    CheckRegisterByte(RegisterType::C, 0x34);
    CheckRegisterByte(RegisterType::D, 0x44);
    CheckRegisterByte(RegisterType::E, 0xD1);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x8D);
    CheckRegisterByte(RegisterType::L, 0xF2);
    WriteRegisterWord(RegisterType::PC, 0x2FD3);
    WriteRegisterWord(RegisterType::SP, 0xEAC0);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2FD2, 0x40);
}

void test_40_009C()
{
    if (skip_test_40_009C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x157E);
    WriteRegisterWord(RegisterType::SP, 0x1ED9);
    WriteRegisterByte(RegisterType::A, 0x0E);
    WriteRegisterByte(RegisterType::B, 0x9A);
    WriteRegisterByte(RegisterType::C, 0xB8);
    WriteRegisterByte(RegisterType::D, 0xA8);
    WriteRegisterByte(RegisterType::E, 0x7C);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x82);
    WriteRegisterByte(RegisterType::L, 0x1F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x157E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0E);
    CheckRegisterByte(RegisterType::B, 0x9A);
    CheckRegisterByte(RegisterType::C, 0xB8);
    CheckRegisterByte(RegisterType::D, 0xA8);
    CheckRegisterByte(RegisterType::E, 0x7C);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x82);
    CheckRegisterByte(RegisterType::L, 0x1F);
    WriteRegisterWord(RegisterType::PC, 0x157F);
    WriteRegisterWord(RegisterType::SP, 0x1ED9);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x157E, 0x40);
}

void test_40_009D()
{
    if (skip_test_40_009D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA213);
    WriteRegisterWord(RegisterType::SP, 0x09D6);
    WriteRegisterByte(RegisterType::A, 0xB1);
    WriteRegisterByte(RegisterType::B, 0xD8);
    WriteRegisterByte(RegisterType::C, 0x59);
    WriteRegisterByte(RegisterType::D, 0xC4);
    WriteRegisterByte(RegisterType::E, 0xE6);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xE7);
    WriteRegisterByte(RegisterType::L, 0xF1);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA213, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB1);
    CheckRegisterByte(RegisterType::B, 0xD8);
    CheckRegisterByte(RegisterType::C, 0x59);
    CheckRegisterByte(RegisterType::D, 0xC4);
    CheckRegisterByte(RegisterType::E, 0xE6);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xE7);
    CheckRegisterByte(RegisterType::L, 0xF1);
    WriteRegisterWord(RegisterType::PC, 0xA214);
    WriteRegisterWord(RegisterType::SP, 0x09D6);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA213, 0x40);
}

void test_40_009E()
{
    if (skip_test_40_009E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x34F6);
    WriteRegisterWord(RegisterType::SP, 0x0106);
    WriteRegisterByte(RegisterType::A, 0x37);
    WriteRegisterByte(RegisterType::B, 0x6E);
    WriteRegisterByte(RegisterType::C, 0x0D);
    WriteRegisterByte(RegisterType::D, 0xBC);
    WriteRegisterByte(RegisterType::E, 0xC8);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xD6);
    WriteRegisterByte(RegisterType::L, 0xC2);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x34F6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x37);
    CheckRegisterByte(RegisterType::B, 0x6E);
    CheckRegisterByte(RegisterType::C, 0x0D);
    CheckRegisterByte(RegisterType::D, 0xBC);
    CheckRegisterByte(RegisterType::E, 0xC8);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xD6);
    CheckRegisterByte(RegisterType::L, 0xC2);
    WriteRegisterWord(RegisterType::PC, 0x34F7);
    WriteRegisterWord(RegisterType::SP, 0x0106);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x34F6, 0x40);
}

void test_40_009F()
{
    if (skip_test_40_009F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9459);
    WriteRegisterWord(RegisterType::SP, 0xD489);
    WriteRegisterByte(RegisterType::A, 0xD1);
    WriteRegisterByte(RegisterType::B, 0x37);
    WriteRegisterByte(RegisterType::C, 0xBC);
    WriteRegisterByte(RegisterType::D, 0xAE);
    WriteRegisterByte(RegisterType::E, 0xB2);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xE2);
    WriteRegisterByte(RegisterType::L, 0xDD);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9459, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD1);
    CheckRegisterByte(RegisterType::B, 0x37);
    CheckRegisterByte(RegisterType::C, 0xBC);
    CheckRegisterByte(RegisterType::D, 0xAE);
    CheckRegisterByte(RegisterType::E, 0xB2);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xE2);
    CheckRegisterByte(RegisterType::L, 0xDD);
    WriteRegisterWord(RegisterType::PC, 0x945A);
    WriteRegisterWord(RegisterType::SP, 0xD489);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9459, 0x40);
}

void test_40_00A0()
{
    if (skip_test_40_00A0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9F78);
    WriteRegisterWord(RegisterType::SP, 0xDF8F);
    WriteRegisterByte(RegisterType::A, 0x1D);
    WriteRegisterByte(RegisterType::B, 0x73);
    WriteRegisterByte(RegisterType::C, 0x71);
    WriteRegisterByte(RegisterType::D, 0x92);
    WriteRegisterByte(RegisterType::E, 0x30);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x4E);
    WriteRegisterByte(RegisterType::L, 0xBB);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x9F78, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1D);
    CheckRegisterByte(RegisterType::B, 0x73);
    CheckRegisterByte(RegisterType::C, 0x71);
    CheckRegisterByte(RegisterType::D, 0x92);
    CheckRegisterByte(RegisterType::E, 0x30);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x4E);
    CheckRegisterByte(RegisterType::L, 0xBB);
    WriteRegisterWord(RegisterType::PC, 0x9F79);
    WriteRegisterWord(RegisterType::SP, 0xDF8F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x9F78, 0x40);
}

void test_40_00A1()
{
    if (skip_test_40_00A1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x35F5);
    WriteRegisterWord(RegisterType::SP, 0x7570);
    WriteRegisterByte(RegisterType::A, 0x2E);
    WriteRegisterByte(RegisterType::B, 0xA2);
    WriteRegisterByte(RegisterType::C, 0x85);
    WriteRegisterByte(RegisterType::D, 0xAB);
    WriteRegisterByte(RegisterType::E, 0xF5);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xE8);
    WriteRegisterByte(RegisterType::L, 0xD8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x35F5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2E);
    CheckRegisterByte(RegisterType::B, 0xA2);
    CheckRegisterByte(RegisterType::C, 0x85);
    CheckRegisterByte(RegisterType::D, 0xAB);
    CheckRegisterByte(RegisterType::E, 0xF5);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xE8);
    CheckRegisterByte(RegisterType::L, 0xD8);
    WriteRegisterWord(RegisterType::PC, 0x35F6);
    WriteRegisterWord(RegisterType::SP, 0x7570);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x35F5, 0x40);
}

void test_40_00A2()
{
    if (skip_test_40_00A2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCA36);
    WriteRegisterWord(RegisterType::SP, 0xD086);
    WriteRegisterByte(RegisterType::A, 0xEE);
    WriteRegisterByte(RegisterType::B, 0xB8);
    WriteRegisterByte(RegisterType::C, 0xBF);
    WriteRegisterByte(RegisterType::D, 0x6D);
    WriteRegisterByte(RegisterType::E, 0xCA);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xCF);
    WriteRegisterByte(RegisterType::L, 0x45);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xCA36, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEE);
    CheckRegisterByte(RegisterType::B, 0xB8);
    CheckRegisterByte(RegisterType::C, 0xBF);
    CheckRegisterByte(RegisterType::D, 0x6D);
    CheckRegisterByte(RegisterType::E, 0xCA);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xCF);
    CheckRegisterByte(RegisterType::L, 0x45);
    WriteRegisterWord(RegisterType::PC, 0xCA37);
    WriteRegisterWord(RegisterType::SP, 0xD086);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCA36, 0x40);
}

void test_40_00A3()
{
    if (skip_test_40_00A3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2A61);
    WriteRegisterWord(RegisterType::SP, 0xEA4B);
    WriteRegisterByte(RegisterType::A, 0xD8);
    WriteRegisterByte(RegisterType::B, 0x0C);
    WriteRegisterByte(RegisterType::C, 0x51);
    WriteRegisterByte(RegisterType::D, 0x8A);
    WriteRegisterByte(RegisterType::E, 0x53);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xAD);
    WriteRegisterByte(RegisterType::L, 0x27);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2A61, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD8);
    CheckRegisterByte(RegisterType::B, 0x0C);
    CheckRegisterByte(RegisterType::C, 0x51);
    CheckRegisterByte(RegisterType::D, 0x8A);
    CheckRegisterByte(RegisterType::E, 0x53);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xAD);
    CheckRegisterByte(RegisterType::L, 0x27);
    WriteRegisterWord(RegisterType::PC, 0x2A62);
    WriteRegisterWord(RegisterType::SP, 0xEA4B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2A61, 0x40);
}

void test_40_00A4()
{
    if (skip_test_40_00A4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6373);
    WriteRegisterWord(RegisterType::SP, 0x851A);
    WriteRegisterByte(RegisterType::A, 0x67);
    WriteRegisterByte(RegisterType::B, 0x4A);
    WriteRegisterByte(RegisterType::C, 0xC4);
    WriteRegisterByte(RegisterType::D, 0x16);
    WriteRegisterByte(RegisterType::E, 0xA8);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x6F);
    WriteRegisterByte(RegisterType::L, 0x68);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6373, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x67);
    CheckRegisterByte(RegisterType::B, 0x4A);
    CheckRegisterByte(RegisterType::C, 0xC4);
    CheckRegisterByte(RegisterType::D, 0x16);
    CheckRegisterByte(RegisterType::E, 0xA8);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x6F);
    CheckRegisterByte(RegisterType::L, 0x68);
    WriteRegisterWord(RegisterType::PC, 0x6374);
    WriteRegisterWord(RegisterType::SP, 0x851A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6373, 0x40);
}

void test_40_00A5()
{
    if (skip_test_40_00A5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0550);
    WriteRegisterWord(RegisterType::SP, 0xFCEE);
    WriteRegisterByte(RegisterType::A, 0xEE);
    WriteRegisterByte(RegisterType::B, 0xD6);
    WriteRegisterByte(RegisterType::C, 0xDE);
    WriteRegisterByte(RegisterType::D, 0x44);
    WriteRegisterByte(RegisterType::E, 0xD6);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x87);
    WriteRegisterByte(RegisterType::L, 0x5E);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0550, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEE);
    CheckRegisterByte(RegisterType::B, 0xD6);
    CheckRegisterByte(RegisterType::C, 0xDE);
    CheckRegisterByte(RegisterType::D, 0x44);
    CheckRegisterByte(RegisterType::E, 0xD6);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x87);
    CheckRegisterByte(RegisterType::L, 0x5E);
    WriteRegisterWord(RegisterType::PC, 0x0551);
    WriteRegisterWord(RegisterType::SP, 0xFCEE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0550, 0x40);
}

void test_40_00A6()
{
    if (skip_test_40_00A6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6AC8);
    WriteRegisterWord(RegisterType::SP, 0xB381);
    WriteRegisterByte(RegisterType::A, 0x1C);
    WriteRegisterByte(RegisterType::B, 0x78);
    WriteRegisterByte(RegisterType::C, 0x55);
    WriteRegisterByte(RegisterType::D, 0xAB);
    WriteRegisterByte(RegisterType::E, 0x10);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x0F);
    WriteRegisterByte(RegisterType::L, 0xAB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6AC8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1C);
    CheckRegisterByte(RegisterType::B, 0x78);
    CheckRegisterByte(RegisterType::C, 0x55);
    CheckRegisterByte(RegisterType::D, 0xAB);
    CheckRegisterByte(RegisterType::E, 0x10);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x0F);
    CheckRegisterByte(RegisterType::L, 0xAB);
    WriteRegisterWord(RegisterType::PC, 0x6AC9);
    WriteRegisterWord(RegisterType::SP, 0xB381);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6AC8, 0x40);
}

void test_40_00A7()
{
    if (skip_test_40_00A7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5602);
    WriteRegisterWord(RegisterType::SP, 0xE9D1);
    WriteRegisterByte(RegisterType::A, 0x94);
    WriteRegisterByte(RegisterType::B, 0x36);
    WriteRegisterByte(RegisterType::C, 0xF2);
    WriteRegisterByte(RegisterType::D, 0x01);
    WriteRegisterByte(RegisterType::E, 0x37);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xF4);
    WriteRegisterByte(RegisterType::L, 0x25);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5602, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x94);
    CheckRegisterByte(RegisterType::B, 0x36);
    CheckRegisterByte(RegisterType::C, 0xF2);
    CheckRegisterByte(RegisterType::D, 0x01);
    CheckRegisterByte(RegisterType::E, 0x37);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xF4);
    CheckRegisterByte(RegisterType::L, 0x25);
    WriteRegisterWord(RegisterType::PC, 0x5603);
    WriteRegisterWord(RegisterType::SP, 0xE9D1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5602, 0x40);
}

void test_40_00A8()
{
    if (skip_test_40_00A8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x48B3);
    WriteRegisterWord(RegisterType::SP, 0x8AE8);
    WriteRegisterByte(RegisterType::A, 0xA1);
    WriteRegisterByte(RegisterType::B, 0xC8);
    WriteRegisterByte(RegisterType::C, 0x44);
    WriteRegisterByte(RegisterType::D, 0x8D);
    WriteRegisterByte(RegisterType::E, 0xEC);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xD0);
    WriteRegisterByte(RegisterType::L, 0x10);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x48B3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA1);
    CheckRegisterByte(RegisterType::B, 0xC8);
    CheckRegisterByte(RegisterType::C, 0x44);
    CheckRegisterByte(RegisterType::D, 0x8D);
    CheckRegisterByte(RegisterType::E, 0xEC);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xD0);
    CheckRegisterByte(RegisterType::L, 0x10);
    WriteRegisterWord(RegisterType::PC, 0x48B4);
    WriteRegisterWord(RegisterType::SP, 0x8AE8);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x48B3, 0x40);
}

void test_40_00A9()
{
    if (skip_test_40_00A9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6D74);
    WriteRegisterWord(RegisterType::SP, 0x33C5);
    WriteRegisterByte(RegisterType::A, 0xC8);
    WriteRegisterByte(RegisterType::B, 0x82);
    WriteRegisterByte(RegisterType::C, 0x9E);
    WriteRegisterByte(RegisterType::D, 0xA0);
    WriteRegisterByte(RegisterType::E, 0xE8);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x6C);
    WriteRegisterByte(RegisterType::L, 0x7E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6D74, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC8);
    CheckRegisterByte(RegisterType::B, 0x82);
    CheckRegisterByte(RegisterType::C, 0x9E);
    CheckRegisterByte(RegisterType::D, 0xA0);
    CheckRegisterByte(RegisterType::E, 0xE8);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x6C);
    CheckRegisterByte(RegisterType::L, 0x7E);
    WriteRegisterWord(RegisterType::PC, 0x6D75);
    WriteRegisterWord(RegisterType::SP, 0x33C5);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6D74, 0x40);
}

void test_40_00AA()
{
    if (skip_test_40_00AA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDCE6);
    WriteRegisterWord(RegisterType::SP, 0x9BB8);
    WriteRegisterByte(RegisterType::A, 0x35);
    WriteRegisterByte(RegisterType::B, 0xD1);
    WriteRegisterByte(RegisterType::C, 0xFB);
    WriteRegisterByte(RegisterType::D, 0xCE);
    WriteRegisterByte(RegisterType::E, 0x89);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xCA);
    WriteRegisterByte(RegisterType::L, 0xF7);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDCE6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x35);
    CheckRegisterByte(RegisterType::B, 0xD1);
    CheckRegisterByte(RegisterType::C, 0xFB);
    CheckRegisterByte(RegisterType::D, 0xCE);
    CheckRegisterByte(RegisterType::E, 0x89);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xCA);
    CheckRegisterByte(RegisterType::L, 0xF7);
    WriteRegisterWord(RegisterType::PC, 0xDCE7);
    WriteRegisterWord(RegisterType::SP, 0x9BB8);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDCE6, 0x40);
}

void test_40_00AB()
{
    if (skip_test_40_00AB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1E41);
    WriteRegisterWord(RegisterType::SP, 0x5A61);
    WriteRegisterByte(RegisterType::A, 0xF4);
    WriteRegisterByte(RegisterType::B, 0xD6);
    WriteRegisterByte(RegisterType::C, 0xFE);
    WriteRegisterByte(RegisterType::D, 0x4A);
    WriteRegisterByte(RegisterType::E, 0x58);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x2F);
    WriteRegisterByte(RegisterType::L, 0xA2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1E41, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF4);
    CheckRegisterByte(RegisterType::B, 0xD6);
    CheckRegisterByte(RegisterType::C, 0xFE);
    CheckRegisterByte(RegisterType::D, 0x4A);
    CheckRegisterByte(RegisterType::E, 0x58);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x2F);
    CheckRegisterByte(RegisterType::L, 0xA2);
    WriteRegisterWord(RegisterType::PC, 0x1E42);
    WriteRegisterWord(RegisterType::SP, 0x5A61);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1E41, 0x40);
}

void test_40_00AC()
{
    if (skip_test_40_00AC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5693);
    WriteRegisterWord(RegisterType::SP, 0x31D1);
    WriteRegisterByte(RegisterType::A, 0x42);
    WriteRegisterByte(RegisterType::B, 0xBE);
    WriteRegisterByte(RegisterType::C, 0xD3);
    WriteRegisterByte(RegisterType::D, 0xC0);
    WriteRegisterByte(RegisterType::E, 0x3D);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x0A);
    WriteRegisterByte(RegisterType::L, 0x64);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5693, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x42);
    CheckRegisterByte(RegisterType::B, 0xBE);
    CheckRegisterByte(RegisterType::C, 0xD3);
    CheckRegisterByte(RegisterType::D, 0xC0);
    CheckRegisterByte(RegisterType::E, 0x3D);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x0A);
    CheckRegisterByte(RegisterType::L, 0x64);
    WriteRegisterWord(RegisterType::PC, 0x5694);
    WriteRegisterWord(RegisterType::SP, 0x31D1);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5693, 0x40);
}

void test_40_00AD()
{
    if (skip_test_40_00AD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x43BB);
    WriteRegisterWord(RegisterType::SP, 0x11EA);
    WriteRegisterByte(RegisterType::A, 0x24);
    WriteRegisterByte(RegisterType::B, 0x81);
    WriteRegisterByte(RegisterType::C, 0x80);
    WriteRegisterByte(RegisterType::D, 0xA0);
    WriteRegisterByte(RegisterType::E, 0x9A);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xDC);
    WriteRegisterByte(RegisterType::L, 0x59);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x43BB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x24);
    CheckRegisterByte(RegisterType::B, 0x81);
    CheckRegisterByte(RegisterType::C, 0x80);
    CheckRegisterByte(RegisterType::D, 0xA0);
    CheckRegisterByte(RegisterType::E, 0x9A);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xDC);
    CheckRegisterByte(RegisterType::L, 0x59);
    WriteRegisterWord(RegisterType::PC, 0x43BC);
    WriteRegisterWord(RegisterType::SP, 0x11EA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x43BB, 0x40);
}

void test_40_00AE()
{
    if (skip_test_40_00AE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAF93);
    WriteRegisterWord(RegisterType::SP, 0x5C73);
    WriteRegisterByte(RegisterType::A, 0xA4);
    WriteRegisterByte(RegisterType::B, 0xC2);
    WriteRegisterByte(RegisterType::C, 0xAA);
    WriteRegisterByte(RegisterType::D, 0xB7);
    WriteRegisterByte(RegisterType::E, 0x1D);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x38);
    WriteRegisterByte(RegisterType::L, 0x3C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xAF93, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA4);
    CheckRegisterByte(RegisterType::B, 0xC2);
    CheckRegisterByte(RegisterType::C, 0xAA);
    CheckRegisterByte(RegisterType::D, 0xB7);
    CheckRegisterByte(RegisterType::E, 0x1D);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x38);
    CheckRegisterByte(RegisterType::L, 0x3C);
    WriteRegisterWord(RegisterType::PC, 0xAF94);
    WriteRegisterWord(RegisterType::SP, 0x5C73);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xAF93, 0x40);
}

void test_40_00AF()
{
    if (skip_test_40_00AF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE9FD);
    WriteRegisterWord(RegisterType::SP, 0xF01F);
    WriteRegisterByte(RegisterType::A, 0xCB);
    WriteRegisterByte(RegisterType::B, 0xD6);
    WriteRegisterByte(RegisterType::C, 0xE3);
    WriteRegisterByte(RegisterType::D, 0xBE);
    WriteRegisterByte(RegisterType::E, 0x06);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xEE);
    WriteRegisterByte(RegisterType::L, 0x95);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xE9FD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCB);
    CheckRegisterByte(RegisterType::B, 0xD6);
    CheckRegisterByte(RegisterType::C, 0xE3);
    CheckRegisterByte(RegisterType::D, 0xBE);
    CheckRegisterByte(RegisterType::E, 0x06);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xEE);
    CheckRegisterByte(RegisterType::L, 0x95);
    WriteRegisterWord(RegisterType::PC, 0xE9FE);
    WriteRegisterWord(RegisterType::SP, 0xF01F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE9FD, 0x40);
}

void test_40_00B0()
{
    if (skip_test_40_00B0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3794);
    WriteRegisterWord(RegisterType::SP, 0x8775);
    WriteRegisterByte(RegisterType::A, 0x81);
    WriteRegisterByte(RegisterType::B, 0xD4);
    WriteRegisterByte(RegisterType::C, 0x71);
    WriteRegisterByte(RegisterType::D, 0xBC);
    WriteRegisterByte(RegisterType::E, 0xC2);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x57);
    WriteRegisterByte(RegisterType::L, 0x70);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3794, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x81);
    CheckRegisterByte(RegisterType::B, 0xD4);
    CheckRegisterByte(RegisterType::C, 0x71);
    CheckRegisterByte(RegisterType::D, 0xBC);
    CheckRegisterByte(RegisterType::E, 0xC2);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x57);
    CheckRegisterByte(RegisterType::L, 0x70);
    WriteRegisterWord(RegisterType::PC, 0x3795);
    WriteRegisterWord(RegisterType::SP, 0x8775);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3794, 0x40);
}

void test_40_00B1()
{
    if (skip_test_40_00B1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFC04);
    WriteRegisterWord(RegisterType::SP, 0x5043);
    WriteRegisterByte(RegisterType::A, 0xA1);
    WriteRegisterByte(RegisterType::B, 0x97);
    WriteRegisterByte(RegisterType::C, 0x13);
    WriteRegisterByte(RegisterType::D, 0x8F);
    WriteRegisterByte(RegisterType::E, 0x85);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x39);
    WriteRegisterByte(RegisterType::L, 0x8D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFC04, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA1);
    CheckRegisterByte(RegisterType::B, 0x97);
    CheckRegisterByte(RegisterType::C, 0x13);
    CheckRegisterByte(RegisterType::D, 0x8F);
    CheckRegisterByte(RegisterType::E, 0x85);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x39);
    CheckRegisterByte(RegisterType::L, 0x8D);
    WriteRegisterWord(RegisterType::PC, 0xFC05);
    WriteRegisterWord(RegisterType::SP, 0x5043);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFC04, 0x40);
}

void test_40_00B2()
{
    if (skip_test_40_00B2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3A39);
    WriteRegisterWord(RegisterType::SP, 0x25CB);
    WriteRegisterByte(RegisterType::A, 0x57);
    WriteRegisterByte(RegisterType::B, 0xDC);
    WriteRegisterByte(RegisterType::C, 0x82);
    WriteRegisterByte(RegisterType::D, 0xD9);
    WriteRegisterByte(RegisterType::E, 0x3D);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xE4);
    WriteRegisterByte(RegisterType::L, 0x4D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3A39, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x57);
    CheckRegisterByte(RegisterType::B, 0xDC);
    CheckRegisterByte(RegisterType::C, 0x82);
    CheckRegisterByte(RegisterType::D, 0xD9);
    CheckRegisterByte(RegisterType::E, 0x3D);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xE4);
    CheckRegisterByte(RegisterType::L, 0x4D);
    WriteRegisterWord(RegisterType::PC, 0x3A3A);
    WriteRegisterWord(RegisterType::SP, 0x25CB);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3A39, 0x40);
}

void test_40_00B3()
{
    if (skip_test_40_00B3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBAAF);
    WriteRegisterWord(RegisterType::SP, 0x0DE9);
    WriteRegisterByte(RegisterType::A, 0xE5);
    WriteRegisterByte(RegisterType::B, 0x09);
    WriteRegisterByte(RegisterType::C, 0x53);
    WriteRegisterByte(RegisterType::D, 0x78);
    WriteRegisterByte(RegisterType::E, 0x2A);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x89);
    WriteRegisterByte(RegisterType::L, 0xC4);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xBAAF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE5);
    CheckRegisterByte(RegisterType::B, 0x09);
    CheckRegisterByte(RegisterType::C, 0x53);
    CheckRegisterByte(RegisterType::D, 0x78);
    CheckRegisterByte(RegisterType::E, 0x2A);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x89);
    CheckRegisterByte(RegisterType::L, 0xC4);
    WriteRegisterWord(RegisterType::PC, 0xBAB0);
    WriteRegisterWord(RegisterType::SP, 0x0DE9);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xBAAF, 0x40);
}

void test_40_00B4()
{
    if (skip_test_40_00B4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5B02);
    WriteRegisterWord(RegisterType::SP, 0x7E25);
    WriteRegisterByte(RegisterType::A, 0x65);
    WriteRegisterByte(RegisterType::B, 0x20);
    WriteRegisterByte(RegisterType::C, 0xEB);
    WriteRegisterByte(RegisterType::D, 0xC1);
    WriteRegisterByte(RegisterType::E, 0x8F);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xC9);
    WriteRegisterByte(RegisterType::L, 0x26);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5B02, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x65);
    CheckRegisterByte(RegisterType::B, 0x20);
    CheckRegisterByte(RegisterType::C, 0xEB);
    CheckRegisterByte(RegisterType::D, 0xC1);
    CheckRegisterByte(RegisterType::E, 0x8F);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xC9);
    CheckRegisterByte(RegisterType::L, 0x26);
    WriteRegisterWord(RegisterType::PC, 0x5B03);
    WriteRegisterWord(RegisterType::SP, 0x7E25);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5B02, 0x40);
}

void test_40_00B5()
{
    if (skip_test_40_00B5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5738);
    WriteRegisterWord(RegisterType::SP, 0x71D9);
    WriteRegisterByte(RegisterType::A, 0x16);
    WriteRegisterByte(RegisterType::B, 0x81);
    WriteRegisterByte(RegisterType::C, 0x85);
    WriteRegisterByte(RegisterType::D, 0x26);
    WriteRegisterByte(RegisterType::E, 0xC2);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x2D);
    WriteRegisterByte(RegisterType::L, 0x26);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5738, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x16);
    CheckRegisterByte(RegisterType::B, 0x81);
    CheckRegisterByte(RegisterType::C, 0x85);
    CheckRegisterByte(RegisterType::D, 0x26);
    CheckRegisterByte(RegisterType::E, 0xC2);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x2D);
    CheckRegisterByte(RegisterType::L, 0x26);
    WriteRegisterWord(RegisterType::PC, 0x5739);
    WriteRegisterWord(RegisterType::SP, 0x71D9);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5738, 0x40);
}

void test_40_00B6()
{
    if (skip_test_40_00B6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB12B);
    WriteRegisterWord(RegisterType::SP, 0x47CC);
    WriteRegisterByte(RegisterType::A, 0xD4);
    WriteRegisterByte(RegisterType::B, 0xB1);
    WriteRegisterByte(RegisterType::C, 0xE5);
    WriteRegisterByte(RegisterType::D, 0x90);
    WriteRegisterByte(RegisterType::E, 0x62);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x2E);
    WriteRegisterByte(RegisterType::L, 0xE8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB12B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD4);
    CheckRegisterByte(RegisterType::B, 0xB1);
    CheckRegisterByte(RegisterType::C, 0xE5);
    CheckRegisterByte(RegisterType::D, 0x90);
    CheckRegisterByte(RegisterType::E, 0x62);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x2E);
    CheckRegisterByte(RegisterType::L, 0xE8);
    WriteRegisterWord(RegisterType::PC, 0xB12C);
    WriteRegisterWord(RegisterType::SP, 0x47CC);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB12B, 0x40);
}

void test_40_00B7()
{
    if (skip_test_40_00B7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x78BA);
    WriteRegisterWord(RegisterType::SP, 0xB6A9);
    WriteRegisterByte(RegisterType::A, 0x59);
    WriteRegisterByte(RegisterType::B, 0x77);
    WriteRegisterByte(RegisterType::C, 0x30);
    WriteRegisterByte(RegisterType::D, 0xDD);
    WriteRegisterByte(RegisterType::E, 0x7F);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xB6);
    WriteRegisterByte(RegisterType::L, 0x88);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x78BA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x59);
    CheckRegisterByte(RegisterType::B, 0x77);
    CheckRegisterByte(RegisterType::C, 0x30);
    CheckRegisterByte(RegisterType::D, 0xDD);
    CheckRegisterByte(RegisterType::E, 0x7F);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xB6);
    CheckRegisterByte(RegisterType::L, 0x88);
    WriteRegisterWord(RegisterType::PC, 0x78BB);
    WriteRegisterWord(RegisterType::SP, 0xB6A9);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x78BA, 0x40);
}

void test_40_00B8()
{
    if (skip_test_40_00B8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA62C);
    WriteRegisterWord(RegisterType::SP, 0x0283);
    WriteRegisterByte(RegisterType::A, 0x2D);
    WriteRegisterByte(RegisterType::B, 0x6E);
    WriteRegisterByte(RegisterType::C, 0x44);
    WriteRegisterByte(RegisterType::D, 0x59);
    WriteRegisterByte(RegisterType::E, 0x8F);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x3C);
    WriteRegisterByte(RegisterType::L, 0x93);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA62C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2D);
    CheckRegisterByte(RegisterType::B, 0x6E);
    CheckRegisterByte(RegisterType::C, 0x44);
    CheckRegisterByte(RegisterType::D, 0x59);
    CheckRegisterByte(RegisterType::E, 0x8F);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x3C);
    CheckRegisterByte(RegisterType::L, 0x93);
    WriteRegisterWord(RegisterType::PC, 0xA62D);
    WriteRegisterWord(RegisterType::SP, 0x0283);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA62C, 0x40);
}

void test_40_00B9()
{
    if (skip_test_40_00B9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF8F0);
    WriteRegisterWord(RegisterType::SP, 0x7E5E);
    WriteRegisterByte(RegisterType::A, 0x86);
    WriteRegisterByte(RegisterType::B, 0xA0);
    WriteRegisterByte(RegisterType::C, 0x41);
    WriteRegisterByte(RegisterType::D, 0x66);
    WriteRegisterByte(RegisterType::E, 0x8F);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x6F);
    WriteRegisterByte(RegisterType::L, 0x47);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF8F0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x86);
    CheckRegisterByte(RegisterType::B, 0xA0);
    CheckRegisterByte(RegisterType::C, 0x41);
    CheckRegisterByte(RegisterType::D, 0x66);
    CheckRegisterByte(RegisterType::E, 0x8F);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x6F);
    CheckRegisterByte(RegisterType::L, 0x47);
    WriteRegisterWord(RegisterType::PC, 0xF8F1);
    WriteRegisterWord(RegisterType::SP, 0x7E5E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF8F0, 0x40);
}

void test_40_00BA()
{
    if (skip_test_40_00BA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8720);
    WriteRegisterWord(RegisterType::SP, 0xF51D);
    WriteRegisterByte(RegisterType::A, 0x32);
    WriteRegisterByte(RegisterType::B, 0x6A);
    WriteRegisterByte(RegisterType::C, 0x84);
    WriteRegisterByte(RegisterType::D, 0x9F);
    WriteRegisterByte(RegisterType::E, 0xC2);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x52);
    WriteRegisterByte(RegisterType::L, 0x00);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8720, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x32);
    CheckRegisterByte(RegisterType::B, 0x6A);
    CheckRegisterByte(RegisterType::C, 0x84);
    CheckRegisterByte(RegisterType::D, 0x9F);
    CheckRegisterByte(RegisterType::E, 0xC2);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x52);
    CheckRegisterByte(RegisterType::L, 0x00);
    WriteRegisterWord(RegisterType::PC, 0x8721);
    WriteRegisterWord(RegisterType::SP, 0xF51D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8720, 0x40);
}

void test_40_00BB()
{
    if (skip_test_40_00BB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1F66);
    WriteRegisterWord(RegisterType::SP, 0x583C);
    WriteRegisterByte(RegisterType::A, 0x13);
    WriteRegisterByte(RegisterType::B, 0x74);
    WriteRegisterByte(RegisterType::C, 0x37);
    WriteRegisterByte(RegisterType::D, 0x28);
    WriteRegisterByte(RegisterType::E, 0x90);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xE1);
    WriteRegisterByte(RegisterType::L, 0x77);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1F66, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x13);
    CheckRegisterByte(RegisterType::B, 0x74);
    CheckRegisterByte(RegisterType::C, 0x37);
    CheckRegisterByte(RegisterType::D, 0x28);
    CheckRegisterByte(RegisterType::E, 0x90);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xE1);
    CheckRegisterByte(RegisterType::L, 0x77);
    WriteRegisterWord(RegisterType::PC, 0x1F67);
    WriteRegisterWord(RegisterType::SP, 0x583C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1F66, 0x40);
}

void test_40_00BC()
{
    if (skip_test_40_00BC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDD18);
    WriteRegisterWord(RegisterType::SP, 0xB1C1);
    WriteRegisterByte(RegisterType::A, 0xA6);
    WriteRegisterByte(RegisterType::B, 0xB4);
    WriteRegisterByte(RegisterType::C, 0x2A);
    WriteRegisterByte(RegisterType::D, 0x64);
    WriteRegisterByte(RegisterType::E, 0x28);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xAE);
    WriteRegisterByte(RegisterType::L, 0x43);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDD18, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA6);
    CheckRegisterByte(RegisterType::B, 0xB4);
    CheckRegisterByte(RegisterType::C, 0x2A);
    CheckRegisterByte(RegisterType::D, 0x64);
    CheckRegisterByte(RegisterType::E, 0x28);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xAE);
    CheckRegisterByte(RegisterType::L, 0x43);
    WriteRegisterWord(RegisterType::PC, 0xDD19);
    WriteRegisterWord(RegisterType::SP, 0xB1C1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDD18, 0x40);
}

void test_40_00BD()
{
    if (skip_test_40_00BD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x42FB);
    WriteRegisterWord(RegisterType::SP, 0x05A7);
    WriteRegisterByte(RegisterType::A, 0x0C);
    WriteRegisterByte(RegisterType::B, 0x52);
    WriteRegisterByte(RegisterType::C, 0x63);
    WriteRegisterByte(RegisterType::D, 0x74);
    WriteRegisterByte(RegisterType::E, 0x19);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x64);
    WriteRegisterByte(RegisterType::L, 0xF3);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x42FB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0C);
    CheckRegisterByte(RegisterType::B, 0x52);
    CheckRegisterByte(RegisterType::C, 0x63);
    CheckRegisterByte(RegisterType::D, 0x74);
    CheckRegisterByte(RegisterType::E, 0x19);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x64);
    CheckRegisterByte(RegisterType::L, 0xF3);
    WriteRegisterWord(RegisterType::PC, 0x42FC);
    WriteRegisterWord(RegisterType::SP, 0x05A7);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x42FB, 0x40);
}

void test_40_00BE()
{
    if (skip_test_40_00BE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2056);
    WriteRegisterWord(RegisterType::SP, 0x91DE);
    WriteRegisterByte(RegisterType::A, 0xBE);
    WriteRegisterByte(RegisterType::B, 0x4C);
    WriteRegisterByte(RegisterType::C, 0x6B);
    WriteRegisterByte(RegisterType::D, 0x63);
    WriteRegisterByte(RegisterType::E, 0xC0);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x4A);
    WriteRegisterByte(RegisterType::L, 0x93);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2056, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBE);
    CheckRegisterByte(RegisterType::B, 0x4C);
    CheckRegisterByte(RegisterType::C, 0x6B);
    CheckRegisterByte(RegisterType::D, 0x63);
    CheckRegisterByte(RegisterType::E, 0xC0);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x4A);
    CheckRegisterByte(RegisterType::L, 0x93);
    WriteRegisterWord(RegisterType::PC, 0x2057);
    WriteRegisterWord(RegisterType::SP, 0x91DE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2056, 0x40);
}

void test_40_00BF()
{
    if (skip_test_40_00BF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x366A);
    WriteRegisterWord(RegisterType::SP, 0xB6B2);
    WriteRegisterByte(RegisterType::A, 0x99);
    WriteRegisterByte(RegisterType::B, 0xB9);
    WriteRegisterByte(RegisterType::C, 0x62);
    WriteRegisterByte(RegisterType::D, 0x0F);
    WriteRegisterByte(RegisterType::E, 0xFF);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x3D);
    WriteRegisterByte(RegisterType::L, 0xC4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x366A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x99);
    CheckRegisterByte(RegisterType::B, 0xB9);
    CheckRegisterByte(RegisterType::C, 0x62);
    CheckRegisterByte(RegisterType::D, 0x0F);
    CheckRegisterByte(RegisterType::E, 0xFF);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x3D);
    CheckRegisterByte(RegisterType::L, 0xC4);
    WriteRegisterWord(RegisterType::PC, 0x366B);
    WriteRegisterWord(RegisterType::SP, 0xB6B2);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x366A, 0x40);
}

void test_40_00C0()
{
    if (skip_test_40_00C0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9C1F);
    WriteRegisterWord(RegisterType::SP, 0xAB3C);
    WriteRegisterByte(RegisterType::A, 0xCB);
    WriteRegisterByte(RegisterType::B, 0x09);
    WriteRegisterByte(RegisterType::C, 0x75);
    WriteRegisterByte(RegisterType::D, 0x88);
    WriteRegisterByte(RegisterType::E, 0x0C);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xD2);
    WriteRegisterByte(RegisterType::L, 0xBC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9C1F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCB);
    CheckRegisterByte(RegisterType::B, 0x09);
    CheckRegisterByte(RegisterType::C, 0x75);
    CheckRegisterByte(RegisterType::D, 0x88);
    CheckRegisterByte(RegisterType::E, 0x0C);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xD2);
    CheckRegisterByte(RegisterType::L, 0xBC);
    WriteRegisterWord(RegisterType::PC, 0x9C20);
    WriteRegisterWord(RegisterType::SP, 0xAB3C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x9C1F, 0x40);
}

void test_40_00C1()
{
    if (skip_test_40_00C1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFDCE);
    WriteRegisterWord(RegisterType::SP, 0x1722);
    WriteRegisterByte(RegisterType::A, 0xE8);
    WriteRegisterByte(RegisterType::B, 0x64);
    WriteRegisterByte(RegisterType::C, 0xAB);
    WriteRegisterByte(RegisterType::D, 0xCE);
    WriteRegisterByte(RegisterType::E, 0x4E);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x0B);
    WriteRegisterByte(RegisterType::L, 0x83);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFDCE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE8);
    CheckRegisterByte(RegisterType::B, 0x64);
    CheckRegisterByte(RegisterType::C, 0xAB);
    CheckRegisterByte(RegisterType::D, 0xCE);
    CheckRegisterByte(RegisterType::E, 0x4E);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x0B);
    CheckRegisterByte(RegisterType::L, 0x83);
    WriteRegisterWord(RegisterType::PC, 0xFDCF);
    WriteRegisterWord(RegisterType::SP, 0x1722);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFDCE, 0x40);
}

void test_40_00C2()
{
    if (skip_test_40_00C2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3B34);
    WriteRegisterWord(RegisterType::SP, 0x4B4C);
    WriteRegisterByte(RegisterType::A, 0x88);
    WriteRegisterByte(RegisterType::B, 0x69);
    WriteRegisterByte(RegisterType::C, 0x34);
    WriteRegisterByte(RegisterType::D, 0x04);
    WriteRegisterByte(RegisterType::E, 0xD8);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x82);
    WriteRegisterByte(RegisterType::L, 0x85);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3B34, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x88);
    CheckRegisterByte(RegisterType::B, 0x69);
    CheckRegisterByte(RegisterType::C, 0x34);
    CheckRegisterByte(RegisterType::D, 0x04);
    CheckRegisterByte(RegisterType::E, 0xD8);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x82);
    CheckRegisterByte(RegisterType::L, 0x85);
    WriteRegisterWord(RegisterType::PC, 0x3B35);
    WriteRegisterWord(RegisterType::SP, 0x4B4C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3B34, 0x40);
}

void test_40_00C3()
{
    if (skip_test_40_00C3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA7CB);
    WriteRegisterWord(RegisterType::SP, 0x15EC);
    WriteRegisterByte(RegisterType::A, 0xE5);
    WriteRegisterByte(RegisterType::B, 0x47);
    WriteRegisterByte(RegisterType::C, 0x0E);
    WriteRegisterByte(RegisterType::D, 0xB5);
    WriteRegisterByte(RegisterType::E, 0x98);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x3A);
    WriteRegisterByte(RegisterType::L, 0xA3);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA7CB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE5);
    CheckRegisterByte(RegisterType::B, 0x47);
    CheckRegisterByte(RegisterType::C, 0x0E);
    CheckRegisterByte(RegisterType::D, 0xB5);
    CheckRegisterByte(RegisterType::E, 0x98);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x3A);
    CheckRegisterByte(RegisterType::L, 0xA3);
    WriteRegisterWord(RegisterType::PC, 0xA7CC);
    WriteRegisterWord(RegisterType::SP, 0x15EC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA7CB, 0x40);
}

void test_40_00C4()
{
    if (skip_test_40_00C4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCFF4);
    WriteRegisterWord(RegisterType::SP, 0x9480);
    WriteRegisterByte(RegisterType::A, 0x35);
    WriteRegisterByte(RegisterType::B, 0x09);
    WriteRegisterByte(RegisterType::C, 0x18);
    WriteRegisterByte(RegisterType::D, 0x11);
    WriteRegisterByte(RegisterType::E, 0xDB);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x4F);
    WriteRegisterByte(RegisterType::L, 0x0F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCFF4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x35);
    CheckRegisterByte(RegisterType::B, 0x09);
    CheckRegisterByte(RegisterType::C, 0x18);
    CheckRegisterByte(RegisterType::D, 0x11);
    CheckRegisterByte(RegisterType::E, 0xDB);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x4F);
    CheckRegisterByte(RegisterType::L, 0x0F);
    WriteRegisterWord(RegisterType::PC, 0xCFF5);
    WriteRegisterWord(RegisterType::SP, 0x9480);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCFF4, 0x40);
}

void test_40_00C5()
{
    if (skip_test_40_00C5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x420E);
    WriteRegisterWord(RegisterType::SP, 0x5C0A);
    WriteRegisterByte(RegisterType::A, 0x6C);
    WriteRegisterByte(RegisterType::B, 0xA9);
    WriteRegisterByte(RegisterType::C, 0x1C);
    WriteRegisterByte(RegisterType::D, 0xC7);
    WriteRegisterByte(RegisterType::E, 0x2E);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x55);
    WriteRegisterByte(RegisterType::L, 0xF4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x420E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6C);
    CheckRegisterByte(RegisterType::B, 0xA9);
    CheckRegisterByte(RegisterType::C, 0x1C);
    CheckRegisterByte(RegisterType::D, 0xC7);
    CheckRegisterByte(RegisterType::E, 0x2E);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x55);
    CheckRegisterByte(RegisterType::L, 0xF4);
    WriteRegisterWord(RegisterType::PC, 0x420F);
    WriteRegisterWord(RegisterType::SP, 0x5C0A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x420E, 0x40);
}

void test_40_00C6()
{
    if (skip_test_40_00C6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5445);
    WriteRegisterWord(RegisterType::SP, 0xCC67);
    WriteRegisterByte(RegisterType::A, 0xAD);
    WriteRegisterByte(RegisterType::B, 0x43);
    WriteRegisterByte(RegisterType::C, 0x78);
    WriteRegisterByte(RegisterType::D, 0x2D);
    WriteRegisterByte(RegisterType::E, 0x72);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xB5);
    WriteRegisterByte(RegisterType::L, 0x94);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5445, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAD);
    CheckRegisterByte(RegisterType::B, 0x43);
    CheckRegisterByte(RegisterType::C, 0x78);
    CheckRegisterByte(RegisterType::D, 0x2D);
    CheckRegisterByte(RegisterType::E, 0x72);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xB5);
    CheckRegisterByte(RegisterType::L, 0x94);
    WriteRegisterWord(RegisterType::PC, 0x5446);
    WriteRegisterWord(RegisterType::SP, 0xCC67);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5445, 0x40);
}

void test_40_00C7()
{
    if (skip_test_40_00C7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD0FC);
    WriteRegisterWord(RegisterType::SP, 0x67FD);
    WriteRegisterByte(RegisterType::A, 0x54);
    WriteRegisterByte(RegisterType::B, 0x5C);
    WriteRegisterByte(RegisterType::C, 0xBC);
    WriteRegisterByte(RegisterType::D, 0x1C);
    WriteRegisterByte(RegisterType::E, 0x57);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xC1);
    WriteRegisterByte(RegisterType::L, 0xF7);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD0FC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x54);
    CheckRegisterByte(RegisterType::B, 0x5C);
    CheckRegisterByte(RegisterType::C, 0xBC);
    CheckRegisterByte(RegisterType::D, 0x1C);
    CheckRegisterByte(RegisterType::E, 0x57);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xC1);
    CheckRegisterByte(RegisterType::L, 0xF7);
    WriteRegisterWord(RegisterType::PC, 0xD0FD);
    WriteRegisterWord(RegisterType::SP, 0x67FD);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD0FC, 0x40);
}

void test_40_00C8()
{
    if (skip_test_40_00C8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEBE0);
    WriteRegisterWord(RegisterType::SP, 0xA5E0);
    WriteRegisterByte(RegisterType::A, 0xE4);
    WriteRegisterByte(RegisterType::B, 0xF7);
    WriteRegisterByte(RegisterType::C, 0x7B);
    WriteRegisterByte(RegisterType::D, 0xDF);
    WriteRegisterByte(RegisterType::E, 0x9D);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x16);
    WriteRegisterByte(RegisterType::L, 0xD8);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xEBE0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE4);
    CheckRegisterByte(RegisterType::B, 0xF7);
    CheckRegisterByte(RegisterType::C, 0x7B);
    CheckRegisterByte(RegisterType::D, 0xDF);
    CheckRegisterByte(RegisterType::E, 0x9D);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x16);
    CheckRegisterByte(RegisterType::L, 0xD8);
    WriteRegisterWord(RegisterType::PC, 0xEBE1);
    WriteRegisterWord(RegisterType::SP, 0xA5E0);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEBE0, 0x40);
}

void test_40_00C9()
{
    if (skip_test_40_00C9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0FB6);
    WriteRegisterWord(RegisterType::SP, 0xD674);
    WriteRegisterByte(RegisterType::A, 0x4F);
    WriteRegisterByte(RegisterType::B, 0x22);
    WriteRegisterByte(RegisterType::C, 0xFB);
    WriteRegisterByte(RegisterType::D, 0x1E);
    WriteRegisterByte(RegisterType::E, 0x37);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xFF);
    WriteRegisterByte(RegisterType::L, 0x57);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0FB6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4F);
    CheckRegisterByte(RegisterType::B, 0x22);
    CheckRegisterByte(RegisterType::C, 0xFB);
    CheckRegisterByte(RegisterType::D, 0x1E);
    CheckRegisterByte(RegisterType::E, 0x37);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xFF);
    CheckRegisterByte(RegisterType::L, 0x57);
    WriteRegisterWord(RegisterType::PC, 0x0FB7);
    WriteRegisterWord(RegisterType::SP, 0xD674);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0FB6, 0x40);
}

void test_40_00CA()
{
    if (skip_test_40_00CA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x904E);
    WriteRegisterWord(RegisterType::SP, 0x4A0F);
    WriteRegisterByte(RegisterType::A, 0x22);
    WriteRegisterByte(RegisterType::B, 0x28);
    WriteRegisterByte(RegisterType::C, 0x55);
    WriteRegisterByte(RegisterType::D, 0xDB);
    WriteRegisterByte(RegisterType::E, 0x3E);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x2D);
    WriteRegisterByte(RegisterType::L, 0x50);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x904E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x22);
    CheckRegisterByte(RegisterType::B, 0x28);
    CheckRegisterByte(RegisterType::C, 0x55);
    CheckRegisterByte(RegisterType::D, 0xDB);
    CheckRegisterByte(RegisterType::E, 0x3E);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x2D);
    CheckRegisterByte(RegisterType::L, 0x50);
    WriteRegisterWord(RegisterType::PC, 0x904F);
    WriteRegisterWord(RegisterType::SP, 0x4A0F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x904E, 0x40);
}

void test_40_00CB()
{
    if (skip_test_40_00CB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF6C4);
    WriteRegisterWord(RegisterType::SP, 0x52E5);
    WriteRegisterByte(RegisterType::A, 0x1E);
    WriteRegisterByte(RegisterType::B, 0xC4);
    WriteRegisterByte(RegisterType::C, 0x9F);
    WriteRegisterByte(RegisterType::D, 0xF5);
    WriteRegisterByte(RegisterType::E, 0x49);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x69);
    WriteRegisterByte(RegisterType::L, 0x00);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF6C4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1E);
    CheckRegisterByte(RegisterType::B, 0xC4);
    CheckRegisterByte(RegisterType::C, 0x9F);
    CheckRegisterByte(RegisterType::D, 0xF5);
    CheckRegisterByte(RegisterType::E, 0x49);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x69);
    CheckRegisterByte(RegisterType::L, 0x00);
    WriteRegisterWord(RegisterType::PC, 0xF6C5);
    WriteRegisterWord(RegisterType::SP, 0x52E5);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF6C4, 0x40);
}

void test_40_00CC()
{
    if (skip_test_40_00CC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD10C);
    WriteRegisterWord(RegisterType::SP, 0x87C3);
    WriteRegisterByte(RegisterType::A, 0xC1);
    WriteRegisterByte(RegisterType::B, 0x8A);
    WriteRegisterByte(RegisterType::C, 0x5E);
    WriteRegisterByte(RegisterType::D, 0xCC);
    WriteRegisterByte(RegisterType::E, 0x3E);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x02);
    WriteRegisterByte(RegisterType::L, 0xB3);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD10C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC1);
    CheckRegisterByte(RegisterType::B, 0x8A);
    CheckRegisterByte(RegisterType::C, 0x5E);
    CheckRegisterByte(RegisterType::D, 0xCC);
    CheckRegisterByte(RegisterType::E, 0x3E);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x02);
    CheckRegisterByte(RegisterType::L, 0xB3);
    WriteRegisterWord(RegisterType::PC, 0xD10D);
    WriteRegisterWord(RegisterType::SP, 0x87C3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD10C, 0x40);
}

void test_40_00CD()
{
    if (skip_test_40_00CD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x70F5);
    WriteRegisterWord(RegisterType::SP, 0x307E);
    WriteRegisterByte(RegisterType::A, 0x3B);
    WriteRegisterByte(RegisterType::B, 0xE4);
    WriteRegisterByte(RegisterType::C, 0x20);
    WriteRegisterByte(RegisterType::D, 0x28);
    WriteRegisterByte(RegisterType::E, 0xE1);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xAB);
    WriteRegisterByte(RegisterType::L, 0xCA);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x70F5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3B);
    CheckRegisterByte(RegisterType::B, 0xE4);
    CheckRegisterByte(RegisterType::C, 0x20);
    CheckRegisterByte(RegisterType::D, 0x28);
    CheckRegisterByte(RegisterType::E, 0xE1);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xAB);
    CheckRegisterByte(RegisterType::L, 0xCA);
    WriteRegisterWord(RegisterType::PC, 0x70F6);
    WriteRegisterWord(RegisterType::SP, 0x307E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x70F5, 0x40);
}

void test_40_00CE()
{
    if (skip_test_40_00CE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x72A8);
    WriteRegisterWord(RegisterType::SP, 0xB43A);
    WriteRegisterByte(RegisterType::A, 0xC5);
    WriteRegisterByte(RegisterType::B, 0x1E);
    WriteRegisterByte(RegisterType::C, 0xA8);
    WriteRegisterByte(RegisterType::D, 0x02);
    WriteRegisterByte(RegisterType::E, 0x3C);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xDA);
    WriteRegisterByte(RegisterType::L, 0xA5);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x72A8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC5);
    CheckRegisterByte(RegisterType::B, 0x1E);
    CheckRegisterByte(RegisterType::C, 0xA8);
    CheckRegisterByte(RegisterType::D, 0x02);
    CheckRegisterByte(RegisterType::E, 0x3C);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xDA);
    CheckRegisterByte(RegisterType::L, 0xA5);
    WriteRegisterWord(RegisterType::PC, 0x72A9);
    WriteRegisterWord(RegisterType::SP, 0xB43A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x72A8, 0x40);
}

void test_40_00CF()
{
    if (skip_test_40_00CF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFAFC);
    WriteRegisterWord(RegisterType::SP, 0x06DF);
    WriteRegisterByte(RegisterType::A, 0xCA);
    WriteRegisterByte(RegisterType::B, 0x25);
    WriteRegisterByte(RegisterType::C, 0xD7);
    WriteRegisterByte(RegisterType::D, 0x06);
    WriteRegisterByte(RegisterType::E, 0xCB);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xC8);
    WriteRegisterByte(RegisterType::L, 0x82);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFAFC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCA);
    CheckRegisterByte(RegisterType::B, 0x25);
    CheckRegisterByte(RegisterType::C, 0xD7);
    CheckRegisterByte(RegisterType::D, 0x06);
    CheckRegisterByte(RegisterType::E, 0xCB);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xC8);
    CheckRegisterByte(RegisterType::L, 0x82);
    WriteRegisterWord(RegisterType::PC, 0xFAFD);
    WriteRegisterWord(RegisterType::SP, 0x06DF);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFAFC, 0x40);
}

void test_40_00D0()
{
    if (skip_test_40_00D0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7D98);
    WriteRegisterWord(RegisterType::SP, 0xE292);
    WriteRegisterByte(RegisterType::A, 0xE4);
    WriteRegisterByte(RegisterType::B, 0x92);
    WriteRegisterByte(RegisterType::C, 0xFD);
    WriteRegisterByte(RegisterType::D, 0x6D);
    WriteRegisterByte(RegisterType::E, 0x0A);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xBF);
    WriteRegisterByte(RegisterType::L, 0x20);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7D98, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE4);
    CheckRegisterByte(RegisterType::B, 0x92);
    CheckRegisterByte(RegisterType::C, 0xFD);
    CheckRegisterByte(RegisterType::D, 0x6D);
    CheckRegisterByte(RegisterType::E, 0x0A);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xBF);
    CheckRegisterByte(RegisterType::L, 0x20);
    WriteRegisterWord(RegisterType::PC, 0x7D99);
    WriteRegisterWord(RegisterType::SP, 0xE292);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7D98, 0x40);
}

void test_40_00D1()
{
    if (skip_test_40_00D1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x045D);
    WriteRegisterWord(RegisterType::SP, 0xC554);
    WriteRegisterByte(RegisterType::A, 0xB2);
    WriteRegisterByte(RegisterType::B, 0xB6);
    WriteRegisterByte(RegisterType::C, 0xCA);
    WriteRegisterByte(RegisterType::D, 0xEC);
    WriteRegisterByte(RegisterType::E, 0x7B);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x26);
    WriteRegisterByte(RegisterType::L, 0x1D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x045D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB2);
    CheckRegisterByte(RegisterType::B, 0xB6);
    CheckRegisterByte(RegisterType::C, 0xCA);
    CheckRegisterByte(RegisterType::D, 0xEC);
    CheckRegisterByte(RegisterType::E, 0x7B);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x26);
    CheckRegisterByte(RegisterType::L, 0x1D);
    WriteRegisterWord(RegisterType::PC, 0x045E);
    WriteRegisterWord(RegisterType::SP, 0xC554);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x045D, 0x40);
}

void test_40_00D2()
{
    if (skip_test_40_00D2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCD64);
    WriteRegisterWord(RegisterType::SP, 0x10C7);
    WriteRegisterByte(RegisterType::A, 0x64);
    WriteRegisterByte(RegisterType::B, 0x3E);
    WriteRegisterByte(RegisterType::C, 0x88);
    WriteRegisterByte(RegisterType::D, 0x8A);
    WriteRegisterByte(RegisterType::E, 0x52);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x1B);
    WriteRegisterByte(RegisterType::L, 0xA0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xCD64, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x64);
    CheckRegisterByte(RegisterType::B, 0x3E);
    CheckRegisterByte(RegisterType::C, 0x88);
    CheckRegisterByte(RegisterType::D, 0x8A);
    CheckRegisterByte(RegisterType::E, 0x52);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x1B);
    CheckRegisterByte(RegisterType::L, 0xA0);
    WriteRegisterWord(RegisterType::PC, 0xCD65);
    WriteRegisterWord(RegisterType::SP, 0x10C7);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCD64, 0x40);
}

void test_40_00D3()
{
    if (skip_test_40_00D3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5D7C);
    WriteRegisterWord(RegisterType::SP, 0x0A8A);
    WriteRegisterByte(RegisterType::A, 0xC5);
    WriteRegisterByte(RegisterType::B, 0x05);
    WriteRegisterByte(RegisterType::C, 0xEF);
    WriteRegisterByte(RegisterType::D, 0x18);
    WriteRegisterByte(RegisterType::E, 0x03);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x8B);
    WriteRegisterByte(RegisterType::L, 0x0B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5D7C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC5);
    CheckRegisterByte(RegisterType::B, 0x05);
    CheckRegisterByte(RegisterType::C, 0xEF);
    CheckRegisterByte(RegisterType::D, 0x18);
    CheckRegisterByte(RegisterType::E, 0x03);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x8B);
    CheckRegisterByte(RegisterType::L, 0x0B);
    WriteRegisterWord(RegisterType::PC, 0x5D7D);
    WriteRegisterWord(RegisterType::SP, 0x0A8A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5D7C, 0x40);
}

void test_40_00D4()
{
    if (skip_test_40_00D4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x664B);
    WriteRegisterWord(RegisterType::SP, 0xBC18);
    WriteRegisterByte(RegisterType::A, 0xD2);
    WriteRegisterByte(RegisterType::B, 0x92);
    WriteRegisterByte(RegisterType::C, 0x8C);
    WriteRegisterByte(RegisterType::D, 0x3F);
    WriteRegisterByte(RegisterType::E, 0x0C);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xBB);
    WriteRegisterByte(RegisterType::L, 0x92);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x664B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD2);
    CheckRegisterByte(RegisterType::B, 0x92);
    CheckRegisterByte(RegisterType::C, 0x8C);
    CheckRegisterByte(RegisterType::D, 0x3F);
    CheckRegisterByte(RegisterType::E, 0x0C);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xBB);
    CheckRegisterByte(RegisterType::L, 0x92);
    WriteRegisterWord(RegisterType::PC, 0x664C);
    WriteRegisterWord(RegisterType::SP, 0xBC18);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x664B, 0x40);
}

void test_40_00D5()
{
    if (skip_test_40_00D5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6A76);
    WriteRegisterWord(RegisterType::SP, 0x8C7D);
    WriteRegisterByte(RegisterType::A, 0xEA);
    WriteRegisterByte(RegisterType::B, 0xD4);
    WriteRegisterByte(RegisterType::C, 0x55);
    WriteRegisterByte(RegisterType::D, 0x65);
    WriteRegisterByte(RegisterType::E, 0x7A);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x58);
    WriteRegisterByte(RegisterType::L, 0x2C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6A76, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEA);
    CheckRegisterByte(RegisterType::B, 0xD4);
    CheckRegisterByte(RegisterType::C, 0x55);
    CheckRegisterByte(RegisterType::D, 0x65);
    CheckRegisterByte(RegisterType::E, 0x7A);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x58);
    CheckRegisterByte(RegisterType::L, 0x2C);
    WriteRegisterWord(RegisterType::PC, 0x6A77);
    WriteRegisterWord(RegisterType::SP, 0x8C7D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6A76, 0x40);
}

void test_40_00D6()
{
    if (skip_test_40_00D6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8051);
    WriteRegisterWord(RegisterType::SP, 0x4307);
    WriteRegisterByte(RegisterType::A, 0x10);
    WriteRegisterByte(RegisterType::B, 0xE1);
    WriteRegisterByte(RegisterType::C, 0x74);
    WriteRegisterByte(RegisterType::D, 0x6D);
    WriteRegisterByte(RegisterType::E, 0x11);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xC7);
    WriteRegisterByte(RegisterType::L, 0x42);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8051, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x10);
    CheckRegisterByte(RegisterType::B, 0xE1);
    CheckRegisterByte(RegisterType::C, 0x74);
    CheckRegisterByte(RegisterType::D, 0x6D);
    CheckRegisterByte(RegisterType::E, 0x11);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xC7);
    CheckRegisterByte(RegisterType::L, 0x42);
    WriteRegisterWord(RegisterType::PC, 0x8052);
    WriteRegisterWord(RegisterType::SP, 0x4307);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8051, 0x40);
}

void test_40_00D7()
{
    if (skip_test_40_00D7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA69E);
    WriteRegisterWord(RegisterType::SP, 0xF976);
    WriteRegisterByte(RegisterType::A, 0xF0);
    WriteRegisterByte(RegisterType::B, 0x6F);
    WriteRegisterByte(RegisterType::C, 0x49);
    WriteRegisterByte(RegisterType::D, 0x88);
    WriteRegisterByte(RegisterType::E, 0x20);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xA2);
    WriteRegisterByte(RegisterType::L, 0x16);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA69E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF0);
    CheckRegisterByte(RegisterType::B, 0x6F);
    CheckRegisterByte(RegisterType::C, 0x49);
    CheckRegisterByte(RegisterType::D, 0x88);
    CheckRegisterByte(RegisterType::E, 0x20);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xA2);
    CheckRegisterByte(RegisterType::L, 0x16);
    WriteRegisterWord(RegisterType::PC, 0xA69F);
    WriteRegisterWord(RegisterType::SP, 0xF976);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA69E, 0x40);
}

void test_40_00D8()
{
    if (skip_test_40_00D8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF06E);
    WriteRegisterWord(RegisterType::SP, 0xD1EB);
    WriteRegisterByte(RegisterType::A, 0x31);
    WriteRegisterByte(RegisterType::B, 0xC9);
    WriteRegisterByte(RegisterType::C, 0x6B);
    WriteRegisterByte(RegisterType::D, 0xBE);
    WriteRegisterByte(RegisterType::E, 0x2C);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x6B);
    WriteRegisterByte(RegisterType::L, 0x30);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF06E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x31);
    CheckRegisterByte(RegisterType::B, 0xC9);
    CheckRegisterByte(RegisterType::C, 0x6B);
    CheckRegisterByte(RegisterType::D, 0xBE);
    CheckRegisterByte(RegisterType::E, 0x2C);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x6B);
    CheckRegisterByte(RegisterType::L, 0x30);
    WriteRegisterWord(RegisterType::PC, 0xF06F);
    WriteRegisterWord(RegisterType::SP, 0xD1EB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF06E, 0x40);
}

void test_40_00D9()
{
    if (skip_test_40_00D9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE07B);
    WriteRegisterWord(RegisterType::SP, 0xF2FD);
    WriteRegisterByte(RegisterType::A, 0xA8);
    WriteRegisterByte(RegisterType::B, 0x4A);
    WriteRegisterByte(RegisterType::C, 0x1B);
    WriteRegisterByte(RegisterType::D, 0xCA);
    WriteRegisterByte(RegisterType::E, 0x7F);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xD9);
    WriteRegisterByte(RegisterType::L, 0x01);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE07B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA8);
    CheckRegisterByte(RegisterType::B, 0x4A);
    CheckRegisterByte(RegisterType::C, 0x1B);
    CheckRegisterByte(RegisterType::D, 0xCA);
    CheckRegisterByte(RegisterType::E, 0x7F);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xD9);
    CheckRegisterByte(RegisterType::L, 0x01);
    WriteRegisterWord(RegisterType::PC, 0xE07C);
    WriteRegisterWord(RegisterType::SP, 0xF2FD);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE07B, 0x40);
}

void test_40_00DA()
{
    if (skip_test_40_00DA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDF56);
    WriteRegisterWord(RegisterType::SP, 0x6D94);
    WriteRegisterByte(RegisterType::A, 0xC9);
    WriteRegisterByte(RegisterType::B, 0x02);
    WriteRegisterByte(RegisterType::C, 0x76);
    WriteRegisterByte(RegisterType::D, 0x78);
    WriteRegisterByte(RegisterType::E, 0x5F);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x46);
    WriteRegisterByte(RegisterType::L, 0x96);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDF56, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC9);
    CheckRegisterByte(RegisterType::B, 0x02);
    CheckRegisterByte(RegisterType::C, 0x76);
    CheckRegisterByte(RegisterType::D, 0x78);
    CheckRegisterByte(RegisterType::E, 0x5F);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x46);
    CheckRegisterByte(RegisterType::L, 0x96);
    WriteRegisterWord(RegisterType::PC, 0xDF57);
    WriteRegisterWord(RegisterType::SP, 0x6D94);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDF56, 0x40);
}

void test_40_00DB()
{
    if (skip_test_40_00DB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB587);
    WriteRegisterWord(RegisterType::SP, 0x2D4A);
    WriteRegisterByte(RegisterType::A, 0x81);
    WriteRegisterByte(RegisterType::B, 0x8F);
    WriteRegisterByte(RegisterType::C, 0x94);
    WriteRegisterByte(RegisterType::D, 0x26);
    WriteRegisterByte(RegisterType::E, 0x12);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x0F);
    WriteRegisterByte(RegisterType::L, 0xCB);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB587, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x81);
    CheckRegisterByte(RegisterType::B, 0x8F);
    CheckRegisterByte(RegisterType::C, 0x94);
    CheckRegisterByte(RegisterType::D, 0x26);
    CheckRegisterByte(RegisterType::E, 0x12);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x0F);
    CheckRegisterByte(RegisterType::L, 0xCB);
    WriteRegisterWord(RegisterType::PC, 0xB588);
    WriteRegisterWord(RegisterType::SP, 0x2D4A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB587, 0x40);
}

void test_40_00DC()
{
    if (skip_test_40_00DC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x89FD);
    WriteRegisterWord(RegisterType::SP, 0x5044);
    WriteRegisterByte(RegisterType::A, 0xF7);
    WriteRegisterByte(RegisterType::B, 0xB7);
    WriteRegisterByte(RegisterType::C, 0xC9);
    WriteRegisterByte(RegisterType::D, 0x75);
    WriteRegisterByte(RegisterType::E, 0xE4);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xD4);
    WriteRegisterByte(RegisterType::L, 0xE4);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x89FD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF7);
    CheckRegisterByte(RegisterType::B, 0xB7);
    CheckRegisterByte(RegisterType::C, 0xC9);
    CheckRegisterByte(RegisterType::D, 0x75);
    CheckRegisterByte(RegisterType::E, 0xE4);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xD4);
    CheckRegisterByte(RegisterType::L, 0xE4);
    WriteRegisterWord(RegisterType::PC, 0x89FE);
    WriteRegisterWord(RegisterType::SP, 0x5044);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x89FD, 0x40);
}

void test_40_00DD()
{
    if (skip_test_40_00DD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3E14);
    WriteRegisterWord(RegisterType::SP, 0x88CA);
    WriteRegisterByte(RegisterType::A, 0x5B);
    WriteRegisterByte(RegisterType::B, 0xEA);
    WriteRegisterByte(RegisterType::C, 0xAA);
    WriteRegisterByte(RegisterType::D, 0xCE);
    WriteRegisterByte(RegisterType::E, 0xF9);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x19);
    WriteRegisterByte(RegisterType::L, 0x89);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3E14, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5B);
    CheckRegisterByte(RegisterType::B, 0xEA);
    CheckRegisterByte(RegisterType::C, 0xAA);
    CheckRegisterByte(RegisterType::D, 0xCE);
    CheckRegisterByte(RegisterType::E, 0xF9);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x19);
    CheckRegisterByte(RegisterType::L, 0x89);
    WriteRegisterWord(RegisterType::PC, 0x3E15);
    WriteRegisterWord(RegisterType::SP, 0x88CA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3E14, 0x40);
}

void test_40_00DE()
{
    if (skip_test_40_00DE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA8D9);
    WriteRegisterWord(RegisterType::SP, 0x1A3C);
    WriteRegisterByte(RegisterType::A, 0xAB);
    WriteRegisterByte(RegisterType::B, 0xA4);
    WriteRegisterByte(RegisterType::C, 0xDB);
    WriteRegisterByte(RegisterType::D, 0x59);
    WriteRegisterByte(RegisterType::E, 0x20);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x97);
    WriteRegisterByte(RegisterType::L, 0xCE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA8D9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAB);
    CheckRegisterByte(RegisterType::B, 0xA4);
    CheckRegisterByte(RegisterType::C, 0xDB);
    CheckRegisterByte(RegisterType::D, 0x59);
    CheckRegisterByte(RegisterType::E, 0x20);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x97);
    CheckRegisterByte(RegisterType::L, 0xCE);
    WriteRegisterWord(RegisterType::PC, 0xA8DA);
    WriteRegisterWord(RegisterType::SP, 0x1A3C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA8D9, 0x40);
}

void test_40_00DF()
{
    if (skip_test_40_00DF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0925);
    WriteRegisterWord(RegisterType::SP, 0xF552);
    WriteRegisterByte(RegisterType::A, 0x1A);
    WriteRegisterByte(RegisterType::B, 0x48);
    WriteRegisterByte(RegisterType::C, 0x5A);
    WriteRegisterByte(RegisterType::D, 0x51);
    WriteRegisterByte(RegisterType::E, 0x1A);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x36);
    WriteRegisterByte(RegisterType::L, 0x75);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0925, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1A);
    CheckRegisterByte(RegisterType::B, 0x48);
    CheckRegisterByte(RegisterType::C, 0x5A);
    CheckRegisterByte(RegisterType::D, 0x51);
    CheckRegisterByte(RegisterType::E, 0x1A);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x36);
    CheckRegisterByte(RegisterType::L, 0x75);
    WriteRegisterWord(RegisterType::PC, 0x0926);
    WriteRegisterWord(RegisterType::SP, 0xF552);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0925, 0x40);
}

void test_40_00E0()
{
    if (skip_test_40_00E0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBFA0);
    WriteRegisterWord(RegisterType::SP, 0x981E);
    WriteRegisterByte(RegisterType::A, 0x90);
    WriteRegisterByte(RegisterType::B, 0xD0);
    WriteRegisterByte(RegisterType::C, 0x85);
    WriteRegisterByte(RegisterType::D, 0xB4);
    WriteRegisterByte(RegisterType::E, 0x8E);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x65);
    WriteRegisterByte(RegisterType::L, 0x8E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBFA0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x90);
    CheckRegisterByte(RegisterType::B, 0xD0);
    CheckRegisterByte(RegisterType::C, 0x85);
    CheckRegisterByte(RegisterType::D, 0xB4);
    CheckRegisterByte(RegisterType::E, 0x8E);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x65);
    CheckRegisterByte(RegisterType::L, 0x8E);
    WriteRegisterWord(RegisterType::PC, 0xBFA1);
    WriteRegisterWord(RegisterType::SP, 0x981E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xBFA0, 0x40);
}

void test_40_00E1()
{
    if (skip_test_40_00E1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB7DA);
    WriteRegisterWord(RegisterType::SP, 0xC162);
    WriteRegisterByte(RegisterType::A, 0x95);
    WriteRegisterByte(RegisterType::B, 0x4F);
    WriteRegisterByte(RegisterType::C, 0x32);
    WriteRegisterByte(RegisterType::D, 0x2D);
    WriteRegisterByte(RegisterType::E, 0x2C);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x21);
    WriteRegisterByte(RegisterType::L, 0xA0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB7DA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x95);
    CheckRegisterByte(RegisterType::B, 0x4F);
    CheckRegisterByte(RegisterType::C, 0x32);
    CheckRegisterByte(RegisterType::D, 0x2D);
    CheckRegisterByte(RegisterType::E, 0x2C);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x21);
    CheckRegisterByte(RegisterType::L, 0xA0);
    WriteRegisterWord(RegisterType::PC, 0xB7DB);
    WriteRegisterWord(RegisterType::SP, 0xC162);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB7DA, 0x40);
}

void test_40_00E2()
{
    if (skip_test_40_00E2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFD50);
    WriteRegisterWord(RegisterType::SP, 0xF411);
    WriteRegisterByte(RegisterType::A, 0x00);
    WriteRegisterByte(RegisterType::B, 0x85);
    WriteRegisterByte(RegisterType::C, 0x31);
    WriteRegisterByte(RegisterType::D, 0x1F);
    WriteRegisterByte(RegisterType::E, 0x6E);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xD3);
    WriteRegisterByte(RegisterType::L, 0x69);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFD50, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x00);
    CheckRegisterByte(RegisterType::B, 0x85);
    CheckRegisterByte(RegisterType::C, 0x31);
    CheckRegisterByte(RegisterType::D, 0x1F);
    CheckRegisterByte(RegisterType::E, 0x6E);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xD3);
    CheckRegisterByte(RegisterType::L, 0x69);
    WriteRegisterWord(RegisterType::PC, 0xFD51);
    WriteRegisterWord(RegisterType::SP, 0xF411);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFD50, 0x40);
}

void test_40_00E3()
{
    if (skip_test_40_00E3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD68A);
    WriteRegisterWord(RegisterType::SP, 0x4697);
    WriteRegisterByte(RegisterType::A, 0xCB);
    WriteRegisterByte(RegisterType::B, 0xA8);
    WriteRegisterByte(RegisterType::C, 0xEC);
    WriteRegisterByte(RegisterType::D, 0x24);
    WriteRegisterByte(RegisterType::E, 0xFE);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x1F);
    WriteRegisterByte(RegisterType::L, 0xFA);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD68A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCB);
    CheckRegisterByte(RegisterType::B, 0xA8);
    CheckRegisterByte(RegisterType::C, 0xEC);
    CheckRegisterByte(RegisterType::D, 0x24);
    CheckRegisterByte(RegisterType::E, 0xFE);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x1F);
    CheckRegisterByte(RegisterType::L, 0xFA);
    WriteRegisterWord(RegisterType::PC, 0xD68B);
    WriteRegisterWord(RegisterType::SP, 0x4697);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD68A, 0x40);
}

void test_40_00E4()
{
    if (skip_test_40_00E4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x375E);
    WriteRegisterWord(RegisterType::SP, 0xEB37);
    WriteRegisterByte(RegisterType::A, 0xE0);
    WriteRegisterByte(RegisterType::B, 0x39);
    WriteRegisterByte(RegisterType::C, 0x37);
    WriteRegisterByte(RegisterType::D, 0x96);
    WriteRegisterByte(RegisterType::E, 0xC1);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xFE);
    WriteRegisterByte(RegisterType::L, 0x5E);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x375E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE0);
    CheckRegisterByte(RegisterType::B, 0x39);
    CheckRegisterByte(RegisterType::C, 0x37);
    CheckRegisterByte(RegisterType::D, 0x96);
    CheckRegisterByte(RegisterType::E, 0xC1);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xFE);
    CheckRegisterByte(RegisterType::L, 0x5E);
    WriteRegisterWord(RegisterType::PC, 0x375F);
    WriteRegisterWord(RegisterType::SP, 0xEB37);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x375E, 0x40);
}

void test_40_00E5()
{
    if (skip_test_40_00E5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x73E4);
    WriteRegisterWord(RegisterType::SP, 0x6275);
    WriteRegisterByte(RegisterType::A, 0xBC);
    WriteRegisterByte(RegisterType::B, 0x45);
    WriteRegisterByte(RegisterType::C, 0x16);
    WriteRegisterByte(RegisterType::D, 0x6E);
    WriteRegisterByte(RegisterType::E, 0x98);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x1D);
    WriteRegisterByte(RegisterType::L, 0x0B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x73E4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBC);
    CheckRegisterByte(RegisterType::B, 0x45);
    CheckRegisterByte(RegisterType::C, 0x16);
    CheckRegisterByte(RegisterType::D, 0x6E);
    CheckRegisterByte(RegisterType::E, 0x98);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x1D);
    CheckRegisterByte(RegisterType::L, 0x0B);
    WriteRegisterWord(RegisterType::PC, 0x73E5);
    WriteRegisterWord(RegisterType::SP, 0x6275);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x73E4, 0x40);
}

void test_40_00E6()
{
    if (skip_test_40_00E6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x087A);
    WriteRegisterWord(RegisterType::SP, 0xBEBB);
    WriteRegisterByte(RegisterType::A, 0x27);
    WriteRegisterByte(RegisterType::B, 0xDD);
    WriteRegisterByte(RegisterType::C, 0x63);
    WriteRegisterByte(RegisterType::D, 0xC2);
    WriteRegisterByte(RegisterType::E, 0x62);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xCC);
    WriteRegisterByte(RegisterType::L, 0x74);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x087A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x27);
    CheckRegisterByte(RegisterType::B, 0xDD);
    CheckRegisterByte(RegisterType::C, 0x63);
    CheckRegisterByte(RegisterType::D, 0xC2);
    CheckRegisterByte(RegisterType::E, 0x62);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xCC);
    CheckRegisterByte(RegisterType::L, 0x74);
    WriteRegisterWord(RegisterType::PC, 0x087B);
    WriteRegisterWord(RegisterType::SP, 0xBEBB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x087A, 0x40);
}

void test_40_00E7()
{
    if (skip_test_40_00E7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDD20);
    WriteRegisterWord(RegisterType::SP, 0x791D);
    WriteRegisterByte(RegisterType::A, 0x4D);
    WriteRegisterByte(RegisterType::B, 0x33);
    WriteRegisterByte(RegisterType::C, 0xA6);
    WriteRegisterByte(RegisterType::D, 0xB9);
    WriteRegisterByte(RegisterType::E, 0xBC);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x7B);
    WriteRegisterByte(RegisterType::L, 0xA9);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDD20, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4D);
    CheckRegisterByte(RegisterType::B, 0x33);
    CheckRegisterByte(RegisterType::C, 0xA6);
    CheckRegisterByte(RegisterType::D, 0xB9);
    CheckRegisterByte(RegisterType::E, 0xBC);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x7B);
    CheckRegisterByte(RegisterType::L, 0xA9);
    WriteRegisterWord(RegisterType::PC, 0xDD21);
    WriteRegisterWord(RegisterType::SP, 0x791D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xDD20, 0x40);
}

void test_40_00E8()
{
    if (skip_test_40_00E8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD515);
    WriteRegisterWord(RegisterType::SP, 0xAFC5);
    WriteRegisterByte(RegisterType::A, 0x05);
    WriteRegisterByte(RegisterType::B, 0x4D);
    WriteRegisterByte(RegisterType::C, 0xA0);
    WriteRegisterByte(RegisterType::D, 0xBC);
    WriteRegisterByte(RegisterType::E, 0xEE);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x12);
    WriteRegisterByte(RegisterType::L, 0x9D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD515, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x05);
    CheckRegisterByte(RegisterType::B, 0x4D);
    CheckRegisterByte(RegisterType::C, 0xA0);
    CheckRegisterByte(RegisterType::D, 0xBC);
    CheckRegisterByte(RegisterType::E, 0xEE);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x12);
    CheckRegisterByte(RegisterType::L, 0x9D);
    WriteRegisterWord(RegisterType::PC, 0xD516);
    WriteRegisterWord(RegisterType::SP, 0xAFC5);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD515, 0x40);
}

void test_40_00E9()
{
    if (skip_test_40_00E9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x12BB);
    WriteRegisterWord(RegisterType::SP, 0xC392);
    WriteRegisterByte(RegisterType::A, 0xDC);
    WriteRegisterByte(RegisterType::B, 0x9B);
    WriteRegisterByte(RegisterType::C, 0x4F);
    WriteRegisterByte(RegisterType::D, 0xBC);
    WriteRegisterByte(RegisterType::E, 0xDA);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xE1);
    WriteRegisterByte(RegisterType::L, 0x46);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x12BB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDC);
    CheckRegisterByte(RegisterType::B, 0x9B);
    CheckRegisterByte(RegisterType::C, 0x4F);
    CheckRegisterByte(RegisterType::D, 0xBC);
    CheckRegisterByte(RegisterType::E, 0xDA);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xE1);
    CheckRegisterByte(RegisterType::L, 0x46);
    WriteRegisterWord(RegisterType::PC, 0x12BC);
    WriteRegisterWord(RegisterType::SP, 0xC392);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x12BB, 0x40);
}

void test_40_00EA()
{
    if (skip_test_40_00EA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x230F);
    WriteRegisterWord(RegisterType::SP, 0xD24C);
    WriteRegisterByte(RegisterType::A, 0xBD);
    WriteRegisterByte(RegisterType::B, 0x35);
    WriteRegisterByte(RegisterType::C, 0x12);
    WriteRegisterByte(RegisterType::D, 0x91);
    WriteRegisterByte(RegisterType::E, 0xE4);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xC0);
    WriteRegisterByte(RegisterType::L, 0x3E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x230F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBD);
    CheckRegisterByte(RegisterType::B, 0x35);
    CheckRegisterByte(RegisterType::C, 0x12);
    CheckRegisterByte(RegisterType::D, 0x91);
    CheckRegisterByte(RegisterType::E, 0xE4);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xC0);
    CheckRegisterByte(RegisterType::L, 0x3E);
    WriteRegisterWord(RegisterType::PC, 0x2310);
    WriteRegisterWord(RegisterType::SP, 0xD24C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x230F, 0x40);
}

void test_40_00EB()
{
    if (skip_test_40_00EB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC5E7);
    WriteRegisterWord(RegisterType::SP, 0xE0C5);
    WriteRegisterByte(RegisterType::A, 0x38);
    WriteRegisterByte(RegisterType::B, 0x8E);
    WriteRegisterByte(RegisterType::C, 0x77);
    WriteRegisterByte(RegisterType::D, 0xF7);
    WriteRegisterByte(RegisterType::E, 0x43);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x13);
    WriteRegisterByte(RegisterType::L, 0x69);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC5E7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x38);
    CheckRegisterByte(RegisterType::B, 0x8E);
    CheckRegisterByte(RegisterType::C, 0x77);
    CheckRegisterByte(RegisterType::D, 0xF7);
    CheckRegisterByte(RegisterType::E, 0x43);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x13);
    CheckRegisterByte(RegisterType::L, 0x69);
    WriteRegisterWord(RegisterType::PC, 0xC5E8);
    WriteRegisterWord(RegisterType::SP, 0xE0C5);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC5E7, 0x40);
}

void test_40_00EC()
{
    if (skip_test_40_00EC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x168F);
    WriteRegisterWord(RegisterType::SP, 0xD4EE);
    WriteRegisterByte(RegisterType::A, 0x97);
    WriteRegisterByte(RegisterType::B, 0x6B);
    WriteRegisterByte(RegisterType::C, 0x5D);
    WriteRegisterByte(RegisterType::D, 0x24);
    WriteRegisterByte(RegisterType::E, 0x57);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x0A);
    WriteRegisterByte(RegisterType::L, 0x3B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x168F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x97);
    CheckRegisterByte(RegisterType::B, 0x6B);
    CheckRegisterByte(RegisterType::C, 0x5D);
    CheckRegisterByte(RegisterType::D, 0x24);
    CheckRegisterByte(RegisterType::E, 0x57);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x0A);
    CheckRegisterByte(RegisterType::L, 0x3B);
    WriteRegisterWord(RegisterType::PC, 0x1690);
    WriteRegisterWord(RegisterType::SP, 0xD4EE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x168F, 0x40);
}

void test_40_00ED()
{
    if (skip_test_40_00ED)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x562E);
    WriteRegisterWord(RegisterType::SP, 0x3D32);
    WriteRegisterByte(RegisterType::A, 0x26);
    WriteRegisterByte(RegisterType::B, 0xAC);
    WriteRegisterByte(RegisterType::C, 0xA8);
    WriteRegisterByte(RegisterType::D, 0xFF);
    WriteRegisterByte(RegisterType::E, 0xA9);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xE1);
    WriteRegisterByte(RegisterType::L, 0xFB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x562E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x26);
    CheckRegisterByte(RegisterType::B, 0xAC);
    CheckRegisterByte(RegisterType::C, 0xA8);
    CheckRegisterByte(RegisterType::D, 0xFF);
    CheckRegisterByte(RegisterType::E, 0xA9);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xE1);
    CheckRegisterByte(RegisterType::L, 0xFB);
    WriteRegisterWord(RegisterType::PC, 0x562F);
    WriteRegisterWord(RegisterType::SP, 0x3D32);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x562E, 0x40);
}

void test_40_00EE()
{
    if (skip_test_40_00EE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0F5A);
    WriteRegisterWord(RegisterType::SP, 0x094D);
    WriteRegisterByte(RegisterType::A, 0x29);
    WriteRegisterByte(RegisterType::B, 0x3A);
    WriteRegisterByte(RegisterType::C, 0x9A);
    WriteRegisterByte(RegisterType::D, 0x87);
    WriteRegisterByte(RegisterType::E, 0x18);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x97);
    WriteRegisterByte(RegisterType::L, 0x93);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0F5A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x29);
    CheckRegisterByte(RegisterType::B, 0x3A);
    CheckRegisterByte(RegisterType::C, 0x9A);
    CheckRegisterByte(RegisterType::D, 0x87);
    CheckRegisterByte(RegisterType::E, 0x18);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x97);
    CheckRegisterByte(RegisterType::L, 0x93);
    WriteRegisterWord(RegisterType::PC, 0x0F5B);
    WriteRegisterWord(RegisterType::SP, 0x094D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0F5A, 0x40);
}

void test_40_00EF()
{
    if (skip_test_40_00EF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x75AC);
    WriteRegisterWord(RegisterType::SP, 0x5D18);
    WriteRegisterByte(RegisterType::A, 0x52);
    WriteRegisterByte(RegisterType::B, 0x46);
    WriteRegisterByte(RegisterType::C, 0xD1);
    WriteRegisterByte(RegisterType::D, 0xE9);
    WriteRegisterByte(RegisterType::E, 0x65);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x68);
    WriteRegisterByte(RegisterType::L, 0xF8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x75AC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x52);
    CheckRegisterByte(RegisterType::B, 0x46);
    CheckRegisterByte(RegisterType::C, 0xD1);
    CheckRegisterByte(RegisterType::D, 0xE9);
    CheckRegisterByte(RegisterType::E, 0x65);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x68);
    CheckRegisterByte(RegisterType::L, 0xF8);
    WriteRegisterWord(RegisterType::PC, 0x75AD);
    WriteRegisterWord(RegisterType::SP, 0x5D18);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x75AC, 0x40);
}

void test_40_00F0()
{
    if (skip_test_40_00F0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x612A);
    WriteRegisterWord(RegisterType::SP, 0x71FF);
    WriteRegisterByte(RegisterType::A, 0x49);
    WriteRegisterByte(RegisterType::B, 0xFD);
    WriteRegisterByte(RegisterType::C, 0x44);
    WriteRegisterByte(RegisterType::D, 0xA2);
    WriteRegisterByte(RegisterType::E, 0x28);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x7C);
    WriteRegisterByte(RegisterType::L, 0x3F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x612A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x49);
    CheckRegisterByte(RegisterType::B, 0xFD);
    CheckRegisterByte(RegisterType::C, 0x44);
    CheckRegisterByte(RegisterType::D, 0xA2);
    CheckRegisterByte(RegisterType::E, 0x28);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x7C);
    CheckRegisterByte(RegisterType::L, 0x3F);
    WriteRegisterWord(RegisterType::PC, 0x612B);
    WriteRegisterWord(RegisterType::SP, 0x71FF);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x612A, 0x40);
}

void test_40_00F1()
{
    if (skip_test_40_00F1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2100);
    WriteRegisterWord(RegisterType::SP, 0x670F);
    WriteRegisterByte(RegisterType::A, 0x5B);
    WriteRegisterByte(RegisterType::B, 0x75);
    WriteRegisterByte(RegisterType::C, 0x94);
    WriteRegisterByte(RegisterType::D, 0x8F);
    WriteRegisterByte(RegisterType::E, 0x21);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xD2);
    WriteRegisterByte(RegisterType::L, 0x20);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2100, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5B);
    CheckRegisterByte(RegisterType::B, 0x75);
    CheckRegisterByte(RegisterType::C, 0x94);
    CheckRegisterByte(RegisterType::D, 0x8F);
    CheckRegisterByte(RegisterType::E, 0x21);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xD2);
    CheckRegisterByte(RegisterType::L, 0x20);
    WriteRegisterWord(RegisterType::PC, 0x2101);
    WriteRegisterWord(RegisterType::SP, 0x670F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2100, 0x40);
}

void test_40_00F2()
{
    if (skip_test_40_00F2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x33C3);
    WriteRegisterWord(RegisterType::SP, 0xAF4C);
    WriteRegisterByte(RegisterType::A, 0x39);
    WriteRegisterByte(RegisterType::B, 0x79);
    WriteRegisterByte(RegisterType::C, 0xEC);
    WriteRegisterByte(RegisterType::D, 0x0F);
    WriteRegisterByte(RegisterType::E, 0x32);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xC0);
    WriteRegisterByte(RegisterType::L, 0x7D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x33C3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x39);
    CheckRegisterByte(RegisterType::B, 0x79);
    CheckRegisterByte(RegisterType::C, 0xEC);
    CheckRegisterByte(RegisterType::D, 0x0F);
    CheckRegisterByte(RegisterType::E, 0x32);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xC0);
    CheckRegisterByte(RegisterType::L, 0x7D);
    WriteRegisterWord(RegisterType::PC, 0x33C4);
    WriteRegisterWord(RegisterType::SP, 0xAF4C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x33C3, 0x40);
}

void test_40_00F3()
{
    if (skip_test_40_00F3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF5B3);
    WriteRegisterWord(RegisterType::SP, 0xD785);
    WriteRegisterByte(RegisterType::A, 0x41);
    WriteRegisterByte(RegisterType::B, 0xBE);
    WriteRegisterByte(RegisterType::C, 0xBC);
    WriteRegisterByte(RegisterType::D, 0x5F);
    WriteRegisterByte(RegisterType::E, 0xD8);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x96);
    WriteRegisterByte(RegisterType::L, 0x1E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF5B3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x41);
    CheckRegisterByte(RegisterType::B, 0xBE);
    CheckRegisterByte(RegisterType::C, 0xBC);
    CheckRegisterByte(RegisterType::D, 0x5F);
    CheckRegisterByte(RegisterType::E, 0xD8);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x96);
    CheckRegisterByte(RegisterType::L, 0x1E);
    WriteRegisterWord(RegisterType::PC, 0xF5B4);
    WriteRegisterWord(RegisterType::SP, 0xD785);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF5B3, 0x40);
}

void test_40_00F4()
{
    if (skip_test_40_00F4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC140);
    WriteRegisterWord(RegisterType::SP, 0x5E33);
    WriteRegisterByte(RegisterType::A, 0xF9);
    WriteRegisterByte(RegisterType::B, 0xCE);
    WriteRegisterByte(RegisterType::C, 0x48);
    WriteRegisterByte(RegisterType::D, 0x7F);
    WriteRegisterByte(RegisterType::E, 0x76);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x61);
    WriteRegisterByte(RegisterType::L, 0x72);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC140, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF9);
    CheckRegisterByte(RegisterType::B, 0xCE);
    CheckRegisterByte(RegisterType::C, 0x48);
    CheckRegisterByte(RegisterType::D, 0x7F);
    CheckRegisterByte(RegisterType::E, 0x76);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x61);
    CheckRegisterByte(RegisterType::L, 0x72);
    WriteRegisterWord(RegisterType::PC, 0xC141);
    WriteRegisterWord(RegisterType::SP, 0x5E33);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC140, 0x40);
}

void test_40_00F5()
{
    if (skip_test_40_00F5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x513E);
    WriteRegisterWord(RegisterType::SP, 0xCEB4);
    WriteRegisterByte(RegisterType::A, 0xBB);
    WriteRegisterByte(RegisterType::B, 0xD1);
    WriteRegisterByte(RegisterType::C, 0x01);
    WriteRegisterByte(RegisterType::D, 0x03);
    WriteRegisterByte(RegisterType::E, 0xD9);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x46);
    WriteRegisterByte(RegisterType::L, 0x26);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x513E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBB);
    CheckRegisterByte(RegisterType::B, 0xD1);
    CheckRegisterByte(RegisterType::C, 0x01);
    CheckRegisterByte(RegisterType::D, 0x03);
    CheckRegisterByte(RegisterType::E, 0xD9);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x46);
    CheckRegisterByte(RegisterType::L, 0x26);
    WriteRegisterWord(RegisterType::PC, 0x513F);
    WriteRegisterWord(RegisterType::SP, 0xCEB4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x513E, 0x40);
}

void test_40_00F6()
{
    if (skip_test_40_00F6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9539);
    WriteRegisterWord(RegisterType::SP, 0x9FBB);
    WriteRegisterByte(RegisterType::A, 0xFA);
    WriteRegisterByte(RegisterType::B, 0xF2);
    WriteRegisterByte(RegisterType::C, 0xA9);
    WriteRegisterByte(RegisterType::D, 0x9D);
    WriteRegisterByte(RegisterType::E, 0x80);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x5D);
    WriteRegisterByte(RegisterType::L, 0xCC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9539, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFA);
    CheckRegisterByte(RegisterType::B, 0xF2);
    CheckRegisterByte(RegisterType::C, 0xA9);
    CheckRegisterByte(RegisterType::D, 0x9D);
    CheckRegisterByte(RegisterType::E, 0x80);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x5D);
    CheckRegisterByte(RegisterType::L, 0xCC);
    WriteRegisterWord(RegisterType::PC, 0x953A);
    WriteRegisterWord(RegisterType::SP, 0x9FBB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x9539, 0x40);
}

void test_40_00F7()
{
    if (skip_test_40_00F7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD6B7);
    WriteRegisterWord(RegisterType::SP, 0xEB33);
    WriteRegisterByte(RegisterType::A, 0xBD);
    WriteRegisterByte(RegisterType::B, 0xA7);
    WriteRegisterByte(RegisterType::C, 0xB0);
    WriteRegisterByte(RegisterType::D, 0x2D);
    WriteRegisterByte(RegisterType::E, 0xF1);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x20);
    WriteRegisterByte(RegisterType::L, 0x95);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD6B7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBD);
    CheckRegisterByte(RegisterType::B, 0xA7);
    CheckRegisterByte(RegisterType::C, 0xB0);
    CheckRegisterByte(RegisterType::D, 0x2D);
    CheckRegisterByte(RegisterType::E, 0xF1);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x20);
    CheckRegisterByte(RegisterType::L, 0x95);
    WriteRegisterWord(RegisterType::PC, 0xD6B8);
    WriteRegisterWord(RegisterType::SP, 0xEB33);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD6B7, 0x40);
}

void test_40_00F8()
{
    if (skip_test_40_00F8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7735);
    WriteRegisterWord(RegisterType::SP, 0x08E7);
    WriteRegisterByte(RegisterType::A, 0x47);
    WriteRegisterByte(RegisterType::B, 0x61);
    WriteRegisterByte(RegisterType::C, 0x7C);
    WriteRegisterByte(RegisterType::D, 0x71);
    WriteRegisterByte(RegisterType::E, 0xF7);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x8A);
    WriteRegisterByte(RegisterType::L, 0x88);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7735, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x47);
    CheckRegisterByte(RegisterType::B, 0x61);
    CheckRegisterByte(RegisterType::C, 0x7C);
    CheckRegisterByte(RegisterType::D, 0x71);
    CheckRegisterByte(RegisterType::E, 0xF7);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x8A);
    CheckRegisterByte(RegisterType::L, 0x88);
    WriteRegisterWord(RegisterType::PC, 0x7736);
    WriteRegisterWord(RegisterType::SP, 0x08E7);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7735, 0x40);
}

void test_40_00F9()
{
    if (skip_test_40_00F9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4C94);
    WriteRegisterWord(RegisterType::SP, 0x6D83);
    WriteRegisterByte(RegisterType::A, 0xB7);
    WriteRegisterByte(RegisterType::B, 0xAF);
    WriteRegisterByte(RegisterType::C, 0xC6);
    WriteRegisterByte(RegisterType::D, 0x6B);
    WriteRegisterByte(RegisterType::E, 0x06);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x55);
    WriteRegisterByte(RegisterType::L, 0x7B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4C94, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB7);
    CheckRegisterByte(RegisterType::B, 0xAF);
    CheckRegisterByte(RegisterType::C, 0xC6);
    CheckRegisterByte(RegisterType::D, 0x6B);
    CheckRegisterByte(RegisterType::E, 0x06);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x55);
    CheckRegisterByte(RegisterType::L, 0x7B);
    WriteRegisterWord(RegisterType::PC, 0x4C95);
    WriteRegisterWord(RegisterType::SP, 0x6D83);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4C94, 0x40);
}

void test_40_00FA()
{
    if (skip_test_40_00FA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1269);
    WriteRegisterWord(RegisterType::SP, 0xD489);
    WriteRegisterByte(RegisterType::A, 0x69);
    WriteRegisterByte(RegisterType::B, 0x6C);
    WriteRegisterByte(RegisterType::C, 0x8E);
    WriteRegisterByte(RegisterType::D, 0x50);
    WriteRegisterByte(RegisterType::E, 0x29);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xE7);
    WriteRegisterByte(RegisterType::L, 0xAD);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1269, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x69);
    CheckRegisterByte(RegisterType::B, 0x6C);
    CheckRegisterByte(RegisterType::C, 0x8E);
    CheckRegisterByte(RegisterType::D, 0x50);
    CheckRegisterByte(RegisterType::E, 0x29);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xE7);
    CheckRegisterByte(RegisterType::L, 0xAD);
    WriteRegisterWord(RegisterType::PC, 0x126A);
    WriteRegisterWord(RegisterType::SP, 0xD489);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1269, 0x40);
}

void test_40_00FB()
{
    if (skip_test_40_00FB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE30C);
    WriteRegisterWord(RegisterType::SP, 0x1B00);
    WriteRegisterByte(RegisterType::A, 0xC6);
    WriteRegisterByte(RegisterType::B, 0x1C);
    WriteRegisterByte(RegisterType::C, 0x36);
    WriteRegisterByte(RegisterType::D, 0x2C);
    WriteRegisterByte(RegisterType::E, 0x65);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xA0);
    WriteRegisterByte(RegisterType::L, 0xA1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE30C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC6);
    CheckRegisterByte(RegisterType::B, 0x1C);
    CheckRegisterByte(RegisterType::C, 0x36);
    CheckRegisterByte(RegisterType::D, 0x2C);
    CheckRegisterByte(RegisterType::E, 0x65);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xA0);
    CheckRegisterByte(RegisterType::L, 0xA1);
    WriteRegisterWord(RegisterType::PC, 0xE30D);
    WriteRegisterWord(RegisterType::SP, 0x1B00);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE30C, 0x40);
}

void test_40_00FC()
{
    if (skip_test_40_00FC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1D4A);
    WriteRegisterWord(RegisterType::SP, 0x9164);
    WriteRegisterByte(RegisterType::A, 0xAB);
    WriteRegisterByte(RegisterType::B, 0x55);
    WriteRegisterByte(RegisterType::C, 0xAD);
    WriteRegisterByte(RegisterType::D, 0xE7);
    WriteRegisterByte(RegisterType::E, 0x41);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xCC);
    WriteRegisterByte(RegisterType::L, 0xC0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1D4A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAB);
    CheckRegisterByte(RegisterType::B, 0x55);
    CheckRegisterByte(RegisterType::C, 0xAD);
    CheckRegisterByte(RegisterType::D, 0xE7);
    CheckRegisterByte(RegisterType::E, 0x41);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xCC);
    CheckRegisterByte(RegisterType::L, 0xC0);
    WriteRegisterWord(RegisterType::PC, 0x1D4B);
    WriteRegisterWord(RegisterType::SP, 0x9164);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1D4A, 0x40);
}

void test_40_00FD()
{
    if (skip_test_40_00FD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x23F5);
    WriteRegisterWord(RegisterType::SP, 0x3277);
    WriteRegisterByte(RegisterType::A, 0x87);
    WriteRegisterByte(RegisterType::B, 0x00);
    WriteRegisterByte(RegisterType::C, 0xB4);
    WriteRegisterByte(RegisterType::D, 0x29);
    WriteRegisterByte(RegisterType::E, 0xA0);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x6A);
    WriteRegisterByte(RegisterType::L, 0xC7);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x23F5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x87);
    CheckRegisterByte(RegisterType::B, 0x00);
    CheckRegisterByte(RegisterType::C, 0xB4);
    CheckRegisterByte(RegisterType::D, 0x29);
    CheckRegisterByte(RegisterType::E, 0xA0);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x6A);
    CheckRegisterByte(RegisterType::L, 0xC7);
    WriteRegisterWord(RegisterType::PC, 0x23F6);
    WriteRegisterWord(RegisterType::SP, 0x3277);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x23F5, 0x40);
}

void test_40_00FE()
{
    if (skip_test_40_00FE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x39A6);
    WriteRegisterWord(RegisterType::SP, 0x3BA4);
    WriteRegisterByte(RegisterType::A, 0x97);
    WriteRegisterByte(RegisterType::B, 0x4B);
    WriteRegisterByte(RegisterType::C, 0xE1);
    WriteRegisterByte(RegisterType::D, 0xE9);
    WriteRegisterByte(RegisterType::E, 0x12);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x78);
    WriteRegisterByte(RegisterType::L, 0xB8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x39A6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x97);
    CheckRegisterByte(RegisterType::B, 0x4B);
    CheckRegisterByte(RegisterType::C, 0xE1);
    CheckRegisterByte(RegisterType::D, 0xE9);
    CheckRegisterByte(RegisterType::E, 0x12);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x78);
    CheckRegisterByte(RegisterType::L, 0xB8);
    WriteRegisterWord(RegisterType::PC, 0x39A7);
    WriteRegisterWord(RegisterType::SP, 0x3BA4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x39A6, 0x40);
}

void test_40_00FF()
{
    if (skip_test_40_00FF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x07E7);
    WriteRegisterWord(RegisterType::SP, 0x1D45);
    WriteRegisterByte(RegisterType::A, 0x97);
    WriteRegisterByte(RegisterType::B, 0xCF);
    WriteRegisterByte(RegisterType::C, 0xC0);
    WriteRegisterByte(RegisterType::D, 0x43);
    WriteRegisterByte(RegisterType::E, 0x36);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x2E);
    WriteRegisterByte(RegisterType::L, 0x45);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x07E7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x97);
    CheckRegisterByte(RegisterType::B, 0xCF);
    CheckRegisterByte(RegisterType::C, 0xC0);
    CheckRegisterByte(RegisterType::D, 0x43);
    CheckRegisterByte(RegisterType::E, 0x36);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x2E);
    CheckRegisterByte(RegisterType::L, 0x45);
    WriteRegisterWord(RegisterType::PC, 0x07E8);
    WriteRegisterWord(RegisterType::SP, 0x1D45);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x07E7, 0x40);
}

void test_40_0100()
{
    if (skip_test_40_0100)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF033);
    WriteRegisterWord(RegisterType::SP, 0x0459);
    WriteRegisterByte(RegisterType::A, 0x71);
    WriteRegisterByte(RegisterType::B, 0x41);
    WriteRegisterByte(RegisterType::C, 0x00);
    WriteRegisterByte(RegisterType::D, 0xF2);
    WriteRegisterByte(RegisterType::E, 0xB8);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x21);
    WriteRegisterByte(RegisterType::L, 0x80);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF033, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x71);
    CheckRegisterByte(RegisterType::B, 0x41);
    CheckRegisterByte(RegisterType::C, 0x00);
    CheckRegisterByte(RegisterType::D, 0xF2);
    CheckRegisterByte(RegisterType::E, 0xB8);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x21);
    CheckRegisterByte(RegisterType::L, 0x80);
    WriteRegisterWord(RegisterType::PC, 0xF034);
    WriteRegisterWord(RegisterType::SP, 0x0459);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF033, 0x40);
}

void test_40_0101()
{
    if (skip_test_40_0101)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0E82);
    WriteRegisterWord(RegisterType::SP, 0x2B30);
    WriteRegisterByte(RegisterType::A, 0x73);
    WriteRegisterByte(RegisterType::B, 0x89);
    WriteRegisterByte(RegisterType::C, 0x4A);
    WriteRegisterByte(RegisterType::D, 0x64);
    WriteRegisterByte(RegisterType::E, 0x6C);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x45);
    WriteRegisterByte(RegisterType::L, 0x29);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0E82, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x73);
    CheckRegisterByte(RegisterType::B, 0x89);
    CheckRegisterByte(RegisterType::C, 0x4A);
    CheckRegisterByte(RegisterType::D, 0x64);
    CheckRegisterByte(RegisterType::E, 0x6C);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x45);
    CheckRegisterByte(RegisterType::L, 0x29);
    WriteRegisterWord(RegisterType::PC, 0x0E83);
    WriteRegisterWord(RegisterType::SP, 0x2B30);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0E82, 0x40);
}

void test_40_0102()
{
    if (skip_test_40_0102)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1012);
    WriteRegisterWord(RegisterType::SP, 0xDBDC);
    WriteRegisterByte(RegisterType::A, 0x75);
    WriteRegisterByte(RegisterType::B, 0x01);
    WriteRegisterByte(RegisterType::C, 0x41);
    WriteRegisterByte(RegisterType::D, 0x7A);
    WriteRegisterByte(RegisterType::E, 0x92);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x97);
    WriteRegisterByte(RegisterType::L, 0x67);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1012, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x75);
    CheckRegisterByte(RegisterType::B, 0x01);
    CheckRegisterByte(RegisterType::C, 0x41);
    CheckRegisterByte(RegisterType::D, 0x7A);
    CheckRegisterByte(RegisterType::E, 0x92);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x97);
    CheckRegisterByte(RegisterType::L, 0x67);
    WriteRegisterWord(RegisterType::PC, 0x1013);
    WriteRegisterWord(RegisterType::SP, 0xDBDC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1012, 0x40);
}

void test_40_0103()
{
    if (skip_test_40_0103)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE8EE);
    WriteRegisterWord(RegisterType::SP, 0x0B29);
    WriteRegisterByte(RegisterType::A, 0xB7);
    WriteRegisterByte(RegisterType::B, 0xD3);
    WriteRegisterByte(RegisterType::C, 0x58);
    WriteRegisterByte(RegisterType::D, 0x63);
    WriteRegisterByte(RegisterType::E, 0x66);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x83);
    WriteRegisterByte(RegisterType::L, 0xD8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE8EE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB7);
    CheckRegisterByte(RegisterType::B, 0xD3);
    CheckRegisterByte(RegisterType::C, 0x58);
    CheckRegisterByte(RegisterType::D, 0x63);
    CheckRegisterByte(RegisterType::E, 0x66);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x83);
    CheckRegisterByte(RegisterType::L, 0xD8);
    WriteRegisterWord(RegisterType::PC, 0xE8EF);
    WriteRegisterWord(RegisterType::SP, 0x0B29);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xE8EE, 0x40);
}

void test_40_0104()
{
    if (skip_test_40_0104)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEDE2);
    WriteRegisterWord(RegisterType::SP, 0x6EF1);
    WriteRegisterByte(RegisterType::A, 0x27);
    WriteRegisterByte(RegisterType::B, 0x64);
    WriteRegisterByte(RegisterType::C, 0x90);
    WriteRegisterByte(RegisterType::D, 0xD9);
    WriteRegisterByte(RegisterType::E, 0xB5);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xED);
    WriteRegisterByte(RegisterType::L, 0x5C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xEDE2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x27);
    CheckRegisterByte(RegisterType::B, 0x64);
    CheckRegisterByte(RegisterType::C, 0x90);
    CheckRegisterByte(RegisterType::D, 0xD9);
    CheckRegisterByte(RegisterType::E, 0xB5);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xED);
    CheckRegisterByte(RegisterType::L, 0x5C);
    WriteRegisterWord(RegisterType::PC, 0xEDE3);
    WriteRegisterWord(RegisterType::SP, 0x6EF1);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEDE2, 0x40);
}

void test_40_0105()
{
    if (skip_test_40_0105)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3595);
    WriteRegisterWord(RegisterType::SP, 0xB7D5);
    WriteRegisterByte(RegisterType::A, 0x4A);
    WriteRegisterByte(RegisterType::B, 0x85);
    WriteRegisterByte(RegisterType::C, 0x3B);
    WriteRegisterByte(RegisterType::D, 0x75);
    WriteRegisterByte(RegisterType::E, 0x46);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xD6);
    WriteRegisterByte(RegisterType::L, 0xE2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3595, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4A);
    CheckRegisterByte(RegisterType::B, 0x85);
    CheckRegisterByte(RegisterType::C, 0x3B);
    CheckRegisterByte(RegisterType::D, 0x75);
    CheckRegisterByte(RegisterType::E, 0x46);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xD6);
    CheckRegisterByte(RegisterType::L, 0xE2);
    WriteRegisterWord(RegisterType::PC, 0x3596);
    WriteRegisterWord(RegisterType::SP, 0xB7D5);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3595, 0x40);
}

void test_40_0106()
{
    if (skip_test_40_0106)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x821A);
    WriteRegisterWord(RegisterType::SP, 0xFE67);
    WriteRegisterByte(RegisterType::A, 0xF1);
    WriteRegisterByte(RegisterType::B, 0xBE);
    WriteRegisterByte(RegisterType::C, 0x07);
    WriteRegisterByte(RegisterType::D, 0x5C);
    WriteRegisterByte(RegisterType::E, 0x6C);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x87);
    WriteRegisterByte(RegisterType::L, 0xDC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x821A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF1);
    CheckRegisterByte(RegisterType::B, 0xBE);
    CheckRegisterByte(RegisterType::C, 0x07);
    CheckRegisterByte(RegisterType::D, 0x5C);
    CheckRegisterByte(RegisterType::E, 0x6C);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x87);
    CheckRegisterByte(RegisterType::L, 0xDC);
    WriteRegisterWord(RegisterType::PC, 0x821B);
    WriteRegisterWord(RegisterType::SP, 0xFE67);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x821A, 0x40);
}

void test_40_0107()
{
    if (skip_test_40_0107)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5327);
    WriteRegisterWord(RegisterType::SP, 0x1877);
    WriteRegisterByte(RegisterType::A, 0xA2);
    WriteRegisterByte(RegisterType::B, 0xAF);
    WriteRegisterByte(RegisterType::C, 0x44);
    WriteRegisterByte(RegisterType::D, 0xEA);
    WriteRegisterByte(RegisterType::E, 0xD2);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x74);
    WriteRegisterByte(RegisterType::L, 0xBD);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5327, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA2);
    CheckRegisterByte(RegisterType::B, 0xAF);
    CheckRegisterByte(RegisterType::C, 0x44);
    CheckRegisterByte(RegisterType::D, 0xEA);
    CheckRegisterByte(RegisterType::E, 0xD2);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x74);
    CheckRegisterByte(RegisterType::L, 0xBD);
    WriteRegisterWord(RegisterType::PC, 0x5328);
    WriteRegisterWord(RegisterType::SP, 0x1877);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5327, 0x40);
}

void test_40_0108()
{
    if (skip_test_40_0108)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9992);
    WriteRegisterWord(RegisterType::SP, 0x9528);
    WriteRegisterByte(RegisterType::A, 0xC7);
    WriteRegisterByte(RegisterType::B, 0xDD);
    WriteRegisterByte(RegisterType::C, 0x6A);
    WriteRegisterByte(RegisterType::D, 0x06);
    WriteRegisterByte(RegisterType::E, 0xAE);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x10);
    WriteRegisterByte(RegisterType::L, 0x9E);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9992, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC7);
    CheckRegisterByte(RegisterType::B, 0xDD);
    CheckRegisterByte(RegisterType::C, 0x6A);
    CheckRegisterByte(RegisterType::D, 0x06);
    CheckRegisterByte(RegisterType::E, 0xAE);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x10);
    CheckRegisterByte(RegisterType::L, 0x9E);
    WriteRegisterWord(RegisterType::PC, 0x9993);
    WriteRegisterWord(RegisterType::SP, 0x9528);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9992, 0x40);
}

void test_40_0109()
{
    if (skip_test_40_0109)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x382A);
    WriteRegisterWord(RegisterType::SP, 0x4965);
    WriteRegisterByte(RegisterType::A, 0x9E);
    WriteRegisterByte(RegisterType::B, 0x32);
    WriteRegisterByte(RegisterType::C, 0xEF);
    WriteRegisterByte(RegisterType::D, 0xDB);
    WriteRegisterByte(RegisterType::E, 0x39);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x96);
    WriteRegisterByte(RegisterType::L, 0xF0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x382A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9E);
    CheckRegisterByte(RegisterType::B, 0x32);
    CheckRegisterByte(RegisterType::C, 0xEF);
    CheckRegisterByte(RegisterType::D, 0xDB);
    CheckRegisterByte(RegisterType::E, 0x39);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x96);
    CheckRegisterByte(RegisterType::L, 0xF0);
    WriteRegisterWord(RegisterType::PC, 0x382B);
    WriteRegisterWord(RegisterType::SP, 0x4965);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x382A, 0x40);
}

void test_40_010A()
{
    if (skip_test_40_010A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x23B7);
    WriteRegisterWord(RegisterType::SP, 0xBEC4);
    WriteRegisterByte(RegisterType::A, 0xEF);
    WriteRegisterByte(RegisterType::B, 0xE2);
    WriteRegisterByte(RegisterType::C, 0xCF);
    WriteRegisterByte(RegisterType::D, 0xE7);
    WriteRegisterByte(RegisterType::E, 0x3D);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x8C);
    WriteRegisterByte(RegisterType::L, 0xA0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x23B7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEF);
    CheckRegisterByte(RegisterType::B, 0xE2);
    CheckRegisterByte(RegisterType::C, 0xCF);
    CheckRegisterByte(RegisterType::D, 0xE7);
    CheckRegisterByte(RegisterType::E, 0x3D);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x8C);
    CheckRegisterByte(RegisterType::L, 0xA0);
    WriteRegisterWord(RegisterType::PC, 0x23B8);
    WriteRegisterWord(RegisterType::SP, 0xBEC4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x23B7, 0x40);
}

void test_40_010B()
{
    if (skip_test_40_010B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF8C3);
    WriteRegisterWord(RegisterType::SP, 0xA3BF);
    WriteRegisterByte(RegisterType::A, 0x75);
    WriteRegisterByte(RegisterType::B, 0x4A);
    WriteRegisterByte(RegisterType::C, 0x3B);
    WriteRegisterByte(RegisterType::D, 0x6A);
    WriteRegisterByte(RegisterType::E, 0x94);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xAE);
    WriteRegisterByte(RegisterType::L, 0x99);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF8C3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x75);
    CheckRegisterByte(RegisterType::B, 0x4A);
    CheckRegisterByte(RegisterType::C, 0x3B);
    CheckRegisterByte(RegisterType::D, 0x6A);
    CheckRegisterByte(RegisterType::E, 0x94);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xAE);
    CheckRegisterByte(RegisterType::L, 0x99);
    WriteRegisterWord(RegisterType::PC, 0xF8C4);
    WriteRegisterWord(RegisterType::SP, 0xA3BF);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF8C3, 0x40);
}

void test_40_010C()
{
    if (skip_test_40_010C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3B7F);
    WriteRegisterWord(RegisterType::SP, 0x9F3A);
    WriteRegisterByte(RegisterType::A, 0x61);
    WriteRegisterByte(RegisterType::B, 0x6E);
    WriteRegisterByte(RegisterType::C, 0x8C);
    WriteRegisterByte(RegisterType::D, 0x07);
    WriteRegisterByte(RegisterType::E, 0x05);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x43);
    WriteRegisterByte(RegisterType::L, 0x32);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3B7F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x61);
    CheckRegisterByte(RegisterType::B, 0x6E);
    CheckRegisterByte(RegisterType::C, 0x8C);
    CheckRegisterByte(RegisterType::D, 0x07);
    CheckRegisterByte(RegisterType::E, 0x05);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x43);
    CheckRegisterByte(RegisterType::L, 0x32);
    WriteRegisterWord(RegisterType::PC, 0x3B80);
    WriteRegisterWord(RegisterType::SP, 0x9F3A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3B7F, 0x40);
}

void test_40_010D()
{
    if (skip_test_40_010D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8315);
    WriteRegisterWord(RegisterType::SP, 0x17BF);
    WriteRegisterByte(RegisterType::A, 0xC0);
    WriteRegisterByte(RegisterType::B, 0x8E);
    WriteRegisterByte(RegisterType::C, 0x9C);
    WriteRegisterByte(RegisterType::D, 0x9C);
    WriteRegisterByte(RegisterType::E, 0xFA);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xBB);
    WriteRegisterByte(RegisterType::L, 0x17);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8315, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC0);
    CheckRegisterByte(RegisterType::B, 0x8E);
    CheckRegisterByte(RegisterType::C, 0x9C);
    CheckRegisterByte(RegisterType::D, 0x9C);
    CheckRegisterByte(RegisterType::E, 0xFA);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xBB);
    CheckRegisterByte(RegisterType::L, 0x17);
    WriteRegisterWord(RegisterType::PC, 0x8316);
    WriteRegisterWord(RegisterType::SP, 0x17BF);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8315, 0x40);
}

void test_40_010E()
{
    if (skip_test_40_010E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1810);
    WriteRegisterWord(RegisterType::SP, 0x9348);
    WriteRegisterByte(RegisterType::A, 0x4F);
    WriteRegisterByte(RegisterType::B, 0xA7);
    WriteRegisterByte(RegisterType::C, 0x1A);
    WriteRegisterByte(RegisterType::D, 0x01);
    WriteRegisterByte(RegisterType::E, 0x90);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x4E);
    WriteRegisterByte(RegisterType::L, 0x45);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1810, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4F);
    CheckRegisterByte(RegisterType::B, 0xA7);
    CheckRegisterByte(RegisterType::C, 0x1A);
    CheckRegisterByte(RegisterType::D, 0x01);
    CheckRegisterByte(RegisterType::E, 0x90);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x4E);
    CheckRegisterByte(RegisterType::L, 0x45);
    WriteRegisterWord(RegisterType::PC, 0x1811);
    WriteRegisterWord(RegisterType::SP, 0x9348);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1810, 0x40);
}

void test_40_010F()
{
    if (skip_test_40_010F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9402);
    WriteRegisterWord(RegisterType::SP, 0xD2B1);
    WriteRegisterByte(RegisterType::A, 0x0E);
    WriteRegisterByte(RegisterType::B, 0xF5);
    WriteRegisterByte(RegisterType::C, 0xD6);
    WriteRegisterByte(RegisterType::D, 0xBB);
    WriteRegisterByte(RegisterType::E, 0x13);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x87);
    WriteRegisterByte(RegisterType::L, 0x84);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9402, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0E);
    CheckRegisterByte(RegisterType::B, 0xF5);
    CheckRegisterByte(RegisterType::C, 0xD6);
    CheckRegisterByte(RegisterType::D, 0xBB);
    CheckRegisterByte(RegisterType::E, 0x13);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x87);
    CheckRegisterByte(RegisterType::L, 0x84);
    WriteRegisterWord(RegisterType::PC, 0x9403);
    WriteRegisterWord(RegisterType::SP, 0xD2B1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x9402, 0x40);
}

void test_40_0110()
{
    if (skip_test_40_0110)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3FDA);
    WriteRegisterWord(RegisterType::SP, 0xE430);
    WriteRegisterByte(RegisterType::A, 0x62);
    WriteRegisterByte(RegisterType::B, 0x19);
    WriteRegisterByte(RegisterType::C, 0x46);
    WriteRegisterByte(RegisterType::D, 0xD1);
    WriteRegisterByte(RegisterType::E, 0x32);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x5D);
    WriteRegisterByte(RegisterType::L, 0xF2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3FDA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x62);
    CheckRegisterByte(RegisterType::B, 0x19);
    CheckRegisterByte(RegisterType::C, 0x46);
    CheckRegisterByte(RegisterType::D, 0xD1);
    CheckRegisterByte(RegisterType::E, 0x32);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x5D);
    CheckRegisterByte(RegisterType::L, 0xF2);
    WriteRegisterWord(RegisterType::PC, 0x3FDB);
    WriteRegisterWord(RegisterType::SP, 0xE430);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3FDA, 0x40);
}

void test_40_0111()
{
    if (skip_test_40_0111)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6A4E);
    WriteRegisterWord(RegisterType::SP, 0x0F4B);
    WriteRegisterByte(RegisterType::A, 0x05);
    WriteRegisterByte(RegisterType::B, 0xD6);
    WriteRegisterByte(RegisterType::C, 0x6C);
    WriteRegisterByte(RegisterType::D, 0x1D);
    WriteRegisterByte(RegisterType::E, 0xF7);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x44);
    WriteRegisterByte(RegisterType::L, 0x65);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6A4E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x05);
    CheckRegisterByte(RegisterType::B, 0xD6);
    CheckRegisterByte(RegisterType::C, 0x6C);
    CheckRegisterByte(RegisterType::D, 0x1D);
    CheckRegisterByte(RegisterType::E, 0xF7);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x44);
    CheckRegisterByte(RegisterType::L, 0x65);
    WriteRegisterWord(RegisterType::PC, 0x6A4F);
    WriteRegisterWord(RegisterType::SP, 0x0F4B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6A4E, 0x40);
}

void test_40_0112()
{
    if (skip_test_40_0112)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1A04);
    WriteRegisterWord(RegisterType::SP, 0x4400);
    WriteRegisterByte(RegisterType::A, 0x07);
    WriteRegisterByte(RegisterType::B, 0xE4);
    WriteRegisterByte(RegisterType::C, 0x73);
    WriteRegisterByte(RegisterType::D, 0x1D);
    WriteRegisterByte(RegisterType::E, 0x25);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x3A);
    WriteRegisterByte(RegisterType::L, 0x23);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1A04, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x07);
    CheckRegisterByte(RegisterType::B, 0xE4);
    CheckRegisterByte(RegisterType::C, 0x73);
    CheckRegisterByte(RegisterType::D, 0x1D);
    CheckRegisterByte(RegisterType::E, 0x25);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x3A);
    CheckRegisterByte(RegisterType::L, 0x23);
    WriteRegisterWord(RegisterType::PC, 0x1A05);
    WriteRegisterWord(RegisterType::SP, 0x4400);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1A04, 0x40);
}

void test_40_0113()
{
    if (skip_test_40_0113)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0434);
    WriteRegisterWord(RegisterType::SP, 0xB3D2);
    WriteRegisterByte(RegisterType::A, 0x0D);
    WriteRegisterByte(RegisterType::B, 0xAA);
    WriteRegisterByte(RegisterType::C, 0xEE);
    WriteRegisterByte(RegisterType::D, 0x8F);
    WriteRegisterByte(RegisterType::E, 0x84);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xEC);
    WriteRegisterByte(RegisterType::L, 0xBD);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0434, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0D);
    CheckRegisterByte(RegisterType::B, 0xAA);
    CheckRegisterByte(RegisterType::C, 0xEE);
    CheckRegisterByte(RegisterType::D, 0x8F);
    CheckRegisterByte(RegisterType::E, 0x84);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xEC);
    CheckRegisterByte(RegisterType::L, 0xBD);
    WriteRegisterWord(RegisterType::PC, 0x0435);
    WriteRegisterWord(RegisterType::SP, 0xB3D2);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0434, 0x40);
}

void test_40_0114()
{
    if (skip_test_40_0114)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFB23);
    WriteRegisterWord(RegisterType::SP, 0x6F9C);
    WriteRegisterByte(RegisterType::A, 0x99);
    WriteRegisterByte(RegisterType::B, 0xF8);
    WriteRegisterByte(RegisterType::C, 0x5F);
    WriteRegisterByte(RegisterType::D, 0x68);
    WriteRegisterByte(RegisterType::E, 0x06);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x78);
    WriteRegisterByte(RegisterType::L, 0x8B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFB23, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x99);
    CheckRegisterByte(RegisterType::B, 0xF8);
    CheckRegisterByte(RegisterType::C, 0x5F);
    CheckRegisterByte(RegisterType::D, 0x68);
    CheckRegisterByte(RegisterType::E, 0x06);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x78);
    CheckRegisterByte(RegisterType::L, 0x8B);
    WriteRegisterWord(RegisterType::PC, 0xFB24);
    WriteRegisterWord(RegisterType::SP, 0x6F9C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFB23, 0x40);
}

void test_40_0115()
{
    if (skip_test_40_0115)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE95B);
    WriteRegisterWord(RegisterType::SP, 0xD163);
    WriteRegisterByte(RegisterType::A, 0x65);
    WriteRegisterByte(RegisterType::B, 0xC0);
    WriteRegisterByte(RegisterType::C, 0x2F);
    WriteRegisterByte(RegisterType::D, 0xD8);
    WriteRegisterByte(RegisterType::E, 0x9F);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xE3);
    WriteRegisterByte(RegisterType::L, 0xA8);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE95B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x65);
    CheckRegisterByte(RegisterType::B, 0xC0);
    CheckRegisterByte(RegisterType::C, 0x2F);
    CheckRegisterByte(RegisterType::D, 0xD8);
    CheckRegisterByte(RegisterType::E, 0x9F);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xE3);
    CheckRegisterByte(RegisterType::L, 0xA8);
    WriteRegisterWord(RegisterType::PC, 0xE95C);
    WriteRegisterWord(RegisterType::SP, 0xD163);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE95B, 0x40);
}

void test_40_0116()
{
    if (skip_test_40_0116)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5B52);
    WriteRegisterWord(RegisterType::SP, 0x1CF5);
    WriteRegisterByte(RegisterType::A, 0x52);
    WriteRegisterByte(RegisterType::B, 0x53);
    WriteRegisterByte(RegisterType::C, 0x80);
    WriteRegisterByte(RegisterType::D, 0x65);
    WriteRegisterByte(RegisterType::E, 0x33);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xFD);
    WriteRegisterByte(RegisterType::L, 0x0E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5B52, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x52);
    CheckRegisterByte(RegisterType::B, 0x53);
    CheckRegisterByte(RegisterType::C, 0x80);
    CheckRegisterByte(RegisterType::D, 0x65);
    CheckRegisterByte(RegisterType::E, 0x33);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xFD);
    CheckRegisterByte(RegisterType::L, 0x0E);
    WriteRegisterWord(RegisterType::PC, 0x5B53);
    WriteRegisterWord(RegisterType::SP, 0x1CF5);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5B52, 0x40);
}

void test_40_0117()
{
    if (skip_test_40_0117)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1028);
    WriteRegisterWord(RegisterType::SP, 0x107B);
    WriteRegisterByte(RegisterType::A, 0x86);
    WriteRegisterByte(RegisterType::B, 0xD8);
    WriteRegisterByte(RegisterType::C, 0xDF);
    WriteRegisterByte(RegisterType::D, 0x3C);
    WriteRegisterByte(RegisterType::E, 0xF5);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xDC);
    WriteRegisterByte(RegisterType::L, 0x89);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1028, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x86);
    CheckRegisterByte(RegisterType::B, 0xD8);
    CheckRegisterByte(RegisterType::C, 0xDF);
    CheckRegisterByte(RegisterType::D, 0x3C);
    CheckRegisterByte(RegisterType::E, 0xF5);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xDC);
    CheckRegisterByte(RegisterType::L, 0x89);
    WriteRegisterWord(RegisterType::PC, 0x1029);
    WriteRegisterWord(RegisterType::SP, 0x107B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1028, 0x40);
}

void test_40_0118()
{
    if (skip_test_40_0118)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6611);
    WriteRegisterWord(RegisterType::SP, 0xB80A);
    WriteRegisterByte(RegisterType::A, 0x30);
    WriteRegisterByte(RegisterType::B, 0x45);
    WriteRegisterByte(RegisterType::C, 0x1D);
    WriteRegisterByte(RegisterType::D, 0xC0);
    WriteRegisterByte(RegisterType::E, 0x34);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xFC);
    WriteRegisterByte(RegisterType::L, 0x50);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6611, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x30);
    CheckRegisterByte(RegisterType::B, 0x45);
    CheckRegisterByte(RegisterType::C, 0x1D);
    CheckRegisterByte(RegisterType::D, 0xC0);
    CheckRegisterByte(RegisterType::E, 0x34);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xFC);
    CheckRegisterByte(RegisterType::L, 0x50);
    WriteRegisterWord(RegisterType::PC, 0x6612);
    WriteRegisterWord(RegisterType::SP, 0xB80A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6611, 0x40);
}

void test_40_0119()
{
    if (skip_test_40_0119)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6F6F);
    WriteRegisterWord(RegisterType::SP, 0x0710);
    WriteRegisterByte(RegisterType::A, 0xD1);
    WriteRegisterByte(RegisterType::B, 0xD3);
    WriteRegisterByte(RegisterType::C, 0x7A);
    WriteRegisterByte(RegisterType::D, 0x5D);
    WriteRegisterByte(RegisterType::E, 0x67);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x0B);
    WriteRegisterByte(RegisterType::L, 0x69);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6F6F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD1);
    CheckRegisterByte(RegisterType::B, 0xD3);
    CheckRegisterByte(RegisterType::C, 0x7A);
    CheckRegisterByte(RegisterType::D, 0x5D);
    CheckRegisterByte(RegisterType::E, 0x67);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x0B);
    CheckRegisterByte(RegisterType::L, 0x69);
    WriteRegisterWord(RegisterType::PC, 0x6F70);
    WriteRegisterWord(RegisterType::SP, 0x0710);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6F6F, 0x40);
}

void test_40_011A()
{
    if (skip_test_40_011A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8907);
    WriteRegisterWord(RegisterType::SP, 0xEA11);
    WriteRegisterByte(RegisterType::A, 0x12);
    WriteRegisterByte(RegisterType::B, 0xCB);
    WriteRegisterByte(RegisterType::C, 0x01);
    WriteRegisterByte(RegisterType::D, 0x84);
    WriteRegisterByte(RegisterType::E, 0x5B);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xE8);
    WriteRegisterByte(RegisterType::L, 0xED);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8907, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x12);
    CheckRegisterByte(RegisterType::B, 0xCB);
    CheckRegisterByte(RegisterType::C, 0x01);
    CheckRegisterByte(RegisterType::D, 0x84);
    CheckRegisterByte(RegisterType::E, 0x5B);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xE8);
    CheckRegisterByte(RegisterType::L, 0xED);
    WriteRegisterWord(RegisterType::PC, 0x8908);
    WriteRegisterWord(RegisterType::SP, 0xEA11);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8907, 0x40);
}

void test_40_011B()
{
    if (skip_test_40_011B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC685);
    WriteRegisterWord(RegisterType::SP, 0xFF4F);
    WriteRegisterByte(RegisterType::A, 0x00);
    WriteRegisterByte(RegisterType::B, 0x15);
    WriteRegisterByte(RegisterType::C, 0x53);
    WriteRegisterByte(RegisterType::D, 0x77);
    WriteRegisterByte(RegisterType::E, 0x50);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xE0);
    WriteRegisterByte(RegisterType::L, 0x00);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC685, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x00);
    CheckRegisterByte(RegisterType::B, 0x15);
    CheckRegisterByte(RegisterType::C, 0x53);
    CheckRegisterByte(RegisterType::D, 0x77);
    CheckRegisterByte(RegisterType::E, 0x50);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xE0);
    CheckRegisterByte(RegisterType::L, 0x00);
    WriteRegisterWord(RegisterType::PC, 0xC686);
    WriteRegisterWord(RegisterType::SP, 0xFF4F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC685, 0x40);
}

void test_40_011C()
{
    if (skip_test_40_011C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA39A);
    WriteRegisterWord(RegisterType::SP, 0xD1D9);
    WriteRegisterByte(RegisterType::A, 0xFF);
    WriteRegisterByte(RegisterType::B, 0xBF);
    WriteRegisterByte(RegisterType::C, 0xEB);
    WriteRegisterByte(RegisterType::D, 0x05);
    WriteRegisterByte(RegisterType::E, 0xF8);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x95);
    WriteRegisterByte(RegisterType::L, 0xF1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA39A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFF);
    CheckRegisterByte(RegisterType::B, 0xBF);
    CheckRegisterByte(RegisterType::C, 0xEB);
    CheckRegisterByte(RegisterType::D, 0x05);
    CheckRegisterByte(RegisterType::E, 0xF8);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x95);
    CheckRegisterByte(RegisterType::L, 0xF1);
    WriteRegisterWord(RegisterType::PC, 0xA39B);
    WriteRegisterWord(RegisterType::SP, 0xD1D9);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA39A, 0x40);
}

void test_40_011D()
{
    if (skip_test_40_011D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB4B6);
    WriteRegisterWord(RegisterType::SP, 0x1BA7);
    WriteRegisterByte(RegisterType::A, 0xE6);
    WriteRegisterByte(RegisterType::B, 0x91);
    WriteRegisterByte(RegisterType::C, 0xE7);
    WriteRegisterByte(RegisterType::D, 0x93);
    WriteRegisterByte(RegisterType::E, 0x09);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xAD);
    WriteRegisterByte(RegisterType::L, 0x43);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB4B6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE6);
    CheckRegisterByte(RegisterType::B, 0x91);
    CheckRegisterByte(RegisterType::C, 0xE7);
    CheckRegisterByte(RegisterType::D, 0x93);
    CheckRegisterByte(RegisterType::E, 0x09);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xAD);
    CheckRegisterByte(RegisterType::L, 0x43);
    WriteRegisterWord(RegisterType::PC, 0xB4B7);
    WriteRegisterWord(RegisterType::SP, 0x1BA7);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB4B6, 0x40);
}

void test_40_011E()
{
    if (skip_test_40_011E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4329);
    WriteRegisterWord(RegisterType::SP, 0x1915);
    WriteRegisterByte(RegisterType::A, 0x7A);
    WriteRegisterByte(RegisterType::B, 0x4D);
    WriteRegisterByte(RegisterType::C, 0x30);
    WriteRegisterByte(RegisterType::D, 0x7D);
    WriteRegisterByte(RegisterType::E, 0x08);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xD9);
    WriteRegisterByte(RegisterType::L, 0xC8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4329, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7A);
    CheckRegisterByte(RegisterType::B, 0x4D);
    CheckRegisterByte(RegisterType::C, 0x30);
    CheckRegisterByte(RegisterType::D, 0x7D);
    CheckRegisterByte(RegisterType::E, 0x08);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xD9);
    CheckRegisterByte(RegisterType::L, 0xC8);
    WriteRegisterWord(RegisterType::PC, 0x432A);
    WriteRegisterWord(RegisterType::SP, 0x1915);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4329, 0x40);
}

void test_40_011F()
{
    if (skip_test_40_011F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAA0B);
    WriteRegisterWord(RegisterType::SP, 0x4960);
    WriteRegisterByte(RegisterType::A, 0xB1);
    WriteRegisterByte(RegisterType::B, 0x63);
    WriteRegisterByte(RegisterType::C, 0xBE);
    WriteRegisterByte(RegisterType::D, 0x1C);
    WriteRegisterByte(RegisterType::E, 0x43);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x12);
    WriteRegisterByte(RegisterType::L, 0x02);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xAA0B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB1);
    CheckRegisterByte(RegisterType::B, 0x63);
    CheckRegisterByte(RegisterType::C, 0xBE);
    CheckRegisterByte(RegisterType::D, 0x1C);
    CheckRegisterByte(RegisterType::E, 0x43);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x12);
    CheckRegisterByte(RegisterType::L, 0x02);
    WriteRegisterWord(RegisterType::PC, 0xAA0C);
    WriteRegisterWord(RegisterType::SP, 0x4960);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xAA0B, 0x40);
}

void test_40_0120()
{
    if (skip_test_40_0120)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5ECB);
    WriteRegisterWord(RegisterType::SP, 0x5C1A);
    WriteRegisterByte(RegisterType::A, 0x7A);
    WriteRegisterByte(RegisterType::B, 0xEF);
    WriteRegisterByte(RegisterType::C, 0x15);
    WriteRegisterByte(RegisterType::D, 0x38);
    WriteRegisterByte(RegisterType::E, 0xF7);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x64);
    WriteRegisterByte(RegisterType::L, 0x6E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5ECB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7A);
    CheckRegisterByte(RegisterType::B, 0xEF);
    CheckRegisterByte(RegisterType::C, 0x15);
    CheckRegisterByte(RegisterType::D, 0x38);
    CheckRegisterByte(RegisterType::E, 0xF7);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x64);
    CheckRegisterByte(RegisterType::L, 0x6E);
    WriteRegisterWord(RegisterType::PC, 0x5ECC);
    WriteRegisterWord(RegisterType::SP, 0x5C1A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5ECB, 0x40);
}

void test_40_0121()
{
    if (skip_test_40_0121)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x496A);
    WriteRegisterWord(RegisterType::SP, 0xD2D0);
    WriteRegisterByte(RegisterType::A, 0x66);
    WriteRegisterByte(RegisterType::B, 0x96);
    WriteRegisterByte(RegisterType::C, 0x38);
    WriteRegisterByte(RegisterType::D, 0x58);
    WriteRegisterByte(RegisterType::E, 0x30);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x0F);
    WriteRegisterByte(RegisterType::L, 0x18);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x496A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x66);
    CheckRegisterByte(RegisterType::B, 0x96);
    CheckRegisterByte(RegisterType::C, 0x38);
    CheckRegisterByte(RegisterType::D, 0x58);
    CheckRegisterByte(RegisterType::E, 0x30);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x0F);
    CheckRegisterByte(RegisterType::L, 0x18);
    WriteRegisterWord(RegisterType::PC, 0x496B);
    WriteRegisterWord(RegisterType::SP, 0xD2D0);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x496A, 0x40);
}

void test_40_0122()
{
    if (skip_test_40_0122)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCC3E);
    WriteRegisterWord(RegisterType::SP, 0x802E);
    WriteRegisterByte(RegisterType::A, 0x19);
    WriteRegisterByte(RegisterType::B, 0x96);
    WriteRegisterByte(RegisterType::C, 0x98);
    WriteRegisterByte(RegisterType::D, 0x37);
    WriteRegisterByte(RegisterType::E, 0xED);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x37);
    WriteRegisterByte(RegisterType::L, 0x02);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCC3E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x19);
    CheckRegisterByte(RegisterType::B, 0x96);
    CheckRegisterByte(RegisterType::C, 0x98);
    CheckRegisterByte(RegisterType::D, 0x37);
    CheckRegisterByte(RegisterType::E, 0xED);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x37);
    CheckRegisterByte(RegisterType::L, 0x02);
    WriteRegisterWord(RegisterType::PC, 0xCC3F);
    WriteRegisterWord(RegisterType::SP, 0x802E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCC3E, 0x40);
}

void test_40_0123()
{
    if (skip_test_40_0123)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x224C);
    WriteRegisterWord(RegisterType::SP, 0xBF57);
    WriteRegisterByte(RegisterType::A, 0x5B);
    WriteRegisterByte(RegisterType::B, 0xF8);
    WriteRegisterByte(RegisterType::C, 0x73);
    WriteRegisterByte(RegisterType::D, 0xED);
    WriteRegisterByte(RegisterType::E, 0x68);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xD9);
    WriteRegisterByte(RegisterType::L, 0x10);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x224C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5B);
    CheckRegisterByte(RegisterType::B, 0xF8);
    CheckRegisterByte(RegisterType::C, 0x73);
    CheckRegisterByte(RegisterType::D, 0xED);
    CheckRegisterByte(RegisterType::E, 0x68);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xD9);
    CheckRegisterByte(RegisterType::L, 0x10);
    WriteRegisterWord(RegisterType::PC, 0x224D);
    WriteRegisterWord(RegisterType::SP, 0xBF57);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x224C, 0x40);
}

void test_40_0124()
{
    if (skip_test_40_0124)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7BC3);
    WriteRegisterWord(RegisterType::SP, 0x0356);
    WriteRegisterByte(RegisterType::A, 0x53);
    WriteRegisterByte(RegisterType::B, 0xB2);
    WriteRegisterByte(RegisterType::C, 0x38);
    WriteRegisterByte(RegisterType::D, 0xD7);
    WriteRegisterByte(RegisterType::E, 0xAD);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x95);
    WriteRegisterByte(RegisterType::L, 0x43);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7BC3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x53);
    CheckRegisterByte(RegisterType::B, 0xB2);
    CheckRegisterByte(RegisterType::C, 0x38);
    CheckRegisterByte(RegisterType::D, 0xD7);
    CheckRegisterByte(RegisterType::E, 0xAD);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x95);
    CheckRegisterByte(RegisterType::L, 0x43);
    WriteRegisterWord(RegisterType::PC, 0x7BC4);
    WriteRegisterWord(RegisterType::SP, 0x0356);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7BC3, 0x40);
}

void test_40_0125()
{
    if (skip_test_40_0125)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7D00);
    WriteRegisterWord(RegisterType::SP, 0xEA3D);
    WriteRegisterByte(RegisterType::A, 0x29);
    WriteRegisterByte(RegisterType::B, 0x72);
    WriteRegisterByte(RegisterType::C, 0xF3);
    WriteRegisterByte(RegisterType::D, 0x84);
    WriteRegisterByte(RegisterType::E, 0x6D);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x11);
    WriteRegisterByte(RegisterType::L, 0x40);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7D00, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x29);
    CheckRegisterByte(RegisterType::B, 0x72);
    CheckRegisterByte(RegisterType::C, 0xF3);
    CheckRegisterByte(RegisterType::D, 0x84);
    CheckRegisterByte(RegisterType::E, 0x6D);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x11);
    CheckRegisterByte(RegisterType::L, 0x40);
    WriteRegisterWord(RegisterType::PC, 0x7D01);
    WriteRegisterWord(RegisterType::SP, 0xEA3D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7D00, 0x40);
}

void test_40_0126()
{
    if (skip_test_40_0126)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3B62);
    WriteRegisterWord(RegisterType::SP, 0x6D50);
    WriteRegisterByte(RegisterType::A, 0xC7);
    WriteRegisterByte(RegisterType::B, 0xEB);
    WriteRegisterByte(RegisterType::C, 0x32);
    WriteRegisterByte(RegisterType::D, 0x4A);
    WriteRegisterByte(RegisterType::E, 0xDB);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x94);
    WriteRegisterByte(RegisterType::L, 0x11);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3B62, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC7);
    CheckRegisterByte(RegisterType::B, 0xEB);
    CheckRegisterByte(RegisterType::C, 0x32);
    CheckRegisterByte(RegisterType::D, 0x4A);
    CheckRegisterByte(RegisterType::E, 0xDB);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x94);
    CheckRegisterByte(RegisterType::L, 0x11);
    WriteRegisterWord(RegisterType::PC, 0x3B63);
    WriteRegisterWord(RegisterType::SP, 0x6D50);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3B62, 0x40);
}

void test_40_0127()
{
    if (skip_test_40_0127)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1BC1);
    WriteRegisterWord(RegisterType::SP, 0x608F);
    WriteRegisterByte(RegisterType::A, 0x75);
    WriteRegisterByte(RegisterType::B, 0x3A);
    WriteRegisterByte(RegisterType::C, 0x86);
    WriteRegisterByte(RegisterType::D, 0xE9);
    WriteRegisterByte(RegisterType::E, 0xC8);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x75);
    WriteRegisterByte(RegisterType::L, 0x53);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1BC1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x75);
    CheckRegisterByte(RegisterType::B, 0x3A);
    CheckRegisterByte(RegisterType::C, 0x86);
    CheckRegisterByte(RegisterType::D, 0xE9);
    CheckRegisterByte(RegisterType::E, 0xC8);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x75);
    CheckRegisterByte(RegisterType::L, 0x53);
    WriteRegisterWord(RegisterType::PC, 0x1BC2);
    WriteRegisterWord(RegisterType::SP, 0x608F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1BC1, 0x40);
}

void test_40_0128()
{
    if (skip_test_40_0128)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3D3E);
    WriteRegisterWord(RegisterType::SP, 0x2501);
    WriteRegisterByte(RegisterType::A, 0xA3);
    WriteRegisterByte(RegisterType::B, 0xBC);
    WriteRegisterByte(RegisterType::C, 0x62);
    WriteRegisterByte(RegisterType::D, 0x5E);
    WriteRegisterByte(RegisterType::E, 0xC2);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xF9);
    WriteRegisterByte(RegisterType::L, 0xB0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3D3E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA3);
    CheckRegisterByte(RegisterType::B, 0xBC);
    CheckRegisterByte(RegisterType::C, 0x62);
    CheckRegisterByte(RegisterType::D, 0x5E);
    CheckRegisterByte(RegisterType::E, 0xC2);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xF9);
    CheckRegisterByte(RegisterType::L, 0xB0);
    WriteRegisterWord(RegisterType::PC, 0x3D3F);
    WriteRegisterWord(RegisterType::SP, 0x2501);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3D3E, 0x40);
}

void test_40_0129()
{
    if (skip_test_40_0129)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x36FC);
    WriteRegisterWord(RegisterType::SP, 0xCDBF);
    WriteRegisterByte(RegisterType::A, 0xD0);
    WriteRegisterByte(RegisterType::B, 0xBE);
    WriteRegisterByte(RegisterType::C, 0xB9);
    WriteRegisterByte(RegisterType::D, 0x7E);
    WriteRegisterByte(RegisterType::E, 0xC9);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xDB);
    WriteRegisterByte(RegisterType::L, 0x7D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x36FC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD0);
    CheckRegisterByte(RegisterType::B, 0xBE);
    CheckRegisterByte(RegisterType::C, 0xB9);
    CheckRegisterByte(RegisterType::D, 0x7E);
    CheckRegisterByte(RegisterType::E, 0xC9);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xDB);
    CheckRegisterByte(RegisterType::L, 0x7D);
    WriteRegisterWord(RegisterType::PC, 0x36FD);
    WriteRegisterWord(RegisterType::SP, 0xCDBF);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x36FC, 0x40);
}

void test_40_012A()
{
    if (skip_test_40_012A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD4A1);
    WriteRegisterWord(RegisterType::SP, 0x5A72);
    WriteRegisterByte(RegisterType::A, 0x10);
    WriteRegisterByte(RegisterType::B, 0xBB);
    WriteRegisterByte(RegisterType::C, 0xDC);
    WriteRegisterByte(RegisterType::D, 0x02);
    WriteRegisterByte(RegisterType::E, 0x90);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x74);
    WriteRegisterByte(RegisterType::L, 0xBB);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD4A1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x10);
    CheckRegisterByte(RegisterType::B, 0xBB);
    CheckRegisterByte(RegisterType::C, 0xDC);
    CheckRegisterByte(RegisterType::D, 0x02);
    CheckRegisterByte(RegisterType::E, 0x90);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x74);
    CheckRegisterByte(RegisterType::L, 0xBB);
    WriteRegisterWord(RegisterType::PC, 0xD4A2);
    WriteRegisterWord(RegisterType::SP, 0x5A72);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD4A1, 0x40);
}

void test_40_012B()
{
    if (skip_test_40_012B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFC99);
    WriteRegisterWord(RegisterType::SP, 0x0A3A);
    WriteRegisterByte(RegisterType::A, 0x03);
    WriteRegisterByte(RegisterType::B, 0x11);
    WriteRegisterByte(RegisterType::C, 0x3E);
    WriteRegisterByte(RegisterType::D, 0xF2);
    WriteRegisterByte(RegisterType::E, 0xC2);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xA4);
    WriteRegisterByte(RegisterType::L, 0x7A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFC99, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x03);
    CheckRegisterByte(RegisterType::B, 0x11);
    CheckRegisterByte(RegisterType::C, 0x3E);
    CheckRegisterByte(RegisterType::D, 0xF2);
    CheckRegisterByte(RegisterType::E, 0xC2);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xA4);
    CheckRegisterByte(RegisterType::L, 0x7A);
    WriteRegisterWord(RegisterType::PC, 0xFC9A);
    WriteRegisterWord(RegisterType::SP, 0x0A3A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFC99, 0x40);
}

void test_40_012C()
{
    if (skip_test_40_012C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x12A5);
    WriteRegisterWord(RegisterType::SP, 0xBB4A);
    WriteRegisterByte(RegisterType::A, 0x34);
    WriteRegisterByte(RegisterType::B, 0xDB);
    WriteRegisterByte(RegisterType::C, 0x94);
    WriteRegisterByte(RegisterType::D, 0xD5);
    WriteRegisterByte(RegisterType::E, 0x9E);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x47);
    WriteRegisterByte(RegisterType::L, 0xDB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x12A5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x34);
    CheckRegisterByte(RegisterType::B, 0xDB);
    CheckRegisterByte(RegisterType::C, 0x94);
    CheckRegisterByte(RegisterType::D, 0xD5);
    CheckRegisterByte(RegisterType::E, 0x9E);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x47);
    CheckRegisterByte(RegisterType::L, 0xDB);
    WriteRegisterWord(RegisterType::PC, 0x12A6);
    WriteRegisterWord(RegisterType::SP, 0xBB4A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x12A5, 0x40);
}

void test_40_012D()
{
    if (skip_test_40_012D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x82BA);
    WriteRegisterWord(RegisterType::SP, 0x56B6);
    WriteRegisterByte(RegisterType::A, 0xCA);
    WriteRegisterByte(RegisterType::B, 0x56);
    WriteRegisterByte(RegisterType::C, 0xD8);
    WriteRegisterByte(RegisterType::D, 0x9D);
    WriteRegisterByte(RegisterType::E, 0xA7);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x99);
    WriteRegisterByte(RegisterType::L, 0x06);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x82BA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCA);
    CheckRegisterByte(RegisterType::B, 0x56);
    CheckRegisterByte(RegisterType::C, 0xD8);
    CheckRegisterByte(RegisterType::D, 0x9D);
    CheckRegisterByte(RegisterType::E, 0xA7);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x99);
    CheckRegisterByte(RegisterType::L, 0x06);
    WriteRegisterWord(RegisterType::PC, 0x82BB);
    WriteRegisterWord(RegisterType::SP, 0x56B6);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x82BA, 0x40);
}

void test_40_012E()
{
    if (skip_test_40_012E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x88FA);
    WriteRegisterWord(RegisterType::SP, 0x9E3F);
    WriteRegisterByte(RegisterType::A, 0x6F);
    WriteRegisterByte(RegisterType::B, 0xB8);
    WriteRegisterByte(RegisterType::C, 0xD3);
    WriteRegisterByte(RegisterType::D, 0x6D);
    WriteRegisterByte(RegisterType::E, 0x7F);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x41);
    WriteRegisterByte(RegisterType::L, 0xA9);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x88FA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6F);
    CheckRegisterByte(RegisterType::B, 0xB8);
    CheckRegisterByte(RegisterType::C, 0xD3);
    CheckRegisterByte(RegisterType::D, 0x6D);
    CheckRegisterByte(RegisterType::E, 0x7F);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x41);
    CheckRegisterByte(RegisterType::L, 0xA9);
    WriteRegisterWord(RegisterType::PC, 0x88FB);
    WriteRegisterWord(RegisterType::SP, 0x9E3F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x88FA, 0x40);
}

void test_40_012F()
{
    if (skip_test_40_012F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA69C);
    WriteRegisterWord(RegisterType::SP, 0x828B);
    WriteRegisterByte(RegisterType::A, 0x17);
    WriteRegisterByte(RegisterType::B, 0xAD);
    WriteRegisterByte(RegisterType::C, 0x60);
    WriteRegisterByte(RegisterType::D, 0x35);
    WriteRegisterByte(RegisterType::E, 0xB2);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xB8);
    WriteRegisterByte(RegisterType::L, 0x9C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA69C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x17);
    CheckRegisterByte(RegisterType::B, 0xAD);
    CheckRegisterByte(RegisterType::C, 0x60);
    CheckRegisterByte(RegisterType::D, 0x35);
    CheckRegisterByte(RegisterType::E, 0xB2);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xB8);
    CheckRegisterByte(RegisterType::L, 0x9C);
    WriteRegisterWord(RegisterType::PC, 0xA69D);
    WriteRegisterWord(RegisterType::SP, 0x828B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA69C, 0x40);
}

void test_40_0130()
{
    if (skip_test_40_0130)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0C8C);
    WriteRegisterWord(RegisterType::SP, 0x5A10);
    WriteRegisterByte(RegisterType::A, 0x50);
    WriteRegisterByte(RegisterType::B, 0xE0);
    WriteRegisterByte(RegisterType::C, 0xD6);
    WriteRegisterByte(RegisterType::D, 0x88);
    WriteRegisterByte(RegisterType::E, 0x73);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x46);
    WriteRegisterByte(RegisterType::L, 0x05);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0C8C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x50);
    CheckRegisterByte(RegisterType::B, 0xE0);
    CheckRegisterByte(RegisterType::C, 0xD6);
    CheckRegisterByte(RegisterType::D, 0x88);
    CheckRegisterByte(RegisterType::E, 0x73);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x46);
    CheckRegisterByte(RegisterType::L, 0x05);
    WriteRegisterWord(RegisterType::PC, 0x0C8D);
    WriteRegisterWord(RegisterType::SP, 0x5A10);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0C8C, 0x40);
}

void test_40_0131()
{
    if (skip_test_40_0131)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA235);
    WriteRegisterWord(RegisterType::SP, 0x2EC1);
    WriteRegisterByte(RegisterType::A, 0x48);
    WriteRegisterByte(RegisterType::B, 0xD3);
    WriteRegisterByte(RegisterType::C, 0x37);
    WriteRegisterByte(RegisterType::D, 0x2D);
    WriteRegisterByte(RegisterType::E, 0x4C);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xB5);
    WriteRegisterByte(RegisterType::L, 0xAC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA235, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x48);
    CheckRegisterByte(RegisterType::B, 0xD3);
    CheckRegisterByte(RegisterType::C, 0x37);
    CheckRegisterByte(RegisterType::D, 0x2D);
    CheckRegisterByte(RegisterType::E, 0x4C);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xB5);
    CheckRegisterByte(RegisterType::L, 0xAC);
    WriteRegisterWord(RegisterType::PC, 0xA236);
    WriteRegisterWord(RegisterType::SP, 0x2EC1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA235, 0x40);
}

void test_40_0132()
{
    if (skip_test_40_0132)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3433);
    WriteRegisterWord(RegisterType::SP, 0xB969);
    WriteRegisterByte(RegisterType::A, 0x67);
    WriteRegisterByte(RegisterType::B, 0xF5);
    WriteRegisterByte(RegisterType::C, 0x55);
    WriteRegisterByte(RegisterType::D, 0xC4);
    WriteRegisterByte(RegisterType::E, 0x15);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x24);
    WriteRegisterByte(RegisterType::L, 0xFD);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3433, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x67);
    CheckRegisterByte(RegisterType::B, 0xF5);
    CheckRegisterByte(RegisterType::C, 0x55);
    CheckRegisterByte(RegisterType::D, 0xC4);
    CheckRegisterByte(RegisterType::E, 0x15);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x24);
    CheckRegisterByte(RegisterType::L, 0xFD);
    WriteRegisterWord(RegisterType::PC, 0x3434);
    WriteRegisterWord(RegisterType::SP, 0xB969);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3433, 0x40);
}

void test_40_0133()
{
    if (skip_test_40_0133)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x147D);
    WriteRegisterWord(RegisterType::SP, 0x3F2E);
    WriteRegisterByte(RegisterType::A, 0x43);
    WriteRegisterByte(RegisterType::B, 0x3B);
    WriteRegisterByte(RegisterType::C, 0x81);
    WriteRegisterByte(RegisterType::D, 0x46);
    WriteRegisterByte(RegisterType::E, 0xF0);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xEC);
    WriteRegisterByte(RegisterType::L, 0xDE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x147D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x43);
    CheckRegisterByte(RegisterType::B, 0x3B);
    CheckRegisterByte(RegisterType::C, 0x81);
    CheckRegisterByte(RegisterType::D, 0x46);
    CheckRegisterByte(RegisterType::E, 0xF0);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xEC);
    CheckRegisterByte(RegisterType::L, 0xDE);
    WriteRegisterWord(RegisterType::PC, 0x147E);
    WriteRegisterWord(RegisterType::SP, 0x3F2E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x147D, 0x40);
}

void test_40_0134()
{
    if (skip_test_40_0134)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6D60);
    WriteRegisterWord(RegisterType::SP, 0xA3A0);
    WriteRegisterByte(RegisterType::A, 0x1F);
    WriteRegisterByte(RegisterType::B, 0x46);
    WriteRegisterByte(RegisterType::C, 0x5C);
    WriteRegisterByte(RegisterType::D, 0x4E);
    WriteRegisterByte(RegisterType::E, 0x95);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xED);
    WriteRegisterByte(RegisterType::L, 0xAC);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6D60, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1F);
    CheckRegisterByte(RegisterType::B, 0x46);
    CheckRegisterByte(RegisterType::C, 0x5C);
    CheckRegisterByte(RegisterType::D, 0x4E);
    CheckRegisterByte(RegisterType::E, 0x95);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xED);
    CheckRegisterByte(RegisterType::L, 0xAC);
    WriteRegisterWord(RegisterType::PC, 0x6D61);
    WriteRegisterWord(RegisterType::SP, 0xA3A0);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6D60, 0x40);
}

void test_40_0135()
{
    if (skip_test_40_0135)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5568);
    WriteRegisterWord(RegisterType::SP, 0xA8BE);
    WriteRegisterByte(RegisterType::A, 0x95);
    WriteRegisterByte(RegisterType::B, 0x4A);
    WriteRegisterByte(RegisterType::C, 0x7F);
    WriteRegisterByte(RegisterType::D, 0x8F);
    WriteRegisterByte(RegisterType::E, 0x7C);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x98);
    WriteRegisterByte(RegisterType::L, 0x77);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5568, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x95);
    CheckRegisterByte(RegisterType::B, 0x4A);
    CheckRegisterByte(RegisterType::C, 0x7F);
    CheckRegisterByte(RegisterType::D, 0x8F);
    CheckRegisterByte(RegisterType::E, 0x7C);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x98);
    CheckRegisterByte(RegisterType::L, 0x77);
    WriteRegisterWord(RegisterType::PC, 0x5569);
    WriteRegisterWord(RegisterType::SP, 0xA8BE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5568, 0x40);
}

void test_40_0136()
{
    if (skip_test_40_0136)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6F44);
    WriteRegisterWord(RegisterType::SP, 0xA89A);
    WriteRegisterByte(RegisterType::A, 0xFA);
    WriteRegisterByte(RegisterType::B, 0xEA);
    WriteRegisterByte(RegisterType::C, 0x7F);
    WriteRegisterByte(RegisterType::D, 0x40);
    WriteRegisterByte(RegisterType::E, 0x58);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xFD);
    WriteRegisterByte(RegisterType::L, 0xD1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6F44, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFA);
    CheckRegisterByte(RegisterType::B, 0xEA);
    CheckRegisterByte(RegisterType::C, 0x7F);
    CheckRegisterByte(RegisterType::D, 0x40);
    CheckRegisterByte(RegisterType::E, 0x58);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xFD);
    CheckRegisterByte(RegisterType::L, 0xD1);
    WriteRegisterWord(RegisterType::PC, 0x6F45);
    WriteRegisterWord(RegisterType::SP, 0xA89A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6F44, 0x40);
}

void test_40_0137()
{
    if (skip_test_40_0137)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD8E0);
    WriteRegisterWord(RegisterType::SP, 0x50DC);
    WriteRegisterByte(RegisterType::A, 0xC0);
    WriteRegisterByte(RegisterType::B, 0x38);
    WriteRegisterByte(RegisterType::C, 0x80);
    WriteRegisterByte(RegisterType::D, 0x25);
    WriteRegisterByte(RegisterType::E, 0xDF);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x71);
    WriteRegisterByte(RegisterType::L, 0xB8);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD8E0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC0);
    CheckRegisterByte(RegisterType::B, 0x38);
    CheckRegisterByte(RegisterType::C, 0x80);
    CheckRegisterByte(RegisterType::D, 0x25);
    CheckRegisterByte(RegisterType::E, 0xDF);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x71);
    CheckRegisterByte(RegisterType::L, 0xB8);
    WriteRegisterWord(RegisterType::PC, 0xD8E1);
    WriteRegisterWord(RegisterType::SP, 0x50DC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD8E0, 0x40);
}

void test_40_0138()
{
    if (skip_test_40_0138)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5892);
    WriteRegisterWord(RegisterType::SP, 0xA99B);
    WriteRegisterByte(RegisterType::A, 0xB3);
    WriteRegisterByte(RegisterType::B, 0xBD);
    WriteRegisterByte(RegisterType::C, 0x3E);
    WriteRegisterByte(RegisterType::D, 0x24);
    WriteRegisterByte(RegisterType::E, 0xCA);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xD3);
    WriteRegisterByte(RegisterType::L, 0x0C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5892, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB3);
    CheckRegisterByte(RegisterType::B, 0xBD);
    CheckRegisterByte(RegisterType::C, 0x3E);
    CheckRegisterByte(RegisterType::D, 0x24);
    CheckRegisterByte(RegisterType::E, 0xCA);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xD3);
    CheckRegisterByte(RegisterType::L, 0x0C);
    WriteRegisterWord(RegisterType::PC, 0x5893);
    WriteRegisterWord(RegisterType::SP, 0xA99B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5892, 0x40);
}

void test_40_0139()
{
    if (skip_test_40_0139)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x00B8);
    WriteRegisterWord(RegisterType::SP, 0xD51C);
    WriteRegisterByte(RegisterType::A, 0x68);
    WriteRegisterByte(RegisterType::B, 0xC1);
    WriteRegisterByte(RegisterType::C, 0xBE);
    WriteRegisterByte(RegisterType::D, 0x3D);
    WriteRegisterByte(RegisterType::E, 0xCA);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xFF);
    WriteRegisterByte(RegisterType::L, 0x32);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x00B8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x68);
    CheckRegisterByte(RegisterType::B, 0xC1);
    CheckRegisterByte(RegisterType::C, 0xBE);
    CheckRegisterByte(RegisterType::D, 0x3D);
    CheckRegisterByte(RegisterType::E, 0xCA);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xFF);
    CheckRegisterByte(RegisterType::L, 0x32);
    WriteRegisterWord(RegisterType::PC, 0x00B9);
    WriteRegisterWord(RegisterType::SP, 0xD51C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x00B8, 0x40);
}

void test_40_013A()
{
    if (skip_test_40_013A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEC38);
    WriteRegisterWord(RegisterType::SP, 0x64AE);
    WriteRegisterByte(RegisterType::A, 0x48);
    WriteRegisterByte(RegisterType::B, 0x51);
    WriteRegisterByte(RegisterType::C, 0xDD);
    WriteRegisterByte(RegisterType::D, 0x8A);
    WriteRegisterByte(RegisterType::E, 0x00);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x14);
    WriteRegisterByte(RegisterType::L, 0x11);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEC38, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x48);
    CheckRegisterByte(RegisterType::B, 0x51);
    CheckRegisterByte(RegisterType::C, 0xDD);
    CheckRegisterByte(RegisterType::D, 0x8A);
    CheckRegisterByte(RegisterType::E, 0x00);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x14);
    CheckRegisterByte(RegisterType::L, 0x11);
    WriteRegisterWord(RegisterType::PC, 0xEC39);
    WriteRegisterWord(RegisterType::SP, 0x64AE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xEC38, 0x40);
}

void test_40_013B()
{
    if (skip_test_40_013B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2919);
    WriteRegisterWord(RegisterType::SP, 0x9CB1);
    WriteRegisterByte(RegisterType::A, 0x42);
    WriteRegisterByte(RegisterType::B, 0xC1);
    WriteRegisterByte(RegisterType::C, 0x76);
    WriteRegisterByte(RegisterType::D, 0xBA);
    WriteRegisterByte(RegisterType::E, 0x97);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x65);
    WriteRegisterByte(RegisterType::L, 0x86);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2919, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x42);
    CheckRegisterByte(RegisterType::B, 0xC1);
    CheckRegisterByte(RegisterType::C, 0x76);
    CheckRegisterByte(RegisterType::D, 0xBA);
    CheckRegisterByte(RegisterType::E, 0x97);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x65);
    CheckRegisterByte(RegisterType::L, 0x86);
    WriteRegisterWord(RegisterType::PC, 0x291A);
    WriteRegisterWord(RegisterType::SP, 0x9CB1);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2919, 0x40);
}

void test_40_013C()
{
    if (skip_test_40_013C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x654B);
    WriteRegisterWord(RegisterType::SP, 0xA484);
    WriteRegisterByte(RegisterType::A, 0x30);
    WriteRegisterByte(RegisterType::B, 0x44);
    WriteRegisterByte(RegisterType::C, 0xEF);
    WriteRegisterByte(RegisterType::D, 0x75);
    WriteRegisterByte(RegisterType::E, 0x27);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xAF);
    WriteRegisterByte(RegisterType::L, 0x89);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x654B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x30);
    CheckRegisterByte(RegisterType::B, 0x44);
    CheckRegisterByte(RegisterType::C, 0xEF);
    CheckRegisterByte(RegisterType::D, 0x75);
    CheckRegisterByte(RegisterType::E, 0x27);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xAF);
    CheckRegisterByte(RegisterType::L, 0x89);
    WriteRegisterWord(RegisterType::PC, 0x654C);
    WriteRegisterWord(RegisterType::SP, 0xA484);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x654B, 0x40);
}

void test_40_013D()
{
    if (skip_test_40_013D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2810);
    WriteRegisterWord(RegisterType::SP, 0x6A99);
    WriteRegisterByte(RegisterType::A, 0x29);
    WriteRegisterByte(RegisterType::B, 0x1B);
    WriteRegisterByte(RegisterType::C, 0x36);
    WriteRegisterByte(RegisterType::D, 0xEE);
    WriteRegisterByte(RegisterType::E, 0x9E);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x14);
    WriteRegisterByte(RegisterType::L, 0x88);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2810, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x29);
    CheckRegisterByte(RegisterType::B, 0x1B);
    CheckRegisterByte(RegisterType::C, 0x36);
    CheckRegisterByte(RegisterType::D, 0xEE);
    CheckRegisterByte(RegisterType::E, 0x9E);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x14);
    CheckRegisterByte(RegisterType::L, 0x88);
    WriteRegisterWord(RegisterType::PC, 0x2811);
    WriteRegisterWord(RegisterType::SP, 0x6A99);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2810, 0x40);
}

void test_40_013E()
{
    if (skip_test_40_013E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7C7E);
    WriteRegisterWord(RegisterType::SP, 0x9CBC);
    WriteRegisterByte(RegisterType::A, 0xAE);
    WriteRegisterByte(RegisterType::B, 0xC8);
    WriteRegisterByte(RegisterType::C, 0x41);
    WriteRegisterByte(RegisterType::D, 0xD4);
    WriteRegisterByte(RegisterType::E, 0x9F);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xD7);
    WriteRegisterByte(RegisterType::L, 0x2B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7C7E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAE);
    CheckRegisterByte(RegisterType::B, 0xC8);
    CheckRegisterByte(RegisterType::C, 0x41);
    CheckRegisterByte(RegisterType::D, 0xD4);
    CheckRegisterByte(RegisterType::E, 0x9F);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xD7);
    CheckRegisterByte(RegisterType::L, 0x2B);
    WriteRegisterWord(RegisterType::PC, 0x7C7F);
    WriteRegisterWord(RegisterType::SP, 0x9CBC);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7C7E, 0x40);
}

void test_40_013F()
{
    if (skip_test_40_013F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x25F1);
    WriteRegisterWord(RegisterType::SP, 0xAF0F);
    WriteRegisterByte(RegisterType::A, 0xF8);
    WriteRegisterByte(RegisterType::B, 0xED);
    WriteRegisterByte(RegisterType::C, 0xA1);
    WriteRegisterByte(RegisterType::D, 0x56);
    WriteRegisterByte(RegisterType::E, 0x18);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x17);
    WriteRegisterByte(RegisterType::L, 0x6D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x25F1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF8);
    CheckRegisterByte(RegisterType::B, 0xED);
    CheckRegisterByte(RegisterType::C, 0xA1);
    CheckRegisterByte(RegisterType::D, 0x56);
    CheckRegisterByte(RegisterType::E, 0x18);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x17);
    CheckRegisterByte(RegisterType::L, 0x6D);
    WriteRegisterWord(RegisterType::PC, 0x25F2);
    WriteRegisterWord(RegisterType::SP, 0xAF0F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x25F1, 0x40);
}

void test_40_0140()
{
    if (skip_test_40_0140)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6EB4);
    WriteRegisterWord(RegisterType::SP, 0x51B4);
    WriteRegisterByte(RegisterType::A, 0x94);
    WriteRegisterByte(RegisterType::B, 0x2B);
    WriteRegisterByte(RegisterType::C, 0x44);
    WriteRegisterByte(RegisterType::D, 0xD5);
    WriteRegisterByte(RegisterType::E, 0x51);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xA4);
    WriteRegisterByte(RegisterType::L, 0x2F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6EB4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x94);
    CheckRegisterByte(RegisterType::B, 0x2B);
    CheckRegisterByte(RegisterType::C, 0x44);
    CheckRegisterByte(RegisterType::D, 0xD5);
    CheckRegisterByte(RegisterType::E, 0x51);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xA4);
    CheckRegisterByte(RegisterType::L, 0x2F);
    WriteRegisterWord(RegisterType::PC, 0x6EB5);
    WriteRegisterWord(RegisterType::SP, 0x51B4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6EB4, 0x40);
}

void test_40_0141()
{
    if (skip_test_40_0141)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB51D);
    WriteRegisterWord(RegisterType::SP, 0xC6C9);
    WriteRegisterByte(RegisterType::A, 0x91);
    WriteRegisterByte(RegisterType::B, 0x65);
    WriteRegisterByte(RegisterType::C, 0x76);
    WriteRegisterByte(RegisterType::D, 0xB1);
    WriteRegisterByte(RegisterType::E, 0x22);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x8F);
    WriteRegisterByte(RegisterType::L, 0x71);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB51D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x91);
    CheckRegisterByte(RegisterType::B, 0x65);
    CheckRegisterByte(RegisterType::C, 0x76);
    CheckRegisterByte(RegisterType::D, 0xB1);
    CheckRegisterByte(RegisterType::E, 0x22);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x8F);
    CheckRegisterByte(RegisterType::L, 0x71);
    WriteRegisterWord(RegisterType::PC, 0xB51E);
    WriteRegisterWord(RegisterType::SP, 0xC6C9);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB51D, 0x40);
}

void test_40_0142()
{
    if (skip_test_40_0142)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC0BD);
    WriteRegisterWord(RegisterType::SP, 0xE30C);
    WriteRegisterByte(RegisterType::A, 0xB6);
    WriteRegisterByte(RegisterType::B, 0xCE);
    WriteRegisterByte(RegisterType::C, 0x84);
    WriteRegisterByte(RegisterType::D, 0x55);
    WriteRegisterByte(RegisterType::E, 0x85);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xF1);
    WriteRegisterByte(RegisterType::L, 0xD1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC0BD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB6);
    CheckRegisterByte(RegisterType::B, 0xCE);
    CheckRegisterByte(RegisterType::C, 0x84);
    CheckRegisterByte(RegisterType::D, 0x55);
    CheckRegisterByte(RegisterType::E, 0x85);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xF1);
    CheckRegisterByte(RegisterType::L, 0xD1);
    WriteRegisterWord(RegisterType::PC, 0xC0BE);
    WriteRegisterWord(RegisterType::SP, 0xE30C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC0BD, 0x40);
}

void test_40_0143()
{
    if (skip_test_40_0143)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3AAF);
    WriteRegisterWord(RegisterType::SP, 0xE7E7);
    WriteRegisterByte(RegisterType::A, 0x44);
    WriteRegisterByte(RegisterType::B, 0x66);
    WriteRegisterByte(RegisterType::C, 0x0B);
    WriteRegisterByte(RegisterType::D, 0x0E);
    WriteRegisterByte(RegisterType::E, 0xD1);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x12);
    WriteRegisterByte(RegisterType::L, 0xC2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3AAF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x44);
    CheckRegisterByte(RegisterType::B, 0x66);
    CheckRegisterByte(RegisterType::C, 0x0B);
    CheckRegisterByte(RegisterType::D, 0x0E);
    CheckRegisterByte(RegisterType::E, 0xD1);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x12);
    CheckRegisterByte(RegisterType::L, 0xC2);
    WriteRegisterWord(RegisterType::PC, 0x3AB0);
    WriteRegisterWord(RegisterType::SP, 0xE7E7);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3AAF, 0x40);
}

void test_40_0144()
{
    if (skip_test_40_0144)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x19DA);
    WriteRegisterWord(RegisterType::SP, 0x3333);
    WriteRegisterByte(RegisterType::A, 0x24);
    WriteRegisterByte(RegisterType::B, 0x3A);
    WriteRegisterByte(RegisterType::C, 0x0B);
    WriteRegisterByte(RegisterType::D, 0x0B);
    WriteRegisterByte(RegisterType::E, 0xB3);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x4F);
    WriteRegisterByte(RegisterType::L, 0x15);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x19DA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x24);
    CheckRegisterByte(RegisterType::B, 0x3A);
    CheckRegisterByte(RegisterType::C, 0x0B);
    CheckRegisterByte(RegisterType::D, 0x0B);
    CheckRegisterByte(RegisterType::E, 0xB3);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x4F);
    CheckRegisterByte(RegisterType::L, 0x15);
    WriteRegisterWord(RegisterType::PC, 0x19DB);
    WriteRegisterWord(RegisterType::SP, 0x3333);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x19DA, 0x40);
}

void test_40_0145()
{
    if (skip_test_40_0145)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD3F3);
    WriteRegisterWord(RegisterType::SP, 0xB281);
    WriteRegisterByte(RegisterType::A, 0x74);
    WriteRegisterByte(RegisterType::B, 0x01);
    WriteRegisterByte(RegisterType::C, 0xDB);
    WriteRegisterByte(RegisterType::D, 0xFE);
    WriteRegisterByte(RegisterType::E, 0x1A);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xF3);
    WriteRegisterByte(RegisterType::L, 0xA3);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD3F3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x74);
    CheckRegisterByte(RegisterType::B, 0x01);
    CheckRegisterByte(RegisterType::C, 0xDB);
    CheckRegisterByte(RegisterType::D, 0xFE);
    CheckRegisterByte(RegisterType::E, 0x1A);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xF3);
    CheckRegisterByte(RegisterType::L, 0xA3);
    WriteRegisterWord(RegisterType::PC, 0xD3F4);
    WriteRegisterWord(RegisterType::SP, 0xB281);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD3F3, 0x40);
}

void test_40_0146()
{
    if (skip_test_40_0146)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2438);
    WriteRegisterWord(RegisterType::SP, 0x314D);
    WriteRegisterByte(RegisterType::A, 0xE7);
    WriteRegisterByte(RegisterType::B, 0x6B);
    WriteRegisterByte(RegisterType::C, 0x00);
    WriteRegisterByte(RegisterType::D, 0xE6);
    WriteRegisterByte(RegisterType::E, 0x59);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xE6);
    WriteRegisterByte(RegisterType::L, 0x6A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2438, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE7);
    CheckRegisterByte(RegisterType::B, 0x6B);
    CheckRegisterByte(RegisterType::C, 0x00);
    CheckRegisterByte(RegisterType::D, 0xE6);
    CheckRegisterByte(RegisterType::E, 0x59);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xE6);
    CheckRegisterByte(RegisterType::L, 0x6A);
    WriteRegisterWord(RegisterType::PC, 0x2439);
    WriteRegisterWord(RegisterType::SP, 0x314D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2438, 0x40);
}

void test_40_0147()
{
    if (skip_test_40_0147)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x66CB);
    WriteRegisterWord(RegisterType::SP, 0xDF12);
    WriteRegisterByte(RegisterType::A, 0x02);
    WriteRegisterByte(RegisterType::B, 0x1B);
    WriteRegisterByte(RegisterType::C, 0xDF);
    WriteRegisterByte(RegisterType::D, 0x6A);
    WriteRegisterByte(RegisterType::E, 0x3E);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x20);
    WriteRegisterByte(RegisterType::L, 0x75);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x66CB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x02);
    CheckRegisterByte(RegisterType::B, 0x1B);
    CheckRegisterByte(RegisterType::C, 0xDF);
    CheckRegisterByte(RegisterType::D, 0x6A);
    CheckRegisterByte(RegisterType::E, 0x3E);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x20);
    CheckRegisterByte(RegisterType::L, 0x75);
    WriteRegisterWord(RegisterType::PC, 0x66CC);
    WriteRegisterWord(RegisterType::SP, 0xDF12);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x66CB, 0x40);
}

void test_40_0148()
{
    if (skip_test_40_0148)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x05BB);
    WriteRegisterWord(RegisterType::SP, 0xA0BA);
    WriteRegisterByte(RegisterType::A, 0x3C);
    WriteRegisterByte(RegisterType::B, 0xCE);
    WriteRegisterByte(RegisterType::C, 0xC7);
    WriteRegisterByte(RegisterType::D, 0xD0);
    WriteRegisterByte(RegisterType::E, 0x93);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x4A);
    WriteRegisterByte(RegisterType::L, 0x0D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x05BB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3C);
    CheckRegisterByte(RegisterType::B, 0xCE);
    CheckRegisterByte(RegisterType::C, 0xC7);
    CheckRegisterByte(RegisterType::D, 0xD0);
    CheckRegisterByte(RegisterType::E, 0x93);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x4A);
    CheckRegisterByte(RegisterType::L, 0x0D);
    WriteRegisterWord(RegisterType::PC, 0x05BC);
    WriteRegisterWord(RegisterType::SP, 0xA0BA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x05BB, 0x40);
}

void test_40_0149()
{
    if (skip_test_40_0149)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7100);
    WriteRegisterWord(RegisterType::SP, 0x54EF);
    WriteRegisterByte(RegisterType::A, 0x5C);
    WriteRegisterByte(RegisterType::B, 0x8A);
    WriteRegisterByte(RegisterType::C, 0x7F);
    WriteRegisterByte(RegisterType::D, 0xED);
    WriteRegisterByte(RegisterType::E, 0xFF);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x58);
    WriteRegisterByte(RegisterType::L, 0x9A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7100, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5C);
    CheckRegisterByte(RegisterType::B, 0x8A);
    CheckRegisterByte(RegisterType::C, 0x7F);
    CheckRegisterByte(RegisterType::D, 0xED);
    CheckRegisterByte(RegisterType::E, 0xFF);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x58);
    CheckRegisterByte(RegisterType::L, 0x9A);
    WriteRegisterWord(RegisterType::PC, 0x7101);
    WriteRegisterWord(RegisterType::SP, 0x54EF);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7100, 0x40);
}

void test_40_014A()
{
    if (skip_test_40_014A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x15BB);
    WriteRegisterWord(RegisterType::SP, 0xF740);
    WriteRegisterByte(RegisterType::A, 0x74);
    WriteRegisterByte(RegisterType::B, 0x90);
    WriteRegisterByte(RegisterType::C, 0x33);
    WriteRegisterByte(RegisterType::D, 0x02);
    WriteRegisterByte(RegisterType::E, 0xD1);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x67);
    WriteRegisterByte(RegisterType::L, 0xCC);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x15BB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x74);
    CheckRegisterByte(RegisterType::B, 0x90);
    CheckRegisterByte(RegisterType::C, 0x33);
    CheckRegisterByte(RegisterType::D, 0x02);
    CheckRegisterByte(RegisterType::E, 0xD1);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x67);
    CheckRegisterByte(RegisterType::L, 0xCC);
    WriteRegisterWord(RegisterType::PC, 0x15BC);
    WriteRegisterWord(RegisterType::SP, 0xF740);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x15BB, 0x40);
}

void test_40_014B()
{
    if (skip_test_40_014B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEDB5);
    WriteRegisterWord(RegisterType::SP, 0xE160);
    WriteRegisterByte(RegisterType::A, 0x28);
    WriteRegisterByte(RegisterType::B, 0x54);
    WriteRegisterByte(RegisterType::C, 0x73);
    WriteRegisterByte(RegisterType::D, 0xE1);
    WriteRegisterByte(RegisterType::E, 0x02);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x46);
    WriteRegisterByte(RegisterType::L, 0x69);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEDB5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x28);
    CheckRegisterByte(RegisterType::B, 0x54);
    CheckRegisterByte(RegisterType::C, 0x73);
    CheckRegisterByte(RegisterType::D, 0xE1);
    CheckRegisterByte(RegisterType::E, 0x02);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x46);
    CheckRegisterByte(RegisterType::L, 0x69);
    WriteRegisterWord(RegisterType::PC, 0xEDB6);
    WriteRegisterWord(RegisterType::SP, 0xE160);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEDB5, 0x40);
}

void test_40_014C()
{
    if (skip_test_40_014C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x55D1);
    WriteRegisterWord(RegisterType::SP, 0x6200);
    WriteRegisterByte(RegisterType::A, 0xC3);
    WriteRegisterByte(RegisterType::B, 0xCA);
    WriteRegisterByte(RegisterType::C, 0x35);
    WriteRegisterByte(RegisterType::D, 0x2A);
    WriteRegisterByte(RegisterType::E, 0x9B);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x02);
    WriteRegisterByte(RegisterType::L, 0x5B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x55D1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC3);
    CheckRegisterByte(RegisterType::B, 0xCA);
    CheckRegisterByte(RegisterType::C, 0x35);
    CheckRegisterByte(RegisterType::D, 0x2A);
    CheckRegisterByte(RegisterType::E, 0x9B);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x02);
    CheckRegisterByte(RegisterType::L, 0x5B);
    WriteRegisterWord(RegisterType::PC, 0x55D2);
    WriteRegisterWord(RegisterType::SP, 0x6200);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x55D1, 0x40);
}

void test_40_014D()
{
    if (skip_test_40_014D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDEB9);
    WriteRegisterWord(RegisterType::SP, 0x5C54);
    WriteRegisterByte(RegisterType::A, 0x51);
    WriteRegisterByte(RegisterType::B, 0x9E);
    WriteRegisterByte(RegisterType::C, 0x29);
    WriteRegisterByte(RegisterType::D, 0xC4);
    WriteRegisterByte(RegisterType::E, 0x10);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x02);
    WriteRegisterByte(RegisterType::L, 0xC7);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDEB9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x51);
    CheckRegisterByte(RegisterType::B, 0x9E);
    CheckRegisterByte(RegisterType::C, 0x29);
    CheckRegisterByte(RegisterType::D, 0xC4);
    CheckRegisterByte(RegisterType::E, 0x10);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x02);
    CheckRegisterByte(RegisterType::L, 0xC7);
    WriteRegisterWord(RegisterType::PC, 0xDEBA);
    WriteRegisterWord(RegisterType::SP, 0x5C54);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDEB9, 0x40);
}

void test_40_014E()
{
    if (skip_test_40_014E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8665);
    WriteRegisterWord(RegisterType::SP, 0x8DE3);
    WriteRegisterByte(RegisterType::A, 0x8B);
    WriteRegisterByte(RegisterType::B, 0x60);
    WriteRegisterByte(RegisterType::C, 0x7A);
    WriteRegisterByte(RegisterType::D, 0x24);
    WriteRegisterByte(RegisterType::E, 0x9D);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x91);
    WriteRegisterByte(RegisterType::L, 0xE1);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8665, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8B);
    CheckRegisterByte(RegisterType::B, 0x60);
    CheckRegisterByte(RegisterType::C, 0x7A);
    CheckRegisterByte(RegisterType::D, 0x24);
    CheckRegisterByte(RegisterType::E, 0x9D);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x91);
    CheckRegisterByte(RegisterType::L, 0xE1);
    WriteRegisterWord(RegisterType::PC, 0x8666);
    WriteRegisterWord(RegisterType::SP, 0x8DE3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8665, 0x40);
}

void test_40_014F()
{
    if (skip_test_40_014F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF709);
    WriteRegisterWord(RegisterType::SP, 0x8343);
    WriteRegisterByte(RegisterType::A, 0x40);
    WriteRegisterByte(RegisterType::B, 0xD7);
    WriteRegisterByte(RegisterType::C, 0x4A);
    WriteRegisterByte(RegisterType::D, 0x4E);
    WriteRegisterByte(RegisterType::E, 0x63);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x98);
    WriteRegisterByte(RegisterType::L, 0xFA);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF709, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x40);
    CheckRegisterByte(RegisterType::B, 0xD7);
    CheckRegisterByte(RegisterType::C, 0x4A);
    CheckRegisterByte(RegisterType::D, 0x4E);
    CheckRegisterByte(RegisterType::E, 0x63);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x98);
    CheckRegisterByte(RegisterType::L, 0xFA);
    WriteRegisterWord(RegisterType::PC, 0xF70A);
    WriteRegisterWord(RegisterType::SP, 0x8343);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF709, 0x40);
}

void test_40_0150()
{
    if (skip_test_40_0150)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6A85);
    WriteRegisterWord(RegisterType::SP, 0xEBB5);
    WriteRegisterByte(RegisterType::A, 0x13);
    WriteRegisterByte(RegisterType::B, 0x9A);
    WriteRegisterByte(RegisterType::C, 0x71);
    WriteRegisterByte(RegisterType::D, 0x91);
    WriteRegisterByte(RegisterType::E, 0x5E);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x0A);
    WriteRegisterByte(RegisterType::L, 0x05);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6A85, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x13);
    CheckRegisterByte(RegisterType::B, 0x9A);
    CheckRegisterByte(RegisterType::C, 0x71);
    CheckRegisterByte(RegisterType::D, 0x91);
    CheckRegisterByte(RegisterType::E, 0x5E);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x0A);
    CheckRegisterByte(RegisterType::L, 0x05);
    WriteRegisterWord(RegisterType::PC, 0x6A86);
    WriteRegisterWord(RegisterType::SP, 0xEBB5);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6A85, 0x40);
}

void test_40_0151()
{
    if (skip_test_40_0151)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB91B);
    WriteRegisterWord(RegisterType::SP, 0x9163);
    WriteRegisterByte(RegisterType::A, 0x8C);
    WriteRegisterByte(RegisterType::B, 0x2B);
    WriteRegisterByte(RegisterType::C, 0x57);
    WriteRegisterByte(RegisterType::D, 0x13);
    WriteRegisterByte(RegisterType::E, 0x0E);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xD1);
    WriteRegisterByte(RegisterType::L, 0x89);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB91B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8C);
    CheckRegisterByte(RegisterType::B, 0x2B);
    CheckRegisterByte(RegisterType::C, 0x57);
    CheckRegisterByte(RegisterType::D, 0x13);
    CheckRegisterByte(RegisterType::E, 0x0E);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xD1);
    CheckRegisterByte(RegisterType::L, 0x89);
    WriteRegisterWord(RegisterType::PC, 0xB91C);
    WriteRegisterWord(RegisterType::SP, 0x9163);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB91B, 0x40);
}

void test_40_0152()
{
    if (skip_test_40_0152)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCA23);
    WriteRegisterWord(RegisterType::SP, 0x2B8D);
    WriteRegisterByte(RegisterType::A, 0x84);
    WriteRegisterByte(RegisterType::B, 0xCF);
    WriteRegisterByte(RegisterType::C, 0x58);
    WriteRegisterByte(RegisterType::D, 0x52);
    WriteRegisterByte(RegisterType::E, 0x89);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x94);
    WriteRegisterByte(RegisterType::L, 0xF2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xCA23, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x84);
    CheckRegisterByte(RegisterType::B, 0xCF);
    CheckRegisterByte(RegisterType::C, 0x58);
    CheckRegisterByte(RegisterType::D, 0x52);
    CheckRegisterByte(RegisterType::E, 0x89);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x94);
    CheckRegisterByte(RegisterType::L, 0xF2);
    WriteRegisterWord(RegisterType::PC, 0xCA24);
    WriteRegisterWord(RegisterType::SP, 0x2B8D);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xCA23, 0x40);
}

void test_40_0153()
{
    if (skip_test_40_0153)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3F24);
    WriteRegisterWord(RegisterType::SP, 0xF346);
    WriteRegisterByte(RegisterType::A, 0x1E);
    WriteRegisterByte(RegisterType::B, 0x8A);
    WriteRegisterByte(RegisterType::C, 0x1F);
    WriteRegisterByte(RegisterType::D, 0x5A);
    WriteRegisterByte(RegisterType::E, 0xBA);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xF6);
    WriteRegisterByte(RegisterType::L, 0x46);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3F24, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1E);
    CheckRegisterByte(RegisterType::B, 0x8A);
    CheckRegisterByte(RegisterType::C, 0x1F);
    CheckRegisterByte(RegisterType::D, 0x5A);
    CheckRegisterByte(RegisterType::E, 0xBA);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xF6);
    CheckRegisterByte(RegisterType::L, 0x46);
    WriteRegisterWord(RegisterType::PC, 0x3F25);
    WriteRegisterWord(RegisterType::SP, 0xF346);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3F24, 0x40);
}

void test_40_0154()
{
    if (skip_test_40_0154)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5493);
    WriteRegisterWord(RegisterType::SP, 0xCD25);
    WriteRegisterByte(RegisterType::A, 0x5D);
    WriteRegisterByte(RegisterType::B, 0x2D);
    WriteRegisterByte(RegisterType::C, 0x19);
    WriteRegisterByte(RegisterType::D, 0xD3);
    WriteRegisterByte(RegisterType::E, 0x15);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x55);
    WriteRegisterByte(RegisterType::L, 0xE5);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5493, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5D);
    CheckRegisterByte(RegisterType::B, 0x2D);
    CheckRegisterByte(RegisterType::C, 0x19);
    CheckRegisterByte(RegisterType::D, 0xD3);
    CheckRegisterByte(RegisterType::E, 0x15);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x55);
    CheckRegisterByte(RegisterType::L, 0xE5);
    WriteRegisterWord(RegisterType::PC, 0x5494);
    WriteRegisterWord(RegisterType::SP, 0xCD25);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5493, 0x40);
}

void test_40_0155()
{
    if (skip_test_40_0155)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE8AD);
    WriteRegisterWord(RegisterType::SP, 0x57D8);
    WriteRegisterByte(RegisterType::A, 0xA9);
    WriteRegisterByte(RegisterType::B, 0x6F);
    WriteRegisterByte(RegisterType::C, 0x17);
    WriteRegisterByte(RegisterType::D, 0x25);
    WriteRegisterByte(RegisterType::E, 0xE5);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x95);
    WriteRegisterByte(RegisterType::L, 0x54);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xE8AD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA9);
    CheckRegisterByte(RegisterType::B, 0x6F);
    CheckRegisterByte(RegisterType::C, 0x17);
    CheckRegisterByte(RegisterType::D, 0x25);
    CheckRegisterByte(RegisterType::E, 0xE5);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x95);
    CheckRegisterByte(RegisterType::L, 0x54);
    WriteRegisterWord(RegisterType::PC, 0xE8AE);
    WriteRegisterWord(RegisterType::SP, 0x57D8);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xE8AD, 0x40);
}

void test_40_0156()
{
    if (skip_test_40_0156)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDE37);
    WriteRegisterWord(RegisterType::SP, 0x4CE3);
    WriteRegisterByte(RegisterType::A, 0xB9);
    WriteRegisterByte(RegisterType::B, 0x47);
    WriteRegisterByte(RegisterType::C, 0x5D);
    WriteRegisterByte(RegisterType::D, 0x0E);
    WriteRegisterByte(RegisterType::E, 0x00);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x44);
    WriteRegisterByte(RegisterType::L, 0xE3);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDE37, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB9);
    CheckRegisterByte(RegisterType::B, 0x47);
    CheckRegisterByte(RegisterType::C, 0x5D);
    CheckRegisterByte(RegisterType::D, 0x0E);
    CheckRegisterByte(RegisterType::E, 0x00);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x44);
    CheckRegisterByte(RegisterType::L, 0xE3);
    WriteRegisterWord(RegisterType::PC, 0xDE38);
    WriteRegisterWord(RegisterType::SP, 0x4CE3);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xDE37, 0x40);
}

void test_40_0157()
{
    if (skip_test_40_0157)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA02E);
    WriteRegisterWord(RegisterType::SP, 0xA36A);
    WriteRegisterByte(RegisterType::A, 0x0B);
    WriteRegisterByte(RegisterType::B, 0x54);
    WriteRegisterByte(RegisterType::C, 0xC7);
    WriteRegisterByte(RegisterType::D, 0x4A);
    WriteRegisterByte(RegisterType::E, 0x25);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x49);
    WriteRegisterByte(RegisterType::L, 0x0F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA02E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0B);
    CheckRegisterByte(RegisterType::B, 0x54);
    CheckRegisterByte(RegisterType::C, 0xC7);
    CheckRegisterByte(RegisterType::D, 0x4A);
    CheckRegisterByte(RegisterType::E, 0x25);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x49);
    CheckRegisterByte(RegisterType::L, 0x0F);
    WriteRegisterWord(RegisterType::PC, 0xA02F);
    WriteRegisterWord(RegisterType::SP, 0xA36A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA02E, 0x40);
}

void test_40_0158()
{
    if (skip_test_40_0158)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAB81);
    WriteRegisterWord(RegisterType::SP, 0xCAC5);
    WriteRegisterByte(RegisterType::A, 0x41);
    WriteRegisterByte(RegisterType::B, 0xE3);
    WriteRegisterByte(RegisterType::C, 0x9D);
    WriteRegisterByte(RegisterType::D, 0xD0);
    WriteRegisterByte(RegisterType::E, 0xCA);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xB2);
    WriteRegisterByte(RegisterType::L, 0x66);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xAB81, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x41);
    CheckRegisterByte(RegisterType::B, 0xE3);
    CheckRegisterByte(RegisterType::C, 0x9D);
    CheckRegisterByte(RegisterType::D, 0xD0);
    CheckRegisterByte(RegisterType::E, 0xCA);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xB2);
    CheckRegisterByte(RegisterType::L, 0x66);
    WriteRegisterWord(RegisterType::PC, 0xAB82);
    WriteRegisterWord(RegisterType::SP, 0xCAC5);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAB81, 0x40);
}

void test_40_0159()
{
    if (skip_test_40_0159)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x815C);
    WriteRegisterWord(RegisterType::SP, 0x83FF);
    WriteRegisterByte(RegisterType::A, 0x4A);
    WriteRegisterByte(RegisterType::B, 0x02);
    WriteRegisterByte(RegisterType::C, 0xC3);
    WriteRegisterByte(RegisterType::D, 0xF5);
    WriteRegisterByte(RegisterType::E, 0xF1);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x17);
    WriteRegisterByte(RegisterType::L, 0x91);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x815C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4A);
    CheckRegisterByte(RegisterType::B, 0x02);
    CheckRegisterByte(RegisterType::C, 0xC3);
    CheckRegisterByte(RegisterType::D, 0xF5);
    CheckRegisterByte(RegisterType::E, 0xF1);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x17);
    CheckRegisterByte(RegisterType::L, 0x91);
    WriteRegisterWord(RegisterType::PC, 0x815D);
    WriteRegisterWord(RegisterType::SP, 0x83FF);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x815C, 0x40);
}

void test_40_015A()
{
    if (skip_test_40_015A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9A90);
    WriteRegisterWord(RegisterType::SP, 0xCBEB);
    WriteRegisterByte(RegisterType::A, 0xB0);
    WriteRegisterByte(RegisterType::B, 0x9C);
    WriteRegisterByte(RegisterType::C, 0xDB);
    WriteRegisterByte(RegisterType::D, 0x72);
    WriteRegisterByte(RegisterType::E, 0x7D);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xED);
    WriteRegisterByte(RegisterType::L, 0x88);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9A90, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB0);
    CheckRegisterByte(RegisterType::B, 0x9C);
    CheckRegisterByte(RegisterType::C, 0xDB);
    CheckRegisterByte(RegisterType::D, 0x72);
    CheckRegisterByte(RegisterType::E, 0x7D);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xED);
    CheckRegisterByte(RegisterType::L, 0x88);
    WriteRegisterWord(RegisterType::PC, 0x9A91);
    WriteRegisterWord(RegisterType::SP, 0xCBEB);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9A90, 0x40);
}

void test_40_015B()
{
    if (skip_test_40_015B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1685);
    WriteRegisterWord(RegisterType::SP, 0x9A14);
    WriteRegisterByte(RegisterType::A, 0xD7);
    WriteRegisterByte(RegisterType::B, 0xEF);
    WriteRegisterByte(RegisterType::C, 0x42);
    WriteRegisterByte(RegisterType::D, 0x8A);
    WriteRegisterByte(RegisterType::E, 0x75);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x5D);
    WriteRegisterByte(RegisterType::L, 0x29);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1685, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD7);
    CheckRegisterByte(RegisterType::B, 0xEF);
    CheckRegisterByte(RegisterType::C, 0x42);
    CheckRegisterByte(RegisterType::D, 0x8A);
    CheckRegisterByte(RegisterType::E, 0x75);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x5D);
    CheckRegisterByte(RegisterType::L, 0x29);
    WriteRegisterWord(RegisterType::PC, 0x1686);
    WriteRegisterWord(RegisterType::SP, 0x9A14);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1685, 0x40);
}

void test_40_015C()
{
    if (skip_test_40_015C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC1FC);
    WriteRegisterWord(RegisterType::SP, 0xF03C);
    WriteRegisterByte(RegisterType::A, 0x95);
    WriteRegisterByte(RegisterType::B, 0x69);
    WriteRegisterByte(RegisterType::C, 0x32);
    WriteRegisterByte(RegisterType::D, 0xBB);
    WriteRegisterByte(RegisterType::E, 0xEE);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xCE);
    WriteRegisterByte(RegisterType::L, 0x31);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC1FC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x95);
    CheckRegisterByte(RegisterType::B, 0x69);
    CheckRegisterByte(RegisterType::C, 0x32);
    CheckRegisterByte(RegisterType::D, 0xBB);
    CheckRegisterByte(RegisterType::E, 0xEE);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xCE);
    CheckRegisterByte(RegisterType::L, 0x31);
    WriteRegisterWord(RegisterType::PC, 0xC1FD);
    WriteRegisterWord(RegisterType::SP, 0xF03C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC1FC, 0x40);
}

void test_40_015D()
{
    if (skip_test_40_015D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBBF2);
    WriteRegisterWord(RegisterType::SP, 0x5D3A);
    WriteRegisterByte(RegisterType::A, 0xAC);
    WriteRegisterByte(RegisterType::B, 0x36);
    WriteRegisterByte(RegisterType::C, 0xF8);
    WriteRegisterByte(RegisterType::D, 0x5F);
    WriteRegisterByte(RegisterType::E, 0x55);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x86);
    WriteRegisterByte(RegisterType::L, 0x5D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBBF2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAC);
    CheckRegisterByte(RegisterType::B, 0x36);
    CheckRegisterByte(RegisterType::C, 0xF8);
    CheckRegisterByte(RegisterType::D, 0x5F);
    CheckRegisterByte(RegisterType::E, 0x55);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x86);
    CheckRegisterByte(RegisterType::L, 0x5D);
    WriteRegisterWord(RegisterType::PC, 0xBBF3);
    WriteRegisterWord(RegisterType::SP, 0x5D3A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xBBF2, 0x40);
}

void test_40_015E()
{
    if (skip_test_40_015E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB501);
    WriteRegisterWord(RegisterType::SP, 0x86CC);
    WriteRegisterByte(RegisterType::A, 0xA2);
    WriteRegisterByte(RegisterType::B, 0xEB);
    WriteRegisterByte(RegisterType::C, 0x78);
    WriteRegisterByte(RegisterType::D, 0x4E);
    WriteRegisterByte(RegisterType::E, 0xBD);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x9B);
    WriteRegisterByte(RegisterType::L, 0x38);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB501, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA2);
    CheckRegisterByte(RegisterType::B, 0xEB);
    CheckRegisterByte(RegisterType::C, 0x78);
    CheckRegisterByte(RegisterType::D, 0x4E);
    CheckRegisterByte(RegisterType::E, 0xBD);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x9B);
    CheckRegisterByte(RegisterType::L, 0x38);
    WriteRegisterWord(RegisterType::PC, 0xB502);
    WriteRegisterWord(RegisterType::SP, 0x86CC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB501, 0x40);
}

void test_40_015F()
{
    if (skip_test_40_015F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB8EB);
    WriteRegisterWord(RegisterType::SP, 0x08B5);
    WriteRegisterByte(RegisterType::A, 0x1C);
    WriteRegisterByte(RegisterType::B, 0xC7);
    WriteRegisterByte(RegisterType::C, 0x56);
    WriteRegisterByte(RegisterType::D, 0x5B);
    WriteRegisterByte(RegisterType::E, 0xA1);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xB9);
    WriteRegisterByte(RegisterType::L, 0xD1);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB8EB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1C);
    CheckRegisterByte(RegisterType::B, 0xC7);
    CheckRegisterByte(RegisterType::C, 0x56);
    CheckRegisterByte(RegisterType::D, 0x5B);
    CheckRegisterByte(RegisterType::E, 0xA1);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xB9);
    CheckRegisterByte(RegisterType::L, 0xD1);
    WriteRegisterWord(RegisterType::PC, 0xB8EC);
    WriteRegisterWord(RegisterType::SP, 0x08B5);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB8EB, 0x40);
}

void test_40_0160()
{
    if (skip_test_40_0160)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x045D);
    WriteRegisterWord(RegisterType::SP, 0xF4AD);
    WriteRegisterByte(RegisterType::A, 0x44);
    WriteRegisterByte(RegisterType::B, 0xD2);
    WriteRegisterByte(RegisterType::C, 0xD7);
    WriteRegisterByte(RegisterType::D, 0xD2);
    WriteRegisterByte(RegisterType::E, 0x1E);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x27);
    WriteRegisterByte(RegisterType::L, 0x18);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x045D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x44);
    CheckRegisterByte(RegisterType::B, 0xD2);
    CheckRegisterByte(RegisterType::C, 0xD7);
    CheckRegisterByte(RegisterType::D, 0xD2);
    CheckRegisterByte(RegisterType::E, 0x1E);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x27);
    CheckRegisterByte(RegisterType::L, 0x18);
    WriteRegisterWord(RegisterType::PC, 0x045E);
    WriteRegisterWord(RegisterType::SP, 0xF4AD);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x045D, 0x40);
}

void test_40_0161()
{
    if (skip_test_40_0161)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x252F);
    WriteRegisterWord(RegisterType::SP, 0x428B);
    WriteRegisterByte(RegisterType::A, 0xC8);
    WriteRegisterByte(RegisterType::B, 0x0D);
    WriteRegisterByte(RegisterType::C, 0xA7);
    WriteRegisterByte(RegisterType::D, 0xFD);
    WriteRegisterByte(RegisterType::E, 0x9F);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x87);
    WriteRegisterByte(RegisterType::L, 0x4D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x252F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC8);
    CheckRegisterByte(RegisterType::B, 0x0D);
    CheckRegisterByte(RegisterType::C, 0xA7);
    CheckRegisterByte(RegisterType::D, 0xFD);
    CheckRegisterByte(RegisterType::E, 0x9F);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x87);
    CheckRegisterByte(RegisterType::L, 0x4D);
    WriteRegisterWord(RegisterType::PC, 0x2530);
    WriteRegisterWord(RegisterType::SP, 0x428B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x252F, 0x40);
}

void test_40_0162()
{
    if (skip_test_40_0162)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA444);
    WriteRegisterWord(RegisterType::SP, 0x8C6E);
    WriteRegisterByte(RegisterType::A, 0x11);
    WriteRegisterByte(RegisterType::B, 0xA7);
    WriteRegisterByte(RegisterType::C, 0x7C);
    WriteRegisterByte(RegisterType::D, 0x01);
    WriteRegisterByte(RegisterType::E, 0xC5);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xAA);
    WriteRegisterByte(RegisterType::L, 0x77);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA444, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x11);
    CheckRegisterByte(RegisterType::B, 0xA7);
    CheckRegisterByte(RegisterType::C, 0x7C);
    CheckRegisterByte(RegisterType::D, 0x01);
    CheckRegisterByte(RegisterType::E, 0xC5);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xAA);
    CheckRegisterByte(RegisterType::L, 0x77);
    WriteRegisterWord(RegisterType::PC, 0xA445);
    WriteRegisterWord(RegisterType::SP, 0x8C6E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA444, 0x40);
}

void test_40_0163()
{
    if (skip_test_40_0163)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6A8C);
    WriteRegisterWord(RegisterType::SP, 0x6CC5);
    WriteRegisterByte(RegisterType::A, 0x60);
    WriteRegisterByte(RegisterType::B, 0x40);
    WriteRegisterByte(RegisterType::C, 0x13);
    WriteRegisterByte(RegisterType::D, 0xD1);
    WriteRegisterByte(RegisterType::E, 0x95);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x6A);
    WriteRegisterByte(RegisterType::L, 0xA0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6A8C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x60);
    CheckRegisterByte(RegisterType::B, 0x40);
    CheckRegisterByte(RegisterType::C, 0x13);
    CheckRegisterByte(RegisterType::D, 0xD1);
    CheckRegisterByte(RegisterType::E, 0x95);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x6A);
    CheckRegisterByte(RegisterType::L, 0xA0);
    WriteRegisterWord(RegisterType::PC, 0x6A8D);
    WriteRegisterWord(RegisterType::SP, 0x6CC5);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6A8C, 0x40);
}

void test_40_0164()
{
    if (skip_test_40_0164)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCF03);
    WriteRegisterWord(RegisterType::SP, 0xBF7D);
    WriteRegisterByte(RegisterType::A, 0xD3);
    WriteRegisterByte(RegisterType::B, 0xBB);
    WriteRegisterByte(RegisterType::C, 0x7F);
    WriteRegisterByte(RegisterType::D, 0x5F);
    WriteRegisterByte(RegisterType::E, 0x14);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xCF);
    WriteRegisterByte(RegisterType::L, 0x24);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCF03, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD3);
    CheckRegisterByte(RegisterType::B, 0xBB);
    CheckRegisterByte(RegisterType::C, 0x7F);
    CheckRegisterByte(RegisterType::D, 0x5F);
    CheckRegisterByte(RegisterType::E, 0x14);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xCF);
    CheckRegisterByte(RegisterType::L, 0x24);
    WriteRegisterWord(RegisterType::PC, 0xCF04);
    WriteRegisterWord(RegisterType::SP, 0xBF7D);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xCF03, 0x40);
}

void test_40_0165()
{
    if (skip_test_40_0165)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x987C);
    WriteRegisterWord(RegisterType::SP, 0x00ED);
    WriteRegisterByte(RegisterType::A, 0x4D);
    WriteRegisterByte(RegisterType::B, 0xE7);
    WriteRegisterByte(RegisterType::C, 0x82);
    WriteRegisterByte(RegisterType::D, 0x0D);
    WriteRegisterByte(RegisterType::E, 0x52);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x05);
    WriteRegisterByte(RegisterType::L, 0xCC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x987C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4D);
    CheckRegisterByte(RegisterType::B, 0xE7);
    CheckRegisterByte(RegisterType::C, 0x82);
    CheckRegisterByte(RegisterType::D, 0x0D);
    CheckRegisterByte(RegisterType::E, 0x52);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x05);
    CheckRegisterByte(RegisterType::L, 0xCC);
    WriteRegisterWord(RegisterType::PC, 0x987D);
    WriteRegisterWord(RegisterType::SP, 0x00ED);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x987C, 0x40);
}

void test_40_0166()
{
    if (skip_test_40_0166)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x572C);
    WriteRegisterWord(RegisterType::SP, 0xFF71);
    WriteRegisterByte(RegisterType::A, 0x56);
    WriteRegisterByte(RegisterType::B, 0xE2);
    WriteRegisterByte(RegisterType::C, 0x36);
    WriteRegisterByte(RegisterType::D, 0x49);
    WriteRegisterByte(RegisterType::E, 0xFF);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x44);
    WriteRegisterByte(RegisterType::L, 0x0A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x572C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x56);
    CheckRegisterByte(RegisterType::B, 0xE2);
    CheckRegisterByte(RegisterType::C, 0x36);
    CheckRegisterByte(RegisterType::D, 0x49);
    CheckRegisterByte(RegisterType::E, 0xFF);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x44);
    CheckRegisterByte(RegisterType::L, 0x0A);
    WriteRegisterWord(RegisterType::PC, 0x572D);
    WriteRegisterWord(RegisterType::SP, 0xFF71);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x572C, 0x40);
}

void test_40_0167()
{
    if (skip_test_40_0167)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x05C8);
    WriteRegisterWord(RegisterType::SP, 0xCE7D);
    WriteRegisterByte(RegisterType::A, 0x13);
    WriteRegisterByte(RegisterType::B, 0xA2);
    WriteRegisterByte(RegisterType::C, 0x6D);
    WriteRegisterByte(RegisterType::D, 0x8F);
    WriteRegisterByte(RegisterType::E, 0x45);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x60);
    WriteRegisterByte(RegisterType::L, 0x41);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x05C8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x13);
    CheckRegisterByte(RegisterType::B, 0xA2);
    CheckRegisterByte(RegisterType::C, 0x6D);
    CheckRegisterByte(RegisterType::D, 0x8F);
    CheckRegisterByte(RegisterType::E, 0x45);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x60);
    CheckRegisterByte(RegisterType::L, 0x41);
    WriteRegisterWord(RegisterType::PC, 0x05C9);
    WriteRegisterWord(RegisterType::SP, 0xCE7D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x05C8, 0x40);
}

void test_40_0168()
{
    if (skip_test_40_0168)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFE85);
    WriteRegisterWord(RegisterType::SP, 0x611B);
    WriteRegisterByte(RegisterType::A, 0x88);
    WriteRegisterByte(RegisterType::B, 0x0C);
    WriteRegisterByte(RegisterType::C, 0x94);
    WriteRegisterByte(RegisterType::D, 0x23);
    WriteRegisterByte(RegisterType::E, 0x3A);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x59);
    WriteRegisterByte(RegisterType::L, 0xF0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFE85, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x88);
    CheckRegisterByte(RegisterType::B, 0x0C);
    CheckRegisterByte(RegisterType::C, 0x94);
    CheckRegisterByte(RegisterType::D, 0x23);
    CheckRegisterByte(RegisterType::E, 0x3A);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x59);
    CheckRegisterByte(RegisterType::L, 0xF0);
    WriteRegisterWord(RegisterType::PC, 0xFE86);
    WriteRegisterWord(RegisterType::SP, 0x611B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFE85, 0x40);
}

void test_40_0169()
{
    if (skip_test_40_0169)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5FE1);
    WriteRegisterWord(RegisterType::SP, 0x0792);
    WriteRegisterByte(RegisterType::A, 0x25);
    WriteRegisterByte(RegisterType::B, 0xD9);
    WriteRegisterByte(RegisterType::C, 0x69);
    WriteRegisterByte(RegisterType::D, 0x39);
    WriteRegisterByte(RegisterType::E, 0x8B);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x4C);
    WriteRegisterByte(RegisterType::L, 0xC6);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5FE1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x25);
    CheckRegisterByte(RegisterType::B, 0xD9);
    CheckRegisterByte(RegisterType::C, 0x69);
    CheckRegisterByte(RegisterType::D, 0x39);
    CheckRegisterByte(RegisterType::E, 0x8B);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x4C);
    CheckRegisterByte(RegisterType::L, 0xC6);
    WriteRegisterWord(RegisterType::PC, 0x5FE2);
    WriteRegisterWord(RegisterType::SP, 0x0792);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5FE1, 0x40);
}

void test_40_016A()
{
    if (skip_test_40_016A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x40CE);
    WriteRegisterWord(RegisterType::SP, 0x9631);
    WriteRegisterByte(RegisterType::A, 0xF9);
    WriteRegisterByte(RegisterType::B, 0x23);
    WriteRegisterByte(RegisterType::C, 0x5B);
    WriteRegisterByte(RegisterType::D, 0xF0);
    WriteRegisterByte(RegisterType::E, 0x3A);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x1F);
    WriteRegisterByte(RegisterType::L, 0x6F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x40CE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF9);
    CheckRegisterByte(RegisterType::B, 0x23);
    CheckRegisterByte(RegisterType::C, 0x5B);
    CheckRegisterByte(RegisterType::D, 0xF0);
    CheckRegisterByte(RegisterType::E, 0x3A);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x1F);
    CheckRegisterByte(RegisterType::L, 0x6F);
    WriteRegisterWord(RegisterType::PC, 0x40CF);
    WriteRegisterWord(RegisterType::SP, 0x9631);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x40CE, 0x40);
}

void test_40_016B()
{
    if (skip_test_40_016B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5086);
    WriteRegisterWord(RegisterType::SP, 0xF288);
    WriteRegisterByte(RegisterType::A, 0x52);
    WriteRegisterByte(RegisterType::B, 0xF3);
    WriteRegisterByte(RegisterType::C, 0x89);
    WriteRegisterByte(RegisterType::D, 0x48);
    WriteRegisterByte(RegisterType::E, 0xDC);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x94);
    WriteRegisterByte(RegisterType::L, 0x6B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5086, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x52);
    CheckRegisterByte(RegisterType::B, 0xF3);
    CheckRegisterByte(RegisterType::C, 0x89);
    CheckRegisterByte(RegisterType::D, 0x48);
    CheckRegisterByte(RegisterType::E, 0xDC);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x94);
    CheckRegisterByte(RegisterType::L, 0x6B);
    WriteRegisterWord(RegisterType::PC, 0x5087);
    WriteRegisterWord(RegisterType::SP, 0xF288);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5086, 0x40);
}

void test_40_016C()
{
    if (skip_test_40_016C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB077);
    WriteRegisterWord(RegisterType::SP, 0xA4F2);
    WriteRegisterByte(RegisterType::A, 0x9D);
    WriteRegisterByte(RegisterType::B, 0xF0);
    WriteRegisterByte(RegisterType::C, 0x85);
    WriteRegisterByte(RegisterType::D, 0xC3);
    WriteRegisterByte(RegisterType::E, 0x72);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xD5);
    WriteRegisterByte(RegisterType::L, 0xE4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB077, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9D);
    CheckRegisterByte(RegisterType::B, 0xF0);
    CheckRegisterByte(RegisterType::C, 0x85);
    CheckRegisterByte(RegisterType::D, 0xC3);
    CheckRegisterByte(RegisterType::E, 0x72);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xD5);
    CheckRegisterByte(RegisterType::L, 0xE4);
    WriteRegisterWord(RegisterType::PC, 0xB078);
    WriteRegisterWord(RegisterType::SP, 0xA4F2);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB077, 0x40);
}

void test_40_016D()
{
    if (skip_test_40_016D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBA95);
    WriteRegisterWord(RegisterType::SP, 0x5EA7);
    WriteRegisterByte(RegisterType::A, 0x81);
    WriteRegisterByte(RegisterType::B, 0xA4);
    WriteRegisterByte(RegisterType::C, 0x35);
    WriteRegisterByte(RegisterType::D, 0xB1);
    WriteRegisterByte(RegisterType::E, 0x59);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xB5);
    WriteRegisterByte(RegisterType::L, 0x5F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xBA95, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x81);
    CheckRegisterByte(RegisterType::B, 0xA4);
    CheckRegisterByte(RegisterType::C, 0x35);
    CheckRegisterByte(RegisterType::D, 0xB1);
    CheckRegisterByte(RegisterType::E, 0x59);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xB5);
    CheckRegisterByte(RegisterType::L, 0x5F);
    WriteRegisterWord(RegisterType::PC, 0xBA96);
    WriteRegisterWord(RegisterType::SP, 0x5EA7);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xBA95, 0x40);
}

void test_40_016E()
{
    if (skip_test_40_016E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x353D);
    WriteRegisterWord(RegisterType::SP, 0x5D1E);
    WriteRegisterByte(RegisterType::A, 0xFA);
    WriteRegisterByte(RegisterType::B, 0x41);
    WriteRegisterByte(RegisterType::C, 0x20);
    WriteRegisterByte(RegisterType::D, 0x77);
    WriteRegisterByte(RegisterType::E, 0xBC);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x2D);
    WriteRegisterByte(RegisterType::L, 0x2C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x353D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFA);
    CheckRegisterByte(RegisterType::B, 0x41);
    CheckRegisterByte(RegisterType::C, 0x20);
    CheckRegisterByte(RegisterType::D, 0x77);
    CheckRegisterByte(RegisterType::E, 0xBC);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x2D);
    CheckRegisterByte(RegisterType::L, 0x2C);
    WriteRegisterWord(RegisterType::PC, 0x353E);
    WriteRegisterWord(RegisterType::SP, 0x5D1E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x353D, 0x40);
}

void test_40_016F()
{
    if (skip_test_40_016F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7F09);
    WriteRegisterWord(RegisterType::SP, 0xEFAB);
    WriteRegisterByte(RegisterType::A, 0xC1);
    WriteRegisterByte(RegisterType::B, 0x7B);
    WriteRegisterByte(RegisterType::C, 0xDD);
    WriteRegisterByte(RegisterType::D, 0xE8);
    WriteRegisterByte(RegisterType::E, 0x57);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x91);
    WriteRegisterByte(RegisterType::L, 0xB5);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7F09, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC1);
    CheckRegisterByte(RegisterType::B, 0x7B);
    CheckRegisterByte(RegisterType::C, 0xDD);
    CheckRegisterByte(RegisterType::D, 0xE8);
    CheckRegisterByte(RegisterType::E, 0x57);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x91);
    CheckRegisterByte(RegisterType::L, 0xB5);
    WriteRegisterWord(RegisterType::PC, 0x7F0A);
    WriteRegisterWord(RegisterType::SP, 0xEFAB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7F09, 0x40);
}

void test_40_0170()
{
    if (skip_test_40_0170)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0582);
    WriteRegisterWord(RegisterType::SP, 0x83F9);
    WriteRegisterByte(RegisterType::A, 0x72);
    WriteRegisterByte(RegisterType::B, 0x71);
    WriteRegisterByte(RegisterType::C, 0x3A);
    WriteRegisterByte(RegisterType::D, 0x20);
    WriteRegisterByte(RegisterType::E, 0x5D);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xAA);
    WriteRegisterByte(RegisterType::L, 0x75);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0582, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x72);
    CheckRegisterByte(RegisterType::B, 0x71);
    CheckRegisterByte(RegisterType::C, 0x3A);
    CheckRegisterByte(RegisterType::D, 0x20);
    CheckRegisterByte(RegisterType::E, 0x5D);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xAA);
    CheckRegisterByte(RegisterType::L, 0x75);
    WriteRegisterWord(RegisterType::PC, 0x0583);
    WriteRegisterWord(RegisterType::SP, 0x83F9);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0582, 0x40);
}

void test_40_0171()
{
    if (skip_test_40_0171)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC54C);
    WriteRegisterWord(RegisterType::SP, 0x40D9);
    WriteRegisterByte(RegisterType::A, 0x2E);
    WriteRegisterByte(RegisterType::B, 0xF4);
    WriteRegisterByte(RegisterType::C, 0x76);
    WriteRegisterByte(RegisterType::D, 0x9C);
    WriteRegisterByte(RegisterType::E, 0x04);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x92);
    WriteRegisterByte(RegisterType::L, 0x24);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC54C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2E);
    CheckRegisterByte(RegisterType::B, 0xF4);
    CheckRegisterByte(RegisterType::C, 0x76);
    CheckRegisterByte(RegisterType::D, 0x9C);
    CheckRegisterByte(RegisterType::E, 0x04);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x92);
    CheckRegisterByte(RegisterType::L, 0x24);
    WriteRegisterWord(RegisterType::PC, 0xC54D);
    WriteRegisterWord(RegisterType::SP, 0x40D9);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC54C, 0x40);
}

void test_40_0172()
{
    if (skip_test_40_0172)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5D37);
    WriteRegisterWord(RegisterType::SP, 0x7BC4);
    WriteRegisterByte(RegisterType::A, 0xBF);
    WriteRegisterByte(RegisterType::B, 0x1D);
    WriteRegisterByte(RegisterType::C, 0xFE);
    WriteRegisterByte(RegisterType::D, 0xEE);
    WriteRegisterByte(RegisterType::E, 0x34);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x62);
    WriteRegisterByte(RegisterType::L, 0x70);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5D37, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBF);
    CheckRegisterByte(RegisterType::B, 0x1D);
    CheckRegisterByte(RegisterType::C, 0xFE);
    CheckRegisterByte(RegisterType::D, 0xEE);
    CheckRegisterByte(RegisterType::E, 0x34);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x62);
    CheckRegisterByte(RegisterType::L, 0x70);
    WriteRegisterWord(RegisterType::PC, 0x5D38);
    WriteRegisterWord(RegisterType::SP, 0x7BC4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5D37, 0x40);
}

void test_40_0173()
{
    if (skip_test_40_0173)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF20B);
    WriteRegisterWord(RegisterType::SP, 0xC35C);
    WriteRegisterByte(RegisterType::A, 0x0D);
    WriteRegisterByte(RegisterType::B, 0xEB);
    WriteRegisterByte(RegisterType::C, 0x56);
    WriteRegisterByte(RegisterType::D, 0xFA);
    WriteRegisterByte(RegisterType::E, 0xC0);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xB5);
    WriteRegisterByte(RegisterType::L, 0x7C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF20B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0D);
    CheckRegisterByte(RegisterType::B, 0xEB);
    CheckRegisterByte(RegisterType::C, 0x56);
    CheckRegisterByte(RegisterType::D, 0xFA);
    CheckRegisterByte(RegisterType::E, 0xC0);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xB5);
    CheckRegisterByte(RegisterType::L, 0x7C);
    WriteRegisterWord(RegisterType::PC, 0xF20C);
    WriteRegisterWord(RegisterType::SP, 0xC35C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF20B, 0x40);
}

void test_40_0174()
{
    if (skip_test_40_0174)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x502E);
    WriteRegisterWord(RegisterType::SP, 0x0FB6);
    WriteRegisterByte(RegisterType::A, 0x3B);
    WriteRegisterByte(RegisterType::B, 0x11);
    WriteRegisterByte(RegisterType::C, 0xD3);
    WriteRegisterByte(RegisterType::D, 0x5A);
    WriteRegisterByte(RegisterType::E, 0xC2);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x3E);
    WriteRegisterByte(RegisterType::L, 0xF5);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x502E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3B);
    CheckRegisterByte(RegisterType::B, 0x11);
    CheckRegisterByte(RegisterType::C, 0xD3);
    CheckRegisterByte(RegisterType::D, 0x5A);
    CheckRegisterByte(RegisterType::E, 0xC2);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x3E);
    CheckRegisterByte(RegisterType::L, 0xF5);
    WriteRegisterWord(RegisterType::PC, 0x502F);
    WriteRegisterWord(RegisterType::SP, 0x0FB6);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x502E, 0x40);
}

void test_40_0175()
{
    if (skip_test_40_0175)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2B89);
    WriteRegisterWord(RegisterType::SP, 0x4862);
    WriteRegisterByte(RegisterType::A, 0x8C);
    WriteRegisterByte(RegisterType::B, 0xA7);
    WriteRegisterByte(RegisterType::C, 0xE4);
    WriteRegisterByte(RegisterType::D, 0x14);
    WriteRegisterByte(RegisterType::E, 0xBA);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x4A);
    WriteRegisterByte(RegisterType::L, 0x50);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2B89, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8C);
    CheckRegisterByte(RegisterType::B, 0xA7);
    CheckRegisterByte(RegisterType::C, 0xE4);
    CheckRegisterByte(RegisterType::D, 0x14);
    CheckRegisterByte(RegisterType::E, 0xBA);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x4A);
    CheckRegisterByte(RegisterType::L, 0x50);
    WriteRegisterWord(RegisterType::PC, 0x2B8A);
    WriteRegisterWord(RegisterType::SP, 0x4862);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2B89, 0x40);
}

void test_40_0176()
{
    if (skip_test_40_0176)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x34E1);
    WriteRegisterWord(RegisterType::SP, 0xB2C2);
    WriteRegisterByte(RegisterType::A, 0x26);
    WriteRegisterByte(RegisterType::B, 0x1C);
    WriteRegisterByte(RegisterType::C, 0x7B);
    WriteRegisterByte(RegisterType::D, 0xF3);
    WriteRegisterByte(RegisterType::E, 0xC3);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x2A);
    WriteRegisterByte(RegisterType::L, 0xE9);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x34E1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x26);
    CheckRegisterByte(RegisterType::B, 0x1C);
    CheckRegisterByte(RegisterType::C, 0x7B);
    CheckRegisterByte(RegisterType::D, 0xF3);
    CheckRegisterByte(RegisterType::E, 0xC3);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x2A);
    CheckRegisterByte(RegisterType::L, 0xE9);
    WriteRegisterWord(RegisterType::PC, 0x34E2);
    WriteRegisterWord(RegisterType::SP, 0xB2C2);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x34E1, 0x40);
}

void test_40_0177()
{
    if (skip_test_40_0177)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA4BC);
    WriteRegisterWord(RegisterType::SP, 0x7232);
    WriteRegisterByte(RegisterType::A, 0x20);
    WriteRegisterByte(RegisterType::B, 0x50);
    WriteRegisterByte(RegisterType::C, 0x5E);
    WriteRegisterByte(RegisterType::D, 0xB4);
    WriteRegisterByte(RegisterType::E, 0x3A);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x0D);
    WriteRegisterByte(RegisterType::L, 0x20);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA4BC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x20);
    CheckRegisterByte(RegisterType::B, 0x50);
    CheckRegisterByte(RegisterType::C, 0x5E);
    CheckRegisterByte(RegisterType::D, 0xB4);
    CheckRegisterByte(RegisterType::E, 0x3A);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x0D);
    CheckRegisterByte(RegisterType::L, 0x20);
    WriteRegisterWord(RegisterType::PC, 0xA4BD);
    WriteRegisterWord(RegisterType::SP, 0x7232);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA4BC, 0x40);
}

void test_40_0178()
{
    if (skip_test_40_0178)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0D18);
    WriteRegisterWord(RegisterType::SP, 0xC237);
    WriteRegisterByte(RegisterType::A, 0xA8);
    WriteRegisterByte(RegisterType::B, 0x70);
    WriteRegisterByte(RegisterType::C, 0x26);
    WriteRegisterByte(RegisterType::D, 0x2E);
    WriteRegisterByte(RegisterType::E, 0x87);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x96);
    WriteRegisterByte(RegisterType::L, 0x73);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0D18, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA8);
    CheckRegisterByte(RegisterType::B, 0x70);
    CheckRegisterByte(RegisterType::C, 0x26);
    CheckRegisterByte(RegisterType::D, 0x2E);
    CheckRegisterByte(RegisterType::E, 0x87);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x96);
    CheckRegisterByte(RegisterType::L, 0x73);
    WriteRegisterWord(RegisterType::PC, 0x0D19);
    WriteRegisterWord(RegisterType::SP, 0xC237);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0D18, 0x40);
}

void test_40_0179()
{
    if (skip_test_40_0179)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD59E);
    WriteRegisterWord(RegisterType::SP, 0x5B38);
    WriteRegisterByte(RegisterType::A, 0xD9);
    WriteRegisterByte(RegisterType::B, 0x51);
    WriteRegisterByte(RegisterType::C, 0xCE);
    WriteRegisterByte(RegisterType::D, 0x0E);
    WriteRegisterByte(RegisterType::E, 0xF5);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x48);
    WriteRegisterByte(RegisterType::L, 0xCD);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD59E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD9);
    CheckRegisterByte(RegisterType::B, 0x51);
    CheckRegisterByte(RegisterType::C, 0xCE);
    CheckRegisterByte(RegisterType::D, 0x0E);
    CheckRegisterByte(RegisterType::E, 0xF5);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x48);
    CheckRegisterByte(RegisterType::L, 0xCD);
    WriteRegisterWord(RegisterType::PC, 0xD59F);
    WriteRegisterWord(RegisterType::SP, 0x5B38);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD59E, 0x40);
}

void test_40_017A()
{
    if (skip_test_40_017A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF39A);
    WriteRegisterWord(RegisterType::SP, 0x3E58);
    WriteRegisterByte(RegisterType::A, 0x55);
    WriteRegisterByte(RegisterType::B, 0x9F);
    WriteRegisterByte(RegisterType::C, 0x73);
    WriteRegisterByte(RegisterType::D, 0x9A);
    WriteRegisterByte(RegisterType::E, 0xCF);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x51);
    WriteRegisterByte(RegisterType::L, 0x47);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF39A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x55);
    CheckRegisterByte(RegisterType::B, 0x9F);
    CheckRegisterByte(RegisterType::C, 0x73);
    CheckRegisterByte(RegisterType::D, 0x9A);
    CheckRegisterByte(RegisterType::E, 0xCF);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x51);
    CheckRegisterByte(RegisterType::L, 0x47);
    WriteRegisterWord(RegisterType::PC, 0xF39B);
    WriteRegisterWord(RegisterType::SP, 0x3E58);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF39A, 0x40);
}

void test_40_017B()
{
    if (skip_test_40_017B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0EF9);
    WriteRegisterWord(RegisterType::SP, 0xDCEF);
    WriteRegisterByte(RegisterType::A, 0xDB);
    WriteRegisterByte(RegisterType::B, 0x6B);
    WriteRegisterByte(RegisterType::C, 0xCB);
    WriteRegisterByte(RegisterType::D, 0x19);
    WriteRegisterByte(RegisterType::E, 0x09);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x7E);
    WriteRegisterByte(RegisterType::L, 0xEE);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0EF9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDB);
    CheckRegisterByte(RegisterType::B, 0x6B);
    CheckRegisterByte(RegisterType::C, 0xCB);
    CheckRegisterByte(RegisterType::D, 0x19);
    CheckRegisterByte(RegisterType::E, 0x09);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x7E);
    CheckRegisterByte(RegisterType::L, 0xEE);
    WriteRegisterWord(RegisterType::PC, 0x0EFA);
    WriteRegisterWord(RegisterType::SP, 0xDCEF);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0EF9, 0x40);
}

void test_40_017C()
{
    if (skip_test_40_017C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEEC8);
    WriteRegisterWord(RegisterType::SP, 0xF162);
    WriteRegisterByte(RegisterType::A, 0xAB);
    WriteRegisterByte(RegisterType::B, 0x1B);
    WriteRegisterByte(RegisterType::C, 0xA3);
    WriteRegisterByte(RegisterType::D, 0x6C);
    WriteRegisterByte(RegisterType::E, 0x2F);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x30);
    WriteRegisterByte(RegisterType::L, 0x13);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xEEC8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAB);
    CheckRegisterByte(RegisterType::B, 0x1B);
    CheckRegisterByte(RegisterType::C, 0xA3);
    CheckRegisterByte(RegisterType::D, 0x6C);
    CheckRegisterByte(RegisterType::E, 0x2F);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x30);
    CheckRegisterByte(RegisterType::L, 0x13);
    WriteRegisterWord(RegisterType::PC, 0xEEC9);
    WriteRegisterWord(RegisterType::SP, 0xF162);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEEC8, 0x40);
}

void test_40_017D()
{
    if (skip_test_40_017D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1F6C);
    WriteRegisterWord(RegisterType::SP, 0x0944);
    WriteRegisterByte(RegisterType::A, 0xE4);
    WriteRegisterByte(RegisterType::B, 0xAA);
    WriteRegisterByte(RegisterType::C, 0xD1);
    WriteRegisterByte(RegisterType::D, 0x73);
    WriteRegisterByte(RegisterType::E, 0xFE);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x42);
    WriteRegisterByte(RegisterType::L, 0xAA);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1F6C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE4);
    CheckRegisterByte(RegisterType::B, 0xAA);
    CheckRegisterByte(RegisterType::C, 0xD1);
    CheckRegisterByte(RegisterType::D, 0x73);
    CheckRegisterByte(RegisterType::E, 0xFE);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x42);
    CheckRegisterByte(RegisterType::L, 0xAA);
    WriteRegisterWord(RegisterType::PC, 0x1F6D);
    WriteRegisterWord(RegisterType::SP, 0x0944);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1F6C, 0x40);
}

void test_40_017E()
{
    if (skip_test_40_017E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1E71);
    WriteRegisterWord(RegisterType::SP, 0x0E29);
    WriteRegisterByte(RegisterType::A, 0x9D);
    WriteRegisterByte(RegisterType::B, 0xE3);
    WriteRegisterByte(RegisterType::C, 0x26);
    WriteRegisterByte(RegisterType::D, 0x89);
    WriteRegisterByte(RegisterType::E, 0x41);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x58);
    WriteRegisterByte(RegisterType::L, 0xBF);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1E71, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9D);
    CheckRegisterByte(RegisterType::B, 0xE3);
    CheckRegisterByte(RegisterType::C, 0x26);
    CheckRegisterByte(RegisterType::D, 0x89);
    CheckRegisterByte(RegisterType::E, 0x41);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x58);
    CheckRegisterByte(RegisterType::L, 0xBF);
    WriteRegisterWord(RegisterType::PC, 0x1E72);
    WriteRegisterWord(RegisterType::SP, 0x0E29);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1E71, 0x40);
}

void test_40_017F()
{
    if (skip_test_40_017F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3426);
    WriteRegisterWord(RegisterType::SP, 0xE1D1);
    WriteRegisterByte(RegisterType::A, 0xBC);
    WriteRegisterByte(RegisterType::B, 0x7D);
    WriteRegisterByte(RegisterType::C, 0xC3);
    WriteRegisterByte(RegisterType::D, 0x48);
    WriteRegisterByte(RegisterType::E, 0xA7);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xCF);
    WriteRegisterByte(RegisterType::L, 0x8A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3426, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBC);
    CheckRegisterByte(RegisterType::B, 0x7D);
    CheckRegisterByte(RegisterType::C, 0xC3);
    CheckRegisterByte(RegisterType::D, 0x48);
    CheckRegisterByte(RegisterType::E, 0xA7);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xCF);
    CheckRegisterByte(RegisterType::L, 0x8A);
    WriteRegisterWord(RegisterType::PC, 0x3427);
    WriteRegisterWord(RegisterType::SP, 0xE1D1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3426, 0x40);
}

void test_40_0180()
{
    if (skip_test_40_0180)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x09F1);
    WriteRegisterWord(RegisterType::SP, 0x7EE8);
    WriteRegisterByte(RegisterType::A, 0xC8);
    WriteRegisterByte(RegisterType::B, 0x9A);
    WriteRegisterByte(RegisterType::C, 0x7E);
    WriteRegisterByte(RegisterType::D, 0x70);
    WriteRegisterByte(RegisterType::E, 0x47);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x66);
    WriteRegisterByte(RegisterType::L, 0x83);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x09F1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC8);
    CheckRegisterByte(RegisterType::B, 0x9A);
    CheckRegisterByte(RegisterType::C, 0x7E);
    CheckRegisterByte(RegisterType::D, 0x70);
    CheckRegisterByte(RegisterType::E, 0x47);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x66);
    CheckRegisterByte(RegisterType::L, 0x83);
    WriteRegisterWord(RegisterType::PC, 0x09F2);
    WriteRegisterWord(RegisterType::SP, 0x7EE8);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x09F1, 0x40);
}

void test_40_0181()
{
    if (skip_test_40_0181)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC92E);
    WriteRegisterWord(RegisterType::SP, 0xF835);
    WriteRegisterByte(RegisterType::A, 0x83);
    WriteRegisterByte(RegisterType::B, 0x4A);
    WriteRegisterByte(RegisterType::C, 0xD5);
    WriteRegisterByte(RegisterType::D, 0x36);
    WriteRegisterByte(RegisterType::E, 0x06);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x4D);
    WriteRegisterByte(RegisterType::L, 0x3D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC92E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x83);
    CheckRegisterByte(RegisterType::B, 0x4A);
    CheckRegisterByte(RegisterType::C, 0xD5);
    CheckRegisterByte(RegisterType::D, 0x36);
    CheckRegisterByte(RegisterType::E, 0x06);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x4D);
    CheckRegisterByte(RegisterType::L, 0x3D);
    WriteRegisterWord(RegisterType::PC, 0xC92F);
    WriteRegisterWord(RegisterType::SP, 0xF835);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC92E, 0x40);
}

void test_40_0182()
{
    if (skip_test_40_0182)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4C28);
    WriteRegisterWord(RegisterType::SP, 0xA495);
    WriteRegisterByte(RegisterType::A, 0x8F);
    WriteRegisterByte(RegisterType::B, 0xEB);
    WriteRegisterByte(RegisterType::C, 0x6F);
    WriteRegisterByte(RegisterType::D, 0x10);
    WriteRegisterByte(RegisterType::E, 0xBD);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x3E);
    WriteRegisterByte(RegisterType::L, 0x3C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4C28, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8F);
    CheckRegisterByte(RegisterType::B, 0xEB);
    CheckRegisterByte(RegisterType::C, 0x6F);
    CheckRegisterByte(RegisterType::D, 0x10);
    CheckRegisterByte(RegisterType::E, 0xBD);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x3E);
    CheckRegisterByte(RegisterType::L, 0x3C);
    WriteRegisterWord(RegisterType::PC, 0x4C29);
    WriteRegisterWord(RegisterType::SP, 0xA495);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4C28, 0x40);
}

void test_40_0183()
{
    if (skip_test_40_0183)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB767);
    WriteRegisterWord(RegisterType::SP, 0x1F78);
    WriteRegisterByte(RegisterType::A, 0x12);
    WriteRegisterByte(RegisterType::B, 0xC1);
    WriteRegisterByte(RegisterType::C, 0xE0);
    WriteRegisterByte(RegisterType::D, 0xD1);
    WriteRegisterByte(RegisterType::E, 0x93);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xB4);
    WriteRegisterByte(RegisterType::L, 0xCA);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB767, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x12);
    CheckRegisterByte(RegisterType::B, 0xC1);
    CheckRegisterByte(RegisterType::C, 0xE0);
    CheckRegisterByte(RegisterType::D, 0xD1);
    CheckRegisterByte(RegisterType::E, 0x93);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xB4);
    CheckRegisterByte(RegisterType::L, 0xCA);
    WriteRegisterWord(RegisterType::PC, 0xB768);
    WriteRegisterWord(RegisterType::SP, 0x1F78);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB767, 0x40);
}

void test_40_0184()
{
    if (skip_test_40_0184)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4905);
    WriteRegisterWord(RegisterType::SP, 0x8452);
    WriteRegisterByte(RegisterType::A, 0x7F);
    WriteRegisterByte(RegisterType::B, 0x05);
    WriteRegisterByte(RegisterType::C, 0xE3);
    WriteRegisterByte(RegisterType::D, 0x8C);
    WriteRegisterByte(RegisterType::E, 0x98);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xEB);
    WriteRegisterByte(RegisterType::L, 0x40);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4905, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7F);
    CheckRegisterByte(RegisterType::B, 0x05);
    CheckRegisterByte(RegisterType::C, 0xE3);
    CheckRegisterByte(RegisterType::D, 0x8C);
    CheckRegisterByte(RegisterType::E, 0x98);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xEB);
    CheckRegisterByte(RegisterType::L, 0x40);
    WriteRegisterWord(RegisterType::PC, 0x4906);
    WriteRegisterWord(RegisterType::SP, 0x8452);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4905, 0x40);
}

void test_40_0185()
{
    if (skip_test_40_0185)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x729E);
    WriteRegisterWord(RegisterType::SP, 0xDECC);
    WriteRegisterByte(RegisterType::A, 0x5D);
    WriteRegisterByte(RegisterType::B, 0x11);
    WriteRegisterByte(RegisterType::C, 0xB0);
    WriteRegisterByte(RegisterType::D, 0x4D);
    WriteRegisterByte(RegisterType::E, 0x6C);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x15);
    WriteRegisterByte(RegisterType::L, 0xC5);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x729E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5D);
    CheckRegisterByte(RegisterType::B, 0x11);
    CheckRegisterByte(RegisterType::C, 0xB0);
    CheckRegisterByte(RegisterType::D, 0x4D);
    CheckRegisterByte(RegisterType::E, 0x6C);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x15);
    CheckRegisterByte(RegisterType::L, 0xC5);
    WriteRegisterWord(RegisterType::PC, 0x729F);
    WriteRegisterWord(RegisterType::SP, 0xDECC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x729E, 0x40);
}

void test_40_0186()
{
    if (skip_test_40_0186)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2AE8);
    WriteRegisterWord(RegisterType::SP, 0x0C77);
    WriteRegisterByte(RegisterType::A, 0xD2);
    WriteRegisterByte(RegisterType::B, 0xF1);
    WriteRegisterByte(RegisterType::C, 0x78);
    WriteRegisterByte(RegisterType::D, 0x01);
    WriteRegisterByte(RegisterType::E, 0x34);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xBD);
    WriteRegisterByte(RegisterType::L, 0x31);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2AE8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD2);
    CheckRegisterByte(RegisterType::B, 0xF1);
    CheckRegisterByte(RegisterType::C, 0x78);
    CheckRegisterByte(RegisterType::D, 0x01);
    CheckRegisterByte(RegisterType::E, 0x34);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xBD);
    CheckRegisterByte(RegisterType::L, 0x31);
    WriteRegisterWord(RegisterType::PC, 0x2AE9);
    WriteRegisterWord(RegisterType::SP, 0x0C77);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2AE8, 0x40);
}

void test_40_0187()
{
    if (skip_test_40_0187)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC203);
    WriteRegisterWord(RegisterType::SP, 0x8AF7);
    WriteRegisterByte(RegisterType::A, 0xBC);
    WriteRegisterByte(RegisterType::B, 0x86);
    WriteRegisterByte(RegisterType::C, 0x08);
    WriteRegisterByte(RegisterType::D, 0x28);
    WriteRegisterByte(RegisterType::E, 0xC5);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x2B);
    WriteRegisterByte(RegisterType::L, 0x8B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC203, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBC);
    CheckRegisterByte(RegisterType::B, 0x86);
    CheckRegisterByte(RegisterType::C, 0x08);
    CheckRegisterByte(RegisterType::D, 0x28);
    CheckRegisterByte(RegisterType::E, 0xC5);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x2B);
    CheckRegisterByte(RegisterType::L, 0x8B);
    WriteRegisterWord(RegisterType::PC, 0xC204);
    WriteRegisterWord(RegisterType::SP, 0x8AF7);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC203, 0x40);
}

void test_40_0188()
{
    if (skip_test_40_0188)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF8FD);
    WriteRegisterWord(RegisterType::SP, 0x0A45);
    WriteRegisterByte(RegisterType::A, 0xF7);
    WriteRegisterByte(RegisterType::B, 0xF8);
    WriteRegisterByte(RegisterType::C, 0x3A);
    WriteRegisterByte(RegisterType::D, 0x61);
    WriteRegisterByte(RegisterType::E, 0x0F);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x9A);
    WriteRegisterByte(RegisterType::L, 0x63);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF8FD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF7);
    CheckRegisterByte(RegisterType::B, 0xF8);
    CheckRegisterByte(RegisterType::C, 0x3A);
    CheckRegisterByte(RegisterType::D, 0x61);
    CheckRegisterByte(RegisterType::E, 0x0F);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x9A);
    CheckRegisterByte(RegisterType::L, 0x63);
    WriteRegisterWord(RegisterType::PC, 0xF8FE);
    WriteRegisterWord(RegisterType::SP, 0x0A45);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF8FD, 0x40);
}

void test_40_0189()
{
    if (skip_test_40_0189)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1210);
    WriteRegisterWord(RegisterType::SP, 0xFF1F);
    WriteRegisterByte(RegisterType::A, 0x2B);
    WriteRegisterByte(RegisterType::B, 0x41);
    WriteRegisterByte(RegisterType::C, 0x90);
    WriteRegisterByte(RegisterType::D, 0xA4);
    WriteRegisterByte(RegisterType::E, 0x63);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x19);
    WriteRegisterByte(RegisterType::L, 0x07);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1210, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2B);
    CheckRegisterByte(RegisterType::B, 0x41);
    CheckRegisterByte(RegisterType::C, 0x90);
    CheckRegisterByte(RegisterType::D, 0xA4);
    CheckRegisterByte(RegisterType::E, 0x63);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x19);
    CheckRegisterByte(RegisterType::L, 0x07);
    WriteRegisterWord(RegisterType::PC, 0x1211);
    WriteRegisterWord(RegisterType::SP, 0xFF1F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1210, 0x40);
}

void test_40_018A()
{
    if (skip_test_40_018A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA691);
    WriteRegisterWord(RegisterType::SP, 0x8057);
    WriteRegisterByte(RegisterType::A, 0x62);
    WriteRegisterByte(RegisterType::B, 0xDA);
    WriteRegisterByte(RegisterType::C, 0x9F);
    WriteRegisterByte(RegisterType::D, 0x64);
    WriteRegisterByte(RegisterType::E, 0x9E);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x68);
    WriteRegisterByte(RegisterType::L, 0x9E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA691, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x62);
    CheckRegisterByte(RegisterType::B, 0xDA);
    CheckRegisterByte(RegisterType::C, 0x9F);
    CheckRegisterByte(RegisterType::D, 0x64);
    CheckRegisterByte(RegisterType::E, 0x9E);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x68);
    CheckRegisterByte(RegisterType::L, 0x9E);
    WriteRegisterWord(RegisterType::PC, 0xA692);
    WriteRegisterWord(RegisterType::SP, 0x8057);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA691, 0x40);
}

void test_40_018B()
{
    if (skip_test_40_018B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6D9B);
    WriteRegisterWord(RegisterType::SP, 0xE669);
    WriteRegisterByte(RegisterType::A, 0x7A);
    WriteRegisterByte(RegisterType::B, 0x6A);
    WriteRegisterByte(RegisterType::C, 0x0F);
    WriteRegisterByte(RegisterType::D, 0x03);
    WriteRegisterByte(RegisterType::E, 0xB4);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x48);
    WriteRegisterByte(RegisterType::L, 0x49);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6D9B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7A);
    CheckRegisterByte(RegisterType::B, 0x6A);
    CheckRegisterByte(RegisterType::C, 0x0F);
    CheckRegisterByte(RegisterType::D, 0x03);
    CheckRegisterByte(RegisterType::E, 0xB4);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x48);
    CheckRegisterByte(RegisterType::L, 0x49);
    WriteRegisterWord(RegisterType::PC, 0x6D9C);
    WriteRegisterWord(RegisterType::SP, 0xE669);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6D9B, 0x40);
}

void test_40_018C()
{
    if (skip_test_40_018C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEC0A);
    WriteRegisterWord(RegisterType::SP, 0x8366);
    WriteRegisterByte(RegisterType::A, 0x6A);
    WriteRegisterByte(RegisterType::B, 0x29);
    WriteRegisterByte(RegisterType::C, 0x37);
    WriteRegisterByte(RegisterType::D, 0xF2);
    WriteRegisterByte(RegisterType::E, 0x43);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x7E);
    WriteRegisterByte(RegisterType::L, 0x2B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEC0A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6A);
    CheckRegisterByte(RegisterType::B, 0x29);
    CheckRegisterByte(RegisterType::C, 0x37);
    CheckRegisterByte(RegisterType::D, 0xF2);
    CheckRegisterByte(RegisterType::E, 0x43);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x7E);
    CheckRegisterByte(RegisterType::L, 0x2B);
    WriteRegisterWord(RegisterType::PC, 0xEC0B);
    WriteRegisterWord(RegisterType::SP, 0x8366);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xEC0A, 0x40);
}

void test_40_018D()
{
    if (skip_test_40_018D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD5BA);
    WriteRegisterWord(RegisterType::SP, 0xE2E9);
    WriteRegisterByte(RegisterType::A, 0x7E);
    WriteRegisterByte(RegisterType::B, 0x86);
    WriteRegisterByte(RegisterType::C, 0x67);
    WriteRegisterByte(RegisterType::D, 0xB7);
    WriteRegisterByte(RegisterType::E, 0x0E);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x6A);
    WriteRegisterByte(RegisterType::L, 0x2A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD5BA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7E);
    CheckRegisterByte(RegisterType::B, 0x86);
    CheckRegisterByte(RegisterType::C, 0x67);
    CheckRegisterByte(RegisterType::D, 0xB7);
    CheckRegisterByte(RegisterType::E, 0x0E);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x6A);
    CheckRegisterByte(RegisterType::L, 0x2A);
    WriteRegisterWord(RegisterType::PC, 0xD5BB);
    WriteRegisterWord(RegisterType::SP, 0xE2E9);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD5BA, 0x40);
}

void test_40_018E()
{
    if (skip_test_40_018E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8538);
    WriteRegisterWord(RegisterType::SP, 0x866D);
    WriteRegisterByte(RegisterType::A, 0xF9);
    WriteRegisterByte(RegisterType::B, 0x06);
    WriteRegisterByte(RegisterType::C, 0xD8);
    WriteRegisterByte(RegisterType::D, 0x93);
    WriteRegisterByte(RegisterType::E, 0x50);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x7F);
    WriteRegisterByte(RegisterType::L, 0xDA);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8538, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF9);
    CheckRegisterByte(RegisterType::B, 0x06);
    CheckRegisterByte(RegisterType::C, 0xD8);
    CheckRegisterByte(RegisterType::D, 0x93);
    CheckRegisterByte(RegisterType::E, 0x50);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x7F);
    CheckRegisterByte(RegisterType::L, 0xDA);
    WriteRegisterWord(RegisterType::PC, 0x8539);
    WriteRegisterWord(RegisterType::SP, 0x866D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8538, 0x40);
}

void test_40_018F()
{
    if (skip_test_40_018F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4A85);
    WriteRegisterWord(RegisterType::SP, 0xE40C);
    WriteRegisterByte(RegisterType::A, 0x0A);
    WriteRegisterByte(RegisterType::B, 0x9A);
    WriteRegisterByte(RegisterType::C, 0x1D);
    WriteRegisterByte(RegisterType::D, 0x61);
    WriteRegisterByte(RegisterType::E, 0xFD);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xE6);
    WriteRegisterByte(RegisterType::L, 0x52);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4A85, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0A);
    CheckRegisterByte(RegisterType::B, 0x9A);
    CheckRegisterByte(RegisterType::C, 0x1D);
    CheckRegisterByte(RegisterType::D, 0x61);
    CheckRegisterByte(RegisterType::E, 0xFD);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xE6);
    CheckRegisterByte(RegisterType::L, 0x52);
    WriteRegisterWord(RegisterType::PC, 0x4A86);
    WriteRegisterWord(RegisterType::SP, 0xE40C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4A85, 0x40);
}

void test_40_0190()
{
    if (skip_test_40_0190)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFF42);
    WriteRegisterWord(RegisterType::SP, 0x3602);
    WriteRegisterByte(RegisterType::A, 0x3F);
    WriteRegisterByte(RegisterType::B, 0x14);
    WriteRegisterByte(RegisterType::C, 0xB1);
    WriteRegisterByte(RegisterType::D, 0xAF);
    WriteRegisterByte(RegisterType::E, 0xFD);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x87);
    WriteRegisterByte(RegisterType::L, 0xF1);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFF42, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3F);
    CheckRegisterByte(RegisterType::B, 0x14);
    CheckRegisterByte(RegisterType::C, 0xB1);
    CheckRegisterByte(RegisterType::D, 0xAF);
    CheckRegisterByte(RegisterType::E, 0xFD);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x87);
    CheckRegisterByte(RegisterType::L, 0xF1);
    WriteRegisterWord(RegisterType::PC, 0xFF43);
    WriteRegisterWord(RegisterType::SP, 0x3602);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFF42, 0x40);
}

void test_40_0191()
{
    if (skip_test_40_0191)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0CB8);
    WriteRegisterWord(RegisterType::SP, 0x27F2);
    WriteRegisterByte(RegisterType::A, 0x3D);
    WriteRegisterByte(RegisterType::B, 0xCD);
    WriteRegisterByte(RegisterType::C, 0x8E);
    WriteRegisterByte(RegisterType::D, 0x80);
    WriteRegisterByte(RegisterType::E, 0x08);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x16);
    WriteRegisterByte(RegisterType::L, 0x3B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0CB8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3D);
    CheckRegisterByte(RegisterType::B, 0xCD);
    CheckRegisterByte(RegisterType::C, 0x8E);
    CheckRegisterByte(RegisterType::D, 0x80);
    CheckRegisterByte(RegisterType::E, 0x08);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x16);
    CheckRegisterByte(RegisterType::L, 0x3B);
    WriteRegisterWord(RegisterType::PC, 0x0CB9);
    WriteRegisterWord(RegisterType::SP, 0x27F2);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0CB8, 0x40);
}

void test_40_0192()
{
    if (skip_test_40_0192)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFBF2);
    WriteRegisterWord(RegisterType::SP, 0xBB65);
    WriteRegisterByte(RegisterType::A, 0x2E);
    WriteRegisterByte(RegisterType::B, 0x66);
    WriteRegisterByte(RegisterType::C, 0xD7);
    WriteRegisterByte(RegisterType::D, 0xE5);
    WriteRegisterByte(RegisterType::E, 0x8C);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xF8);
    WriteRegisterByte(RegisterType::L, 0x00);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFBF2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2E);
    CheckRegisterByte(RegisterType::B, 0x66);
    CheckRegisterByte(RegisterType::C, 0xD7);
    CheckRegisterByte(RegisterType::D, 0xE5);
    CheckRegisterByte(RegisterType::E, 0x8C);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xF8);
    CheckRegisterByte(RegisterType::L, 0x00);
    WriteRegisterWord(RegisterType::PC, 0xFBF3);
    WriteRegisterWord(RegisterType::SP, 0xBB65);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFBF2, 0x40);
}

void test_40_0193()
{
    if (skip_test_40_0193)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAA48);
    WriteRegisterWord(RegisterType::SP, 0x2A6F);
    WriteRegisterByte(RegisterType::A, 0xE0);
    WriteRegisterByte(RegisterType::B, 0xE6);
    WriteRegisterByte(RegisterType::C, 0xD5);
    WriteRegisterByte(RegisterType::D, 0xA0);
    WriteRegisterByte(RegisterType::E, 0xD1);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x3A);
    WriteRegisterByte(RegisterType::L, 0xDE);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xAA48, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE0);
    CheckRegisterByte(RegisterType::B, 0xE6);
    CheckRegisterByte(RegisterType::C, 0xD5);
    CheckRegisterByte(RegisterType::D, 0xA0);
    CheckRegisterByte(RegisterType::E, 0xD1);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x3A);
    CheckRegisterByte(RegisterType::L, 0xDE);
    WriteRegisterWord(RegisterType::PC, 0xAA49);
    WriteRegisterWord(RegisterType::SP, 0x2A6F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAA48, 0x40);
}

void test_40_0194()
{
    if (skip_test_40_0194)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6156);
    WriteRegisterWord(RegisterType::SP, 0xCB60);
    WriteRegisterByte(RegisterType::A, 0x71);
    WriteRegisterByte(RegisterType::B, 0x55);
    WriteRegisterByte(RegisterType::C, 0xBA);
    WriteRegisterByte(RegisterType::D, 0xFD);
    WriteRegisterByte(RegisterType::E, 0x37);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x56);
    WriteRegisterByte(RegisterType::L, 0x4C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6156, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x71);
    CheckRegisterByte(RegisterType::B, 0x55);
    CheckRegisterByte(RegisterType::C, 0xBA);
    CheckRegisterByte(RegisterType::D, 0xFD);
    CheckRegisterByte(RegisterType::E, 0x37);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x56);
    CheckRegisterByte(RegisterType::L, 0x4C);
    WriteRegisterWord(RegisterType::PC, 0x6157);
    WriteRegisterWord(RegisterType::SP, 0xCB60);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6156, 0x40);
}

void test_40_0195()
{
    if (skip_test_40_0195)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4A91);
    WriteRegisterWord(RegisterType::SP, 0x1868);
    WriteRegisterByte(RegisterType::A, 0x66);
    WriteRegisterByte(RegisterType::B, 0xE5);
    WriteRegisterByte(RegisterType::C, 0x28);
    WriteRegisterByte(RegisterType::D, 0x85);
    WriteRegisterByte(RegisterType::E, 0x8F);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xCA);
    WriteRegisterByte(RegisterType::L, 0x90);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4A91, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x66);
    CheckRegisterByte(RegisterType::B, 0xE5);
    CheckRegisterByte(RegisterType::C, 0x28);
    CheckRegisterByte(RegisterType::D, 0x85);
    CheckRegisterByte(RegisterType::E, 0x8F);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xCA);
    CheckRegisterByte(RegisterType::L, 0x90);
    WriteRegisterWord(RegisterType::PC, 0x4A92);
    WriteRegisterWord(RegisterType::SP, 0x1868);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4A91, 0x40);
}

void test_40_0196()
{
    if (skip_test_40_0196)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFE58);
    WriteRegisterWord(RegisterType::SP, 0x7CCA);
    WriteRegisterByte(RegisterType::A, 0x26);
    WriteRegisterByte(RegisterType::B, 0xC2);
    WriteRegisterByte(RegisterType::C, 0x26);
    WriteRegisterByte(RegisterType::D, 0x04);
    WriteRegisterByte(RegisterType::E, 0x42);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xFB);
    WriteRegisterByte(RegisterType::L, 0xC2);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFE58, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x26);
    CheckRegisterByte(RegisterType::B, 0xC2);
    CheckRegisterByte(RegisterType::C, 0x26);
    CheckRegisterByte(RegisterType::D, 0x04);
    CheckRegisterByte(RegisterType::E, 0x42);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xFB);
    CheckRegisterByte(RegisterType::L, 0xC2);
    WriteRegisterWord(RegisterType::PC, 0xFE59);
    WriteRegisterWord(RegisterType::SP, 0x7CCA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFE58, 0x40);
}

void test_40_0197()
{
    if (skip_test_40_0197)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCCD8);
    WriteRegisterWord(RegisterType::SP, 0xEFEE);
    WriteRegisterByte(RegisterType::A, 0x65);
    WriteRegisterByte(RegisterType::B, 0x43);
    WriteRegisterByte(RegisterType::C, 0x0F);
    WriteRegisterByte(RegisterType::D, 0x47);
    WriteRegisterByte(RegisterType::E, 0xA3);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x49);
    WriteRegisterByte(RegisterType::L, 0x19);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCCD8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x65);
    CheckRegisterByte(RegisterType::B, 0x43);
    CheckRegisterByte(RegisterType::C, 0x0F);
    CheckRegisterByte(RegisterType::D, 0x47);
    CheckRegisterByte(RegisterType::E, 0xA3);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x49);
    CheckRegisterByte(RegisterType::L, 0x19);
    WriteRegisterWord(RegisterType::PC, 0xCCD9);
    WriteRegisterWord(RegisterType::SP, 0xEFEE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCCD8, 0x40);
}

void test_40_0198()
{
    if (skip_test_40_0198)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x13CA);
    WriteRegisterWord(RegisterType::SP, 0x6E85);
    WriteRegisterByte(RegisterType::A, 0x8F);
    WriteRegisterByte(RegisterType::B, 0x02);
    WriteRegisterByte(RegisterType::C, 0x08);
    WriteRegisterByte(RegisterType::D, 0xF1);
    WriteRegisterByte(RegisterType::E, 0x43);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x6E);
    WriteRegisterByte(RegisterType::L, 0x9E);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x13CA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8F);
    CheckRegisterByte(RegisterType::B, 0x02);
    CheckRegisterByte(RegisterType::C, 0x08);
    CheckRegisterByte(RegisterType::D, 0xF1);
    CheckRegisterByte(RegisterType::E, 0x43);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x6E);
    CheckRegisterByte(RegisterType::L, 0x9E);
    WriteRegisterWord(RegisterType::PC, 0x13CB);
    WriteRegisterWord(RegisterType::SP, 0x6E85);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x13CA, 0x40);
}

void test_40_0199()
{
    if (skip_test_40_0199)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2006);
    WriteRegisterWord(RegisterType::SP, 0xC136);
    WriteRegisterByte(RegisterType::A, 0xA6);
    WriteRegisterByte(RegisterType::B, 0xA3);
    WriteRegisterByte(RegisterType::C, 0x69);
    WriteRegisterByte(RegisterType::D, 0x43);
    WriteRegisterByte(RegisterType::E, 0x92);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x50);
    WriteRegisterByte(RegisterType::L, 0xB3);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2006, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA6);
    CheckRegisterByte(RegisterType::B, 0xA3);
    CheckRegisterByte(RegisterType::C, 0x69);
    CheckRegisterByte(RegisterType::D, 0x43);
    CheckRegisterByte(RegisterType::E, 0x92);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x50);
    CheckRegisterByte(RegisterType::L, 0xB3);
    WriteRegisterWord(RegisterType::PC, 0x2007);
    WriteRegisterWord(RegisterType::SP, 0xC136);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2006, 0x40);
}

void test_40_019A()
{
    if (skip_test_40_019A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB85E);
    WriteRegisterWord(RegisterType::SP, 0x92AF);
    WriteRegisterByte(RegisterType::A, 0x18);
    WriteRegisterByte(RegisterType::B, 0xC1);
    WriteRegisterByte(RegisterType::C, 0xE5);
    WriteRegisterByte(RegisterType::D, 0x8B);
    WriteRegisterByte(RegisterType::E, 0x75);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xB1);
    WriteRegisterByte(RegisterType::L, 0xB3);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB85E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x18);
    CheckRegisterByte(RegisterType::B, 0xC1);
    CheckRegisterByte(RegisterType::C, 0xE5);
    CheckRegisterByte(RegisterType::D, 0x8B);
    CheckRegisterByte(RegisterType::E, 0x75);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xB1);
    CheckRegisterByte(RegisterType::L, 0xB3);
    WriteRegisterWord(RegisterType::PC, 0xB85F);
    WriteRegisterWord(RegisterType::SP, 0x92AF);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB85E, 0x40);
}

void test_40_019B()
{
    if (skip_test_40_019B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB813);
    WriteRegisterWord(RegisterType::SP, 0x2BD3);
    WriteRegisterByte(RegisterType::A, 0x8F);
    WriteRegisterByte(RegisterType::B, 0x1B);
    WriteRegisterByte(RegisterType::C, 0xF1);
    WriteRegisterByte(RegisterType::D, 0x6B);
    WriteRegisterByte(RegisterType::E, 0x9F);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xF3);
    WriteRegisterByte(RegisterType::L, 0x0D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB813, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8F);
    CheckRegisterByte(RegisterType::B, 0x1B);
    CheckRegisterByte(RegisterType::C, 0xF1);
    CheckRegisterByte(RegisterType::D, 0x6B);
    CheckRegisterByte(RegisterType::E, 0x9F);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xF3);
    CheckRegisterByte(RegisterType::L, 0x0D);
    WriteRegisterWord(RegisterType::PC, 0xB814);
    WriteRegisterWord(RegisterType::SP, 0x2BD3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB813, 0x40);
}

void test_40_019C()
{
    if (skip_test_40_019C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA036);
    WriteRegisterWord(RegisterType::SP, 0x9C05);
    WriteRegisterByte(RegisterType::A, 0x72);
    WriteRegisterByte(RegisterType::B, 0x2E);
    WriteRegisterByte(RegisterType::C, 0x96);
    WriteRegisterByte(RegisterType::D, 0xC2);
    WriteRegisterByte(RegisterType::E, 0x0D);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x93);
    WriteRegisterByte(RegisterType::L, 0xB9);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA036, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x72);
    CheckRegisterByte(RegisterType::B, 0x2E);
    CheckRegisterByte(RegisterType::C, 0x96);
    CheckRegisterByte(RegisterType::D, 0xC2);
    CheckRegisterByte(RegisterType::E, 0x0D);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x93);
    CheckRegisterByte(RegisterType::L, 0xB9);
    WriteRegisterWord(RegisterType::PC, 0xA037);
    WriteRegisterWord(RegisterType::SP, 0x9C05);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA036, 0x40);
}

void test_40_019D()
{
    if (skip_test_40_019D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8454);
    WriteRegisterWord(RegisterType::SP, 0xF510);
    WriteRegisterByte(RegisterType::A, 0xCB);
    WriteRegisterByte(RegisterType::B, 0x0E);
    WriteRegisterByte(RegisterType::C, 0x42);
    WriteRegisterByte(RegisterType::D, 0xE3);
    WriteRegisterByte(RegisterType::E, 0x30);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x20);
    WriteRegisterByte(RegisterType::L, 0x32);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8454, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCB);
    CheckRegisterByte(RegisterType::B, 0x0E);
    CheckRegisterByte(RegisterType::C, 0x42);
    CheckRegisterByte(RegisterType::D, 0xE3);
    CheckRegisterByte(RegisterType::E, 0x30);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x20);
    CheckRegisterByte(RegisterType::L, 0x32);
    WriteRegisterWord(RegisterType::PC, 0x8455);
    WriteRegisterWord(RegisterType::SP, 0xF510);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8454, 0x40);
}

void test_40_019E()
{
    if (skip_test_40_019E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x162E);
    WriteRegisterWord(RegisterType::SP, 0x22AD);
    WriteRegisterByte(RegisterType::A, 0x9E);
    WriteRegisterByte(RegisterType::B, 0x37);
    WriteRegisterByte(RegisterType::C, 0x31);
    WriteRegisterByte(RegisterType::D, 0x5E);
    WriteRegisterByte(RegisterType::E, 0x3B);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x71);
    WriteRegisterByte(RegisterType::L, 0xC4);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x162E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9E);
    CheckRegisterByte(RegisterType::B, 0x37);
    CheckRegisterByte(RegisterType::C, 0x31);
    CheckRegisterByte(RegisterType::D, 0x5E);
    CheckRegisterByte(RegisterType::E, 0x3B);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x71);
    CheckRegisterByte(RegisterType::L, 0xC4);
    WriteRegisterWord(RegisterType::PC, 0x162F);
    WriteRegisterWord(RegisterType::SP, 0x22AD);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x162E, 0x40);
}

void test_40_019F()
{
    if (skip_test_40_019F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x73B0);
    WriteRegisterWord(RegisterType::SP, 0x5C0B);
    WriteRegisterByte(RegisterType::A, 0xA2);
    WriteRegisterByte(RegisterType::B, 0x04);
    WriteRegisterByte(RegisterType::C, 0x19);
    WriteRegisterByte(RegisterType::D, 0x00);
    WriteRegisterByte(RegisterType::E, 0xD1);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x7D);
    WriteRegisterByte(RegisterType::L, 0x8C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x73B0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA2);
    CheckRegisterByte(RegisterType::B, 0x04);
    CheckRegisterByte(RegisterType::C, 0x19);
    CheckRegisterByte(RegisterType::D, 0x00);
    CheckRegisterByte(RegisterType::E, 0xD1);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x7D);
    CheckRegisterByte(RegisterType::L, 0x8C);
    WriteRegisterWord(RegisterType::PC, 0x73B1);
    WriteRegisterWord(RegisterType::SP, 0x5C0B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x73B0, 0x40);
}

void test_40_01A0()
{
    if (skip_test_40_01A0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x399C);
    WriteRegisterWord(RegisterType::SP, 0x8D50);
    WriteRegisterByte(RegisterType::A, 0x00);
    WriteRegisterByte(RegisterType::B, 0x61);
    WriteRegisterByte(RegisterType::C, 0xD8);
    WriteRegisterByte(RegisterType::D, 0x10);
    WriteRegisterByte(RegisterType::E, 0x84);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xE9);
    WriteRegisterByte(RegisterType::L, 0x78);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x399C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x00);
    CheckRegisterByte(RegisterType::B, 0x61);
    CheckRegisterByte(RegisterType::C, 0xD8);
    CheckRegisterByte(RegisterType::D, 0x10);
    CheckRegisterByte(RegisterType::E, 0x84);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xE9);
    CheckRegisterByte(RegisterType::L, 0x78);
    WriteRegisterWord(RegisterType::PC, 0x399D);
    WriteRegisterWord(RegisterType::SP, 0x8D50);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x399C, 0x40);
}

void test_40_01A1()
{
    if (skip_test_40_01A1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4E4A);
    WriteRegisterWord(RegisterType::SP, 0x6C1A);
    WriteRegisterByte(RegisterType::A, 0x85);
    WriteRegisterByte(RegisterType::B, 0x1D);
    WriteRegisterByte(RegisterType::C, 0xB2);
    WriteRegisterByte(RegisterType::D, 0x63);
    WriteRegisterByte(RegisterType::E, 0xB5);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x6E);
    WriteRegisterByte(RegisterType::L, 0x42);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4E4A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x85);
    CheckRegisterByte(RegisterType::B, 0x1D);
    CheckRegisterByte(RegisterType::C, 0xB2);
    CheckRegisterByte(RegisterType::D, 0x63);
    CheckRegisterByte(RegisterType::E, 0xB5);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x6E);
    CheckRegisterByte(RegisterType::L, 0x42);
    WriteRegisterWord(RegisterType::PC, 0x4E4B);
    WriteRegisterWord(RegisterType::SP, 0x6C1A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4E4A, 0x40);
}

void test_40_01A2()
{
    if (skip_test_40_01A2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x42C6);
    WriteRegisterWord(RegisterType::SP, 0x5DEA);
    WriteRegisterByte(RegisterType::A, 0x7E);
    WriteRegisterByte(RegisterType::B, 0x32);
    WriteRegisterByte(RegisterType::C, 0x50);
    WriteRegisterByte(RegisterType::D, 0xA2);
    WriteRegisterByte(RegisterType::E, 0xE0);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x6C);
    WriteRegisterByte(RegisterType::L, 0xAC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x42C6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7E);
    CheckRegisterByte(RegisterType::B, 0x32);
    CheckRegisterByte(RegisterType::C, 0x50);
    CheckRegisterByte(RegisterType::D, 0xA2);
    CheckRegisterByte(RegisterType::E, 0xE0);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x6C);
    CheckRegisterByte(RegisterType::L, 0xAC);
    WriteRegisterWord(RegisterType::PC, 0x42C7);
    WriteRegisterWord(RegisterType::SP, 0x5DEA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x42C6, 0x40);
}

void test_40_01A3()
{
    if (skip_test_40_01A3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0EEB);
    WriteRegisterWord(RegisterType::SP, 0x14AD);
    WriteRegisterByte(RegisterType::A, 0x02);
    WriteRegisterByte(RegisterType::B, 0x4C);
    WriteRegisterByte(RegisterType::C, 0x83);
    WriteRegisterByte(RegisterType::D, 0xBA);
    WriteRegisterByte(RegisterType::E, 0x70);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x23);
    WriteRegisterByte(RegisterType::L, 0x4E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0EEB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x02);
    CheckRegisterByte(RegisterType::B, 0x4C);
    CheckRegisterByte(RegisterType::C, 0x83);
    CheckRegisterByte(RegisterType::D, 0xBA);
    CheckRegisterByte(RegisterType::E, 0x70);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x23);
    CheckRegisterByte(RegisterType::L, 0x4E);
    WriteRegisterWord(RegisterType::PC, 0x0EEC);
    WriteRegisterWord(RegisterType::SP, 0x14AD);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0EEB, 0x40);
}

void test_40_01A4()
{
    if (skip_test_40_01A4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3F18);
    WriteRegisterWord(RegisterType::SP, 0xA89D);
    WriteRegisterByte(RegisterType::A, 0xBC);
    WriteRegisterByte(RegisterType::B, 0x33);
    WriteRegisterByte(RegisterType::C, 0x77);
    WriteRegisterByte(RegisterType::D, 0x1C);
    WriteRegisterByte(RegisterType::E, 0x3E);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x17);
    WriteRegisterByte(RegisterType::L, 0x58);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3F18, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBC);
    CheckRegisterByte(RegisterType::B, 0x33);
    CheckRegisterByte(RegisterType::C, 0x77);
    CheckRegisterByte(RegisterType::D, 0x1C);
    CheckRegisterByte(RegisterType::E, 0x3E);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x17);
    CheckRegisterByte(RegisterType::L, 0x58);
    WriteRegisterWord(RegisterType::PC, 0x3F19);
    WriteRegisterWord(RegisterType::SP, 0xA89D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3F18, 0x40);
}

void test_40_01A5()
{
    if (skip_test_40_01A5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE13F);
    WriteRegisterWord(RegisterType::SP, 0x33F6);
    WriteRegisterByte(RegisterType::A, 0xE3);
    WriteRegisterByte(RegisterType::B, 0xA2);
    WriteRegisterByte(RegisterType::C, 0x6E);
    WriteRegisterByte(RegisterType::D, 0x80);
    WriteRegisterByte(RegisterType::E, 0x7A);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xE2);
    WriteRegisterByte(RegisterType::L, 0xB4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE13F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE3);
    CheckRegisterByte(RegisterType::B, 0xA2);
    CheckRegisterByte(RegisterType::C, 0x6E);
    CheckRegisterByte(RegisterType::D, 0x80);
    CheckRegisterByte(RegisterType::E, 0x7A);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xE2);
    CheckRegisterByte(RegisterType::L, 0xB4);
    WriteRegisterWord(RegisterType::PC, 0xE140);
    WriteRegisterWord(RegisterType::SP, 0x33F6);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE13F, 0x40);
}

void test_40_01A6()
{
    if (skip_test_40_01A6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7962);
    WriteRegisterWord(RegisterType::SP, 0x5FB2);
    WriteRegisterByte(RegisterType::A, 0x2B);
    WriteRegisterByte(RegisterType::B, 0x92);
    WriteRegisterByte(RegisterType::C, 0x86);
    WriteRegisterByte(RegisterType::D, 0x74);
    WriteRegisterByte(RegisterType::E, 0x12);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xFA);
    WriteRegisterByte(RegisterType::L, 0xDD);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7962, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2B);
    CheckRegisterByte(RegisterType::B, 0x92);
    CheckRegisterByte(RegisterType::C, 0x86);
    CheckRegisterByte(RegisterType::D, 0x74);
    CheckRegisterByte(RegisterType::E, 0x12);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xFA);
    CheckRegisterByte(RegisterType::L, 0xDD);
    WriteRegisterWord(RegisterType::PC, 0x7963);
    WriteRegisterWord(RegisterType::SP, 0x5FB2);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7962, 0x40);
}

void test_40_01A7()
{
    if (skip_test_40_01A7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x814F);
    WriteRegisterWord(RegisterType::SP, 0x3D09);
    WriteRegisterByte(RegisterType::A, 0xE8);
    WriteRegisterByte(RegisterType::B, 0xFE);
    WriteRegisterByte(RegisterType::C, 0xED);
    WriteRegisterByte(RegisterType::D, 0x3F);
    WriteRegisterByte(RegisterType::E, 0x47);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x5D);
    WriteRegisterByte(RegisterType::L, 0x0F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x814F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE8);
    CheckRegisterByte(RegisterType::B, 0xFE);
    CheckRegisterByte(RegisterType::C, 0xED);
    CheckRegisterByte(RegisterType::D, 0x3F);
    CheckRegisterByte(RegisterType::E, 0x47);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x5D);
    CheckRegisterByte(RegisterType::L, 0x0F);
    WriteRegisterWord(RegisterType::PC, 0x8150);
    WriteRegisterWord(RegisterType::SP, 0x3D09);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x814F, 0x40);
}

void test_40_01A8()
{
    if (skip_test_40_01A8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2DD1);
    WriteRegisterWord(RegisterType::SP, 0x3CA7);
    WriteRegisterByte(RegisterType::A, 0x69);
    WriteRegisterByte(RegisterType::B, 0xDD);
    WriteRegisterByte(RegisterType::C, 0xCD);
    WriteRegisterByte(RegisterType::D, 0xA6);
    WriteRegisterByte(RegisterType::E, 0xF8);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x94);
    WriteRegisterByte(RegisterType::L, 0x47);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2DD1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x69);
    CheckRegisterByte(RegisterType::B, 0xDD);
    CheckRegisterByte(RegisterType::C, 0xCD);
    CheckRegisterByte(RegisterType::D, 0xA6);
    CheckRegisterByte(RegisterType::E, 0xF8);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x94);
    CheckRegisterByte(RegisterType::L, 0x47);
    WriteRegisterWord(RegisterType::PC, 0x2DD2);
    WriteRegisterWord(RegisterType::SP, 0x3CA7);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2DD1, 0x40);
}

void test_40_01A9()
{
    if (skip_test_40_01A9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0967);
    WriteRegisterWord(RegisterType::SP, 0xAFBA);
    WriteRegisterByte(RegisterType::A, 0xDD);
    WriteRegisterByte(RegisterType::B, 0x54);
    WriteRegisterByte(RegisterType::C, 0x81);
    WriteRegisterByte(RegisterType::D, 0x9B);
    WriteRegisterByte(RegisterType::E, 0x42);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x1B);
    WriteRegisterByte(RegisterType::L, 0xC2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0967, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDD);
    CheckRegisterByte(RegisterType::B, 0x54);
    CheckRegisterByte(RegisterType::C, 0x81);
    CheckRegisterByte(RegisterType::D, 0x9B);
    CheckRegisterByte(RegisterType::E, 0x42);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x1B);
    CheckRegisterByte(RegisterType::L, 0xC2);
    WriteRegisterWord(RegisterType::PC, 0x0968);
    WriteRegisterWord(RegisterType::SP, 0xAFBA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0967, 0x40);
}

void test_40_01AA()
{
    if (skip_test_40_01AA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB276);
    WriteRegisterWord(RegisterType::SP, 0x0DA1);
    WriteRegisterByte(RegisterType::A, 0x93);
    WriteRegisterByte(RegisterType::B, 0x1F);
    WriteRegisterByte(RegisterType::C, 0xC0);
    WriteRegisterByte(RegisterType::D, 0x6B);
    WriteRegisterByte(RegisterType::E, 0x53);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x0B);
    WriteRegisterByte(RegisterType::L, 0xD8);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB276, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x93);
    CheckRegisterByte(RegisterType::B, 0x1F);
    CheckRegisterByte(RegisterType::C, 0xC0);
    CheckRegisterByte(RegisterType::D, 0x6B);
    CheckRegisterByte(RegisterType::E, 0x53);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x0B);
    CheckRegisterByte(RegisterType::L, 0xD8);
    WriteRegisterWord(RegisterType::PC, 0xB277);
    WriteRegisterWord(RegisterType::SP, 0x0DA1);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB276, 0x40);
}

void test_40_01AB()
{
    if (skip_test_40_01AB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x688F);
    WriteRegisterWord(RegisterType::SP, 0x8027);
    WriteRegisterByte(RegisterType::A, 0x64);
    WriteRegisterByte(RegisterType::B, 0x3B);
    WriteRegisterByte(RegisterType::C, 0x6E);
    WriteRegisterByte(RegisterType::D, 0xC9);
    WriteRegisterByte(RegisterType::E, 0x28);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xC3);
    WriteRegisterByte(RegisterType::L, 0xEC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x688F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x64);
    CheckRegisterByte(RegisterType::B, 0x3B);
    CheckRegisterByte(RegisterType::C, 0x6E);
    CheckRegisterByte(RegisterType::D, 0xC9);
    CheckRegisterByte(RegisterType::E, 0x28);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xC3);
    CheckRegisterByte(RegisterType::L, 0xEC);
    WriteRegisterWord(RegisterType::PC, 0x6890);
    WriteRegisterWord(RegisterType::SP, 0x8027);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x688F, 0x40);
}

void test_40_01AC()
{
    if (skip_test_40_01AC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA53E);
    WriteRegisterWord(RegisterType::SP, 0x551D);
    WriteRegisterByte(RegisterType::A, 0x7E);
    WriteRegisterByte(RegisterType::B, 0x98);
    WriteRegisterByte(RegisterType::C, 0x3E);
    WriteRegisterByte(RegisterType::D, 0xD7);
    WriteRegisterByte(RegisterType::E, 0xDC);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x3F);
    WriteRegisterByte(RegisterType::L, 0x8C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA53E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7E);
    CheckRegisterByte(RegisterType::B, 0x98);
    CheckRegisterByte(RegisterType::C, 0x3E);
    CheckRegisterByte(RegisterType::D, 0xD7);
    CheckRegisterByte(RegisterType::E, 0xDC);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x3F);
    CheckRegisterByte(RegisterType::L, 0x8C);
    WriteRegisterWord(RegisterType::PC, 0xA53F);
    WriteRegisterWord(RegisterType::SP, 0x551D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA53E, 0x40);
}

void test_40_01AD()
{
    if (skip_test_40_01AD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1717);
    WriteRegisterWord(RegisterType::SP, 0x79C3);
    WriteRegisterByte(RegisterType::A, 0x25);
    WriteRegisterByte(RegisterType::B, 0x47);
    WriteRegisterByte(RegisterType::C, 0xDE);
    WriteRegisterByte(RegisterType::D, 0x59);
    WriteRegisterByte(RegisterType::E, 0x2C);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x55);
    WriteRegisterByte(RegisterType::L, 0x78);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1717, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x25);
    CheckRegisterByte(RegisterType::B, 0x47);
    CheckRegisterByte(RegisterType::C, 0xDE);
    CheckRegisterByte(RegisterType::D, 0x59);
    CheckRegisterByte(RegisterType::E, 0x2C);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x55);
    CheckRegisterByte(RegisterType::L, 0x78);
    WriteRegisterWord(RegisterType::PC, 0x1718);
    WriteRegisterWord(RegisterType::SP, 0x79C3);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1717, 0x40);
}

void test_40_01AE()
{
    if (skip_test_40_01AE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x03F4);
    WriteRegisterWord(RegisterType::SP, 0x552B);
    WriteRegisterByte(RegisterType::A, 0x76);
    WriteRegisterByte(RegisterType::B, 0x04);
    WriteRegisterByte(RegisterType::C, 0x62);
    WriteRegisterByte(RegisterType::D, 0x7A);
    WriteRegisterByte(RegisterType::E, 0x0E);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x4E);
    WriteRegisterByte(RegisterType::L, 0x84);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x03F4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x76);
    CheckRegisterByte(RegisterType::B, 0x04);
    CheckRegisterByte(RegisterType::C, 0x62);
    CheckRegisterByte(RegisterType::D, 0x7A);
    CheckRegisterByte(RegisterType::E, 0x0E);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x4E);
    CheckRegisterByte(RegisterType::L, 0x84);
    WriteRegisterWord(RegisterType::PC, 0x03F5);
    WriteRegisterWord(RegisterType::SP, 0x552B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x03F4, 0x40);
}

void test_40_01AF()
{
    if (skip_test_40_01AF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCC19);
    WriteRegisterWord(RegisterType::SP, 0x1EBE);
    WriteRegisterByte(RegisterType::A, 0x27);
    WriteRegisterByte(RegisterType::B, 0xDB);
    WriteRegisterByte(RegisterType::C, 0x82);
    WriteRegisterByte(RegisterType::D, 0xC6);
    WriteRegisterByte(RegisterType::E, 0xF6);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x28);
    WriteRegisterByte(RegisterType::L, 0xDC);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCC19, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x27);
    CheckRegisterByte(RegisterType::B, 0xDB);
    CheckRegisterByte(RegisterType::C, 0x82);
    CheckRegisterByte(RegisterType::D, 0xC6);
    CheckRegisterByte(RegisterType::E, 0xF6);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x28);
    CheckRegisterByte(RegisterType::L, 0xDC);
    WriteRegisterWord(RegisterType::PC, 0xCC1A);
    WriteRegisterWord(RegisterType::SP, 0x1EBE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCC19, 0x40);
}

void test_40_01B0()
{
    if (skip_test_40_01B0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBBBD);
    WriteRegisterWord(RegisterType::SP, 0xE363);
    WriteRegisterByte(RegisterType::A, 0x9D);
    WriteRegisterByte(RegisterType::B, 0xB7);
    WriteRegisterByte(RegisterType::C, 0x74);
    WriteRegisterByte(RegisterType::D, 0x54);
    WriteRegisterByte(RegisterType::E, 0x64);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x11);
    WriteRegisterByte(RegisterType::L, 0x0C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBBBD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9D);
    CheckRegisterByte(RegisterType::B, 0xB7);
    CheckRegisterByte(RegisterType::C, 0x74);
    CheckRegisterByte(RegisterType::D, 0x54);
    CheckRegisterByte(RegisterType::E, 0x64);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x11);
    CheckRegisterByte(RegisterType::L, 0x0C);
    WriteRegisterWord(RegisterType::PC, 0xBBBE);
    WriteRegisterWord(RegisterType::SP, 0xE363);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xBBBD, 0x40);
}

void test_40_01B1()
{
    if (skip_test_40_01B1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA9E5);
    WriteRegisterWord(RegisterType::SP, 0x1BCF);
    WriteRegisterByte(RegisterType::A, 0xF7);
    WriteRegisterByte(RegisterType::B, 0xC3);
    WriteRegisterByte(RegisterType::C, 0xDF);
    WriteRegisterByte(RegisterType::D, 0x80);
    WriteRegisterByte(RegisterType::E, 0xEA);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x96);
    WriteRegisterByte(RegisterType::L, 0x5B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA9E5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF7);
    CheckRegisterByte(RegisterType::B, 0xC3);
    CheckRegisterByte(RegisterType::C, 0xDF);
    CheckRegisterByte(RegisterType::D, 0x80);
    CheckRegisterByte(RegisterType::E, 0xEA);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x96);
    CheckRegisterByte(RegisterType::L, 0x5B);
    WriteRegisterWord(RegisterType::PC, 0xA9E6);
    WriteRegisterWord(RegisterType::SP, 0x1BCF);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA9E5, 0x40);
}

void test_40_01B2()
{
    if (skip_test_40_01B2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF6F7);
    WriteRegisterWord(RegisterType::SP, 0x3421);
    WriteRegisterByte(RegisterType::A, 0x52);
    WriteRegisterByte(RegisterType::B, 0x2C);
    WriteRegisterByte(RegisterType::C, 0x4F);
    WriteRegisterByte(RegisterType::D, 0xC3);
    WriteRegisterByte(RegisterType::E, 0xF2);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x70);
    WriteRegisterByte(RegisterType::L, 0x67);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF6F7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x52);
    CheckRegisterByte(RegisterType::B, 0x2C);
    CheckRegisterByte(RegisterType::C, 0x4F);
    CheckRegisterByte(RegisterType::D, 0xC3);
    CheckRegisterByte(RegisterType::E, 0xF2);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x70);
    CheckRegisterByte(RegisterType::L, 0x67);
    WriteRegisterWord(RegisterType::PC, 0xF6F8);
    WriteRegisterWord(RegisterType::SP, 0x3421);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF6F7, 0x40);
}

void test_40_01B3()
{
    if (skip_test_40_01B3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5266);
    WriteRegisterWord(RegisterType::SP, 0xF575);
    WriteRegisterByte(RegisterType::A, 0xA0);
    WriteRegisterByte(RegisterType::B, 0x76);
    WriteRegisterByte(RegisterType::C, 0xFE);
    WriteRegisterByte(RegisterType::D, 0x8B);
    WriteRegisterByte(RegisterType::E, 0xAB);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x5E);
    WriteRegisterByte(RegisterType::L, 0xBA);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5266, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA0);
    CheckRegisterByte(RegisterType::B, 0x76);
    CheckRegisterByte(RegisterType::C, 0xFE);
    CheckRegisterByte(RegisterType::D, 0x8B);
    CheckRegisterByte(RegisterType::E, 0xAB);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x5E);
    CheckRegisterByte(RegisterType::L, 0xBA);
    WriteRegisterWord(RegisterType::PC, 0x5267);
    WriteRegisterWord(RegisterType::SP, 0xF575);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5266, 0x40);
}

void test_40_01B4()
{
    if (skip_test_40_01B4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE2FA);
    WriteRegisterWord(RegisterType::SP, 0x2A7C);
    WriteRegisterByte(RegisterType::A, 0xE0);
    WriteRegisterByte(RegisterType::B, 0xFE);
    WriteRegisterByte(RegisterType::C, 0xF0);
    WriteRegisterByte(RegisterType::D, 0x10);
    WriteRegisterByte(RegisterType::E, 0x1B);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xCA);
    WriteRegisterByte(RegisterType::L, 0x68);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE2FA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE0);
    CheckRegisterByte(RegisterType::B, 0xFE);
    CheckRegisterByte(RegisterType::C, 0xF0);
    CheckRegisterByte(RegisterType::D, 0x10);
    CheckRegisterByte(RegisterType::E, 0x1B);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xCA);
    CheckRegisterByte(RegisterType::L, 0x68);
    WriteRegisterWord(RegisterType::PC, 0xE2FB);
    WriteRegisterWord(RegisterType::SP, 0x2A7C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xE2FA, 0x40);
}

void test_40_01B5()
{
    if (skip_test_40_01B5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6C28);
    WriteRegisterWord(RegisterType::SP, 0xE59A);
    WriteRegisterByte(RegisterType::A, 0x58);
    WriteRegisterByte(RegisterType::B, 0xCD);
    WriteRegisterByte(RegisterType::C, 0xAB);
    WriteRegisterByte(RegisterType::D, 0x76);
    WriteRegisterByte(RegisterType::E, 0x93);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x45);
    WriteRegisterByte(RegisterType::L, 0x96);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6C28, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x58);
    CheckRegisterByte(RegisterType::B, 0xCD);
    CheckRegisterByte(RegisterType::C, 0xAB);
    CheckRegisterByte(RegisterType::D, 0x76);
    CheckRegisterByte(RegisterType::E, 0x93);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x45);
    CheckRegisterByte(RegisterType::L, 0x96);
    WriteRegisterWord(RegisterType::PC, 0x6C29);
    WriteRegisterWord(RegisterType::SP, 0xE59A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6C28, 0x40);
}

void test_40_01B6()
{
    if (skip_test_40_01B6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA7E8);
    WriteRegisterWord(RegisterType::SP, 0x085B);
    WriteRegisterByte(RegisterType::A, 0x23);
    WriteRegisterByte(RegisterType::B, 0xA8);
    WriteRegisterByte(RegisterType::C, 0xFC);
    WriteRegisterByte(RegisterType::D, 0xD3);
    WriteRegisterByte(RegisterType::E, 0x1E);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xCF);
    WriteRegisterByte(RegisterType::L, 0x33);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA7E8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x23);
    CheckRegisterByte(RegisterType::B, 0xA8);
    CheckRegisterByte(RegisterType::C, 0xFC);
    CheckRegisterByte(RegisterType::D, 0xD3);
    CheckRegisterByte(RegisterType::E, 0x1E);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xCF);
    CheckRegisterByte(RegisterType::L, 0x33);
    WriteRegisterWord(RegisterType::PC, 0xA7E9);
    WriteRegisterWord(RegisterType::SP, 0x085B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA7E8, 0x40);
}

void test_40_01B7()
{
    if (skip_test_40_01B7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3650);
    WriteRegisterWord(RegisterType::SP, 0x496B);
    WriteRegisterByte(RegisterType::A, 0x76);
    WriteRegisterByte(RegisterType::B, 0x4C);
    WriteRegisterByte(RegisterType::C, 0x66);
    WriteRegisterByte(RegisterType::D, 0x40);
    WriteRegisterByte(RegisterType::E, 0xD3);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x63);
    WriteRegisterByte(RegisterType::L, 0xC4);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3650, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x76);
    CheckRegisterByte(RegisterType::B, 0x4C);
    CheckRegisterByte(RegisterType::C, 0x66);
    CheckRegisterByte(RegisterType::D, 0x40);
    CheckRegisterByte(RegisterType::E, 0xD3);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x63);
    CheckRegisterByte(RegisterType::L, 0xC4);
    WriteRegisterWord(RegisterType::PC, 0x3651);
    WriteRegisterWord(RegisterType::SP, 0x496B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3650, 0x40);
}

void test_40_01B8()
{
    if (skip_test_40_01B8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF0FA);
    WriteRegisterWord(RegisterType::SP, 0xEE65);
    WriteRegisterByte(RegisterType::A, 0xF9);
    WriteRegisterByte(RegisterType::B, 0x50);
    WriteRegisterByte(RegisterType::C, 0x1C);
    WriteRegisterByte(RegisterType::D, 0xA6);
    WriteRegisterByte(RegisterType::E, 0xD8);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x4C);
    WriteRegisterByte(RegisterType::L, 0x3D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF0FA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF9);
    CheckRegisterByte(RegisterType::B, 0x50);
    CheckRegisterByte(RegisterType::C, 0x1C);
    CheckRegisterByte(RegisterType::D, 0xA6);
    CheckRegisterByte(RegisterType::E, 0xD8);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x4C);
    CheckRegisterByte(RegisterType::L, 0x3D);
    WriteRegisterWord(RegisterType::PC, 0xF0FB);
    WriteRegisterWord(RegisterType::SP, 0xEE65);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF0FA, 0x40);
}

void test_40_01B9()
{
    if (skip_test_40_01B9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE877);
    WriteRegisterWord(RegisterType::SP, 0x6BE6);
    WriteRegisterByte(RegisterType::A, 0x1B);
    WriteRegisterByte(RegisterType::B, 0xC9);
    WriteRegisterByte(RegisterType::C, 0xC2);
    WriteRegisterByte(RegisterType::D, 0x68);
    WriteRegisterByte(RegisterType::E, 0xB8);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x9B);
    WriteRegisterByte(RegisterType::L, 0xFC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE877, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1B);
    CheckRegisterByte(RegisterType::B, 0xC9);
    CheckRegisterByte(RegisterType::C, 0xC2);
    CheckRegisterByte(RegisterType::D, 0x68);
    CheckRegisterByte(RegisterType::E, 0xB8);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x9B);
    CheckRegisterByte(RegisterType::L, 0xFC);
    WriteRegisterWord(RegisterType::PC, 0xE878);
    WriteRegisterWord(RegisterType::SP, 0x6BE6);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xE877, 0x40);
}

void test_40_01BA()
{
    if (skip_test_40_01BA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4223);
    WriteRegisterWord(RegisterType::SP, 0xB47D);
    WriteRegisterByte(RegisterType::A, 0x26);
    WriteRegisterByte(RegisterType::B, 0xBF);
    WriteRegisterByte(RegisterType::C, 0xA3);
    WriteRegisterByte(RegisterType::D, 0x76);
    WriteRegisterByte(RegisterType::E, 0xD2);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xB0);
    WriteRegisterByte(RegisterType::L, 0x70);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4223, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x26);
    CheckRegisterByte(RegisterType::B, 0xBF);
    CheckRegisterByte(RegisterType::C, 0xA3);
    CheckRegisterByte(RegisterType::D, 0x76);
    CheckRegisterByte(RegisterType::E, 0xD2);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xB0);
    CheckRegisterByte(RegisterType::L, 0x70);
    WriteRegisterWord(RegisterType::PC, 0x4224);
    WriteRegisterWord(RegisterType::SP, 0xB47D);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4223, 0x40);
}

void test_40_01BB()
{
    if (skip_test_40_01BB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8AB7);
    WriteRegisterWord(RegisterType::SP, 0xFADA);
    WriteRegisterByte(RegisterType::A, 0x53);
    WriteRegisterByte(RegisterType::B, 0xA1);
    WriteRegisterByte(RegisterType::C, 0x63);
    WriteRegisterByte(RegisterType::D, 0x15);
    WriteRegisterByte(RegisterType::E, 0xB5);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x21);
    WriteRegisterByte(RegisterType::L, 0x85);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8AB7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x53);
    CheckRegisterByte(RegisterType::B, 0xA1);
    CheckRegisterByte(RegisterType::C, 0x63);
    CheckRegisterByte(RegisterType::D, 0x15);
    CheckRegisterByte(RegisterType::E, 0xB5);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x21);
    CheckRegisterByte(RegisterType::L, 0x85);
    WriteRegisterWord(RegisterType::PC, 0x8AB8);
    WriteRegisterWord(RegisterType::SP, 0xFADA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8AB7, 0x40);
}

void test_40_01BC()
{
    if (skip_test_40_01BC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA5B8);
    WriteRegisterWord(RegisterType::SP, 0xD6F7);
    WriteRegisterByte(RegisterType::A, 0xB0);
    WriteRegisterByte(RegisterType::B, 0x3B);
    WriteRegisterByte(RegisterType::C, 0x2A);
    WriteRegisterByte(RegisterType::D, 0xB3);
    WriteRegisterByte(RegisterType::E, 0x1D);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x6C);
    WriteRegisterByte(RegisterType::L, 0x04);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA5B8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB0);
    CheckRegisterByte(RegisterType::B, 0x3B);
    CheckRegisterByte(RegisterType::C, 0x2A);
    CheckRegisterByte(RegisterType::D, 0xB3);
    CheckRegisterByte(RegisterType::E, 0x1D);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x6C);
    CheckRegisterByte(RegisterType::L, 0x04);
    WriteRegisterWord(RegisterType::PC, 0xA5B9);
    WriteRegisterWord(RegisterType::SP, 0xD6F7);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA5B8, 0x40);
}

void test_40_01BD()
{
    if (skip_test_40_01BD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE8E0);
    WriteRegisterWord(RegisterType::SP, 0xFC67);
    WriteRegisterByte(RegisterType::A, 0x82);
    WriteRegisterByte(RegisterType::B, 0xF9);
    WriteRegisterByte(RegisterType::C, 0x61);
    WriteRegisterByte(RegisterType::D, 0xEB);
    WriteRegisterByte(RegisterType::E, 0x1E);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x7C);
    WriteRegisterByte(RegisterType::L, 0x51);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xE8E0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x82);
    CheckRegisterByte(RegisterType::B, 0xF9);
    CheckRegisterByte(RegisterType::C, 0x61);
    CheckRegisterByte(RegisterType::D, 0xEB);
    CheckRegisterByte(RegisterType::E, 0x1E);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x7C);
    CheckRegisterByte(RegisterType::L, 0x51);
    WriteRegisterWord(RegisterType::PC, 0xE8E1);
    WriteRegisterWord(RegisterType::SP, 0xFC67);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE8E0, 0x40);
}

void test_40_01BE()
{
    if (skip_test_40_01BE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3CF0);
    WriteRegisterWord(RegisterType::SP, 0x8C54);
    WriteRegisterByte(RegisterType::A, 0x03);
    WriteRegisterByte(RegisterType::B, 0x4B);
    WriteRegisterByte(RegisterType::C, 0xE8);
    WriteRegisterByte(RegisterType::D, 0xA5);
    WriteRegisterByte(RegisterType::E, 0x8B);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x35);
    WriteRegisterByte(RegisterType::L, 0xCA);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3CF0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x03);
    CheckRegisterByte(RegisterType::B, 0x4B);
    CheckRegisterByte(RegisterType::C, 0xE8);
    CheckRegisterByte(RegisterType::D, 0xA5);
    CheckRegisterByte(RegisterType::E, 0x8B);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x35);
    CheckRegisterByte(RegisterType::L, 0xCA);
    WriteRegisterWord(RegisterType::PC, 0x3CF1);
    WriteRegisterWord(RegisterType::SP, 0x8C54);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3CF0, 0x40);
}

void test_40_01BF()
{
    if (skip_test_40_01BF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4E5D);
    WriteRegisterWord(RegisterType::SP, 0xAD39);
    WriteRegisterByte(RegisterType::A, 0x81);
    WriteRegisterByte(RegisterType::B, 0x37);
    WriteRegisterByte(RegisterType::C, 0x88);
    WriteRegisterByte(RegisterType::D, 0x6F);
    WriteRegisterByte(RegisterType::E, 0xDF);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xB7);
    WriteRegisterByte(RegisterType::L, 0x23);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4E5D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x81);
    CheckRegisterByte(RegisterType::B, 0x37);
    CheckRegisterByte(RegisterType::C, 0x88);
    CheckRegisterByte(RegisterType::D, 0x6F);
    CheckRegisterByte(RegisterType::E, 0xDF);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xB7);
    CheckRegisterByte(RegisterType::L, 0x23);
    WriteRegisterWord(RegisterType::PC, 0x4E5E);
    WriteRegisterWord(RegisterType::SP, 0xAD39);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4E5D, 0x40);
}

void test_40_01C0()
{
    if (skip_test_40_01C0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x52E2);
    WriteRegisterWord(RegisterType::SP, 0x64B5);
    WriteRegisterByte(RegisterType::A, 0xE3);
    WriteRegisterByte(RegisterType::B, 0xAD);
    WriteRegisterByte(RegisterType::C, 0x8B);
    WriteRegisterByte(RegisterType::D, 0x49);
    WriteRegisterByte(RegisterType::E, 0x95);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x9C);
    WriteRegisterByte(RegisterType::L, 0x35);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x52E2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE3);
    CheckRegisterByte(RegisterType::B, 0xAD);
    CheckRegisterByte(RegisterType::C, 0x8B);
    CheckRegisterByte(RegisterType::D, 0x49);
    CheckRegisterByte(RegisterType::E, 0x95);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x9C);
    CheckRegisterByte(RegisterType::L, 0x35);
    WriteRegisterWord(RegisterType::PC, 0x52E3);
    WriteRegisterWord(RegisterType::SP, 0x64B5);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x52E2, 0x40);
}

void test_40_01C1()
{
    if (skip_test_40_01C1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA1D2);
    WriteRegisterWord(RegisterType::SP, 0x8C27);
    WriteRegisterByte(RegisterType::A, 0xA8);
    WriteRegisterByte(RegisterType::B, 0xC5);
    WriteRegisterByte(RegisterType::C, 0xAE);
    WriteRegisterByte(RegisterType::D, 0xD5);
    WriteRegisterByte(RegisterType::E, 0x8F);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x48);
    WriteRegisterByte(RegisterType::L, 0xE1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA1D2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA8);
    CheckRegisterByte(RegisterType::B, 0xC5);
    CheckRegisterByte(RegisterType::C, 0xAE);
    CheckRegisterByte(RegisterType::D, 0xD5);
    CheckRegisterByte(RegisterType::E, 0x8F);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x48);
    CheckRegisterByte(RegisterType::L, 0xE1);
    WriteRegisterWord(RegisterType::PC, 0xA1D3);
    WriteRegisterWord(RegisterType::SP, 0x8C27);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA1D2, 0x40);
}

void test_40_01C2()
{
    if (skip_test_40_01C2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x35C1);
    WriteRegisterWord(RegisterType::SP, 0xE7EC);
    WriteRegisterByte(RegisterType::A, 0xFD);
    WriteRegisterByte(RegisterType::B, 0x86);
    WriteRegisterByte(RegisterType::C, 0xCC);
    WriteRegisterByte(RegisterType::D, 0xB5);
    WriteRegisterByte(RegisterType::E, 0x0F);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x7F);
    WriteRegisterByte(RegisterType::L, 0xCB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x35C1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFD);
    CheckRegisterByte(RegisterType::B, 0x86);
    CheckRegisterByte(RegisterType::C, 0xCC);
    CheckRegisterByte(RegisterType::D, 0xB5);
    CheckRegisterByte(RegisterType::E, 0x0F);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x7F);
    CheckRegisterByte(RegisterType::L, 0xCB);
    WriteRegisterWord(RegisterType::PC, 0x35C2);
    WriteRegisterWord(RegisterType::SP, 0xE7EC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x35C1, 0x40);
}

void test_40_01C3()
{
    if (skip_test_40_01C3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6DDA);
    WriteRegisterWord(RegisterType::SP, 0xECC8);
    WriteRegisterByte(RegisterType::A, 0x7C);
    WriteRegisterByte(RegisterType::B, 0xDA);
    WriteRegisterByte(RegisterType::C, 0x2C);
    WriteRegisterByte(RegisterType::D, 0x87);
    WriteRegisterByte(RegisterType::E, 0xBE);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x7A);
    WriteRegisterByte(RegisterType::L, 0x17);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6DDA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7C);
    CheckRegisterByte(RegisterType::B, 0xDA);
    CheckRegisterByte(RegisterType::C, 0x2C);
    CheckRegisterByte(RegisterType::D, 0x87);
    CheckRegisterByte(RegisterType::E, 0xBE);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x7A);
    CheckRegisterByte(RegisterType::L, 0x17);
    WriteRegisterWord(RegisterType::PC, 0x6DDB);
    WriteRegisterWord(RegisterType::SP, 0xECC8);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6DDA, 0x40);
}

void test_40_01C4()
{
    if (skip_test_40_01C4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB5B5);
    WriteRegisterWord(RegisterType::SP, 0xB53D);
    WriteRegisterByte(RegisterType::A, 0x1D);
    WriteRegisterByte(RegisterType::B, 0x1C);
    WriteRegisterByte(RegisterType::C, 0xFA);
    WriteRegisterByte(RegisterType::D, 0xC0);
    WriteRegisterByte(RegisterType::E, 0xF4);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x4F);
    WriteRegisterByte(RegisterType::L, 0xEC);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB5B5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1D);
    CheckRegisterByte(RegisterType::B, 0x1C);
    CheckRegisterByte(RegisterType::C, 0xFA);
    CheckRegisterByte(RegisterType::D, 0xC0);
    CheckRegisterByte(RegisterType::E, 0xF4);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x4F);
    CheckRegisterByte(RegisterType::L, 0xEC);
    WriteRegisterWord(RegisterType::PC, 0xB5B6);
    WriteRegisterWord(RegisterType::SP, 0xB53D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB5B5, 0x40);
}

void test_40_01C5()
{
    if (skip_test_40_01C5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x808B);
    WriteRegisterWord(RegisterType::SP, 0x954F);
    WriteRegisterByte(RegisterType::A, 0xAF);
    WriteRegisterByte(RegisterType::B, 0x34);
    WriteRegisterByte(RegisterType::C, 0x3D);
    WriteRegisterByte(RegisterType::D, 0x30);
    WriteRegisterByte(RegisterType::E, 0x66);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xF0);
    WriteRegisterByte(RegisterType::L, 0x2B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x808B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAF);
    CheckRegisterByte(RegisterType::B, 0x34);
    CheckRegisterByte(RegisterType::C, 0x3D);
    CheckRegisterByte(RegisterType::D, 0x30);
    CheckRegisterByte(RegisterType::E, 0x66);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xF0);
    CheckRegisterByte(RegisterType::L, 0x2B);
    WriteRegisterWord(RegisterType::PC, 0x808C);
    WriteRegisterWord(RegisterType::SP, 0x954F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x808B, 0x40);
}

void test_40_01C6()
{
    if (skip_test_40_01C6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x64AE);
    WriteRegisterWord(RegisterType::SP, 0xE7C8);
    WriteRegisterByte(RegisterType::A, 0x6B);
    WriteRegisterByte(RegisterType::B, 0x05);
    WriteRegisterByte(RegisterType::C, 0x5C);
    WriteRegisterByte(RegisterType::D, 0xAA);
    WriteRegisterByte(RegisterType::E, 0xB5);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xFF);
    WriteRegisterByte(RegisterType::L, 0xF1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x64AE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6B);
    CheckRegisterByte(RegisterType::B, 0x05);
    CheckRegisterByte(RegisterType::C, 0x5C);
    CheckRegisterByte(RegisterType::D, 0xAA);
    CheckRegisterByte(RegisterType::E, 0xB5);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xFF);
    CheckRegisterByte(RegisterType::L, 0xF1);
    WriteRegisterWord(RegisterType::PC, 0x64AF);
    WriteRegisterWord(RegisterType::SP, 0xE7C8);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x64AE, 0x40);
}

void test_40_01C7()
{
    if (skip_test_40_01C7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC476);
    WriteRegisterWord(RegisterType::SP, 0xCBB8);
    WriteRegisterByte(RegisterType::A, 0xC1);
    WriteRegisterByte(RegisterType::B, 0x10);
    WriteRegisterByte(RegisterType::C, 0x79);
    WriteRegisterByte(RegisterType::D, 0x4E);
    WriteRegisterByte(RegisterType::E, 0xEB);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xFC);
    WriteRegisterByte(RegisterType::L, 0xCF);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC476, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC1);
    CheckRegisterByte(RegisterType::B, 0x10);
    CheckRegisterByte(RegisterType::C, 0x79);
    CheckRegisterByte(RegisterType::D, 0x4E);
    CheckRegisterByte(RegisterType::E, 0xEB);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xFC);
    CheckRegisterByte(RegisterType::L, 0xCF);
    WriteRegisterWord(RegisterType::PC, 0xC477);
    WriteRegisterWord(RegisterType::SP, 0xCBB8);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC476, 0x40);
}

void test_40_01C8()
{
    if (skip_test_40_01C8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1FE4);
    WriteRegisterWord(RegisterType::SP, 0x41BE);
    WriteRegisterByte(RegisterType::A, 0x57);
    WriteRegisterByte(RegisterType::B, 0xE6);
    WriteRegisterByte(RegisterType::C, 0x91);
    WriteRegisterByte(RegisterType::D, 0xDF);
    WriteRegisterByte(RegisterType::E, 0xC3);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x18);
    WriteRegisterByte(RegisterType::L, 0x6F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1FE4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x57);
    CheckRegisterByte(RegisterType::B, 0xE6);
    CheckRegisterByte(RegisterType::C, 0x91);
    CheckRegisterByte(RegisterType::D, 0xDF);
    CheckRegisterByte(RegisterType::E, 0xC3);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x18);
    CheckRegisterByte(RegisterType::L, 0x6F);
    WriteRegisterWord(RegisterType::PC, 0x1FE5);
    WriteRegisterWord(RegisterType::SP, 0x41BE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1FE4, 0x40);
}

void test_40_01C9()
{
    if (skip_test_40_01C9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF8FE);
    WriteRegisterWord(RegisterType::SP, 0xEAD2);
    WriteRegisterByte(RegisterType::A, 0x2C);
    WriteRegisterByte(RegisterType::B, 0xEC);
    WriteRegisterByte(RegisterType::C, 0xCC);
    WriteRegisterByte(RegisterType::D, 0x5F);
    WriteRegisterByte(RegisterType::E, 0x47);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xCB);
    WriteRegisterByte(RegisterType::L, 0x2A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF8FE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2C);
    CheckRegisterByte(RegisterType::B, 0xEC);
    CheckRegisterByte(RegisterType::C, 0xCC);
    CheckRegisterByte(RegisterType::D, 0x5F);
    CheckRegisterByte(RegisterType::E, 0x47);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xCB);
    CheckRegisterByte(RegisterType::L, 0x2A);
    WriteRegisterWord(RegisterType::PC, 0xF8FF);
    WriteRegisterWord(RegisterType::SP, 0xEAD2);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF8FE, 0x40);
}

void test_40_01CA()
{
    if (skip_test_40_01CA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA663);
    WriteRegisterWord(RegisterType::SP, 0x3A06);
    WriteRegisterByte(RegisterType::A, 0xB0);
    WriteRegisterByte(RegisterType::B, 0xC6);
    WriteRegisterByte(RegisterType::C, 0x5D);
    WriteRegisterByte(RegisterType::D, 0x11);
    WriteRegisterByte(RegisterType::E, 0xB1);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x81);
    WriteRegisterByte(RegisterType::L, 0x01);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA663, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB0);
    CheckRegisterByte(RegisterType::B, 0xC6);
    CheckRegisterByte(RegisterType::C, 0x5D);
    CheckRegisterByte(RegisterType::D, 0x11);
    CheckRegisterByte(RegisterType::E, 0xB1);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x81);
    CheckRegisterByte(RegisterType::L, 0x01);
    WriteRegisterWord(RegisterType::PC, 0xA664);
    WriteRegisterWord(RegisterType::SP, 0x3A06);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA663, 0x40);
}

void test_40_01CB()
{
    if (skip_test_40_01CB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC28C);
    WriteRegisterWord(RegisterType::SP, 0xC94A);
    WriteRegisterByte(RegisterType::A, 0x71);
    WriteRegisterByte(RegisterType::B, 0xF1);
    WriteRegisterByte(RegisterType::C, 0x40);
    WriteRegisterByte(RegisterType::D, 0x6D);
    WriteRegisterByte(RegisterType::E, 0x10);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x13);
    WriteRegisterByte(RegisterType::L, 0x5C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC28C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x71);
    CheckRegisterByte(RegisterType::B, 0xF1);
    CheckRegisterByte(RegisterType::C, 0x40);
    CheckRegisterByte(RegisterType::D, 0x6D);
    CheckRegisterByte(RegisterType::E, 0x10);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x13);
    CheckRegisterByte(RegisterType::L, 0x5C);
    WriteRegisterWord(RegisterType::PC, 0xC28D);
    WriteRegisterWord(RegisterType::SP, 0xC94A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC28C, 0x40);
}

void test_40_01CC()
{
    if (skip_test_40_01CC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA201);
    WriteRegisterWord(RegisterType::SP, 0xFF06);
    WriteRegisterByte(RegisterType::A, 0xD0);
    WriteRegisterByte(RegisterType::B, 0x66);
    WriteRegisterByte(RegisterType::C, 0xA6);
    WriteRegisterByte(RegisterType::D, 0x08);
    WriteRegisterByte(RegisterType::E, 0x06);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x1B);
    WriteRegisterByte(RegisterType::L, 0x80);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA201, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD0);
    CheckRegisterByte(RegisterType::B, 0x66);
    CheckRegisterByte(RegisterType::C, 0xA6);
    CheckRegisterByte(RegisterType::D, 0x08);
    CheckRegisterByte(RegisterType::E, 0x06);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x1B);
    CheckRegisterByte(RegisterType::L, 0x80);
    WriteRegisterWord(RegisterType::PC, 0xA202);
    WriteRegisterWord(RegisterType::SP, 0xFF06);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA201, 0x40);
}

void test_40_01CD()
{
    if (skip_test_40_01CD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1AF7);
    WriteRegisterWord(RegisterType::SP, 0x8D8F);
    WriteRegisterByte(RegisterType::A, 0x13);
    WriteRegisterByte(RegisterType::B, 0xC0);
    WriteRegisterByte(RegisterType::C, 0x12);
    WriteRegisterByte(RegisterType::D, 0xA2);
    WriteRegisterByte(RegisterType::E, 0xB9);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xA8);
    WriteRegisterByte(RegisterType::L, 0x75);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1AF7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x13);
    CheckRegisterByte(RegisterType::B, 0xC0);
    CheckRegisterByte(RegisterType::C, 0x12);
    CheckRegisterByte(RegisterType::D, 0xA2);
    CheckRegisterByte(RegisterType::E, 0xB9);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xA8);
    CheckRegisterByte(RegisterType::L, 0x75);
    WriteRegisterWord(RegisterType::PC, 0x1AF8);
    WriteRegisterWord(RegisterType::SP, 0x8D8F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1AF7, 0x40);
}

void test_40_01CE()
{
    if (skip_test_40_01CE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x671D);
    WriteRegisterWord(RegisterType::SP, 0xF3E1);
    WriteRegisterByte(RegisterType::A, 0x35);
    WriteRegisterByte(RegisterType::B, 0xD5);
    WriteRegisterByte(RegisterType::C, 0xCB);
    WriteRegisterByte(RegisterType::D, 0x75);
    WriteRegisterByte(RegisterType::E, 0xDC);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x7B);
    WriteRegisterByte(RegisterType::L, 0x5C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x671D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x35);
    CheckRegisterByte(RegisterType::B, 0xD5);
    CheckRegisterByte(RegisterType::C, 0xCB);
    CheckRegisterByte(RegisterType::D, 0x75);
    CheckRegisterByte(RegisterType::E, 0xDC);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x7B);
    CheckRegisterByte(RegisterType::L, 0x5C);
    WriteRegisterWord(RegisterType::PC, 0x671E);
    WriteRegisterWord(RegisterType::SP, 0xF3E1);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x671D, 0x40);
}

void test_40_01CF()
{
    if (skip_test_40_01CF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2CE2);
    WriteRegisterWord(RegisterType::SP, 0x8757);
    WriteRegisterByte(RegisterType::A, 0x21);
    WriteRegisterByte(RegisterType::B, 0x80);
    WriteRegisterByte(RegisterType::C, 0x59);
    WriteRegisterByte(RegisterType::D, 0x50);
    WriteRegisterByte(RegisterType::E, 0x4B);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x9E);
    WriteRegisterByte(RegisterType::L, 0xEC);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2CE2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x21);
    CheckRegisterByte(RegisterType::B, 0x80);
    CheckRegisterByte(RegisterType::C, 0x59);
    CheckRegisterByte(RegisterType::D, 0x50);
    CheckRegisterByte(RegisterType::E, 0x4B);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x9E);
    CheckRegisterByte(RegisterType::L, 0xEC);
    WriteRegisterWord(RegisterType::PC, 0x2CE3);
    WriteRegisterWord(RegisterType::SP, 0x8757);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2CE2, 0x40);
}

void test_40_01D0()
{
    if (skip_test_40_01D0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4A35);
    WriteRegisterWord(RegisterType::SP, 0x0364);
    WriteRegisterByte(RegisterType::A, 0x88);
    WriteRegisterByte(RegisterType::B, 0x7E);
    WriteRegisterByte(RegisterType::C, 0xE3);
    WriteRegisterByte(RegisterType::D, 0x15);
    WriteRegisterByte(RegisterType::E, 0x99);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x3A);
    WriteRegisterByte(RegisterType::L, 0xB4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4A35, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x88);
    CheckRegisterByte(RegisterType::B, 0x7E);
    CheckRegisterByte(RegisterType::C, 0xE3);
    CheckRegisterByte(RegisterType::D, 0x15);
    CheckRegisterByte(RegisterType::E, 0x99);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x3A);
    CheckRegisterByte(RegisterType::L, 0xB4);
    WriteRegisterWord(RegisterType::PC, 0x4A36);
    WriteRegisterWord(RegisterType::SP, 0x0364);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4A35, 0x40);
}

void test_40_01D1()
{
    if (skip_test_40_01D1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD94B);
    WriteRegisterWord(RegisterType::SP, 0xB032);
    WriteRegisterByte(RegisterType::A, 0x15);
    WriteRegisterByte(RegisterType::B, 0x70);
    WriteRegisterByte(RegisterType::C, 0xCF);
    WriteRegisterByte(RegisterType::D, 0x20);
    WriteRegisterByte(RegisterType::E, 0x2B);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xA9);
    WriteRegisterByte(RegisterType::L, 0xFB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD94B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x15);
    CheckRegisterByte(RegisterType::B, 0x70);
    CheckRegisterByte(RegisterType::C, 0xCF);
    CheckRegisterByte(RegisterType::D, 0x20);
    CheckRegisterByte(RegisterType::E, 0x2B);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xA9);
    CheckRegisterByte(RegisterType::L, 0xFB);
    WriteRegisterWord(RegisterType::PC, 0xD94C);
    WriteRegisterWord(RegisterType::SP, 0xB032);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD94B, 0x40);
}

void test_40_01D2()
{
    if (skip_test_40_01D2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x01EC);
    WriteRegisterWord(RegisterType::SP, 0x606C);
    WriteRegisterByte(RegisterType::A, 0x8E);
    WriteRegisterByte(RegisterType::B, 0x81);
    WriteRegisterByte(RegisterType::C, 0xE9);
    WriteRegisterByte(RegisterType::D, 0xE2);
    WriteRegisterByte(RegisterType::E, 0x51);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x3F);
    WriteRegisterByte(RegisterType::L, 0x8C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x01EC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8E);
    CheckRegisterByte(RegisterType::B, 0x81);
    CheckRegisterByte(RegisterType::C, 0xE9);
    CheckRegisterByte(RegisterType::D, 0xE2);
    CheckRegisterByte(RegisterType::E, 0x51);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x3F);
    CheckRegisterByte(RegisterType::L, 0x8C);
    WriteRegisterWord(RegisterType::PC, 0x01ED);
    WriteRegisterWord(RegisterType::SP, 0x606C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x01EC, 0x40);
}

void test_40_01D3()
{
    if (skip_test_40_01D3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7860);
    WriteRegisterWord(RegisterType::SP, 0xE9DF);
    WriteRegisterByte(RegisterType::A, 0xD7);
    WriteRegisterByte(RegisterType::B, 0x39);
    WriteRegisterByte(RegisterType::C, 0x93);
    WriteRegisterByte(RegisterType::D, 0x18);
    WriteRegisterByte(RegisterType::E, 0xBA);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xE3);
    WriteRegisterByte(RegisterType::L, 0x85);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7860, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD7);
    CheckRegisterByte(RegisterType::B, 0x39);
    CheckRegisterByte(RegisterType::C, 0x93);
    CheckRegisterByte(RegisterType::D, 0x18);
    CheckRegisterByte(RegisterType::E, 0xBA);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xE3);
    CheckRegisterByte(RegisterType::L, 0x85);
    WriteRegisterWord(RegisterType::PC, 0x7861);
    WriteRegisterWord(RegisterType::SP, 0xE9DF);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7860, 0x40);
}

void test_40_01D4()
{
    if (skip_test_40_01D4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4AE5);
    WriteRegisterWord(RegisterType::SP, 0x33CF);
    WriteRegisterByte(RegisterType::A, 0xCB);
    WriteRegisterByte(RegisterType::B, 0x5B);
    WriteRegisterByte(RegisterType::C, 0x08);
    WriteRegisterByte(RegisterType::D, 0xEC);
    WriteRegisterByte(RegisterType::E, 0xCD);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x6D);
    WriteRegisterByte(RegisterType::L, 0x92);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4AE5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCB);
    CheckRegisterByte(RegisterType::B, 0x5B);
    CheckRegisterByte(RegisterType::C, 0x08);
    CheckRegisterByte(RegisterType::D, 0xEC);
    CheckRegisterByte(RegisterType::E, 0xCD);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x6D);
    CheckRegisterByte(RegisterType::L, 0x92);
    WriteRegisterWord(RegisterType::PC, 0x4AE6);
    WriteRegisterWord(RegisterType::SP, 0x33CF);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4AE5, 0x40);
}

void test_40_01D5()
{
    if (skip_test_40_01D5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0207);
    WriteRegisterWord(RegisterType::SP, 0x61F3);
    WriteRegisterByte(RegisterType::A, 0xA6);
    WriteRegisterByte(RegisterType::B, 0xB0);
    WriteRegisterByte(RegisterType::C, 0xC8);
    WriteRegisterByte(RegisterType::D, 0x60);
    WriteRegisterByte(RegisterType::E, 0xF8);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x96);
    WriteRegisterByte(RegisterType::L, 0xEE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0207, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA6);
    CheckRegisterByte(RegisterType::B, 0xB0);
    CheckRegisterByte(RegisterType::C, 0xC8);
    CheckRegisterByte(RegisterType::D, 0x60);
    CheckRegisterByte(RegisterType::E, 0xF8);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x96);
    CheckRegisterByte(RegisterType::L, 0xEE);
    WriteRegisterWord(RegisterType::PC, 0x0208);
    WriteRegisterWord(RegisterType::SP, 0x61F3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0207, 0x40);
}

void test_40_01D6()
{
    if (skip_test_40_01D6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA880);
    WriteRegisterWord(RegisterType::SP, 0xE78D);
    WriteRegisterByte(RegisterType::A, 0xF7);
    WriteRegisterByte(RegisterType::B, 0xC8);
    WriteRegisterByte(RegisterType::C, 0x94);
    WriteRegisterByte(RegisterType::D, 0xF4);
    WriteRegisterByte(RegisterType::E, 0xBD);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xED);
    WriteRegisterByte(RegisterType::L, 0x24);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA880, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF7);
    CheckRegisterByte(RegisterType::B, 0xC8);
    CheckRegisterByte(RegisterType::C, 0x94);
    CheckRegisterByte(RegisterType::D, 0xF4);
    CheckRegisterByte(RegisterType::E, 0xBD);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xED);
    CheckRegisterByte(RegisterType::L, 0x24);
    WriteRegisterWord(RegisterType::PC, 0xA881);
    WriteRegisterWord(RegisterType::SP, 0xE78D);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA880, 0x40);
}

void test_40_01D7()
{
    if (skip_test_40_01D7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0B49);
    WriteRegisterWord(RegisterType::SP, 0x0398);
    WriteRegisterByte(RegisterType::A, 0x2B);
    WriteRegisterByte(RegisterType::B, 0xAB);
    WriteRegisterByte(RegisterType::C, 0xD0);
    WriteRegisterByte(RegisterType::D, 0xAF);
    WriteRegisterByte(RegisterType::E, 0x9B);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x11);
    WriteRegisterByte(RegisterType::L, 0xAE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0B49, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2B);
    CheckRegisterByte(RegisterType::B, 0xAB);
    CheckRegisterByte(RegisterType::C, 0xD0);
    CheckRegisterByte(RegisterType::D, 0xAF);
    CheckRegisterByte(RegisterType::E, 0x9B);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x11);
    CheckRegisterByte(RegisterType::L, 0xAE);
    WriteRegisterWord(RegisterType::PC, 0x0B4A);
    WriteRegisterWord(RegisterType::SP, 0x0398);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0B49, 0x40);
}

void test_40_01D8()
{
    if (skip_test_40_01D8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7B2E);
    WriteRegisterWord(RegisterType::SP, 0x968F);
    WriteRegisterByte(RegisterType::A, 0x33);
    WriteRegisterByte(RegisterType::B, 0x7B);
    WriteRegisterByte(RegisterType::C, 0xE2);
    WriteRegisterByte(RegisterType::D, 0x0E);
    WriteRegisterByte(RegisterType::E, 0x90);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x01);
    WriteRegisterByte(RegisterType::L, 0x65);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7B2E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x33);
    CheckRegisterByte(RegisterType::B, 0x7B);
    CheckRegisterByte(RegisterType::C, 0xE2);
    CheckRegisterByte(RegisterType::D, 0x0E);
    CheckRegisterByte(RegisterType::E, 0x90);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x01);
    CheckRegisterByte(RegisterType::L, 0x65);
    WriteRegisterWord(RegisterType::PC, 0x7B2F);
    WriteRegisterWord(RegisterType::SP, 0x968F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7B2E, 0x40);
}

void test_40_01D9()
{
    if (skip_test_40_01D9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7ACC);
    WriteRegisterWord(RegisterType::SP, 0x03FE);
    WriteRegisterByte(RegisterType::A, 0x0B);
    WriteRegisterByte(RegisterType::B, 0xEA);
    WriteRegisterByte(RegisterType::C, 0xC3);
    WriteRegisterByte(RegisterType::D, 0xFE);
    WriteRegisterByte(RegisterType::E, 0x38);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x6B);
    WriteRegisterByte(RegisterType::L, 0x69);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7ACC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0B);
    CheckRegisterByte(RegisterType::B, 0xEA);
    CheckRegisterByte(RegisterType::C, 0xC3);
    CheckRegisterByte(RegisterType::D, 0xFE);
    CheckRegisterByte(RegisterType::E, 0x38);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x6B);
    CheckRegisterByte(RegisterType::L, 0x69);
    WriteRegisterWord(RegisterType::PC, 0x7ACD);
    WriteRegisterWord(RegisterType::SP, 0x03FE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7ACC, 0x40);
}

void test_40_01DA()
{
    if (skip_test_40_01DA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1541);
    WriteRegisterWord(RegisterType::SP, 0xFE4B);
    WriteRegisterByte(RegisterType::A, 0x04);
    WriteRegisterByte(RegisterType::B, 0xA8);
    WriteRegisterByte(RegisterType::C, 0xD8);
    WriteRegisterByte(RegisterType::D, 0x59);
    WriteRegisterByte(RegisterType::E, 0x8F);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xA4);
    WriteRegisterByte(RegisterType::L, 0xC7);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1541, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x04);
    CheckRegisterByte(RegisterType::B, 0xA8);
    CheckRegisterByte(RegisterType::C, 0xD8);
    CheckRegisterByte(RegisterType::D, 0x59);
    CheckRegisterByte(RegisterType::E, 0x8F);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xA4);
    CheckRegisterByte(RegisterType::L, 0xC7);
    WriteRegisterWord(RegisterType::PC, 0x1542);
    WriteRegisterWord(RegisterType::SP, 0xFE4B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1541, 0x40);
}

void test_40_01DB()
{
    if (skip_test_40_01DB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6B36);
    WriteRegisterWord(RegisterType::SP, 0x0A2B);
    WriteRegisterByte(RegisterType::A, 0x4D);
    WriteRegisterByte(RegisterType::B, 0x5A);
    WriteRegisterByte(RegisterType::C, 0xE9);
    WriteRegisterByte(RegisterType::D, 0xE4);
    WriteRegisterByte(RegisterType::E, 0x62);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x11);
    WriteRegisterByte(RegisterType::L, 0x32);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6B36, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4D);
    CheckRegisterByte(RegisterType::B, 0x5A);
    CheckRegisterByte(RegisterType::C, 0xE9);
    CheckRegisterByte(RegisterType::D, 0xE4);
    CheckRegisterByte(RegisterType::E, 0x62);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x11);
    CheckRegisterByte(RegisterType::L, 0x32);
    WriteRegisterWord(RegisterType::PC, 0x6B37);
    WriteRegisterWord(RegisterType::SP, 0x0A2B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6B36, 0x40);
}

void test_40_01DC()
{
    if (skip_test_40_01DC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3850);
    WriteRegisterWord(RegisterType::SP, 0xEEB3);
    WriteRegisterByte(RegisterType::A, 0x75);
    WriteRegisterByte(RegisterType::B, 0xBD);
    WriteRegisterByte(RegisterType::C, 0x8E);
    WriteRegisterByte(RegisterType::D, 0x0E);
    WriteRegisterByte(RegisterType::E, 0x49);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x22);
    WriteRegisterByte(RegisterType::L, 0x82);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3850, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x75);
    CheckRegisterByte(RegisterType::B, 0xBD);
    CheckRegisterByte(RegisterType::C, 0x8E);
    CheckRegisterByte(RegisterType::D, 0x0E);
    CheckRegisterByte(RegisterType::E, 0x49);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x22);
    CheckRegisterByte(RegisterType::L, 0x82);
    WriteRegisterWord(RegisterType::PC, 0x3851);
    WriteRegisterWord(RegisterType::SP, 0xEEB3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3850, 0x40);
}

void test_40_01DD()
{
    if (skip_test_40_01DD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9436);
    WriteRegisterWord(RegisterType::SP, 0xC053);
    WriteRegisterByte(RegisterType::A, 0xE6);
    WriteRegisterByte(RegisterType::B, 0x07);
    WriteRegisterByte(RegisterType::C, 0xAF);
    WriteRegisterByte(RegisterType::D, 0x24);
    WriteRegisterByte(RegisterType::E, 0x40);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x36);
    WriteRegisterByte(RegisterType::L, 0x40);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9436, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE6);
    CheckRegisterByte(RegisterType::B, 0x07);
    CheckRegisterByte(RegisterType::C, 0xAF);
    CheckRegisterByte(RegisterType::D, 0x24);
    CheckRegisterByte(RegisterType::E, 0x40);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x36);
    CheckRegisterByte(RegisterType::L, 0x40);
    WriteRegisterWord(RegisterType::PC, 0x9437);
    WriteRegisterWord(RegisterType::SP, 0xC053);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x9436, 0x40);
}

void test_40_01DE()
{
    if (skip_test_40_01DE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7214);
    WriteRegisterWord(RegisterType::SP, 0xBCD4);
    WriteRegisterByte(RegisterType::A, 0x5F);
    WriteRegisterByte(RegisterType::B, 0x08);
    WriteRegisterByte(RegisterType::C, 0xCB);
    WriteRegisterByte(RegisterType::D, 0xFB);
    WriteRegisterByte(RegisterType::E, 0xE2);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x74);
    WriteRegisterByte(RegisterType::L, 0x67);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7214, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5F);
    CheckRegisterByte(RegisterType::B, 0x08);
    CheckRegisterByte(RegisterType::C, 0xCB);
    CheckRegisterByte(RegisterType::D, 0xFB);
    CheckRegisterByte(RegisterType::E, 0xE2);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x74);
    CheckRegisterByte(RegisterType::L, 0x67);
    WriteRegisterWord(RegisterType::PC, 0x7215);
    WriteRegisterWord(RegisterType::SP, 0xBCD4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7214, 0x40);
}

void test_40_01DF()
{
    if (skip_test_40_01DF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA4F7);
    WriteRegisterWord(RegisterType::SP, 0x5131);
    WriteRegisterByte(RegisterType::A, 0x00);
    WriteRegisterByte(RegisterType::B, 0x80);
    WriteRegisterByte(RegisterType::C, 0xD4);
    WriteRegisterByte(RegisterType::D, 0x12);
    WriteRegisterByte(RegisterType::E, 0xC4);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xFA);
    WriteRegisterByte(RegisterType::L, 0x80);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA4F7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x00);
    CheckRegisterByte(RegisterType::B, 0x80);
    CheckRegisterByte(RegisterType::C, 0xD4);
    CheckRegisterByte(RegisterType::D, 0x12);
    CheckRegisterByte(RegisterType::E, 0xC4);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xFA);
    CheckRegisterByte(RegisterType::L, 0x80);
    WriteRegisterWord(RegisterType::PC, 0xA4F8);
    WriteRegisterWord(RegisterType::SP, 0x5131);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA4F7, 0x40);
}

void test_40_01E0()
{
    if (skip_test_40_01E0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD08A);
    WriteRegisterWord(RegisterType::SP, 0x48E6);
    WriteRegisterByte(RegisterType::A, 0x93);
    WriteRegisterByte(RegisterType::B, 0xFB);
    WriteRegisterByte(RegisterType::C, 0x97);
    WriteRegisterByte(RegisterType::D, 0xEF);
    WriteRegisterByte(RegisterType::E, 0x41);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xC6);
    WriteRegisterByte(RegisterType::L, 0xAD);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD08A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x93);
    CheckRegisterByte(RegisterType::B, 0xFB);
    CheckRegisterByte(RegisterType::C, 0x97);
    CheckRegisterByte(RegisterType::D, 0xEF);
    CheckRegisterByte(RegisterType::E, 0x41);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xC6);
    CheckRegisterByte(RegisterType::L, 0xAD);
    WriteRegisterWord(RegisterType::PC, 0xD08B);
    WriteRegisterWord(RegisterType::SP, 0x48E6);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD08A, 0x40);
}

void test_40_01E1()
{
    if (skip_test_40_01E1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x99AB);
    WriteRegisterWord(RegisterType::SP, 0x7699);
    WriteRegisterByte(RegisterType::A, 0x8D);
    WriteRegisterByte(RegisterType::B, 0x90);
    WriteRegisterByte(RegisterType::C, 0xF0);
    WriteRegisterByte(RegisterType::D, 0x85);
    WriteRegisterByte(RegisterType::E, 0x11);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xED);
    WriteRegisterByte(RegisterType::L, 0x9F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x99AB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8D);
    CheckRegisterByte(RegisterType::B, 0x90);
    CheckRegisterByte(RegisterType::C, 0xF0);
    CheckRegisterByte(RegisterType::D, 0x85);
    CheckRegisterByte(RegisterType::E, 0x11);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xED);
    CheckRegisterByte(RegisterType::L, 0x9F);
    WriteRegisterWord(RegisterType::PC, 0x99AC);
    WriteRegisterWord(RegisterType::SP, 0x7699);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x99AB, 0x40);
}

void test_40_01E2()
{
    if (skip_test_40_01E2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x795F);
    WriteRegisterWord(RegisterType::SP, 0xA003);
    WriteRegisterByte(RegisterType::A, 0x17);
    WriteRegisterByte(RegisterType::B, 0x83);
    WriteRegisterByte(RegisterType::C, 0xCA);
    WriteRegisterByte(RegisterType::D, 0xB8);
    WriteRegisterByte(RegisterType::E, 0xD5);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xA6);
    WriteRegisterByte(RegisterType::L, 0x8A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x795F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x17);
    CheckRegisterByte(RegisterType::B, 0x83);
    CheckRegisterByte(RegisterType::C, 0xCA);
    CheckRegisterByte(RegisterType::D, 0xB8);
    CheckRegisterByte(RegisterType::E, 0xD5);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xA6);
    CheckRegisterByte(RegisterType::L, 0x8A);
    WriteRegisterWord(RegisterType::PC, 0x7960);
    WriteRegisterWord(RegisterType::SP, 0xA003);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x795F, 0x40);
}

void test_40_01E3()
{
    if (skip_test_40_01E3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDC16);
    WriteRegisterWord(RegisterType::SP, 0x646B);
    WriteRegisterByte(RegisterType::A, 0x04);
    WriteRegisterByte(RegisterType::B, 0x28);
    WriteRegisterByte(RegisterType::C, 0xF3);
    WriteRegisterByte(RegisterType::D, 0xB3);
    WriteRegisterByte(RegisterType::E, 0xFF);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x5C);
    WriteRegisterByte(RegisterType::L, 0x69);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDC16, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x04);
    CheckRegisterByte(RegisterType::B, 0x28);
    CheckRegisterByte(RegisterType::C, 0xF3);
    CheckRegisterByte(RegisterType::D, 0xB3);
    CheckRegisterByte(RegisterType::E, 0xFF);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x5C);
    CheckRegisterByte(RegisterType::L, 0x69);
    WriteRegisterWord(RegisterType::PC, 0xDC17);
    WriteRegisterWord(RegisterType::SP, 0x646B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDC16, 0x40);
}

void test_40_01E4()
{
    if (skip_test_40_01E4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8A48);
    WriteRegisterWord(RegisterType::SP, 0xF331);
    WriteRegisterByte(RegisterType::A, 0x13);
    WriteRegisterByte(RegisterType::B, 0x09);
    WriteRegisterByte(RegisterType::C, 0xC2);
    WriteRegisterByte(RegisterType::D, 0x44);
    WriteRegisterByte(RegisterType::E, 0xB3);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x39);
    WriteRegisterByte(RegisterType::L, 0x81);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8A48, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x13);
    CheckRegisterByte(RegisterType::B, 0x09);
    CheckRegisterByte(RegisterType::C, 0xC2);
    CheckRegisterByte(RegisterType::D, 0x44);
    CheckRegisterByte(RegisterType::E, 0xB3);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x39);
    CheckRegisterByte(RegisterType::L, 0x81);
    WriteRegisterWord(RegisterType::PC, 0x8A49);
    WriteRegisterWord(RegisterType::SP, 0xF331);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8A48, 0x40);
}

void test_40_01E5()
{
    if (skip_test_40_01E5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDC56);
    WriteRegisterWord(RegisterType::SP, 0xD4C6);
    WriteRegisterByte(RegisterType::A, 0x31);
    WriteRegisterByte(RegisterType::B, 0x95);
    WriteRegisterByte(RegisterType::C, 0x83);
    WriteRegisterByte(RegisterType::D, 0x74);
    WriteRegisterByte(RegisterType::E, 0xF3);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x7F);
    WriteRegisterByte(RegisterType::L, 0x2F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDC56, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x31);
    CheckRegisterByte(RegisterType::B, 0x95);
    CheckRegisterByte(RegisterType::C, 0x83);
    CheckRegisterByte(RegisterType::D, 0x74);
    CheckRegisterByte(RegisterType::E, 0xF3);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x7F);
    CheckRegisterByte(RegisterType::L, 0x2F);
    WriteRegisterWord(RegisterType::PC, 0xDC57);
    WriteRegisterWord(RegisterType::SP, 0xD4C6);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xDC56, 0x40);
}

void test_40_01E6()
{
    if (skip_test_40_01E6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5E56);
    WriteRegisterWord(RegisterType::SP, 0x0F09);
    WriteRegisterByte(RegisterType::A, 0x18);
    WriteRegisterByte(RegisterType::B, 0xDA);
    WriteRegisterByte(RegisterType::C, 0x2A);
    WriteRegisterByte(RegisterType::D, 0xE2);
    WriteRegisterByte(RegisterType::E, 0xFA);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x9C);
    WriteRegisterByte(RegisterType::L, 0xD8);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5E56, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x18);
    CheckRegisterByte(RegisterType::B, 0xDA);
    CheckRegisterByte(RegisterType::C, 0x2A);
    CheckRegisterByte(RegisterType::D, 0xE2);
    CheckRegisterByte(RegisterType::E, 0xFA);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x9C);
    CheckRegisterByte(RegisterType::L, 0xD8);
    WriteRegisterWord(RegisterType::PC, 0x5E57);
    WriteRegisterWord(RegisterType::SP, 0x0F09);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5E56, 0x40);
}

void test_40_01E7()
{
    if (skip_test_40_01E7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8EB5);
    WriteRegisterWord(RegisterType::SP, 0x0122);
    WriteRegisterByte(RegisterType::A, 0x35);
    WriteRegisterByte(RegisterType::B, 0xD9);
    WriteRegisterByte(RegisterType::C, 0x6B);
    WriteRegisterByte(RegisterType::D, 0x60);
    WriteRegisterByte(RegisterType::E, 0x7F);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xF5);
    WriteRegisterByte(RegisterType::L, 0x79);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8EB5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x35);
    CheckRegisterByte(RegisterType::B, 0xD9);
    CheckRegisterByte(RegisterType::C, 0x6B);
    CheckRegisterByte(RegisterType::D, 0x60);
    CheckRegisterByte(RegisterType::E, 0x7F);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xF5);
    CheckRegisterByte(RegisterType::L, 0x79);
    WriteRegisterWord(RegisterType::PC, 0x8EB6);
    WriteRegisterWord(RegisterType::SP, 0x0122);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8EB5, 0x40);
}

void test_40_01E8()
{
    if (skip_test_40_01E8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x407C);
    WriteRegisterWord(RegisterType::SP, 0x0329);
    WriteRegisterByte(RegisterType::A, 0x19);
    WriteRegisterByte(RegisterType::B, 0x45);
    WriteRegisterByte(RegisterType::C, 0x76);
    WriteRegisterByte(RegisterType::D, 0x64);
    WriteRegisterByte(RegisterType::E, 0x0D);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x24);
    WriteRegisterByte(RegisterType::L, 0xC0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x407C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x19);
    CheckRegisterByte(RegisterType::B, 0x45);
    CheckRegisterByte(RegisterType::C, 0x76);
    CheckRegisterByte(RegisterType::D, 0x64);
    CheckRegisterByte(RegisterType::E, 0x0D);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x24);
    CheckRegisterByte(RegisterType::L, 0xC0);
    WriteRegisterWord(RegisterType::PC, 0x407D);
    WriteRegisterWord(RegisterType::SP, 0x0329);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x407C, 0x40);
}

void test_40_01E9()
{
    if (skip_test_40_01E9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF50B);
    WriteRegisterWord(RegisterType::SP, 0x2C9A);
    WriteRegisterByte(RegisterType::A, 0xAF);
    WriteRegisterByte(RegisterType::B, 0xAB);
    WriteRegisterByte(RegisterType::C, 0x33);
    WriteRegisterByte(RegisterType::D, 0x04);
    WriteRegisterByte(RegisterType::E, 0xE5);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x2A);
    WriteRegisterByte(RegisterType::L, 0xAC);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF50B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAF);
    CheckRegisterByte(RegisterType::B, 0xAB);
    CheckRegisterByte(RegisterType::C, 0x33);
    CheckRegisterByte(RegisterType::D, 0x04);
    CheckRegisterByte(RegisterType::E, 0xE5);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x2A);
    CheckRegisterByte(RegisterType::L, 0xAC);
    WriteRegisterWord(RegisterType::PC, 0xF50C);
    WriteRegisterWord(RegisterType::SP, 0x2C9A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF50B, 0x40);
}

void test_40_01EA()
{
    if (skip_test_40_01EA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD39D);
    WriteRegisterWord(RegisterType::SP, 0xB871);
    WriteRegisterByte(RegisterType::A, 0xF7);
    WriteRegisterByte(RegisterType::B, 0x29);
    WriteRegisterByte(RegisterType::C, 0x36);
    WriteRegisterByte(RegisterType::D, 0xC9);
    WriteRegisterByte(RegisterType::E, 0xF2);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x72);
    WriteRegisterByte(RegisterType::L, 0x32);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD39D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF7);
    CheckRegisterByte(RegisterType::B, 0x29);
    CheckRegisterByte(RegisterType::C, 0x36);
    CheckRegisterByte(RegisterType::D, 0xC9);
    CheckRegisterByte(RegisterType::E, 0xF2);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x72);
    CheckRegisterByte(RegisterType::L, 0x32);
    WriteRegisterWord(RegisterType::PC, 0xD39E);
    WriteRegisterWord(RegisterType::SP, 0xB871);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD39D, 0x40);
}

void test_40_01EB()
{
    if (skip_test_40_01EB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA34A);
    WriteRegisterWord(RegisterType::SP, 0xB994);
    WriteRegisterByte(RegisterType::A, 0x7C);
    WriteRegisterByte(RegisterType::B, 0x73);
    WriteRegisterByte(RegisterType::C, 0x20);
    WriteRegisterByte(RegisterType::D, 0x5A);
    WriteRegisterByte(RegisterType::E, 0xA1);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x0B);
    WriteRegisterByte(RegisterType::L, 0xA0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA34A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7C);
    CheckRegisterByte(RegisterType::B, 0x73);
    CheckRegisterByte(RegisterType::C, 0x20);
    CheckRegisterByte(RegisterType::D, 0x5A);
    CheckRegisterByte(RegisterType::E, 0xA1);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x0B);
    CheckRegisterByte(RegisterType::L, 0xA0);
    WriteRegisterWord(RegisterType::PC, 0xA34B);
    WriteRegisterWord(RegisterType::SP, 0xB994);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA34A, 0x40);
}

void test_40_01EC()
{
    if (skip_test_40_01EC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA3E4);
    WriteRegisterWord(RegisterType::SP, 0xC36C);
    WriteRegisterByte(RegisterType::A, 0x62);
    WriteRegisterByte(RegisterType::B, 0xB9);
    WriteRegisterByte(RegisterType::C, 0x85);
    WriteRegisterByte(RegisterType::D, 0x86);
    WriteRegisterByte(RegisterType::E, 0x85);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x3F);
    WriteRegisterByte(RegisterType::L, 0x9B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA3E4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x62);
    CheckRegisterByte(RegisterType::B, 0xB9);
    CheckRegisterByte(RegisterType::C, 0x85);
    CheckRegisterByte(RegisterType::D, 0x86);
    CheckRegisterByte(RegisterType::E, 0x85);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x3F);
    CheckRegisterByte(RegisterType::L, 0x9B);
    WriteRegisterWord(RegisterType::PC, 0xA3E5);
    WriteRegisterWord(RegisterType::SP, 0xC36C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA3E4, 0x40);
}

void test_40_01ED()
{
    if (skip_test_40_01ED)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD43D);
    WriteRegisterWord(RegisterType::SP, 0x2AF9);
    WriteRegisterByte(RegisterType::A, 0x84);
    WriteRegisterByte(RegisterType::B, 0xC5);
    WriteRegisterByte(RegisterType::C, 0xC7);
    WriteRegisterByte(RegisterType::D, 0x4D);
    WriteRegisterByte(RegisterType::E, 0x41);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x3E);
    WriteRegisterByte(RegisterType::L, 0xAD);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD43D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x84);
    CheckRegisterByte(RegisterType::B, 0xC5);
    CheckRegisterByte(RegisterType::C, 0xC7);
    CheckRegisterByte(RegisterType::D, 0x4D);
    CheckRegisterByte(RegisterType::E, 0x41);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x3E);
    CheckRegisterByte(RegisterType::L, 0xAD);
    WriteRegisterWord(RegisterType::PC, 0xD43E);
    WriteRegisterWord(RegisterType::SP, 0x2AF9);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD43D, 0x40);
}

void test_40_01EE()
{
    if (skip_test_40_01EE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5193);
    WriteRegisterWord(RegisterType::SP, 0x62F9);
    WriteRegisterByte(RegisterType::A, 0xD9);
    WriteRegisterByte(RegisterType::B, 0x93);
    WriteRegisterByte(RegisterType::C, 0x50);
    WriteRegisterByte(RegisterType::D, 0x80);
    WriteRegisterByte(RegisterType::E, 0x98);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xA6);
    WriteRegisterByte(RegisterType::L, 0x50);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5193, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD9);
    CheckRegisterByte(RegisterType::B, 0x93);
    CheckRegisterByte(RegisterType::C, 0x50);
    CheckRegisterByte(RegisterType::D, 0x80);
    CheckRegisterByte(RegisterType::E, 0x98);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xA6);
    CheckRegisterByte(RegisterType::L, 0x50);
    WriteRegisterWord(RegisterType::PC, 0x5194);
    WriteRegisterWord(RegisterType::SP, 0x62F9);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5193, 0x40);
}

void test_40_01EF()
{
    if (skip_test_40_01EF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1D4F);
    WriteRegisterWord(RegisterType::SP, 0x78BE);
    WriteRegisterByte(RegisterType::A, 0xE7);
    WriteRegisterByte(RegisterType::B, 0x0B);
    WriteRegisterByte(RegisterType::C, 0xEA);
    WriteRegisterByte(RegisterType::D, 0x05);
    WriteRegisterByte(RegisterType::E, 0x33);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x7B);
    WriteRegisterByte(RegisterType::L, 0x00);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1D4F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE7);
    CheckRegisterByte(RegisterType::B, 0x0B);
    CheckRegisterByte(RegisterType::C, 0xEA);
    CheckRegisterByte(RegisterType::D, 0x05);
    CheckRegisterByte(RegisterType::E, 0x33);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x7B);
    CheckRegisterByte(RegisterType::L, 0x00);
    WriteRegisterWord(RegisterType::PC, 0x1D50);
    WriteRegisterWord(RegisterType::SP, 0x78BE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1D4F, 0x40);
}

void test_40_01F0()
{
    if (skip_test_40_01F0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFC41);
    WriteRegisterWord(RegisterType::SP, 0xE7A5);
    WriteRegisterByte(RegisterType::A, 0x63);
    WriteRegisterByte(RegisterType::B, 0x40);
    WriteRegisterByte(RegisterType::C, 0x92);
    WriteRegisterByte(RegisterType::D, 0x25);
    WriteRegisterByte(RegisterType::E, 0x23);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x7F);
    WriteRegisterByte(RegisterType::L, 0x83);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFC41, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x63);
    CheckRegisterByte(RegisterType::B, 0x40);
    CheckRegisterByte(RegisterType::C, 0x92);
    CheckRegisterByte(RegisterType::D, 0x25);
    CheckRegisterByte(RegisterType::E, 0x23);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x7F);
    CheckRegisterByte(RegisterType::L, 0x83);
    WriteRegisterWord(RegisterType::PC, 0xFC42);
    WriteRegisterWord(RegisterType::SP, 0xE7A5);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFC41, 0x40);
}

void test_40_01F1()
{
    if (skip_test_40_01F1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x477B);
    WriteRegisterWord(RegisterType::SP, 0xA1EE);
    WriteRegisterByte(RegisterType::A, 0x95);
    WriteRegisterByte(RegisterType::B, 0x34);
    WriteRegisterByte(RegisterType::C, 0x34);
    WriteRegisterByte(RegisterType::D, 0x45);
    WriteRegisterByte(RegisterType::E, 0x9B);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x16);
    WriteRegisterByte(RegisterType::L, 0x42);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x477B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x95);
    CheckRegisterByte(RegisterType::B, 0x34);
    CheckRegisterByte(RegisterType::C, 0x34);
    CheckRegisterByte(RegisterType::D, 0x45);
    CheckRegisterByte(RegisterType::E, 0x9B);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x16);
    CheckRegisterByte(RegisterType::L, 0x42);
    WriteRegisterWord(RegisterType::PC, 0x477C);
    WriteRegisterWord(RegisterType::SP, 0xA1EE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x477B, 0x40);
}

void test_40_01F2()
{
    if (skip_test_40_01F2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC90E);
    WriteRegisterWord(RegisterType::SP, 0x1E96);
    WriteRegisterByte(RegisterType::A, 0xDA);
    WriteRegisterByte(RegisterType::B, 0x07);
    WriteRegisterByte(RegisterType::C, 0x1D);
    WriteRegisterByte(RegisterType::D, 0x56);
    WriteRegisterByte(RegisterType::E, 0x93);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x74);
    WriteRegisterByte(RegisterType::L, 0x34);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC90E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDA);
    CheckRegisterByte(RegisterType::B, 0x07);
    CheckRegisterByte(RegisterType::C, 0x1D);
    CheckRegisterByte(RegisterType::D, 0x56);
    CheckRegisterByte(RegisterType::E, 0x93);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x74);
    CheckRegisterByte(RegisterType::L, 0x34);
    WriteRegisterWord(RegisterType::PC, 0xC90F);
    WriteRegisterWord(RegisterType::SP, 0x1E96);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC90E, 0x40);
}

void test_40_01F3()
{
    if (skip_test_40_01F3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x067C);
    WriteRegisterWord(RegisterType::SP, 0x9622);
    WriteRegisterByte(RegisterType::A, 0x0F);
    WriteRegisterByte(RegisterType::B, 0x33);
    WriteRegisterByte(RegisterType::C, 0x13);
    WriteRegisterByte(RegisterType::D, 0x4A);
    WriteRegisterByte(RegisterType::E, 0xD7);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x7E);
    WriteRegisterByte(RegisterType::L, 0x3F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x067C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0F);
    CheckRegisterByte(RegisterType::B, 0x33);
    CheckRegisterByte(RegisterType::C, 0x13);
    CheckRegisterByte(RegisterType::D, 0x4A);
    CheckRegisterByte(RegisterType::E, 0xD7);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x7E);
    CheckRegisterByte(RegisterType::L, 0x3F);
    WriteRegisterWord(RegisterType::PC, 0x067D);
    WriteRegisterWord(RegisterType::SP, 0x9622);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x067C, 0x40);
}

void test_40_01F4()
{
    if (skip_test_40_01F4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD8CC);
    WriteRegisterWord(RegisterType::SP, 0xB8B5);
    WriteRegisterByte(RegisterType::A, 0x04);
    WriteRegisterByte(RegisterType::B, 0x86);
    WriteRegisterByte(RegisterType::C, 0x90);
    WriteRegisterByte(RegisterType::D, 0x4B);
    WriteRegisterByte(RegisterType::E, 0xAF);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x91);
    WriteRegisterByte(RegisterType::L, 0x37);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD8CC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x04);
    CheckRegisterByte(RegisterType::B, 0x86);
    CheckRegisterByte(RegisterType::C, 0x90);
    CheckRegisterByte(RegisterType::D, 0x4B);
    CheckRegisterByte(RegisterType::E, 0xAF);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x91);
    CheckRegisterByte(RegisterType::L, 0x37);
    WriteRegisterWord(RegisterType::PC, 0xD8CD);
    WriteRegisterWord(RegisterType::SP, 0xB8B5);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD8CC, 0x40);
}

void test_40_01F5()
{
    if (skip_test_40_01F5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA81C);
    WriteRegisterWord(RegisterType::SP, 0x7763);
    WriteRegisterByte(RegisterType::A, 0xA7);
    WriteRegisterByte(RegisterType::B, 0xA0);
    WriteRegisterByte(RegisterType::C, 0xF6);
    WriteRegisterByte(RegisterType::D, 0xDC);
    WriteRegisterByte(RegisterType::E, 0xB8);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x11);
    WriteRegisterByte(RegisterType::L, 0xB2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA81C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA7);
    CheckRegisterByte(RegisterType::B, 0xA0);
    CheckRegisterByte(RegisterType::C, 0xF6);
    CheckRegisterByte(RegisterType::D, 0xDC);
    CheckRegisterByte(RegisterType::E, 0xB8);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x11);
    CheckRegisterByte(RegisterType::L, 0xB2);
    WriteRegisterWord(RegisterType::PC, 0xA81D);
    WriteRegisterWord(RegisterType::SP, 0x7763);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA81C, 0x40);
}

void test_40_01F6()
{
    if (skip_test_40_01F6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x704C);
    WriteRegisterWord(RegisterType::SP, 0x3761);
    WriteRegisterByte(RegisterType::A, 0x22);
    WriteRegisterByte(RegisterType::B, 0xBE);
    WriteRegisterByte(RegisterType::C, 0x5F);
    WriteRegisterByte(RegisterType::D, 0xD5);
    WriteRegisterByte(RegisterType::E, 0xD0);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x33);
    WriteRegisterByte(RegisterType::L, 0xC2);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x704C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x22);
    CheckRegisterByte(RegisterType::B, 0xBE);
    CheckRegisterByte(RegisterType::C, 0x5F);
    CheckRegisterByte(RegisterType::D, 0xD5);
    CheckRegisterByte(RegisterType::E, 0xD0);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x33);
    CheckRegisterByte(RegisterType::L, 0xC2);
    WriteRegisterWord(RegisterType::PC, 0x704D);
    WriteRegisterWord(RegisterType::SP, 0x3761);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x704C, 0x40);
}

void test_40_01F7()
{
    if (skip_test_40_01F7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA5BF);
    WriteRegisterWord(RegisterType::SP, 0x1837);
    WriteRegisterByte(RegisterType::A, 0xC6);
    WriteRegisterByte(RegisterType::B, 0xE7);
    WriteRegisterByte(RegisterType::C, 0x72);
    WriteRegisterByte(RegisterType::D, 0x42);
    WriteRegisterByte(RegisterType::E, 0x75);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x16);
    WriteRegisterByte(RegisterType::L, 0x1A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA5BF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC6);
    CheckRegisterByte(RegisterType::B, 0xE7);
    CheckRegisterByte(RegisterType::C, 0x72);
    CheckRegisterByte(RegisterType::D, 0x42);
    CheckRegisterByte(RegisterType::E, 0x75);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x16);
    CheckRegisterByte(RegisterType::L, 0x1A);
    WriteRegisterWord(RegisterType::PC, 0xA5C0);
    WriteRegisterWord(RegisterType::SP, 0x1837);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA5BF, 0x40);
}

void test_40_01F8()
{
    if (skip_test_40_01F8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x62FB);
    WriteRegisterWord(RegisterType::SP, 0x922C);
    WriteRegisterByte(RegisterType::A, 0xB3);
    WriteRegisterByte(RegisterType::B, 0x9F);
    WriteRegisterByte(RegisterType::C, 0x93);
    WriteRegisterByte(RegisterType::D, 0x42);
    WriteRegisterByte(RegisterType::E, 0xE3);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x1C);
    WriteRegisterByte(RegisterType::L, 0x08);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x62FB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB3);
    CheckRegisterByte(RegisterType::B, 0x9F);
    CheckRegisterByte(RegisterType::C, 0x93);
    CheckRegisterByte(RegisterType::D, 0x42);
    CheckRegisterByte(RegisterType::E, 0xE3);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x1C);
    CheckRegisterByte(RegisterType::L, 0x08);
    WriteRegisterWord(RegisterType::PC, 0x62FC);
    WriteRegisterWord(RegisterType::SP, 0x922C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x62FB, 0x40);
}

void test_40_01F9()
{
    if (skip_test_40_01F9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAB1D);
    WriteRegisterWord(RegisterType::SP, 0xE564);
    WriteRegisterByte(RegisterType::A, 0x42);
    WriteRegisterByte(RegisterType::B, 0xBD);
    WriteRegisterByte(RegisterType::C, 0x0F);
    WriteRegisterByte(RegisterType::D, 0xBF);
    WriteRegisterByte(RegisterType::E, 0x3F);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x4F);
    WriteRegisterByte(RegisterType::L, 0xC9);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xAB1D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x42);
    CheckRegisterByte(RegisterType::B, 0xBD);
    CheckRegisterByte(RegisterType::C, 0x0F);
    CheckRegisterByte(RegisterType::D, 0xBF);
    CheckRegisterByte(RegisterType::E, 0x3F);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x4F);
    CheckRegisterByte(RegisterType::L, 0xC9);
    WriteRegisterWord(RegisterType::PC, 0xAB1E);
    WriteRegisterWord(RegisterType::SP, 0xE564);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAB1D, 0x40);
}

void test_40_01FA()
{
    if (skip_test_40_01FA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEA64);
    WriteRegisterWord(RegisterType::SP, 0x6B60);
    WriteRegisterByte(RegisterType::A, 0x10);
    WriteRegisterByte(RegisterType::B, 0x5B);
    WriteRegisterByte(RegisterType::C, 0x16);
    WriteRegisterByte(RegisterType::D, 0x97);
    WriteRegisterByte(RegisterType::E, 0x48);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xD5);
    WriteRegisterByte(RegisterType::L, 0x42);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xEA64, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x10);
    CheckRegisterByte(RegisterType::B, 0x5B);
    CheckRegisterByte(RegisterType::C, 0x16);
    CheckRegisterByte(RegisterType::D, 0x97);
    CheckRegisterByte(RegisterType::E, 0x48);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xD5);
    CheckRegisterByte(RegisterType::L, 0x42);
    WriteRegisterWord(RegisterType::PC, 0xEA65);
    WriteRegisterWord(RegisterType::SP, 0x6B60);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xEA64, 0x40);
}

void test_40_01FB()
{
    if (skip_test_40_01FB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDB69);
    WriteRegisterWord(RegisterType::SP, 0x0A40);
    WriteRegisterByte(RegisterType::A, 0x49);
    WriteRegisterByte(RegisterType::B, 0x56);
    WriteRegisterByte(RegisterType::C, 0x20);
    WriteRegisterByte(RegisterType::D, 0xBF);
    WriteRegisterByte(RegisterType::E, 0x9B);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x2F);
    WriteRegisterByte(RegisterType::L, 0x4A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDB69, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x49);
    CheckRegisterByte(RegisterType::B, 0x56);
    CheckRegisterByte(RegisterType::C, 0x20);
    CheckRegisterByte(RegisterType::D, 0xBF);
    CheckRegisterByte(RegisterType::E, 0x9B);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x2F);
    CheckRegisterByte(RegisterType::L, 0x4A);
    WriteRegisterWord(RegisterType::PC, 0xDB6A);
    WriteRegisterWord(RegisterType::SP, 0x0A40);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xDB69, 0x40);
}

void test_40_01FC()
{
    if (skip_test_40_01FC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4BAE);
    WriteRegisterWord(RegisterType::SP, 0x3191);
    WriteRegisterByte(RegisterType::A, 0x7B);
    WriteRegisterByte(RegisterType::B, 0x06);
    WriteRegisterByte(RegisterType::C, 0xC8);
    WriteRegisterByte(RegisterType::D, 0x46);
    WriteRegisterByte(RegisterType::E, 0x2D);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x6C);
    WriteRegisterByte(RegisterType::L, 0x2F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4BAE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7B);
    CheckRegisterByte(RegisterType::B, 0x06);
    CheckRegisterByte(RegisterType::C, 0xC8);
    CheckRegisterByte(RegisterType::D, 0x46);
    CheckRegisterByte(RegisterType::E, 0x2D);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x6C);
    CheckRegisterByte(RegisterType::L, 0x2F);
    WriteRegisterWord(RegisterType::PC, 0x4BAF);
    WriteRegisterWord(RegisterType::SP, 0x3191);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4BAE, 0x40);
}

void test_40_01FD()
{
    if (skip_test_40_01FD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1FCE);
    WriteRegisterWord(RegisterType::SP, 0x1751);
    WriteRegisterByte(RegisterType::A, 0x72);
    WriteRegisterByte(RegisterType::B, 0x7B);
    WriteRegisterByte(RegisterType::C, 0x92);
    WriteRegisterByte(RegisterType::D, 0xB7);
    WriteRegisterByte(RegisterType::E, 0x6A);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xF7);
    WriteRegisterByte(RegisterType::L, 0x63);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1FCE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x72);
    CheckRegisterByte(RegisterType::B, 0x7B);
    CheckRegisterByte(RegisterType::C, 0x92);
    CheckRegisterByte(RegisterType::D, 0xB7);
    CheckRegisterByte(RegisterType::E, 0x6A);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xF7);
    CheckRegisterByte(RegisterType::L, 0x63);
    WriteRegisterWord(RegisterType::PC, 0x1FCF);
    WriteRegisterWord(RegisterType::SP, 0x1751);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1FCE, 0x40);
}

void test_40_01FE()
{
    if (skip_test_40_01FE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5A0A);
    WriteRegisterWord(RegisterType::SP, 0x200F);
    WriteRegisterByte(RegisterType::A, 0x33);
    WriteRegisterByte(RegisterType::B, 0xF1);
    WriteRegisterByte(RegisterType::C, 0x63);
    WriteRegisterByte(RegisterType::D, 0xC2);
    WriteRegisterByte(RegisterType::E, 0x8F);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xD0);
    WriteRegisterByte(RegisterType::L, 0x1D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5A0A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x33);
    CheckRegisterByte(RegisterType::B, 0xF1);
    CheckRegisterByte(RegisterType::C, 0x63);
    CheckRegisterByte(RegisterType::D, 0xC2);
    CheckRegisterByte(RegisterType::E, 0x8F);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xD0);
    CheckRegisterByte(RegisterType::L, 0x1D);
    WriteRegisterWord(RegisterType::PC, 0x5A0B);
    WriteRegisterWord(RegisterType::SP, 0x200F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5A0A, 0x40);
}

void test_40_01FF()
{
    if (skip_test_40_01FF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5B7A);
    WriteRegisterWord(RegisterType::SP, 0x4D15);
    WriteRegisterByte(RegisterType::A, 0xFF);
    WriteRegisterByte(RegisterType::B, 0x32);
    WriteRegisterByte(RegisterType::C, 0x50);
    WriteRegisterByte(RegisterType::D, 0xF0);
    WriteRegisterByte(RegisterType::E, 0xC8);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x50);
    WriteRegisterByte(RegisterType::L, 0xE7);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5B7A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFF);
    CheckRegisterByte(RegisterType::B, 0x32);
    CheckRegisterByte(RegisterType::C, 0x50);
    CheckRegisterByte(RegisterType::D, 0xF0);
    CheckRegisterByte(RegisterType::E, 0xC8);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x50);
    CheckRegisterByte(RegisterType::L, 0xE7);
    WriteRegisterWord(RegisterType::PC, 0x5B7B);
    WriteRegisterWord(RegisterType::SP, 0x4D15);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5B7A, 0x40);
}

void test_40_0200()
{
    if (skip_test_40_0200)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDBC1);
    WriteRegisterWord(RegisterType::SP, 0x144F);
    WriteRegisterByte(RegisterType::A, 0xDE);
    WriteRegisterByte(RegisterType::B, 0x3A);
    WriteRegisterByte(RegisterType::C, 0x7D);
    WriteRegisterByte(RegisterType::D, 0x2C);
    WriteRegisterByte(RegisterType::E, 0xBE);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xF4);
    WriteRegisterByte(RegisterType::L, 0xF6);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDBC1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDE);
    CheckRegisterByte(RegisterType::B, 0x3A);
    CheckRegisterByte(RegisterType::C, 0x7D);
    CheckRegisterByte(RegisterType::D, 0x2C);
    CheckRegisterByte(RegisterType::E, 0xBE);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xF4);
    CheckRegisterByte(RegisterType::L, 0xF6);
    WriteRegisterWord(RegisterType::PC, 0xDBC2);
    WriteRegisterWord(RegisterType::SP, 0x144F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDBC1, 0x40);
}

void test_40_0201()
{
    if (skip_test_40_0201)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x691B);
    WriteRegisterWord(RegisterType::SP, 0x7A56);
    WriteRegisterByte(RegisterType::A, 0xBE);
    WriteRegisterByte(RegisterType::B, 0xD5);
    WriteRegisterByte(RegisterType::C, 0x96);
    WriteRegisterByte(RegisterType::D, 0x5B);
    WriteRegisterByte(RegisterType::E, 0x28);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x78);
    WriteRegisterByte(RegisterType::L, 0xF5);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x691B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBE);
    CheckRegisterByte(RegisterType::B, 0xD5);
    CheckRegisterByte(RegisterType::C, 0x96);
    CheckRegisterByte(RegisterType::D, 0x5B);
    CheckRegisterByte(RegisterType::E, 0x28);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x78);
    CheckRegisterByte(RegisterType::L, 0xF5);
    WriteRegisterWord(RegisterType::PC, 0x691C);
    WriteRegisterWord(RegisterType::SP, 0x7A56);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x691B, 0x40);
}

void test_40_0202()
{
    if (skip_test_40_0202)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x67D9);
    WriteRegisterWord(RegisterType::SP, 0xFE56);
    WriteRegisterByte(RegisterType::A, 0x87);
    WriteRegisterByte(RegisterType::B, 0x7A);
    WriteRegisterByte(RegisterType::C, 0x68);
    WriteRegisterByte(RegisterType::D, 0x75);
    WriteRegisterByte(RegisterType::E, 0x59);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x15);
    WriteRegisterByte(RegisterType::L, 0x24);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x67D9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x87);
    CheckRegisterByte(RegisterType::B, 0x7A);
    CheckRegisterByte(RegisterType::C, 0x68);
    CheckRegisterByte(RegisterType::D, 0x75);
    CheckRegisterByte(RegisterType::E, 0x59);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x15);
    CheckRegisterByte(RegisterType::L, 0x24);
    WriteRegisterWord(RegisterType::PC, 0x67DA);
    WriteRegisterWord(RegisterType::SP, 0xFE56);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x67D9, 0x40);
}

void test_40_0203()
{
    if (skip_test_40_0203)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAFA3);
    WriteRegisterWord(RegisterType::SP, 0x498A);
    WriteRegisterByte(RegisterType::A, 0x38);
    WriteRegisterByte(RegisterType::B, 0x96);
    WriteRegisterByte(RegisterType::C, 0x78);
    WriteRegisterByte(RegisterType::D, 0x3B);
    WriteRegisterByte(RegisterType::E, 0x0E);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xEB);
    WriteRegisterByte(RegisterType::L, 0x0F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xAFA3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x38);
    CheckRegisterByte(RegisterType::B, 0x96);
    CheckRegisterByte(RegisterType::C, 0x78);
    CheckRegisterByte(RegisterType::D, 0x3B);
    CheckRegisterByte(RegisterType::E, 0x0E);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xEB);
    CheckRegisterByte(RegisterType::L, 0x0F);
    WriteRegisterWord(RegisterType::PC, 0xAFA4);
    WriteRegisterWord(RegisterType::SP, 0x498A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAFA3, 0x40);
}

void test_40_0204()
{
    if (skip_test_40_0204)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD56A);
    WriteRegisterWord(RegisterType::SP, 0xECCC);
    WriteRegisterByte(RegisterType::A, 0xF4);
    WriteRegisterByte(RegisterType::B, 0x6E);
    WriteRegisterByte(RegisterType::C, 0x55);
    WriteRegisterByte(RegisterType::D, 0x9D);
    WriteRegisterByte(RegisterType::E, 0x8C);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xBE);
    WriteRegisterByte(RegisterType::L, 0xF0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD56A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF4);
    CheckRegisterByte(RegisterType::B, 0x6E);
    CheckRegisterByte(RegisterType::C, 0x55);
    CheckRegisterByte(RegisterType::D, 0x9D);
    CheckRegisterByte(RegisterType::E, 0x8C);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xBE);
    CheckRegisterByte(RegisterType::L, 0xF0);
    WriteRegisterWord(RegisterType::PC, 0xD56B);
    WriteRegisterWord(RegisterType::SP, 0xECCC);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD56A, 0x40);
}

void test_40_0205()
{
    if (skip_test_40_0205)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE0AB);
    WriteRegisterWord(RegisterType::SP, 0x340A);
    WriteRegisterByte(RegisterType::A, 0x68);
    WriteRegisterByte(RegisterType::B, 0x8B);
    WriteRegisterByte(RegisterType::C, 0x0B);
    WriteRegisterByte(RegisterType::D, 0x91);
    WriteRegisterByte(RegisterType::E, 0x15);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x7C);
    WriteRegisterByte(RegisterType::L, 0x45);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE0AB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x68);
    CheckRegisterByte(RegisterType::B, 0x8B);
    CheckRegisterByte(RegisterType::C, 0x0B);
    CheckRegisterByte(RegisterType::D, 0x91);
    CheckRegisterByte(RegisterType::E, 0x15);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x7C);
    CheckRegisterByte(RegisterType::L, 0x45);
    WriteRegisterWord(RegisterType::PC, 0xE0AC);
    WriteRegisterWord(RegisterType::SP, 0x340A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE0AB, 0x40);
}

void test_40_0206()
{
    if (skip_test_40_0206)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8B23);
    WriteRegisterWord(RegisterType::SP, 0x1314);
    WriteRegisterByte(RegisterType::A, 0x1A);
    WriteRegisterByte(RegisterType::B, 0x0E);
    WriteRegisterByte(RegisterType::C, 0x1F);
    WriteRegisterByte(RegisterType::D, 0x28);
    WriteRegisterByte(RegisterType::E, 0x03);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x17);
    WriteRegisterByte(RegisterType::L, 0x0A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8B23, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1A);
    CheckRegisterByte(RegisterType::B, 0x0E);
    CheckRegisterByte(RegisterType::C, 0x1F);
    CheckRegisterByte(RegisterType::D, 0x28);
    CheckRegisterByte(RegisterType::E, 0x03);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x17);
    CheckRegisterByte(RegisterType::L, 0x0A);
    WriteRegisterWord(RegisterType::PC, 0x8B24);
    WriteRegisterWord(RegisterType::SP, 0x1314);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8B23, 0x40);
}

void test_40_0207()
{
    if (skip_test_40_0207)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE527);
    WriteRegisterWord(RegisterType::SP, 0xEF7D);
    WriteRegisterByte(RegisterType::A, 0x88);
    WriteRegisterByte(RegisterType::B, 0x3A);
    WriteRegisterByte(RegisterType::C, 0x1A);
    WriteRegisterByte(RegisterType::D, 0xE8);
    WriteRegisterByte(RegisterType::E, 0x96);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xF9);
    WriteRegisterByte(RegisterType::L, 0xC7);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE527, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x88);
    CheckRegisterByte(RegisterType::B, 0x3A);
    CheckRegisterByte(RegisterType::C, 0x1A);
    CheckRegisterByte(RegisterType::D, 0xE8);
    CheckRegisterByte(RegisterType::E, 0x96);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xF9);
    CheckRegisterByte(RegisterType::L, 0xC7);
    WriteRegisterWord(RegisterType::PC, 0xE528);
    WriteRegisterWord(RegisterType::SP, 0xEF7D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE527, 0x40);
}

void test_40_0208()
{
    if (skip_test_40_0208)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x272D);
    WriteRegisterWord(RegisterType::SP, 0xFE00);
    WriteRegisterByte(RegisterType::A, 0xAD);
    WriteRegisterByte(RegisterType::B, 0xB3);
    WriteRegisterByte(RegisterType::C, 0x13);
    WriteRegisterByte(RegisterType::D, 0xEA);
    WriteRegisterByte(RegisterType::E, 0x90);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x95);
    WriteRegisterByte(RegisterType::L, 0x7E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x272D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAD);
    CheckRegisterByte(RegisterType::B, 0xB3);
    CheckRegisterByte(RegisterType::C, 0x13);
    CheckRegisterByte(RegisterType::D, 0xEA);
    CheckRegisterByte(RegisterType::E, 0x90);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x95);
    CheckRegisterByte(RegisterType::L, 0x7E);
    WriteRegisterWord(RegisterType::PC, 0x272E);
    WriteRegisterWord(RegisterType::SP, 0xFE00);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x272D, 0x40);
}

void test_40_0209()
{
    if (skip_test_40_0209)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x02E9);
    WriteRegisterWord(RegisterType::SP, 0xF99A);
    WriteRegisterByte(RegisterType::A, 0xA8);
    WriteRegisterByte(RegisterType::B, 0x98);
    WriteRegisterByte(RegisterType::C, 0xFA);
    WriteRegisterByte(RegisterType::D, 0x62);
    WriteRegisterByte(RegisterType::E, 0xDD);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xA9);
    WriteRegisterByte(RegisterType::L, 0x82);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x02E9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA8);
    CheckRegisterByte(RegisterType::B, 0x98);
    CheckRegisterByte(RegisterType::C, 0xFA);
    CheckRegisterByte(RegisterType::D, 0x62);
    CheckRegisterByte(RegisterType::E, 0xDD);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xA9);
    CheckRegisterByte(RegisterType::L, 0x82);
    WriteRegisterWord(RegisterType::PC, 0x02EA);
    WriteRegisterWord(RegisterType::SP, 0xF99A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x02E9, 0x40);
}

void test_40_020A()
{
    if (skip_test_40_020A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1CEC);
    WriteRegisterWord(RegisterType::SP, 0x389E);
    WriteRegisterByte(RegisterType::A, 0x75);
    WriteRegisterByte(RegisterType::B, 0xC8);
    WriteRegisterByte(RegisterType::C, 0xE7);
    WriteRegisterByte(RegisterType::D, 0xD0);
    WriteRegisterByte(RegisterType::E, 0x7A);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x73);
    WriteRegisterByte(RegisterType::L, 0x01);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1CEC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x75);
    CheckRegisterByte(RegisterType::B, 0xC8);
    CheckRegisterByte(RegisterType::C, 0xE7);
    CheckRegisterByte(RegisterType::D, 0xD0);
    CheckRegisterByte(RegisterType::E, 0x7A);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x73);
    CheckRegisterByte(RegisterType::L, 0x01);
    WriteRegisterWord(RegisterType::PC, 0x1CED);
    WriteRegisterWord(RegisterType::SP, 0x389E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1CEC, 0x40);
}

void test_40_020B()
{
    if (skip_test_40_020B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7B3D);
    WriteRegisterWord(RegisterType::SP, 0x9B61);
    WriteRegisterByte(RegisterType::A, 0xA5);
    WriteRegisterByte(RegisterType::B, 0x0E);
    WriteRegisterByte(RegisterType::C, 0x74);
    WriteRegisterByte(RegisterType::D, 0x6C);
    WriteRegisterByte(RegisterType::E, 0xE0);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x73);
    WriteRegisterByte(RegisterType::L, 0x71);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7B3D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA5);
    CheckRegisterByte(RegisterType::B, 0x0E);
    CheckRegisterByte(RegisterType::C, 0x74);
    CheckRegisterByte(RegisterType::D, 0x6C);
    CheckRegisterByte(RegisterType::E, 0xE0);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x73);
    CheckRegisterByte(RegisterType::L, 0x71);
    WriteRegisterWord(RegisterType::PC, 0x7B3E);
    WriteRegisterWord(RegisterType::SP, 0x9B61);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7B3D, 0x40);
}

void test_40_020C()
{
    if (skip_test_40_020C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAE87);
    WriteRegisterWord(RegisterType::SP, 0x2104);
    WriteRegisterByte(RegisterType::A, 0x79);
    WriteRegisterByte(RegisterType::B, 0x5D);
    WriteRegisterByte(RegisterType::C, 0x3C);
    WriteRegisterByte(RegisterType::D, 0xE2);
    WriteRegisterByte(RegisterType::E, 0x64);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xA5);
    WriteRegisterByte(RegisterType::L, 0x87);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xAE87, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x79);
    CheckRegisterByte(RegisterType::B, 0x5D);
    CheckRegisterByte(RegisterType::C, 0x3C);
    CheckRegisterByte(RegisterType::D, 0xE2);
    CheckRegisterByte(RegisterType::E, 0x64);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xA5);
    CheckRegisterByte(RegisterType::L, 0x87);
    WriteRegisterWord(RegisterType::PC, 0xAE88);
    WriteRegisterWord(RegisterType::SP, 0x2104);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAE87, 0x40);
}

void test_40_020D()
{
    if (skip_test_40_020D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2837);
    WriteRegisterWord(RegisterType::SP, 0x288F);
    WriteRegisterByte(RegisterType::A, 0x41);
    WriteRegisterByte(RegisterType::B, 0xB9);
    WriteRegisterByte(RegisterType::C, 0xF3);
    WriteRegisterByte(RegisterType::D, 0x1D);
    WriteRegisterByte(RegisterType::E, 0x1D);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x94);
    WriteRegisterByte(RegisterType::L, 0xFD);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2837, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x41);
    CheckRegisterByte(RegisterType::B, 0xB9);
    CheckRegisterByte(RegisterType::C, 0xF3);
    CheckRegisterByte(RegisterType::D, 0x1D);
    CheckRegisterByte(RegisterType::E, 0x1D);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x94);
    CheckRegisterByte(RegisterType::L, 0xFD);
    WriteRegisterWord(RegisterType::PC, 0x2838);
    WriteRegisterWord(RegisterType::SP, 0x288F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2837, 0x40);
}

void test_40_020E()
{
    if (skip_test_40_020E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF48E);
    WriteRegisterWord(RegisterType::SP, 0xCC21);
    WriteRegisterByte(RegisterType::A, 0x40);
    WriteRegisterByte(RegisterType::B, 0x10);
    WriteRegisterByte(RegisterType::C, 0xDA);
    WriteRegisterByte(RegisterType::D, 0x04);
    WriteRegisterByte(RegisterType::E, 0xE8);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x7B);
    WriteRegisterByte(RegisterType::L, 0xFD);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF48E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x40);
    CheckRegisterByte(RegisterType::B, 0x10);
    CheckRegisterByte(RegisterType::C, 0xDA);
    CheckRegisterByte(RegisterType::D, 0x04);
    CheckRegisterByte(RegisterType::E, 0xE8);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x7B);
    CheckRegisterByte(RegisterType::L, 0xFD);
    WriteRegisterWord(RegisterType::PC, 0xF48F);
    WriteRegisterWord(RegisterType::SP, 0xCC21);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF48E, 0x40);
}

void test_40_020F()
{
    if (skip_test_40_020F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7397);
    WriteRegisterWord(RegisterType::SP, 0x4D86);
    WriteRegisterByte(RegisterType::A, 0x6A);
    WriteRegisterByte(RegisterType::B, 0x28);
    WriteRegisterByte(RegisterType::C, 0x1A);
    WriteRegisterByte(RegisterType::D, 0xC0);
    WriteRegisterByte(RegisterType::E, 0x8D);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x0E);
    WriteRegisterByte(RegisterType::L, 0xCE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7397, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6A);
    CheckRegisterByte(RegisterType::B, 0x28);
    CheckRegisterByte(RegisterType::C, 0x1A);
    CheckRegisterByte(RegisterType::D, 0xC0);
    CheckRegisterByte(RegisterType::E, 0x8D);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x0E);
    CheckRegisterByte(RegisterType::L, 0xCE);
    WriteRegisterWord(RegisterType::PC, 0x7398);
    WriteRegisterWord(RegisterType::SP, 0x4D86);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7397, 0x40);
}

void test_40_0210()
{
    if (skip_test_40_0210)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x02CD);
    WriteRegisterWord(RegisterType::SP, 0xFBC7);
    WriteRegisterByte(RegisterType::A, 0xA9);
    WriteRegisterByte(RegisterType::B, 0xF4);
    WriteRegisterByte(RegisterType::C, 0xFE);
    WriteRegisterByte(RegisterType::D, 0x86);
    WriteRegisterByte(RegisterType::E, 0x1C);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x26);
    WriteRegisterByte(RegisterType::L, 0x67);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x02CD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA9);
    CheckRegisterByte(RegisterType::B, 0xF4);
    CheckRegisterByte(RegisterType::C, 0xFE);
    CheckRegisterByte(RegisterType::D, 0x86);
    CheckRegisterByte(RegisterType::E, 0x1C);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x26);
    CheckRegisterByte(RegisterType::L, 0x67);
    WriteRegisterWord(RegisterType::PC, 0x02CE);
    WriteRegisterWord(RegisterType::SP, 0xFBC7);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x02CD, 0x40);
}

void test_40_0211()
{
    if (skip_test_40_0211)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA06D);
    WriteRegisterWord(RegisterType::SP, 0x232E);
    WriteRegisterByte(RegisterType::A, 0xBF);
    WriteRegisterByte(RegisterType::B, 0xE4);
    WriteRegisterByte(RegisterType::C, 0x75);
    WriteRegisterByte(RegisterType::D, 0x06);
    WriteRegisterByte(RegisterType::E, 0xC9);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xA8);
    WriteRegisterByte(RegisterType::L, 0xA2);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA06D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBF);
    CheckRegisterByte(RegisterType::B, 0xE4);
    CheckRegisterByte(RegisterType::C, 0x75);
    CheckRegisterByte(RegisterType::D, 0x06);
    CheckRegisterByte(RegisterType::E, 0xC9);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xA8);
    CheckRegisterByte(RegisterType::L, 0xA2);
    WriteRegisterWord(RegisterType::PC, 0xA06E);
    WriteRegisterWord(RegisterType::SP, 0x232E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA06D, 0x40);
}

void test_40_0212()
{
    if (skip_test_40_0212)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF0EF);
    WriteRegisterWord(RegisterType::SP, 0xFFC2);
    WriteRegisterByte(RegisterType::A, 0x91);
    WriteRegisterByte(RegisterType::B, 0x56);
    WriteRegisterByte(RegisterType::C, 0x0E);
    WriteRegisterByte(RegisterType::D, 0x17);
    WriteRegisterByte(RegisterType::E, 0x1B);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xE6);
    WriteRegisterByte(RegisterType::L, 0xA2);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF0EF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x91);
    CheckRegisterByte(RegisterType::B, 0x56);
    CheckRegisterByte(RegisterType::C, 0x0E);
    CheckRegisterByte(RegisterType::D, 0x17);
    CheckRegisterByte(RegisterType::E, 0x1B);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xE6);
    CheckRegisterByte(RegisterType::L, 0xA2);
    WriteRegisterWord(RegisterType::PC, 0xF0F0);
    WriteRegisterWord(RegisterType::SP, 0xFFC2);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF0EF, 0x40);
}

void test_40_0213()
{
    if (skip_test_40_0213)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5D43);
    WriteRegisterWord(RegisterType::SP, 0x6DB4);
    WriteRegisterByte(RegisterType::A, 0x28);
    WriteRegisterByte(RegisterType::B, 0xEF);
    WriteRegisterByte(RegisterType::C, 0x2C);
    WriteRegisterByte(RegisterType::D, 0xAA);
    WriteRegisterByte(RegisterType::E, 0x82);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x4D);
    WriteRegisterByte(RegisterType::L, 0x71);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5D43, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x28);
    CheckRegisterByte(RegisterType::B, 0xEF);
    CheckRegisterByte(RegisterType::C, 0x2C);
    CheckRegisterByte(RegisterType::D, 0xAA);
    CheckRegisterByte(RegisterType::E, 0x82);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x4D);
    CheckRegisterByte(RegisterType::L, 0x71);
    WriteRegisterWord(RegisterType::PC, 0x5D44);
    WriteRegisterWord(RegisterType::SP, 0x6DB4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5D43, 0x40);
}

void test_40_0214()
{
    if (skip_test_40_0214)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7CF6);
    WriteRegisterWord(RegisterType::SP, 0x97D7);
    WriteRegisterByte(RegisterType::A, 0x95);
    WriteRegisterByte(RegisterType::B, 0x74);
    WriteRegisterByte(RegisterType::C, 0x00);
    WriteRegisterByte(RegisterType::D, 0x46);
    WriteRegisterByte(RegisterType::E, 0xD7);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x22);
    WriteRegisterByte(RegisterType::L, 0x6B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7CF6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x95);
    CheckRegisterByte(RegisterType::B, 0x74);
    CheckRegisterByte(RegisterType::C, 0x00);
    CheckRegisterByte(RegisterType::D, 0x46);
    CheckRegisterByte(RegisterType::E, 0xD7);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x22);
    CheckRegisterByte(RegisterType::L, 0x6B);
    WriteRegisterWord(RegisterType::PC, 0x7CF7);
    WriteRegisterWord(RegisterType::SP, 0x97D7);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7CF6, 0x40);
}

void test_40_0215()
{
    if (skip_test_40_0215)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC40C);
    WriteRegisterWord(RegisterType::SP, 0x13CB);
    WriteRegisterByte(RegisterType::A, 0x99);
    WriteRegisterByte(RegisterType::B, 0x5F);
    WriteRegisterByte(RegisterType::C, 0xAB);
    WriteRegisterByte(RegisterType::D, 0xC1);
    WriteRegisterByte(RegisterType::E, 0xCA);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x30);
    WriteRegisterByte(RegisterType::L, 0xE6);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC40C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x99);
    CheckRegisterByte(RegisterType::B, 0x5F);
    CheckRegisterByte(RegisterType::C, 0xAB);
    CheckRegisterByte(RegisterType::D, 0xC1);
    CheckRegisterByte(RegisterType::E, 0xCA);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x30);
    CheckRegisterByte(RegisterType::L, 0xE6);
    WriteRegisterWord(RegisterType::PC, 0xC40D);
    WriteRegisterWord(RegisterType::SP, 0x13CB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC40C, 0x40);
}

void test_40_0216()
{
    if (skip_test_40_0216)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x34EE);
    WriteRegisterWord(RegisterType::SP, 0x50C3);
    WriteRegisterByte(RegisterType::A, 0xBA);
    WriteRegisterByte(RegisterType::B, 0xE1);
    WriteRegisterByte(RegisterType::C, 0x31);
    WriteRegisterByte(RegisterType::D, 0x1E);
    WriteRegisterByte(RegisterType::E, 0x6A);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x86);
    WriteRegisterByte(RegisterType::L, 0xA1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x34EE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBA);
    CheckRegisterByte(RegisterType::B, 0xE1);
    CheckRegisterByte(RegisterType::C, 0x31);
    CheckRegisterByte(RegisterType::D, 0x1E);
    CheckRegisterByte(RegisterType::E, 0x6A);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x86);
    CheckRegisterByte(RegisterType::L, 0xA1);
    WriteRegisterWord(RegisterType::PC, 0x34EF);
    WriteRegisterWord(RegisterType::SP, 0x50C3);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x34EE, 0x40);
}

void test_40_0217()
{
    if (skip_test_40_0217)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9184);
    WriteRegisterWord(RegisterType::SP, 0xC865);
    WriteRegisterByte(RegisterType::A, 0x9E);
    WriteRegisterByte(RegisterType::B, 0x95);
    WriteRegisterByte(RegisterType::C, 0xCD);
    WriteRegisterByte(RegisterType::D, 0xEB);
    WriteRegisterByte(RegisterType::E, 0xFE);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xC1);
    WriteRegisterByte(RegisterType::L, 0xC8);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x9184, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9E);
    CheckRegisterByte(RegisterType::B, 0x95);
    CheckRegisterByte(RegisterType::C, 0xCD);
    CheckRegisterByte(RegisterType::D, 0xEB);
    CheckRegisterByte(RegisterType::E, 0xFE);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xC1);
    CheckRegisterByte(RegisterType::L, 0xC8);
    WriteRegisterWord(RegisterType::PC, 0x9185);
    WriteRegisterWord(RegisterType::SP, 0xC865);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9184, 0x40);
}

void test_40_0218()
{
    if (skip_test_40_0218)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAF22);
    WriteRegisterWord(RegisterType::SP, 0xCAFE);
    WriteRegisterByte(RegisterType::A, 0xC6);
    WriteRegisterByte(RegisterType::B, 0xCB);
    WriteRegisterByte(RegisterType::C, 0xD5);
    WriteRegisterByte(RegisterType::D, 0xC0);
    WriteRegisterByte(RegisterType::E, 0xD8);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xA6);
    WriteRegisterByte(RegisterType::L, 0x53);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xAF22, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC6);
    CheckRegisterByte(RegisterType::B, 0xCB);
    CheckRegisterByte(RegisterType::C, 0xD5);
    CheckRegisterByte(RegisterType::D, 0xC0);
    CheckRegisterByte(RegisterType::E, 0xD8);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xA6);
    CheckRegisterByte(RegisterType::L, 0x53);
    WriteRegisterWord(RegisterType::PC, 0xAF23);
    WriteRegisterWord(RegisterType::SP, 0xCAFE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xAF22, 0x40);
}

void test_40_0219()
{
    if (skip_test_40_0219)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x10A4);
    WriteRegisterWord(RegisterType::SP, 0xACDF);
    WriteRegisterByte(RegisterType::A, 0x56);
    WriteRegisterByte(RegisterType::B, 0x5B);
    WriteRegisterByte(RegisterType::C, 0xD3);
    WriteRegisterByte(RegisterType::D, 0xBE);
    WriteRegisterByte(RegisterType::E, 0xD4);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x3D);
    WriteRegisterByte(RegisterType::L, 0x60);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x10A4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x56);
    CheckRegisterByte(RegisterType::B, 0x5B);
    CheckRegisterByte(RegisterType::C, 0xD3);
    CheckRegisterByte(RegisterType::D, 0xBE);
    CheckRegisterByte(RegisterType::E, 0xD4);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x3D);
    CheckRegisterByte(RegisterType::L, 0x60);
    WriteRegisterWord(RegisterType::PC, 0x10A5);
    WriteRegisterWord(RegisterType::SP, 0xACDF);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x10A4, 0x40);
}

void test_40_021A()
{
    if (skip_test_40_021A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD06E);
    WriteRegisterWord(RegisterType::SP, 0x34B0);
    WriteRegisterByte(RegisterType::A, 0x9D);
    WriteRegisterByte(RegisterType::B, 0x23);
    WriteRegisterByte(RegisterType::C, 0x1A);
    WriteRegisterByte(RegisterType::D, 0x7A);
    WriteRegisterByte(RegisterType::E, 0x44);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x5E);
    WriteRegisterByte(RegisterType::L, 0x43);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD06E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9D);
    CheckRegisterByte(RegisterType::B, 0x23);
    CheckRegisterByte(RegisterType::C, 0x1A);
    CheckRegisterByte(RegisterType::D, 0x7A);
    CheckRegisterByte(RegisterType::E, 0x44);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x5E);
    CheckRegisterByte(RegisterType::L, 0x43);
    WriteRegisterWord(RegisterType::PC, 0xD06F);
    WriteRegisterWord(RegisterType::SP, 0x34B0);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD06E, 0x40);
}

void test_40_021B()
{
    if (skip_test_40_021B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD0F9);
    WriteRegisterWord(RegisterType::SP, 0x7699);
    WriteRegisterByte(RegisterType::A, 0x92);
    WriteRegisterByte(RegisterType::B, 0x6A);
    WriteRegisterByte(RegisterType::C, 0x88);
    WriteRegisterByte(RegisterType::D, 0xBA);
    WriteRegisterByte(RegisterType::E, 0xAE);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xA5);
    WriteRegisterByte(RegisterType::L, 0xF0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD0F9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x92);
    CheckRegisterByte(RegisterType::B, 0x6A);
    CheckRegisterByte(RegisterType::C, 0x88);
    CheckRegisterByte(RegisterType::D, 0xBA);
    CheckRegisterByte(RegisterType::E, 0xAE);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xA5);
    CheckRegisterByte(RegisterType::L, 0xF0);
    WriteRegisterWord(RegisterType::PC, 0xD0FA);
    WriteRegisterWord(RegisterType::SP, 0x7699);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD0F9, 0x40);
}

void test_40_021C()
{
    if (skip_test_40_021C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6F22);
    WriteRegisterWord(RegisterType::SP, 0x011F);
    WriteRegisterByte(RegisterType::A, 0x6B);
    WriteRegisterByte(RegisterType::B, 0xB9);
    WriteRegisterByte(RegisterType::C, 0xFE);
    WriteRegisterByte(RegisterType::D, 0x94);
    WriteRegisterByte(RegisterType::E, 0xA7);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x79);
    WriteRegisterByte(RegisterType::L, 0xD4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6F22, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6B);
    CheckRegisterByte(RegisterType::B, 0xB9);
    CheckRegisterByte(RegisterType::C, 0xFE);
    CheckRegisterByte(RegisterType::D, 0x94);
    CheckRegisterByte(RegisterType::E, 0xA7);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x79);
    CheckRegisterByte(RegisterType::L, 0xD4);
    WriteRegisterWord(RegisterType::PC, 0x6F23);
    WriteRegisterWord(RegisterType::SP, 0x011F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6F22, 0x40);
}

void test_40_021D()
{
    if (skip_test_40_021D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEC7B);
    WriteRegisterWord(RegisterType::SP, 0x3AC8);
    WriteRegisterByte(RegisterType::A, 0x41);
    WriteRegisterByte(RegisterType::B, 0x26);
    WriteRegisterByte(RegisterType::C, 0x47);
    WriteRegisterByte(RegisterType::D, 0x85);
    WriteRegisterByte(RegisterType::E, 0x4A);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xC1);
    WriteRegisterByte(RegisterType::L, 0x70);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEC7B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x41);
    CheckRegisterByte(RegisterType::B, 0x26);
    CheckRegisterByte(RegisterType::C, 0x47);
    CheckRegisterByte(RegisterType::D, 0x85);
    CheckRegisterByte(RegisterType::E, 0x4A);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xC1);
    CheckRegisterByte(RegisterType::L, 0x70);
    WriteRegisterWord(RegisterType::PC, 0xEC7C);
    WriteRegisterWord(RegisterType::SP, 0x3AC8);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEC7B, 0x40);
}

void test_40_021E()
{
    if (skip_test_40_021E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x33A6);
    WriteRegisterWord(RegisterType::SP, 0x7155);
    WriteRegisterByte(RegisterType::A, 0x8C);
    WriteRegisterByte(RegisterType::B, 0x22);
    WriteRegisterByte(RegisterType::C, 0x2B);
    WriteRegisterByte(RegisterType::D, 0x34);
    WriteRegisterByte(RegisterType::E, 0x8D);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xEF);
    WriteRegisterByte(RegisterType::L, 0x08);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x33A6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8C);
    CheckRegisterByte(RegisterType::B, 0x22);
    CheckRegisterByte(RegisterType::C, 0x2B);
    CheckRegisterByte(RegisterType::D, 0x34);
    CheckRegisterByte(RegisterType::E, 0x8D);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xEF);
    CheckRegisterByte(RegisterType::L, 0x08);
    WriteRegisterWord(RegisterType::PC, 0x33A7);
    WriteRegisterWord(RegisterType::SP, 0x7155);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x33A6, 0x40);
}

void test_40_021F()
{
    if (skip_test_40_021F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x01DD);
    WriteRegisterWord(RegisterType::SP, 0x966E);
    WriteRegisterByte(RegisterType::A, 0x70);
    WriteRegisterByte(RegisterType::B, 0x4C);
    WriteRegisterByte(RegisterType::C, 0x9C);
    WriteRegisterByte(RegisterType::D, 0x6D);
    WriteRegisterByte(RegisterType::E, 0x0D);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x77);
    WriteRegisterByte(RegisterType::L, 0x63);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x01DD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x70);
    CheckRegisterByte(RegisterType::B, 0x4C);
    CheckRegisterByte(RegisterType::C, 0x9C);
    CheckRegisterByte(RegisterType::D, 0x6D);
    CheckRegisterByte(RegisterType::E, 0x0D);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x77);
    CheckRegisterByte(RegisterType::L, 0x63);
    WriteRegisterWord(RegisterType::PC, 0x01DE);
    WriteRegisterWord(RegisterType::SP, 0x966E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x01DD, 0x40);
}

void test_40_0220()
{
    if (skip_test_40_0220)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA0C4);
    WriteRegisterWord(RegisterType::SP, 0x5F1C);
    WriteRegisterByte(RegisterType::A, 0x27);
    WriteRegisterByte(RegisterType::B, 0x8D);
    WriteRegisterByte(RegisterType::C, 0xD0);
    WriteRegisterByte(RegisterType::D, 0x08);
    WriteRegisterByte(RegisterType::E, 0x81);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x71);
    WriteRegisterByte(RegisterType::L, 0x7B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA0C4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x27);
    CheckRegisterByte(RegisterType::B, 0x8D);
    CheckRegisterByte(RegisterType::C, 0xD0);
    CheckRegisterByte(RegisterType::D, 0x08);
    CheckRegisterByte(RegisterType::E, 0x81);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x71);
    CheckRegisterByte(RegisterType::L, 0x7B);
    WriteRegisterWord(RegisterType::PC, 0xA0C5);
    WriteRegisterWord(RegisterType::SP, 0x5F1C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA0C4, 0x40);
}

void test_40_0221()
{
    if (skip_test_40_0221)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD787);
    WriteRegisterWord(RegisterType::SP, 0xC24C);
    WriteRegisterByte(RegisterType::A, 0x04);
    WriteRegisterByte(RegisterType::B, 0x24);
    WriteRegisterByte(RegisterType::C, 0x66);
    WriteRegisterByte(RegisterType::D, 0x0F);
    WriteRegisterByte(RegisterType::E, 0xD2);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x11);
    WriteRegisterByte(RegisterType::L, 0x86);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD787, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x04);
    CheckRegisterByte(RegisterType::B, 0x24);
    CheckRegisterByte(RegisterType::C, 0x66);
    CheckRegisterByte(RegisterType::D, 0x0F);
    CheckRegisterByte(RegisterType::E, 0xD2);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x11);
    CheckRegisterByte(RegisterType::L, 0x86);
    WriteRegisterWord(RegisterType::PC, 0xD788);
    WriteRegisterWord(RegisterType::SP, 0xC24C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD787, 0x40);
}

void test_40_0222()
{
    if (skip_test_40_0222)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x671E);
    WriteRegisterWord(RegisterType::SP, 0x47D2);
    WriteRegisterByte(RegisterType::A, 0x17);
    WriteRegisterByte(RegisterType::B, 0x9F);
    WriteRegisterByte(RegisterType::C, 0xC5);
    WriteRegisterByte(RegisterType::D, 0x21);
    WriteRegisterByte(RegisterType::E, 0x6F);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xB3);
    WriteRegisterByte(RegisterType::L, 0x30);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x671E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x17);
    CheckRegisterByte(RegisterType::B, 0x9F);
    CheckRegisterByte(RegisterType::C, 0xC5);
    CheckRegisterByte(RegisterType::D, 0x21);
    CheckRegisterByte(RegisterType::E, 0x6F);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xB3);
    CheckRegisterByte(RegisterType::L, 0x30);
    WriteRegisterWord(RegisterType::PC, 0x671F);
    WriteRegisterWord(RegisterType::SP, 0x47D2);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x671E, 0x40);
}

void test_40_0223()
{
    if (skip_test_40_0223)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x26FA);
    WriteRegisterWord(RegisterType::SP, 0x9FEE);
    WriteRegisterByte(RegisterType::A, 0xD8);
    WriteRegisterByte(RegisterType::B, 0xDA);
    WriteRegisterByte(RegisterType::C, 0x25);
    WriteRegisterByte(RegisterType::D, 0x84);
    WriteRegisterByte(RegisterType::E, 0x23);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x68);
    WriteRegisterByte(RegisterType::L, 0x8E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x26FA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD8);
    CheckRegisterByte(RegisterType::B, 0xDA);
    CheckRegisterByte(RegisterType::C, 0x25);
    CheckRegisterByte(RegisterType::D, 0x84);
    CheckRegisterByte(RegisterType::E, 0x23);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x68);
    CheckRegisterByte(RegisterType::L, 0x8E);
    WriteRegisterWord(RegisterType::PC, 0x26FB);
    WriteRegisterWord(RegisterType::SP, 0x9FEE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x26FA, 0x40);
}

void test_40_0224()
{
    if (skip_test_40_0224)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEF20);
    WriteRegisterWord(RegisterType::SP, 0xFBBB);
    WriteRegisterByte(RegisterType::A, 0xF9);
    WriteRegisterByte(RegisterType::B, 0x52);
    WriteRegisterByte(RegisterType::C, 0x63);
    WriteRegisterByte(RegisterType::D, 0x92);
    WriteRegisterByte(RegisterType::E, 0x63);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x06);
    WriteRegisterByte(RegisterType::L, 0x62);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEF20, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF9);
    CheckRegisterByte(RegisterType::B, 0x52);
    CheckRegisterByte(RegisterType::C, 0x63);
    CheckRegisterByte(RegisterType::D, 0x92);
    CheckRegisterByte(RegisterType::E, 0x63);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x06);
    CheckRegisterByte(RegisterType::L, 0x62);
    WriteRegisterWord(RegisterType::PC, 0xEF21);
    WriteRegisterWord(RegisterType::SP, 0xFBBB);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEF20, 0x40);
}

void test_40_0225()
{
    if (skip_test_40_0225)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x346D);
    WriteRegisterWord(RegisterType::SP, 0x4A9A);
    WriteRegisterByte(RegisterType::A, 0x6B);
    WriteRegisterByte(RegisterType::B, 0xD3);
    WriteRegisterByte(RegisterType::C, 0xBE);
    WriteRegisterByte(RegisterType::D, 0xDC);
    WriteRegisterByte(RegisterType::E, 0x99);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xB5);
    WriteRegisterByte(RegisterType::L, 0xC1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x346D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6B);
    CheckRegisterByte(RegisterType::B, 0xD3);
    CheckRegisterByte(RegisterType::C, 0xBE);
    CheckRegisterByte(RegisterType::D, 0xDC);
    CheckRegisterByte(RegisterType::E, 0x99);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xB5);
    CheckRegisterByte(RegisterType::L, 0xC1);
    WriteRegisterWord(RegisterType::PC, 0x346E);
    WriteRegisterWord(RegisterType::SP, 0x4A9A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x346D, 0x40);
}

void test_40_0226()
{
    if (skip_test_40_0226)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD162);
    WriteRegisterWord(RegisterType::SP, 0x3407);
    WriteRegisterByte(RegisterType::A, 0x08);
    WriteRegisterByte(RegisterType::B, 0x85);
    WriteRegisterByte(RegisterType::C, 0xEE);
    WriteRegisterByte(RegisterType::D, 0x85);
    WriteRegisterByte(RegisterType::E, 0xDB);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x3E);
    WriteRegisterByte(RegisterType::L, 0x80);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD162, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x08);
    CheckRegisterByte(RegisterType::B, 0x85);
    CheckRegisterByte(RegisterType::C, 0xEE);
    CheckRegisterByte(RegisterType::D, 0x85);
    CheckRegisterByte(RegisterType::E, 0xDB);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x3E);
    CheckRegisterByte(RegisterType::L, 0x80);
    WriteRegisterWord(RegisterType::PC, 0xD163);
    WriteRegisterWord(RegisterType::SP, 0x3407);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD162, 0x40);
}

void test_40_0227()
{
    if (skip_test_40_0227)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBBFE);
    WriteRegisterWord(RegisterType::SP, 0x5963);
    WriteRegisterByte(RegisterType::A, 0x5F);
    WriteRegisterByte(RegisterType::B, 0x72);
    WriteRegisterByte(RegisterType::C, 0xE8);
    WriteRegisterByte(RegisterType::D, 0x13);
    WriteRegisterByte(RegisterType::E, 0xD6);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xA0);
    WriteRegisterByte(RegisterType::L, 0xC0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBBFE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5F);
    CheckRegisterByte(RegisterType::B, 0x72);
    CheckRegisterByte(RegisterType::C, 0xE8);
    CheckRegisterByte(RegisterType::D, 0x13);
    CheckRegisterByte(RegisterType::E, 0xD6);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xA0);
    CheckRegisterByte(RegisterType::L, 0xC0);
    WriteRegisterWord(RegisterType::PC, 0xBBFF);
    WriteRegisterWord(RegisterType::SP, 0x5963);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xBBFE, 0x40);
}

void test_40_0228()
{
    if (skip_test_40_0228)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9908);
    WriteRegisterWord(RegisterType::SP, 0x1F11);
    WriteRegisterByte(RegisterType::A, 0xEA);
    WriteRegisterByte(RegisterType::B, 0x3F);
    WriteRegisterByte(RegisterType::C, 0xFC);
    WriteRegisterByte(RegisterType::D, 0x8E);
    WriteRegisterByte(RegisterType::E, 0x12);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x35);
    WriteRegisterByte(RegisterType::L, 0xAF);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9908, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEA);
    CheckRegisterByte(RegisterType::B, 0x3F);
    CheckRegisterByte(RegisterType::C, 0xFC);
    CheckRegisterByte(RegisterType::D, 0x8E);
    CheckRegisterByte(RegisterType::E, 0x12);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x35);
    CheckRegisterByte(RegisterType::L, 0xAF);
    WriteRegisterWord(RegisterType::PC, 0x9909);
    WriteRegisterWord(RegisterType::SP, 0x1F11);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9908, 0x40);
}

void test_40_0229()
{
    if (skip_test_40_0229)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x42BF);
    WriteRegisterWord(RegisterType::SP, 0x645C);
    WriteRegisterByte(RegisterType::A, 0x22);
    WriteRegisterByte(RegisterType::B, 0x61);
    WriteRegisterByte(RegisterType::C, 0x2D);
    WriteRegisterByte(RegisterType::D, 0x84);
    WriteRegisterByte(RegisterType::E, 0x36);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xBA);
    WriteRegisterByte(RegisterType::L, 0x8C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x42BF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x22);
    CheckRegisterByte(RegisterType::B, 0x61);
    CheckRegisterByte(RegisterType::C, 0x2D);
    CheckRegisterByte(RegisterType::D, 0x84);
    CheckRegisterByte(RegisterType::E, 0x36);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xBA);
    CheckRegisterByte(RegisterType::L, 0x8C);
    WriteRegisterWord(RegisterType::PC, 0x42C0);
    WriteRegisterWord(RegisterType::SP, 0x645C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x42BF, 0x40);
}

void test_40_022A()
{
    if (skip_test_40_022A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFFE9);
    WriteRegisterWord(RegisterType::SP, 0x0FEB);
    WriteRegisterByte(RegisterType::A, 0x8F);
    WriteRegisterByte(RegisterType::B, 0x7F);
    WriteRegisterByte(RegisterType::C, 0xE9);
    WriteRegisterByte(RegisterType::D, 0xED);
    WriteRegisterByte(RegisterType::E, 0xF2);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xE4);
    WriteRegisterByte(RegisterType::L, 0xD0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFFE9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8F);
    CheckRegisterByte(RegisterType::B, 0x7F);
    CheckRegisterByte(RegisterType::C, 0xE9);
    CheckRegisterByte(RegisterType::D, 0xED);
    CheckRegisterByte(RegisterType::E, 0xF2);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xE4);
    CheckRegisterByte(RegisterType::L, 0xD0);
    WriteRegisterWord(RegisterType::PC, 0xFFEA);
    WriteRegisterWord(RegisterType::SP, 0x0FEB);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFFE9, 0x40);
}

void test_40_022B()
{
    if (skip_test_40_022B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBD1D);
    WriteRegisterWord(RegisterType::SP, 0x68BA);
    WriteRegisterByte(RegisterType::A, 0x9D);
    WriteRegisterByte(RegisterType::B, 0xAD);
    WriteRegisterByte(RegisterType::C, 0x8D);
    WriteRegisterByte(RegisterType::D, 0x7C);
    WriteRegisterByte(RegisterType::E, 0x82);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x52);
    WriteRegisterByte(RegisterType::L, 0x01);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xBD1D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9D);
    CheckRegisterByte(RegisterType::B, 0xAD);
    CheckRegisterByte(RegisterType::C, 0x8D);
    CheckRegisterByte(RegisterType::D, 0x7C);
    CheckRegisterByte(RegisterType::E, 0x82);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x52);
    CheckRegisterByte(RegisterType::L, 0x01);
    WriteRegisterWord(RegisterType::PC, 0xBD1E);
    WriteRegisterWord(RegisterType::SP, 0x68BA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xBD1D, 0x40);
}

void test_40_022C()
{
    if (skip_test_40_022C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCF96);
    WriteRegisterWord(RegisterType::SP, 0x3B97);
    WriteRegisterByte(RegisterType::A, 0xBB);
    WriteRegisterByte(RegisterType::B, 0x37);
    WriteRegisterByte(RegisterType::C, 0xAD);
    WriteRegisterByte(RegisterType::D, 0x07);
    WriteRegisterByte(RegisterType::E, 0xD0);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x20);
    WriteRegisterByte(RegisterType::L, 0xBE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCF96, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBB);
    CheckRegisterByte(RegisterType::B, 0x37);
    CheckRegisterByte(RegisterType::C, 0xAD);
    CheckRegisterByte(RegisterType::D, 0x07);
    CheckRegisterByte(RegisterType::E, 0xD0);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x20);
    CheckRegisterByte(RegisterType::L, 0xBE);
    WriteRegisterWord(RegisterType::PC, 0xCF97);
    WriteRegisterWord(RegisterType::SP, 0x3B97);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xCF96, 0x40);
}

void test_40_022D()
{
    if (skip_test_40_022D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF5A1);
    WriteRegisterWord(RegisterType::SP, 0xCF6D);
    WriteRegisterByte(RegisterType::A, 0x14);
    WriteRegisterByte(RegisterType::B, 0xD7);
    WriteRegisterByte(RegisterType::C, 0xE4);
    WriteRegisterByte(RegisterType::D, 0x09);
    WriteRegisterByte(RegisterType::E, 0xCB);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x16);
    WriteRegisterByte(RegisterType::L, 0xDA);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF5A1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x14);
    CheckRegisterByte(RegisterType::B, 0xD7);
    CheckRegisterByte(RegisterType::C, 0xE4);
    CheckRegisterByte(RegisterType::D, 0x09);
    CheckRegisterByte(RegisterType::E, 0xCB);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x16);
    CheckRegisterByte(RegisterType::L, 0xDA);
    WriteRegisterWord(RegisterType::PC, 0xF5A2);
    WriteRegisterWord(RegisterType::SP, 0xCF6D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF5A1, 0x40);
}

void test_40_022E()
{
    if (skip_test_40_022E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x69E9);
    WriteRegisterWord(RegisterType::SP, 0xF5B4);
    WriteRegisterByte(RegisterType::A, 0xE6);
    WriteRegisterByte(RegisterType::B, 0xF4);
    WriteRegisterByte(RegisterType::C, 0x69);
    WriteRegisterByte(RegisterType::D, 0x23);
    WriteRegisterByte(RegisterType::E, 0xFD);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x01);
    WriteRegisterByte(RegisterType::L, 0x43);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x69E9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE6);
    CheckRegisterByte(RegisterType::B, 0xF4);
    CheckRegisterByte(RegisterType::C, 0x69);
    CheckRegisterByte(RegisterType::D, 0x23);
    CheckRegisterByte(RegisterType::E, 0xFD);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x01);
    CheckRegisterByte(RegisterType::L, 0x43);
    WriteRegisterWord(RegisterType::PC, 0x69EA);
    WriteRegisterWord(RegisterType::SP, 0xF5B4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x69E9, 0x40);
}

void test_40_022F()
{
    if (skip_test_40_022F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0976);
    WriteRegisterWord(RegisterType::SP, 0x202D);
    WriteRegisterByte(RegisterType::A, 0x39);
    WriteRegisterByte(RegisterType::B, 0x5A);
    WriteRegisterByte(RegisterType::C, 0x43);
    WriteRegisterByte(RegisterType::D, 0xAF);
    WriteRegisterByte(RegisterType::E, 0x7E);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x73);
    WriteRegisterByte(RegisterType::L, 0xF0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0976, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x39);
    CheckRegisterByte(RegisterType::B, 0x5A);
    CheckRegisterByte(RegisterType::C, 0x43);
    CheckRegisterByte(RegisterType::D, 0xAF);
    CheckRegisterByte(RegisterType::E, 0x7E);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x73);
    CheckRegisterByte(RegisterType::L, 0xF0);
    WriteRegisterWord(RegisterType::PC, 0x0977);
    WriteRegisterWord(RegisterType::SP, 0x202D);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0976, 0x40);
}

void test_40_0230()
{
    if (skip_test_40_0230)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4876);
    WriteRegisterWord(RegisterType::SP, 0xF561);
    WriteRegisterByte(RegisterType::A, 0x4A);
    WriteRegisterByte(RegisterType::B, 0x35);
    WriteRegisterByte(RegisterType::C, 0xBF);
    WriteRegisterByte(RegisterType::D, 0x10);
    WriteRegisterByte(RegisterType::E, 0xB5);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x0D);
    WriteRegisterByte(RegisterType::L, 0x43);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4876, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4A);
    CheckRegisterByte(RegisterType::B, 0x35);
    CheckRegisterByte(RegisterType::C, 0xBF);
    CheckRegisterByte(RegisterType::D, 0x10);
    CheckRegisterByte(RegisterType::E, 0xB5);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x0D);
    CheckRegisterByte(RegisterType::L, 0x43);
    WriteRegisterWord(RegisterType::PC, 0x4877);
    WriteRegisterWord(RegisterType::SP, 0xF561);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4876, 0x40);
}

void test_40_0231()
{
    if (skip_test_40_0231)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFC1C);
    WriteRegisterWord(RegisterType::SP, 0x5CB4);
    WriteRegisterByte(RegisterType::A, 0x2E);
    WriteRegisterByte(RegisterType::B, 0xCC);
    WriteRegisterByte(RegisterType::C, 0x8C);
    WriteRegisterByte(RegisterType::D, 0xBF);
    WriteRegisterByte(RegisterType::E, 0x85);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xE8);
    WriteRegisterByte(RegisterType::L, 0x1F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFC1C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2E);
    CheckRegisterByte(RegisterType::B, 0xCC);
    CheckRegisterByte(RegisterType::C, 0x8C);
    CheckRegisterByte(RegisterType::D, 0xBF);
    CheckRegisterByte(RegisterType::E, 0x85);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xE8);
    CheckRegisterByte(RegisterType::L, 0x1F);
    WriteRegisterWord(RegisterType::PC, 0xFC1D);
    WriteRegisterWord(RegisterType::SP, 0x5CB4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFC1C, 0x40);
}

void test_40_0232()
{
    if (skip_test_40_0232)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2554);
    WriteRegisterWord(RegisterType::SP, 0x7613);
    WriteRegisterByte(RegisterType::A, 0xF6);
    WriteRegisterByte(RegisterType::B, 0x66);
    WriteRegisterByte(RegisterType::C, 0x18);
    WriteRegisterByte(RegisterType::D, 0x5A);
    WriteRegisterByte(RegisterType::E, 0xBD);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xCF);
    WriteRegisterByte(RegisterType::L, 0xF2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2554, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF6);
    CheckRegisterByte(RegisterType::B, 0x66);
    CheckRegisterByte(RegisterType::C, 0x18);
    CheckRegisterByte(RegisterType::D, 0x5A);
    CheckRegisterByte(RegisterType::E, 0xBD);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xCF);
    CheckRegisterByte(RegisterType::L, 0xF2);
    WriteRegisterWord(RegisterType::PC, 0x2555);
    WriteRegisterWord(RegisterType::SP, 0x7613);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2554, 0x40);
}

void test_40_0233()
{
    if (skip_test_40_0233)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE8C0);
    WriteRegisterWord(RegisterType::SP, 0xD0E2);
    WriteRegisterByte(RegisterType::A, 0xF5);
    WriteRegisterByte(RegisterType::B, 0x71);
    WriteRegisterByte(RegisterType::C, 0xD7);
    WriteRegisterByte(RegisterType::D, 0xBC);
    WriteRegisterByte(RegisterType::E, 0x9A);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x8E);
    WriteRegisterByte(RegisterType::L, 0xF8);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xE8C0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF5);
    CheckRegisterByte(RegisterType::B, 0x71);
    CheckRegisterByte(RegisterType::C, 0xD7);
    CheckRegisterByte(RegisterType::D, 0xBC);
    CheckRegisterByte(RegisterType::E, 0x9A);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x8E);
    CheckRegisterByte(RegisterType::L, 0xF8);
    WriteRegisterWord(RegisterType::PC, 0xE8C1);
    WriteRegisterWord(RegisterType::SP, 0xD0E2);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE8C0, 0x40);
}

void test_40_0234()
{
    if (skip_test_40_0234)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDE02);
    WriteRegisterWord(RegisterType::SP, 0x9498);
    WriteRegisterByte(RegisterType::A, 0xFA);
    WriteRegisterByte(RegisterType::B, 0xAE);
    WriteRegisterByte(RegisterType::C, 0xA8);
    WriteRegisterByte(RegisterType::D, 0xC1);
    WriteRegisterByte(RegisterType::E, 0xAF);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x34);
    WriteRegisterByte(RegisterType::L, 0x7F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDE02, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFA);
    CheckRegisterByte(RegisterType::B, 0xAE);
    CheckRegisterByte(RegisterType::C, 0xA8);
    CheckRegisterByte(RegisterType::D, 0xC1);
    CheckRegisterByte(RegisterType::E, 0xAF);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x34);
    CheckRegisterByte(RegisterType::L, 0x7F);
    WriteRegisterWord(RegisterType::PC, 0xDE03);
    WriteRegisterWord(RegisterType::SP, 0x9498);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDE02, 0x40);
}

void test_40_0235()
{
    if (skip_test_40_0235)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x993E);
    WriteRegisterWord(RegisterType::SP, 0xE968);
    WriteRegisterByte(RegisterType::A, 0x67);
    WriteRegisterByte(RegisterType::B, 0x5E);
    WriteRegisterByte(RegisterType::C, 0x66);
    WriteRegisterByte(RegisterType::D, 0xEA);
    WriteRegisterByte(RegisterType::E, 0x45);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xE7);
    WriteRegisterByte(RegisterType::L, 0xF2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x993E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x67);
    CheckRegisterByte(RegisterType::B, 0x5E);
    CheckRegisterByte(RegisterType::C, 0x66);
    CheckRegisterByte(RegisterType::D, 0xEA);
    CheckRegisterByte(RegisterType::E, 0x45);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xE7);
    CheckRegisterByte(RegisterType::L, 0xF2);
    WriteRegisterWord(RegisterType::PC, 0x993F);
    WriteRegisterWord(RegisterType::SP, 0xE968);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x993E, 0x40);
}

void test_40_0236()
{
    if (skip_test_40_0236)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x076B);
    WriteRegisterWord(RegisterType::SP, 0x899A);
    WriteRegisterByte(RegisterType::A, 0xA4);
    WriteRegisterByte(RegisterType::B, 0x3C);
    WriteRegisterByte(RegisterType::C, 0x80);
    WriteRegisterByte(RegisterType::D, 0x4F);
    WriteRegisterByte(RegisterType::E, 0xA2);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x0E);
    WriteRegisterByte(RegisterType::L, 0x86);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x076B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA4);
    CheckRegisterByte(RegisterType::B, 0x3C);
    CheckRegisterByte(RegisterType::C, 0x80);
    CheckRegisterByte(RegisterType::D, 0x4F);
    CheckRegisterByte(RegisterType::E, 0xA2);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x0E);
    CheckRegisterByte(RegisterType::L, 0x86);
    WriteRegisterWord(RegisterType::PC, 0x076C);
    WriteRegisterWord(RegisterType::SP, 0x899A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x076B, 0x40);
}

void test_40_0237()
{
    if (skip_test_40_0237)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC743);
    WriteRegisterWord(RegisterType::SP, 0x4AAA);
    WriteRegisterByte(RegisterType::A, 0x49);
    WriteRegisterByte(RegisterType::B, 0xA7);
    WriteRegisterByte(RegisterType::C, 0x2E);
    WriteRegisterByte(RegisterType::D, 0xB6);
    WriteRegisterByte(RegisterType::E, 0xC2);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x2D);
    WriteRegisterByte(RegisterType::L, 0xEA);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC743, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x49);
    CheckRegisterByte(RegisterType::B, 0xA7);
    CheckRegisterByte(RegisterType::C, 0x2E);
    CheckRegisterByte(RegisterType::D, 0xB6);
    CheckRegisterByte(RegisterType::E, 0xC2);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x2D);
    CheckRegisterByte(RegisterType::L, 0xEA);
    WriteRegisterWord(RegisterType::PC, 0xC744);
    WriteRegisterWord(RegisterType::SP, 0x4AAA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC743, 0x40);
}

void test_40_0238()
{
    if (skip_test_40_0238)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC961);
    WriteRegisterWord(RegisterType::SP, 0x0FED);
    WriteRegisterByte(RegisterType::A, 0x21);
    WriteRegisterByte(RegisterType::B, 0xDE);
    WriteRegisterByte(RegisterType::C, 0x4A);
    WriteRegisterByte(RegisterType::D, 0x84);
    WriteRegisterByte(RegisterType::E, 0xB8);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x24);
    WriteRegisterByte(RegisterType::L, 0xF0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC961, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x21);
    CheckRegisterByte(RegisterType::B, 0xDE);
    CheckRegisterByte(RegisterType::C, 0x4A);
    CheckRegisterByte(RegisterType::D, 0x84);
    CheckRegisterByte(RegisterType::E, 0xB8);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x24);
    CheckRegisterByte(RegisterType::L, 0xF0);
    WriteRegisterWord(RegisterType::PC, 0xC962);
    WriteRegisterWord(RegisterType::SP, 0x0FED);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC961, 0x40);
}

void test_40_0239()
{
    if (skip_test_40_0239)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5989);
    WriteRegisterWord(RegisterType::SP, 0x94EC);
    WriteRegisterByte(RegisterType::A, 0x3E);
    WriteRegisterByte(RegisterType::B, 0x11);
    WriteRegisterByte(RegisterType::C, 0x1B);
    WriteRegisterByte(RegisterType::D, 0xBB);
    WriteRegisterByte(RegisterType::E, 0x59);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x16);
    WriteRegisterByte(RegisterType::L, 0x2C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5989, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3E);
    CheckRegisterByte(RegisterType::B, 0x11);
    CheckRegisterByte(RegisterType::C, 0x1B);
    CheckRegisterByte(RegisterType::D, 0xBB);
    CheckRegisterByte(RegisterType::E, 0x59);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x16);
    CheckRegisterByte(RegisterType::L, 0x2C);
    WriteRegisterWord(RegisterType::PC, 0x598A);
    WriteRegisterWord(RegisterType::SP, 0x94EC);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5989, 0x40);
}

void test_40_023A()
{
    if (skip_test_40_023A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAB9D);
    WriteRegisterWord(RegisterType::SP, 0xC373);
    WriteRegisterByte(RegisterType::A, 0x20);
    WriteRegisterByte(RegisterType::B, 0x2A);
    WriteRegisterByte(RegisterType::C, 0x9A);
    WriteRegisterByte(RegisterType::D, 0xBA);
    WriteRegisterByte(RegisterType::E, 0x8E);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x0C);
    WriteRegisterByte(RegisterType::L, 0x85);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xAB9D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x20);
    CheckRegisterByte(RegisterType::B, 0x2A);
    CheckRegisterByte(RegisterType::C, 0x9A);
    CheckRegisterByte(RegisterType::D, 0xBA);
    CheckRegisterByte(RegisterType::E, 0x8E);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x0C);
    CheckRegisterByte(RegisterType::L, 0x85);
    WriteRegisterWord(RegisterType::PC, 0xAB9E);
    WriteRegisterWord(RegisterType::SP, 0xC373);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAB9D, 0x40);
}

void test_40_023B()
{
    if (skip_test_40_023B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2205);
    WriteRegisterWord(RegisterType::SP, 0xD8DF);
    WriteRegisterByte(RegisterType::A, 0x07);
    WriteRegisterByte(RegisterType::B, 0xCE);
    WriteRegisterByte(RegisterType::C, 0xAD);
    WriteRegisterByte(RegisterType::D, 0xF9);
    WriteRegisterByte(RegisterType::E, 0xB9);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x33);
    WriteRegisterByte(RegisterType::L, 0xF5);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2205, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x07);
    CheckRegisterByte(RegisterType::B, 0xCE);
    CheckRegisterByte(RegisterType::C, 0xAD);
    CheckRegisterByte(RegisterType::D, 0xF9);
    CheckRegisterByte(RegisterType::E, 0xB9);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x33);
    CheckRegisterByte(RegisterType::L, 0xF5);
    WriteRegisterWord(RegisterType::PC, 0x2206);
    WriteRegisterWord(RegisterType::SP, 0xD8DF);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2205, 0x40);
}

void test_40_023C()
{
    if (skip_test_40_023C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x974C);
    WriteRegisterWord(RegisterType::SP, 0xFA1D);
    WriteRegisterByte(RegisterType::A, 0xDC);
    WriteRegisterByte(RegisterType::B, 0x42);
    WriteRegisterByte(RegisterType::C, 0x4A);
    WriteRegisterByte(RegisterType::D, 0x30);
    WriteRegisterByte(RegisterType::E, 0xC2);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x7F);
    WriteRegisterByte(RegisterType::L, 0x24);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x974C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDC);
    CheckRegisterByte(RegisterType::B, 0x42);
    CheckRegisterByte(RegisterType::C, 0x4A);
    CheckRegisterByte(RegisterType::D, 0x30);
    CheckRegisterByte(RegisterType::E, 0xC2);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x7F);
    CheckRegisterByte(RegisterType::L, 0x24);
    WriteRegisterWord(RegisterType::PC, 0x974D);
    WriteRegisterWord(RegisterType::SP, 0xFA1D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x974C, 0x40);
}

void test_40_023D()
{
    if (skip_test_40_023D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x10B8);
    WriteRegisterWord(RegisterType::SP, 0x3CFE);
    WriteRegisterByte(RegisterType::A, 0xB5);
    WriteRegisterByte(RegisterType::B, 0x8D);
    WriteRegisterByte(RegisterType::C, 0xE5);
    WriteRegisterByte(RegisterType::D, 0xC5);
    WriteRegisterByte(RegisterType::E, 0x90);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xA7);
    WriteRegisterByte(RegisterType::L, 0xBF);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x10B8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB5);
    CheckRegisterByte(RegisterType::B, 0x8D);
    CheckRegisterByte(RegisterType::C, 0xE5);
    CheckRegisterByte(RegisterType::D, 0xC5);
    CheckRegisterByte(RegisterType::E, 0x90);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xA7);
    CheckRegisterByte(RegisterType::L, 0xBF);
    WriteRegisterWord(RegisterType::PC, 0x10B9);
    WriteRegisterWord(RegisterType::SP, 0x3CFE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x10B8, 0x40);
}

void test_40_023E()
{
    if (skip_test_40_023E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1763);
    WriteRegisterWord(RegisterType::SP, 0xB60B);
    WriteRegisterByte(RegisterType::A, 0x6D);
    WriteRegisterByte(RegisterType::B, 0x34);
    WriteRegisterByte(RegisterType::C, 0x3A);
    WriteRegisterByte(RegisterType::D, 0x3F);
    WriteRegisterByte(RegisterType::E, 0xE6);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x73);
    WriteRegisterByte(RegisterType::L, 0x2E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1763, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6D);
    CheckRegisterByte(RegisterType::B, 0x34);
    CheckRegisterByte(RegisterType::C, 0x3A);
    CheckRegisterByte(RegisterType::D, 0x3F);
    CheckRegisterByte(RegisterType::E, 0xE6);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x73);
    CheckRegisterByte(RegisterType::L, 0x2E);
    WriteRegisterWord(RegisterType::PC, 0x1764);
    WriteRegisterWord(RegisterType::SP, 0xB60B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1763, 0x40);
}

void test_40_023F()
{
    if (skip_test_40_023F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5648);
    WriteRegisterWord(RegisterType::SP, 0x340C);
    WriteRegisterByte(RegisterType::A, 0x26);
    WriteRegisterByte(RegisterType::B, 0x24);
    WriteRegisterByte(RegisterType::C, 0xF8);
    WriteRegisterByte(RegisterType::D, 0x0A);
    WriteRegisterByte(RegisterType::E, 0xB5);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x1D);
    WriteRegisterByte(RegisterType::L, 0xE1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5648, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x26);
    CheckRegisterByte(RegisterType::B, 0x24);
    CheckRegisterByte(RegisterType::C, 0xF8);
    CheckRegisterByte(RegisterType::D, 0x0A);
    CheckRegisterByte(RegisterType::E, 0xB5);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x1D);
    CheckRegisterByte(RegisterType::L, 0xE1);
    WriteRegisterWord(RegisterType::PC, 0x5649);
    WriteRegisterWord(RegisterType::SP, 0x340C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5648, 0x40);
}

void test_40_0240()
{
    if (skip_test_40_0240)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x809F);
    WriteRegisterWord(RegisterType::SP, 0xB827);
    WriteRegisterByte(RegisterType::A, 0xFB);
    WriteRegisterByte(RegisterType::B, 0x9C);
    WriteRegisterByte(RegisterType::C, 0x5E);
    WriteRegisterByte(RegisterType::D, 0xB6);
    WriteRegisterByte(RegisterType::E, 0x0C);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x0B);
    WriteRegisterByte(RegisterType::L, 0x4F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x809F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFB);
    CheckRegisterByte(RegisterType::B, 0x9C);
    CheckRegisterByte(RegisterType::C, 0x5E);
    CheckRegisterByte(RegisterType::D, 0xB6);
    CheckRegisterByte(RegisterType::E, 0x0C);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x0B);
    CheckRegisterByte(RegisterType::L, 0x4F);
    WriteRegisterWord(RegisterType::PC, 0x80A0);
    WriteRegisterWord(RegisterType::SP, 0xB827);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x809F, 0x40);
}

void test_40_0241()
{
    if (skip_test_40_0241)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x270A);
    WriteRegisterWord(RegisterType::SP, 0x0EAD);
    WriteRegisterByte(RegisterType::A, 0xC8);
    WriteRegisterByte(RegisterType::B, 0x52);
    WriteRegisterByte(RegisterType::C, 0x57);
    WriteRegisterByte(RegisterType::D, 0x87);
    WriteRegisterByte(RegisterType::E, 0xD8);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xE6);
    WriteRegisterByte(RegisterType::L, 0x1B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x270A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC8);
    CheckRegisterByte(RegisterType::B, 0x52);
    CheckRegisterByte(RegisterType::C, 0x57);
    CheckRegisterByte(RegisterType::D, 0x87);
    CheckRegisterByte(RegisterType::E, 0xD8);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xE6);
    CheckRegisterByte(RegisterType::L, 0x1B);
    WriteRegisterWord(RegisterType::PC, 0x270B);
    WriteRegisterWord(RegisterType::SP, 0x0EAD);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x270A, 0x40);
}

void test_40_0242()
{
    if (skip_test_40_0242)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2097);
    WriteRegisterWord(RegisterType::SP, 0x5D0A);
    WriteRegisterByte(RegisterType::A, 0xFE);
    WriteRegisterByte(RegisterType::B, 0x40);
    WriteRegisterByte(RegisterType::C, 0xB0);
    WriteRegisterByte(RegisterType::D, 0x72);
    WriteRegisterByte(RegisterType::E, 0x92);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x2D);
    WriteRegisterByte(RegisterType::L, 0x94);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2097, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFE);
    CheckRegisterByte(RegisterType::B, 0x40);
    CheckRegisterByte(RegisterType::C, 0xB0);
    CheckRegisterByte(RegisterType::D, 0x72);
    CheckRegisterByte(RegisterType::E, 0x92);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x2D);
    CheckRegisterByte(RegisterType::L, 0x94);
    WriteRegisterWord(RegisterType::PC, 0x2098);
    WriteRegisterWord(RegisterType::SP, 0x5D0A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2097, 0x40);
}

void test_40_0243()
{
    if (skip_test_40_0243)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEB9A);
    WriteRegisterWord(RegisterType::SP, 0xD30D);
    WriteRegisterByte(RegisterType::A, 0x1D);
    WriteRegisterByte(RegisterType::B, 0xC6);
    WriteRegisterByte(RegisterType::C, 0xE4);
    WriteRegisterByte(RegisterType::D, 0x8D);
    WriteRegisterByte(RegisterType::E, 0xAC);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x2B);
    WriteRegisterByte(RegisterType::L, 0xEA);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xEB9A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1D);
    CheckRegisterByte(RegisterType::B, 0xC6);
    CheckRegisterByte(RegisterType::C, 0xE4);
    CheckRegisterByte(RegisterType::D, 0x8D);
    CheckRegisterByte(RegisterType::E, 0xAC);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x2B);
    CheckRegisterByte(RegisterType::L, 0xEA);
    WriteRegisterWord(RegisterType::PC, 0xEB9B);
    WriteRegisterWord(RegisterType::SP, 0xD30D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEB9A, 0x40);
}

void test_40_0244()
{
    if (skip_test_40_0244)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAFB5);
    WriteRegisterWord(RegisterType::SP, 0x8FBA);
    WriteRegisterByte(RegisterType::A, 0x89);
    WriteRegisterByte(RegisterType::B, 0x52);
    WriteRegisterByte(RegisterType::C, 0x08);
    WriteRegisterByte(RegisterType::D, 0x4C);
    WriteRegisterByte(RegisterType::E, 0x7F);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xC8);
    WriteRegisterByte(RegisterType::L, 0xE6);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xAFB5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x89);
    CheckRegisterByte(RegisterType::B, 0x52);
    CheckRegisterByte(RegisterType::C, 0x08);
    CheckRegisterByte(RegisterType::D, 0x4C);
    CheckRegisterByte(RegisterType::E, 0x7F);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xC8);
    CheckRegisterByte(RegisterType::L, 0xE6);
    WriteRegisterWord(RegisterType::PC, 0xAFB6);
    WriteRegisterWord(RegisterType::SP, 0x8FBA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xAFB5, 0x40);
}

void test_40_0245()
{
    if (skip_test_40_0245)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDD90);
    WriteRegisterWord(RegisterType::SP, 0xFEE2);
    WriteRegisterByte(RegisterType::A, 0x41);
    WriteRegisterByte(RegisterType::B, 0x9F);
    WriteRegisterByte(RegisterType::C, 0x18);
    WriteRegisterByte(RegisterType::D, 0xCD);
    WriteRegisterByte(RegisterType::E, 0x4C);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x18);
    WriteRegisterByte(RegisterType::L, 0xC8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDD90, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x41);
    CheckRegisterByte(RegisterType::B, 0x9F);
    CheckRegisterByte(RegisterType::C, 0x18);
    CheckRegisterByte(RegisterType::D, 0xCD);
    CheckRegisterByte(RegisterType::E, 0x4C);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x18);
    CheckRegisterByte(RegisterType::L, 0xC8);
    WriteRegisterWord(RegisterType::PC, 0xDD91);
    WriteRegisterWord(RegisterType::SP, 0xFEE2);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDD90, 0x40);
}

void test_40_0246()
{
    if (skip_test_40_0246)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCB9C);
    WriteRegisterWord(RegisterType::SP, 0x0842);
    WriteRegisterByte(RegisterType::A, 0x9C);
    WriteRegisterByte(RegisterType::B, 0xE2);
    WriteRegisterByte(RegisterType::C, 0x6D);
    WriteRegisterByte(RegisterType::D, 0x9C);
    WriteRegisterByte(RegisterType::E, 0x69);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x74);
    WriteRegisterByte(RegisterType::L, 0x15);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCB9C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9C);
    CheckRegisterByte(RegisterType::B, 0xE2);
    CheckRegisterByte(RegisterType::C, 0x6D);
    CheckRegisterByte(RegisterType::D, 0x9C);
    CheckRegisterByte(RegisterType::E, 0x69);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x74);
    CheckRegisterByte(RegisterType::L, 0x15);
    WriteRegisterWord(RegisterType::PC, 0xCB9D);
    WriteRegisterWord(RegisterType::SP, 0x0842);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xCB9C, 0x40);
}

void test_40_0247()
{
    if (skip_test_40_0247)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3F2B);
    WriteRegisterWord(RegisterType::SP, 0x42E4);
    WriteRegisterByte(RegisterType::A, 0xF4);
    WriteRegisterByte(RegisterType::B, 0xF1);
    WriteRegisterByte(RegisterType::C, 0x24);
    WriteRegisterByte(RegisterType::D, 0x4E);
    WriteRegisterByte(RegisterType::E, 0x9D);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x2A);
    WriteRegisterByte(RegisterType::L, 0x4A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3F2B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF4);
    CheckRegisterByte(RegisterType::B, 0xF1);
    CheckRegisterByte(RegisterType::C, 0x24);
    CheckRegisterByte(RegisterType::D, 0x4E);
    CheckRegisterByte(RegisterType::E, 0x9D);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x2A);
    CheckRegisterByte(RegisterType::L, 0x4A);
    WriteRegisterWord(RegisterType::PC, 0x3F2C);
    WriteRegisterWord(RegisterType::SP, 0x42E4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3F2B, 0x40);
}

void test_40_0248()
{
    if (skip_test_40_0248)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3900);
    WriteRegisterWord(RegisterType::SP, 0xE039);
    WriteRegisterByte(RegisterType::A, 0xC4);
    WriteRegisterByte(RegisterType::B, 0x17);
    WriteRegisterByte(RegisterType::C, 0x13);
    WriteRegisterByte(RegisterType::D, 0x98);
    WriteRegisterByte(RegisterType::E, 0xA1);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x85);
    WriteRegisterByte(RegisterType::L, 0x8F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3900, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC4);
    CheckRegisterByte(RegisterType::B, 0x17);
    CheckRegisterByte(RegisterType::C, 0x13);
    CheckRegisterByte(RegisterType::D, 0x98);
    CheckRegisterByte(RegisterType::E, 0xA1);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x85);
    CheckRegisterByte(RegisterType::L, 0x8F);
    WriteRegisterWord(RegisterType::PC, 0x3901);
    WriteRegisterWord(RegisterType::SP, 0xE039);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3900, 0x40);
}

void test_40_0249()
{
    if (skip_test_40_0249)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1A4D);
    WriteRegisterWord(RegisterType::SP, 0xCD54);
    WriteRegisterByte(RegisterType::A, 0xE8);
    WriteRegisterByte(RegisterType::B, 0x3D);
    WriteRegisterByte(RegisterType::C, 0x35);
    WriteRegisterByte(RegisterType::D, 0x89);
    WriteRegisterByte(RegisterType::E, 0xF1);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x75);
    WriteRegisterByte(RegisterType::L, 0xD8);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1A4D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE8);
    CheckRegisterByte(RegisterType::B, 0x3D);
    CheckRegisterByte(RegisterType::C, 0x35);
    CheckRegisterByte(RegisterType::D, 0x89);
    CheckRegisterByte(RegisterType::E, 0xF1);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x75);
    CheckRegisterByte(RegisterType::L, 0xD8);
    WriteRegisterWord(RegisterType::PC, 0x1A4E);
    WriteRegisterWord(RegisterType::SP, 0xCD54);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1A4D, 0x40);
}

void test_40_024A()
{
    if (skip_test_40_024A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD8EE);
    WriteRegisterWord(RegisterType::SP, 0x8EEB);
    WriteRegisterByte(RegisterType::A, 0xDB);
    WriteRegisterByte(RegisterType::B, 0x6B);
    WriteRegisterByte(RegisterType::C, 0xEE);
    WriteRegisterByte(RegisterType::D, 0x33);
    WriteRegisterByte(RegisterType::E, 0x6B);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xB0);
    WriteRegisterByte(RegisterType::L, 0xA9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD8EE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDB);
    CheckRegisterByte(RegisterType::B, 0x6B);
    CheckRegisterByte(RegisterType::C, 0xEE);
    CheckRegisterByte(RegisterType::D, 0x33);
    CheckRegisterByte(RegisterType::E, 0x6B);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xB0);
    CheckRegisterByte(RegisterType::L, 0xA9);
    WriteRegisterWord(RegisterType::PC, 0xD8EF);
    WriteRegisterWord(RegisterType::SP, 0x8EEB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD8EE, 0x40);
}

void test_40_024B()
{
    if (skip_test_40_024B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7EFB);
    WriteRegisterWord(RegisterType::SP, 0x6491);
    WriteRegisterByte(RegisterType::A, 0xAA);
    WriteRegisterByte(RegisterType::B, 0x04);
    WriteRegisterByte(RegisterType::C, 0xC5);
    WriteRegisterByte(RegisterType::D, 0x8C);
    WriteRegisterByte(RegisterType::E, 0xB2);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x6A);
    WriteRegisterByte(RegisterType::L, 0xB9);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7EFB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAA);
    CheckRegisterByte(RegisterType::B, 0x04);
    CheckRegisterByte(RegisterType::C, 0xC5);
    CheckRegisterByte(RegisterType::D, 0x8C);
    CheckRegisterByte(RegisterType::E, 0xB2);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x6A);
    CheckRegisterByte(RegisterType::L, 0xB9);
    WriteRegisterWord(RegisterType::PC, 0x7EFC);
    WriteRegisterWord(RegisterType::SP, 0x6491);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7EFB, 0x40);
}

void test_40_024C()
{
    if (skip_test_40_024C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7B17);
    WriteRegisterWord(RegisterType::SP, 0xE75A);
    WriteRegisterByte(RegisterType::A, 0xE8);
    WriteRegisterByte(RegisterType::B, 0x45);
    WriteRegisterByte(RegisterType::C, 0x30);
    WriteRegisterByte(RegisterType::D, 0x16);
    WriteRegisterByte(RegisterType::E, 0xCA);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xC4);
    WriteRegisterByte(RegisterType::L, 0x3E);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7B17, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE8);
    CheckRegisterByte(RegisterType::B, 0x45);
    CheckRegisterByte(RegisterType::C, 0x30);
    CheckRegisterByte(RegisterType::D, 0x16);
    CheckRegisterByte(RegisterType::E, 0xCA);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xC4);
    CheckRegisterByte(RegisterType::L, 0x3E);
    WriteRegisterWord(RegisterType::PC, 0x7B18);
    WriteRegisterWord(RegisterType::SP, 0xE75A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7B17, 0x40);
}

void test_40_024D()
{
    if (skip_test_40_024D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC375);
    WriteRegisterWord(RegisterType::SP, 0x59F4);
    WriteRegisterByte(RegisterType::A, 0x7C);
    WriteRegisterByte(RegisterType::B, 0xB6);
    WriteRegisterByte(RegisterType::C, 0x10);
    WriteRegisterByte(RegisterType::D, 0x7D);
    WriteRegisterByte(RegisterType::E, 0x6F);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x81);
    WriteRegisterByte(RegisterType::L, 0x39);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC375, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7C);
    CheckRegisterByte(RegisterType::B, 0xB6);
    CheckRegisterByte(RegisterType::C, 0x10);
    CheckRegisterByte(RegisterType::D, 0x7D);
    CheckRegisterByte(RegisterType::E, 0x6F);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x81);
    CheckRegisterByte(RegisterType::L, 0x39);
    WriteRegisterWord(RegisterType::PC, 0xC376);
    WriteRegisterWord(RegisterType::SP, 0x59F4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC375, 0x40);
}

void test_40_024E()
{
    if (skip_test_40_024E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBD6A);
    WriteRegisterWord(RegisterType::SP, 0xE8B2);
    WriteRegisterByte(RegisterType::A, 0x51);
    WriteRegisterByte(RegisterType::B, 0x91);
    WriteRegisterByte(RegisterType::C, 0x6E);
    WriteRegisterByte(RegisterType::D, 0x80);
    WriteRegisterByte(RegisterType::E, 0x8F);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xEE);
    WriteRegisterByte(RegisterType::L, 0xD1);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBD6A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x51);
    CheckRegisterByte(RegisterType::B, 0x91);
    CheckRegisterByte(RegisterType::C, 0x6E);
    CheckRegisterByte(RegisterType::D, 0x80);
    CheckRegisterByte(RegisterType::E, 0x8F);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xEE);
    CheckRegisterByte(RegisterType::L, 0xD1);
    WriteRegisterWord(RegisterType::PC, 0xBD6B);
    WriteRegisterWord(RegisterType::SP, 0xE8B2);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xBD6A, 0x40);
}

void test_40_024F()
{
    if (skip_test_40_024F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDD33);
    WriteRegisterWord(RegisterType::SP, 0x0AB0);
    WriteRegisterByte(RegisterType::A, 0x5E);
    WriteRegisterByte(RegisterType::B, 0x9C);
    WriteRegisterByte(RegisterType::C, 0x67);
    WriteRegisterByte(RegisterType::D, 0xBB);
    WriteRegisterByte(RegisterType::E, 0x99);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xF4);
    WriteRegisterByte(RegisterType::L, 0x0D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDD33, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5E);
    CheckRegisterByte(RegisterType::B, 0x9C);
    CheckRegisterByte(RegisterType::C, 0x67);
    CheckRegisterByte(RegisterType::D, 0xBB);
    CheckRegisterByte(RegisterType::E, 0x99);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xF4);
    CheckRegisterByte(RegisterType::L, 0x0D);
    WriteRegisterWord(RegisterType::PC, 0xDD34);
    WriteRegisterWord(RegisterType::SP, 0x0AB0);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDD33, 0x40);
}

void test_40_0250()
{
    if (skip_test_40_0250)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x905D);
    WriteRegisterWord(RegisterType::SP, 0x3D74);
    WriteRegisterByte(RegisterType::A, 0xFF);
    WriteRegisterByte(RegisterType::B, 0xEE);
    WriteRegisterByte(RegisterType::C, 0x6C);
    WriteRegisterByte(RegisterType::D, 0xFB);
    WriteRegisterByte(RegisterType::E, 0x5D);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x9D);
    WriteRegisterByte(RegisterType::L, 0x3F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x905D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFF);
    CheckRegisterByte(RegisterType::B, 0xEE);
    CheckRegisterByte(RegisterType::C, 0x6C);
    CheckRegisterByte(RegisterType::D, 0xFB);
    CheckRegisterByte(RegisterType::E, 0x5D);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x9D);
    CheckRegisterByte(RegisterType::L, 0x3F);
    WriteRegisterWord(RegisterType::PC, 0x905E);
    WriteRegisterWord(RegisterType::SP, 0x3D74);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x905D, 0x40);
}

void test_40_0251()
{
    if (skip_test_40_0251)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4545);
    WriteRegisterWord(RegisterType::SP, 0x4C37);
    WriteRegisterByte(RegisterType::A, 0x46);
    WriteRegisterByte(RegisterType::B, 0xC8);
    WriteRegisterByte(RegisterType::C, 0x8F);
    WriteRegisterByte(RegisterType::D, 0x8C);
    WriteRegisterByte(RegisterType::E, 0x9B);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x62);
    WriteRegisterByte(RegisterType::L, 0xB7);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4545, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x46);
    CheckRegisterByte(RegisterType::B, 0xC8);
    CheckRegisterByte(RegisterType::C, 0x8F);
    CheckRegisterByte(RegisterType::D, 0x8C);
    CheckRegisterByte(RegisterType::E, 0x9B);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x62);
    CheckRegisterByte(RegisterType::L, 0xB7);
    WriteRegisterWord(RegisterType::PC, 0x4546);
    WriteRegisterWord(RegisterType::SP, 0x4C37);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4545, 0x40);
}

void test_40_0252()
{
    if (skip_test_40_0252)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAFCF);
    WriteRegisterWord(RegisterType::SP, 0xB7DA);
    WriteRegisterByte(RegisterType::A, 0xF2);
    WriteRegisterByte(RegisterType::B, 0xF0);
    WriteRegisterByte(RegisterType::C, 0x6B);
    WriteRegisterByte(RegisterType::D, 0xD3);
    WriteRegisterByte(RegisterType::E, 0x00);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xEF);
    WriteRegisterByte(RegisterType::L, 0x96);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xAFCF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF2);
    CheckRegisterByte(RegisterType::B, 0xF0);
    CheckRegisterByte(RegisterType::C, 0x6B);
    CheckRegisterByte(RegisterType::D, 0xD3);
    CheckRegisterByte(RegisterType::E, 0x00);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xEF);
    CheckRegisterByte(RegisterType::L, 0x96);
    WriteRegisterWord(RegisterType::PC, 0xAFD0);
    WriteRegisterWord(RegisterType::SP, 0xB7DA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAFCF, 0x40);
}

void test_40_0253()
{
    if (skip_test_40_0253)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5D83);
    WriteRegisterWord(RegisterType::SP, 0x31C2);
    WriteRegisterByte(RegisterType::A, 0xF5);
    WriteRegisterByte(RegisterType::B, 0x17);
    WriteRegisterByte(RegisterType::C, 0x6B);
    WriteRegisterByte(RegisterType::D, 0xF5);
    WriteRegisterByte(RegisterType::E, 0x96);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xF6);
    WriteRegisterByte(RegisterType::L, 0xA3);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5D83, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF5);
    CheckRegisterByte(RegisterType::B, 0x17);
    CheckRegisterByte(RegisterType::C, 0x6B);
    CheckRegisterByte(RegisterType::D, 0xF5);
    CheckRegisterByte(RegisterType::E, 0x96);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xF6);
    CheckRegisterByte(RegisterType::L, 0xA3);
    WriteRegisterWord(RegisterType::PC, 0x5D84);
    WriteRegisterWord(RegisterType::SP, 0x31C2);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5D83, 0x40);
}

void test_40_0254()
{
    if (skip_test_40_0254)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x76E2);
    WriteRegisterWord(RegisterType::SP, 0xFD58);
    WriteRegisterByte(RegisterType::A, 0xB1);
    WriteRegisterByte(RegisterType::B, 0xAA);
    WriteRegisterByte(RegisterType::C, 0x7E);
    WriteRegisterByte(RegisterType::D, 0x59);
    WriteRegisterByte(RegisterType::E, 0x3E);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x53);
    WriteRegisterByte(RegisterType::L, 0xFB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x76E2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB1);
    CheckRegisterByte(RegisterType::B, 0xAA);
    CheckRegisterByte(RegisterType::C, 0x7E);
    CheckRegisterByte(RegisterType::D, 0x59);
    CheckRegisterByte(RegisterType::E, 0x3E);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x53);
    CheckRegisterByte(RegisterType::L, 0xFB);
    WriteRegisterWord(RegisterType::PC, 0x76E3);
    WriteRegisterWord(RegisterType::SP, 0xFD58);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x76E2, 0x40);
}

void test_40_0255()
{
    if (skip_test_40_0255)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF538);
    WriteRegisterWord(RegisterType::SP, 0xE799);
    WriteRegisterByte(RegisterType::A, 0xF5);
    WriteRegisterByte(RegisterType::B, 0x05);
    WriteRegisterByte(RegisterType::C, 0x8E);
    WriteRegisterByte(RegisterType::D, 0x76);
    WriteRegisterByte(RegisterType::E, 0x89);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x2F);
    WriteRegisterByte(RegisterType::L, 0xCD);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF538, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF5);
    CheckRegisterByte(RegisterType::B, 0x05);
    CheckRegisterByte(RegisterType::C, 0x8E);
    CheckRegisterByte(RegisterType::D, 0x76);
    CheckRegisterByte(RegisterType::E, 0x89);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x2F);
    CheckRegisterByte(RegisterType::L, 0xCD);
    WriteRegisterWord(RegisterType::PC, 0xF539);
    WriteRegisterWord(RegisterType::SP, 0xE799);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF538, 0x40);
}

void test_40_0256()
{
    if (skip_test_40_0256)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1D36);
    WriteRegisterWord(RegisterType::SP, 0xE178);
    WriteRegisterByte(RegisterType::A, 0x00);
    WriteRegisterByte(RegisterType::B, 0x95);
    WriteRegisterByte(RegisterType::C, 0xE8);
    WriteRegisterByte(RegisterType::D, 0xC3);
    WriteRegisterByte(RegisterType::E, 0xEB);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xEE);
    WriteRegisterByte(RegisterType::L, 0x83);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1D36, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x00);
    CheckRegisterByte(RegisterType::B, 0x95);
    CheckRegisterByte(RegisterType::C, 0xE8);
    CheckRegisterByte(RegisterType::D, 0xC3);
    CheckRegisterByte(RegisterType::E, 0xEB);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xEE);
    CheckRegisterByte(RegisterType::L, 0x83);
    WriteRegisterWord(RegisterType::PC, 0x1D37);
    WriteRegisterWord(RegisterType::SP, 0xE178);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1D36, 0x40);
}

void test_40_0257()
{
    if (skip_test_40_0257)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5C87);
    WriteRegisterWord(RegisterType::SP, 0x43D4);
    WriteRegisterByte(RegisterType::A, 0x71);
    WriteRegisterByte(RegisterType::B, 0x62);
    WriteRegisterByte(RegisterType::C, 0x74);
    WriteRegisterByte(RegisterType::D, 0x13);
    WriteRegisterByte(RegisterType::E, 0x9B);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xE7);
    WriteRegisterByte(RegisterType::L, 0x5D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5C87, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x71);
    CheckRegisterByte(RegisterType::B, 0x62);
    CheckRegisterByte(RegisterType::C, 0x74);
    CheckRegisterByte(RegisterType::D, 0x13);
    CheckRegisterByte(RegisterType::E, 0x9B);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xE7);
    CheckRegisterByte(RegisterType::L, 0x5D);
    WriteRegisterWord(RegisterType::PC, 0x5C88);
    WriteRegisterWord(RegisterType::SP, 0x43D4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5C87, 0x40);
}

void test_40_0258()
{
    if (skip_test_40_0258)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFC99);
    WriteRegisterWord(RegisterType::SP, 0x80F0);
    WriteRegisterByte(RegisterType::A, 0x3F);
    WriteRegisterByte(RegisterType::B, 0x35);
    WriteRegisterByte(RegisterType::C, 0xF1);
    WriteRegisterByte(RegisterType::D, 0x91);
    WriteRegisterByte(RegisterType::E, 0x84);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xA0);
    WriteRegisterByte(RegisterType::L, 0xEF);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFC99, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3F);
    CheckRegisterByte(RegisterType::B, 0x35);
    CheckRegisterByte(RegisterType::C, 0xF1);
    CheckRegisterByte(RegisterType::D, 0x91);
    CheckRegisterByte(RegisterType::E, 0x84);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xA0);
    CheckRegisterByte(RegisterType::L, 0xEF);
    WriteRegisterWord(RegisterType::PC, 0xFC9A);
    WriteRegisterWord(RegisterType::SP, 0x80F0);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFC99, 0x40);
}

void test_40_0259()
{
    if (skip_test_40_0259)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEBE6);
    WriteRegisterWord(RegisterType::SP, 0xF454);
    WriteRegisterByte(RegisterType::A, 0x13);
    WriteRegisterByte(RegisterType::B, 0x51);
    WriteRegisterByte(RegisterType::C, 0x57);
    WriteRegisterByte(RegisterType::D, 0x62);
    WriteRegisterByte(RegisterType::E, 0xB3);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xA5);
    WriteRegisterByte(RegisterType::L, 0x23);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEBE6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x13);
    CheckRegisterByte(RegisterType::B, 0x51);
    CheckRegisterByte(RegisterType::C, 0x57);
    CheckRegisterByte(RegisterType::D, 0x62);
    CheckRegisterByte(RegisterType::E, 0xB3);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xA5);
    CheckRegisterByte(RegisterType::L, 0x23);
    WriteRegisterWord(RegisterType::PC, 0xEBE7);
    WriteRegisterWord(RegisterType::SP, 0xF454);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xEBE6, 0x40);
}

void test_40_025A()
{
    if (skip_test_40_025A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6A10);
    WriteRegisterWord(RegisterType::SP, 0xD7A4);
    WriteRegisterByte(RegisterType::A, 0x4B);
    WriteRegisterByte(RegisterType::B, 0xB2);
    WriteRegisterByte(RegisterType::C, 0x01);
    WriteRegisterByte(RegisterType::D, 0x84);
    WriteRegisterByte(RegisterType::E, 0x2B);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x4D);
    WriteRegisterByte(RegisterType::L, 0xFA);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6A10, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4B);
    CheckRegisterByte(RegisterType::B, 0xB2);
    CheckRegisterByte(RegisterType::C, 0x01);
    CheckRegisterByte(RegisterType::D, 0x84);
    CheckRegisterByte(RegisterType::E, 0x2B);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x4D);
    CheckRegisterByte(RegisterType::L, 0xFA);
    WriteRegisterWord(RegisterType::PC, 0x6A11);
    WriteRegisterWord(RegisterType::SP, 0xD7A4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6A10, 0x40);
}

void test_40_025B()
{
    if (skip_test_40_025B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFB79);
    WriteRegisterWord(RegisterType::SP, 0xD32F);
    WriteRegisterByte(RegisterType::A, 0x6E);
    WriteRegisterByte(RegisterType::B, 0xCB);
    WriteRegisterByte(RegisterType::C, 0x74);
    WriteRegisterByte(RegisterType::D, 0xAB);
    WriteRegisterByte(RegisterType::E, 0xD7);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x6D);
    WriteRegisterByte(RegisterType::L, 0x29);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFB79, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6E);
    CheckRegisterByte(RegisterType::B, 0xCB);
    CheckRegisterByte(RegisterType::C, 0x74);
    CheckRegisterByte(RegisterType::D, 0xAB);
    CheckRegisterByte(RegisterType::E, 0xD7);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x6D);
    CheckRegisterByte(RegisterType::L, 0x29);
    WriteRegisterWord(RegisterType::PC, 0xFB7A);
    WriteRegisterWord(RegisterType::SP, 0xD32F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFB79, 0x40);
}

void test_40_025C()
{
    if (skip_test_40_025C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x85BB);
    WriteRegisterWord(RegisterType::SP, 0xD48F);
    WriteRegisterByte(RegisterType::A, 0xDB);
    WriteRegisterByte(RegisterType::B, 0x29);
    WriteRegisterByte(RegisterType::C, 0xF2);
    WriteRegisterByte(RegisterType::D, 0xE5);
    WriteRegisterByte(RegisterType::E, 0x5C);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x3A);
    WriteRegisterByte(RegisterType::L, 0xF5);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x85BB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDB);
    CheckRegisterByte(RegisterType::B, 0x29);
    CheckRegisterByte(RegisterType::C, 0xF2);
    CheckRegisterByte(RegisterType::D, 0xE5);
    CheckRegisterByte(RegisterType::E, 0x5C);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x3A);
    CheckRegisterByte(RegisterType::L, 0xF5);
    WriteRegisterWord(RegisterType::PC, 0x85BC);
    WriteRegisterWord(RegisterType::SP, 0xD48F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x85BB, 0x40);
}

void test_40_025D()
{
    if (skip_test_40_025D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1723);
    WriteRegisterWord(RegisterType::SP, 0x41F7);
    WriteRegisterByte(RegisterType::A, 0x19);
    WriteRegisterByte(RegisterType::B, 0x56);
    WriteRegisterByte(RegisterType::C, 0xC8);
    WriteRegisterByte(RegisterType::D, 0x1C);
    WriteRegisterByte(RegisterType::E, 0xC6);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x30);
    WriteRegisterByte(RegisterType::L, 0xD4);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1723, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x19);
    CheckRegisterByte(RegisterType::B, 0x56);
    CheckRegisterByte(RegisterType::C, 0xC8);
    CheckRegisterByte(RegisterType::D, 0x1C);
    CheckRegisterByte(RegisterType::E, 0xC6);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x30);
    CheckRegisterByte(RegisterType::L, 0xD4);
    WriteRegisterWord(RegisterType::PC, 0x1724);
    WriteRegisterWord(RegisterType::SP, 0x41F7);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1723, 0x40);
}

void test_40_025E()
{
    if (skip_test_40_025E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3D84);
    WriteRegisterWord(RegisterType::SP, 0x71D9);
    WriteRegisterByte(RegisterType::A, 0x7C);
    WriteRegisterByte(RegisterType::B, 0x74);
    WriteRegisterByte(RegisterType::C, 0x69);
    WriteRegisterByte(RegisterType::D, 0xD5);
    WriteRegisterByte(RegisterType::E, 0xB4);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xAC);
    WriteRegisterByte(RegisterType::L, 0x5D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3D84, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7C);
    CheckRegisterByte(RegisterType::B, 0x74);
    CheckRegisterByte(RegisterType::C, 0x69);
    CheckRegisterByte(RegisterType::D, 0xD5);
    CheckRegisterByte(RegisterType::E, 0xB4);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xAC);
    CheckRegisterByte(RegisterType::L, 0x5D);
    WriteRegisterWord(RegisterType::PC, 0x3D85);
    WriteRegisterWord(RegisterType::SP, 0x71D9);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3D84, 0x40);
}

void test_40_025F()
{
    if (skip_test_40_025F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFDAE);
    WriteRegisterWord(RegisterType::SP, 0x2035);
    WriteRegisterByte(RegisterType::A, 0x93);
    WriteRegisterByte(RegisterType::B, 0x2A);
    WriteRegisterByte(RegisterType::C, 0xB4);
    WriteRegisterByte(RegisterType::D, 0x99);
    WriteRegisterByte(RegisterType::E, 0xA1);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xB3);
    WriteRegisterByte(RegisterType::L, 0xF8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFDAE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x93);
    CheckRegisterByte(RegisterType::B, 0x2A);
    CheckRegisterByte(RegisterType::C, 0xB4);
    CheckRegisterByte(RegisterType::D, 0x99);
    CheckRegisterByte(RegisterType::E, 0xA1);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xB3);
    CheckRegisterByte(RegisterType::L, 0xF8);
    WriteRegisterWord(RegisterType::PC, 0xFDAF);
    WriteRegisterWord(RegisterType::SP, 0x2035);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFDAE, 0x40);
}

void test_40_0260()
{
    if (skip_test_40_0260)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0240);
    WriteRegisterWord(RegisterType::SP, 0x08AC);
    WriteRegisterByte(RegisterType::A, 0x7D);
    WriteRegisterByte(RegisterType::B, 0x69);
    WriteRegisterByte(RegisterType::C, 0x46);
    WriteRegisterByte(RegisterType::D, 0xB3);
    WriteRegisterByte(RegisterType::E, 0x29);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xDF);
    WriteRegisterByte(RegisterType::L, 0x0B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0240, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7D);
    CheckRegisterByte(RegisterType::B, 0x69);
    CheckRegisterByte(RegisterType::C, 0x46);
    CheckRegisterByte(RegisterType::D, 0xB3);
    CheckRegisterByte(RegisterType::E, 0x29);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xDF);
    CheckRegisterByte(RegisterType::L, 0x0B);
    WriteRegisterWord(RegisterType::PC, 0x0241);
    WriteRegisterWord(RegisterType::SP, 0x08AC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0240, 0x40);
}

void test_40_0261()
{
    if (skip_test_40_0261)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x293A);
    WriteRegisterWord(RegisterType::SP, 0x84F3);
    WriteRegisterByte(RegisterType::A, 0x9E);
    WriteRegisterByte(RegisterType::B, 0xB0);
    WriteRegisterByte(RegisterType::C, 0xF6);
    WriteRegisterByte(RegisterType::D, 0x0B);
    WriteRegisterByte(RegisterType::E, 0xFD);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x29);
    WriteRegisterByte(RegisterType::L, 0x29);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x293A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9E);
    CheckRegisterByte(RegisterType::B, 0xB0);
    CheckRegisterByte(RegisterType::C, 0xF6);
    CheckRegisterByte(RegisterType::D, 0x0B);
    CheckRegisterByte(RegisterType::E, 0xFD);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x29);
    CheckRegisterByte(RegisterType::L, 0x29);
    WriteRegisterWord(RegisterType::PC, 0x293B);
    WriteRegisterWord(RegisterType::SP, 0x84F3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x293A, 0x40);
}

void test_40_0262()
{
    if (skip_test_40_0262)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD418);
    WriteRegisterWord(RegisterType::SP, 0xAAD4);
    WriteRegisterByte(RegisterType::A, 0x29);
    WriteRegisterByte(RegisterType::B, 0xF5);
    WriteRegisterByte(RegisterType::C, 0x49);
    WriteRegisterByte(RegisterType::D, 0xF9);
    WriteRegisterByte(RegisterType::E, 0xE0);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xDA);
    WriteRegisterByte(RegisterType::L, 0x10);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD418, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x29);
    CheckRegisterByte(RegisterType::B, 0xF5);
    CheckRegisterByte(RegisterType::C, 0x49);
    CheckRegisterByte(RegisterType::D, 0xF9);
    CheckRegisterByte(RegisterType::E, 0xE0);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xDA);
    CheckRegisterByte(RegisterType::L, 0x10);
    WriteRegisterWord(RegisterType::PC, 0xD419);
    WriteRegisterWord(RegisterType::SP, 0xAAD4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD418, 0x40);
}

void test_40_0263()
{
    if (skip_test_40_0263)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4F45);
    WriteRegisterWord(RegisterType::SP, 0xC374);
    WriteRegisterByte(RegisterType::A, 0xCF);
    WriteRegisterByte(RegisterType::B, 0xD1);
    WriteRegisterByte(RegisterType::C, 0x8E);
    WriteRegisterByte(RegisterType::D, 0x4E);
    WriteRegisterByte(RegisterType::E, 0x56);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x0B);
    WriteRegisterByte(RegisterType::L, 0x65);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4F45, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCF);
    CheckRegisterByte(RegisterType::B, 0xD1);
    CheckRegisterByte(RegisterType::C, 0x8E);
    CheckRegisterByte(RegisterType::D, 0x4E);
    CheckRegisterByte(RegisterType::E, 0x56);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x0B);
    CheckRegisterByte(RegisterType::L, 0x65);
    WriteRegisterWord(RegisterType::PC, 0x4F46);
    WriteRegisterWord(RegisterType::SP, 0xC374);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4F45, 0x40);
}

void test_40_0264()
{
    if (skip_test_40_0264)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE7C7);
    WriteRegisterWord(RegisterType::SP, 0x998F);
    WriteRegisterByte(RegisterType::A, 0x06);
    WriteRegisterByte(RegisterType::B, 0xD6);
    WriteRegisterByte(RegisterType::C, 0x96);
    WriteRegisterByte(RegisterType::D, 0x43);
    WriteRegisterByte(RegisterType::E, 0x38);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x6E);
    WriteRegisterByte(RegisterType::L, 0xB1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE7C7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x06);
    CheckRegisterByte(RegisterType::B, 0xD6);
    CheckRegisterByte(RegisterType::C, 0x96);
    CheckRegisterByte(RegisterType::D, 0x43);
    CheckRegisterByte(RegisterType::E, 0x38);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x6E);
    CheckRegisterByte(RegisterType::L, 0xB1);
    WriteRegisterWord(RegisterType::PC, 0xE7C8);
    WriteRegisterWord(RegisterType::SP, 0x998F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE7C7, 0x40);
}

void test_40_0265()
{
    if (skip_test_40_0265)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x01A9);
    WriteRegisterWord(RegisterType::SP, 0x1D5B);
    WriteRegisterByte(RegisterType::A, 0xF2);
    WriteRegisterByte(RegisterType::B, 0x03);
    WriteRegisterByte(RegisterType::C, 0x3E);
    WriteRegisterByte(RegisterType::D, 0x7B);
    WriteRegisterByte(RegisterType::E, 0x0E);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xCF);
    WriteRegisterByte(RegisterType::L, 0x30);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x01A9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF2);
    CheckRegisterByte(RegisterType::B, 0x03);
    CheckRegisterByte(RegisterType::C, 0x3E);
    CheckRegisterByte(RegisterType::D, 0x7B);
    CheckRegisterByte(RegisterType::E, 0x0E);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xCF);
    CheckRegisterByte(RegisterType::L, 0x30);
    WriteRegisterWord(RegisterType::PC, 0x01AA);
    WriteRegisterWord(RegisterType::SP, 0x1D5B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x01A9, 0x40);
}

void test_40_0266()
{
    if (skip_test_40_0266)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD23C);
    WriteRegisterWord(RegisterType::SP, 0xDEBE);
    WriteRegisterByte(RegisterType::A, 0xA0);
    WriteRegisterByte(RegisterType::B, 0xE0);
    WriteRegisterByte(RegisterType::C, 0xB7);
    WriteRegisterByte(RegisterType::D, 0x79);
    WriteRegisterByte(RegisterType::E, 0xF5);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x6C);
    WriteRegisterByte(RegisterType::L, 0xC9);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD23C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA0);
    CheckRegisterByte(RegisterType::B, 0xE0);
    CheckRegisterByte(RegisterType::C, 0xB7);
    CheckRegisterByte(RegisterType::D, 0x79);
    CheckRegisterByte(RegisterType::E, 0xF5);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x6C);
    CheckRegisterByte(RegisterType::L, 0xC9);
    WriteRegisterWord(RegisterType::PC, 0xD23D);
    WriteRegisterWord(RegisterType::SP, 0xDEBE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD23C, 0x40);
}

void test_40_0267()
{
    if (skip_test_40_0267)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9EB9);
    WriteRegisterWord(RegisterType::SP, 0x1792);
    WriteRegisterByte(RegisterType::A, 0xAE);
    WriteRegisterByte(RegisterType::B, 0x03);
    WriteRegisterByte(RegisterType::C, 0xD9);
    WriteRegisterByte(RegisterType::D, 0x13);
    WriteRegisterByte(RegisterType::E, 0xF8);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x3F);
    WriteRegisterByte(RegisterType::L, 0x91);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9EB9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAE);
    CheckRegisterByte(RegisterType::B, 0x03);
    CheckRegisterByte(RegisterType::C, 0xD9);
    CheckRegisterByte(RegisterType::D, 0x13);
    CheckRegisterByte(RegisterType::E, 0xF8);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x3F);
    CheckRegisterByte(RegisterType::L, 0x91);
    WriteRegisterWord(RegisterType::PC, 0x9EBA);
    WriteRegisterWord(RegisterType::SP, 0x1792);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9EB9, 0x40);
}

void test_40_0268()
{
    if (skip_test_40_0268)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA2D1);
    WriteRegisterWord(RegisterType::SP, 0x2FAD);
    WriteRegisterByte(RegisterType::A, 0xB5);
    WriteRegisterByte(RegisterType::B, 0x67);
    WriteRegisterByte(RegisterType::C, 0x7C);
    WriteRegisterByte(RegisterType::D, 0xB5);
    WriteRegisterByte(RegisterType::E, 0x59);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xA5);
    WriteRegisterByte(RegisterType::L, 0x58);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA2D1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB5);
    CheckRegisterByte(RegisterType::B, 0x67);
    CheckRegisterByte(RegisterType::C, 0x7C);
    CheckRegisterByte(RegisterType::D, 0xB5);
    CheckRegisterByte(RegisterType::E, 0x59);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xA5);
    CheckRegisterByte(RegisterType::L, 0x58);
    WriteRegisterWord(RegisterType::PC, 0xA2D2);
    WriteRegisterWord(RegisterType::SP, 0x2FAD);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA2D1, 0x40);
}

void test_40_0269()
{
    if (skip_test_40_0269)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3998);
    WriteRegisterWord(RegisterType::SP, 0xFF14);
    WriteRegisterByte(RegisterType::A, 0x8F);
    WriteRegisterByte(RegisterType::B, 0x74);
    WriteRegisterByte(RegisterType::C, 0xDF);
    WriteRegisterByte(RegisterType::D, 0x1D);
    WriteRegisterByte(RegisterType::E, 0x24);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x44);
    WriteRegisterByte(RegisterType::L, 0x04);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3998, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8F);
    CheckRegisterByte(RegisterType::B, 0x74);
    CheckRegisterByte(RegisterType::C, 0xDF);
    CheckRegisterByte(RegisterType::D, 0x1D);
    CheckRegisterByte(RegisterType::E, 0x24);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x44);
    CheckRegisterByte(RegisterType::L, 0x04);
    WriteRegisterWord(RegisterType::PC, 0x3999);
    WriteRegisterWord(RegisterType::SP, 0xFF14);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3998, 0x40);
}

void test_40_026A()
{
    if (skip_test_40_026A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA1C2);
    WriteRegisterWord(RegisterType::SP, 0x088B);
    WriteRegisterByte(RegisterType::A, 0x30);
    WriteRegisterByte(RegisterType::B, 0x9E);
    WriteRegisterByte(RegisterType::C, 0xF5);
    WriteRegisterByte(RegisterType::D, 0xF0);
    WriteRegisterByte(RegisterType::E, 0x84);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xDD);
    WriteRegisterByte(RegisterType::L, 0xCF);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA1C2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x30);
    CheckRegisterByte(RegisterType::B, 0x9E);
    CheckRegisterByte(RegisterType::C, 0xF5);
    CheckRegisterByte(RegisterType::D, 0xF0);
    CheckRegisterByte(RegisterType::E, 0x84);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xDD);
    CheckRegisterByte(RegisterType::L, 0xCF);
    WriteRegisterWord(RegisterType::PC, 0xA1C3);
    WriteRegisterWord(RegisterType::SP, 0x088B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA1C2, 0x40);
}

void test_40_026B()
{
    if (skip_test_40_026B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE4EC);
    WriteRegisterWord(RegisterType::SP, 0xED7D);
    WriteRegisterByte(RegisterType::A, 0x7C);
    WriteRegisterByte(RegisterType::B, 0xC3);
    WriteRegisterByte(RegisterType::C, 0x98);
    WriteRegisterByte(RegisterType::D, 0x07);
    WriteRegisterByte(RegisterType::E, 0xB2);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xE9);
    WriteRegisterByte(RegisterType::L, 0x2C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xE4EC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7C);
    CheckRegisterByte(RegisterType::B, 0xC3);
    CheckRegisterByte(RegisterType::C, 0x98);
    CheckRegisterByte(RegisterType::D, 0x07);
    CheckRegisterByte(RegisterType::E, 0xB2);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xE9);
    CheckRegisterByte(RegisterType::L, 0x2C);
    WriteRegisterWord(RegisterType::PC, 0xE4ED);
    WriteRegisterWord(RegisterType::SP, 0xED7D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE4EC, 0x40);
}

void test_40_026C()
{
    if (skip_test_40_026C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x718D);
    WriteRegisterWord(RegisterType::SP, 0x8388);
    WriteRegisterByte(RegisterType::A, 0x1D);
    WriteRegisterByte(RegisterType::B, 0xDA);
    WriteRegisterByte(RegisterType::C, 0x91);
    WriteRegisterByte(RegisterType::D, 0x49);
    WriteRegisterByte(RegisterType::E, 0x18);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xAE);
    WriteRegisterByte(RegisterType::L, 0xDA);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x718D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1D);
    CheckRegisterByte(RegisterType::B, 0xDA);
    CheckRegisterByte(RegisterType::C, 0x91);
    CheckRegisterByte(RegisterType::D, 0x49);
    CheckRegisterByte(RegisterType::E, 0x18);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xAE);
    CheckRegisterByte(RegisterType::L, 0xDA);
    WriteRegisterWord(RegisterType::PC, 0x718E);
    WriteRegisterWord(RegisterType::SP, 0x8388);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x718D, 0x40);
}

void test_40_026D()
{
    if (skip_test_40_026D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3DA5);
    WriteRegisterWord(RegisterType::SP, 0xA436);
    WriteRegisterByte(RegisterType::A, 0xEE);
    WriteRegisterByte(RegisterType::B, 0xBD);
    WriteRegisterByte(RegisterType::C, 0xB1);
    WriteRegisterByte(RegisterType::D, 0x82);
    WriteRegisterByte(RegisterType::E, 0xC3);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x4D);
    WriteRegisterByte(RegisterType::L, 0x93);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3DA5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEE);
    CheckRegisterByte(RegisterType::B, 0xBD);
    CheckRegisterByte(RegisterType::C, 0xB1);
    CheckRegisterByte(RegisterType::D, 0x82);
    CheckRegisterByte(RegisterType::E, 0xC3);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x4D);
    CheckRegisterByte(RegisterType::L, 0x93);
    WriteRegisterWord(RegisterType::PC, 0x3DA6);
    WriteRegisterWord(RegisterType::SP, 0xA436);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3DA5, 0x40);
}

void test_40_026E()
{
    if (skip_test_40_026E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB001);
    WriteRegisterWord(RegisterType::SP, 0x50F0);
    WriteRegisterByte(RegisterType::A, 0xA8);
    WriteRegisterByte(RegisterType::B, 0xDA);
    WriteRegisterByte(RegisterType::C, 0xC6);
    WriteRegisterByte(RegisterType::D, 0xAC);
    WriteRegisterByte(RegisterType::E, 0x37);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xAC);
    WriteRegisterByte(RegisterType::L, 0xA0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB001, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA8);
    CheckRegisterByte(RegisterType::B, 0xDA);
    CheckRegisterByte(RegisterType::C, 0xC6);
    CheckRegisterByte(RegisterType::D, 0xAC);
    CheckRegisterByte(RegisterType::E, 0x37);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xAC);
    CheckRegisterByte(RegisterType::L, 0xA0);
    WriteRegisterWord(RegisterType::PC, 0xB002);
    WriteRegisterWord(RegisterType::SP, 0x50F0);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB001, 0x40);
}

void test_40_026F()
{
    if (skip_test_40_026F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBE97);
    WriteRegisterWord(RegisterType::SP, 0x1724);
    WriteRegisterByte(RegisterType::A, 0xD6);
    WriteRegisterByte(RegisterType::B, 0xD2);
    WriteRegisterByte(RegisterType::C, 0x3A);
    WriteRegisterByte(RegisterType::D, 0x5E);
    WriteRegisterByte(RegisterType::E, 0x59);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x38);
    WriteRegisterByte(RegisterType::L, 0xA3);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBE97, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD6);
    CheckRegisterByte(RegisterType::B, 0xD2);
    CheckRegisterByte(RegisterType::C, 0x3A);
    CheckRegisterByte(RegisterType::D, 0x5E);
    CheckRegisterByte(RegisterType::E, 0x59);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x38);
    CheckRegisterByte(RegisterType::L, 0xA3);
    WriteRegisterWord(RegisterType::PC, 0xBE98);
    WriteRegisterWord(RegisterType::SP, 0x1724);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xBE97, 0x40);
}

void test_40_0270()
{
    if (skip_test_40_0270)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC705);
    WriteRegisterWord(RegisterType::SP, 0xF125);
    WriteRegisterByte(RegisterType::A, 0x94);
    WriteRegisterByte(RegisterType::B, 0xB0);
    WriteRegisterByte(RegisterType::C, 0xEF);
    WriteRegisterByte(RegisterType::D, 0x57);
    WriteRegisterByte(RegisterType::E, 0xFC);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x3E);
    WriteRegisterByte(RegisterType::L, 0x62);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC705, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x94);
    CheckRegisterByte(RegisterType::B, 0xB0);
    CheckRegisterByte(RegisterType::C, 0xEF);
    CheckRegisterByte(RegisterType::D, 0x57);
    CheckRegisterByte(RegisterType::E, 0xFC);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x3E);
    CheckRegisterByte(RegisterType::L, 0x62);
    WriteRegisterWord(RegisterType::PC, 0xC706);
    WriteRegisterWord(RegisterType::SP, 0xF125);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC705, 0x40);
}

void test_40_0271()
{
    if (skip_test_40_0271)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1688);
    WriteRegisterWord(RegisterType::SP, 0x133B);
    WriteRegisterByte(RegisterType::A, 0xBE);
    WriteRegisterByte(RegisterType::B, 0x69);
    WriteRegisterByte(RegisterType::C, 0xB2);
    WriteRegisterByte(RegisterType::D, 0xC5);
    WriteRegisterByte(RegisterType::E, 0x4F);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xB5);
    WriteRegisterByte(RegisterType::L, 0x28);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1688, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBE);
    CheckRegisterByte(RegisterType::B, 0x69);
    CheckRegisterByte(RegisterType::C, 0xB2);
    CheckRegisterByte(RegisterType::D, 0xC5);
    CheckRegisterByte(RegisterType::E, 0x4F);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xB5);
    CheckRegisterByte(RegisterType::L, 0x28);
    WriteRegisterWord(RegisterType::PC, 0x1689);
    WriteRegisterWord(RegisterType::SP, 0x133B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1688, 0x40);
}

void test_40_0272()
{
    if (skip_test_40_0272)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6B19);
    WriteRegisterWord(RegisterType::SP, 0xC55D);
    WriteRegisterByte(RegisterType::A, 0xEA);
    WriteRegisterByte(RegisterType::B, 0x1B);
    WriteRegisterByte(RegisterType::C, 0xF8);
    WriteRegisterByte(RegisterType::D, 0x07);
    WriteRegisterByte(RegisterType::E, 0xDB);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x0B);
    WriteRegisterByte(RegisterType::L, 0xA8);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6B19, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEA);
    CheckRegisterByte(RegisterType::B, 0x1B);
    CheckRegisterByte(RegisterType::C, 0xF8);
    CheckRegisterByte(RegisterType::D, 0x07);
    CheckRegisterByte(RegisterType::E, 0xDB);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x0B);
    CheckRegisterByte(RegisterType::L, 0xA8);
    WriteRegisterWord(RegisterType::PC, 0x6B1A);
    WriteRegisterWord(RegisterType::SP, 0xC55D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6B19, 0x40);
}

void test_40_0273()
{
    if (skip_test_40_0273)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7C92);
    WriteRegisterWord(RegisterType::SP, 0xE658);
    WriteRegisterByte(RegisterType::A, 0x65);
    WriteRegisterByte(RegisterType::B, 0x45);
    WriteRegisterByte(RegisterType::C, 0xAA);
    WriteRegisterByte(RegisterType::D, 0x05);
    WriteRegisterByte(RegisterType::E, 0x7D);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x5D);
    WriteRegisterByte(RegisterType::L, 0x42);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7C92, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x65);
    CheckRegisterByte(RegisterType::B, 0x45);
    CheckRegisterByte(RegisterType::C, 0xAA);
    CheckRegisterByte(RegisterType::D, 0x05);
    CheckRegisterByte(RegisterType::E, 0x7D);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x5D);
    CheckRegisterByte(RegisterType::L, 0x42);
    WriteRegisterWord(RegisterType::PC, 0x7C93);
    WriteRegisterWord(RegisterType::SP, 0xE658);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7C92, 0x40);
}

void test_40_0274()
{
    if (skip_test_40_0274)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7FF7);
    WriteRegisterWord(RegisterType::SP, 0xDE72);
    WriteRegisterByte(RegisterType::A, 0x11);
    WriteRegisterByte(RegisterType::B, 0x44);
    WriteRegisterByte(RegisterType::C, 0x59);
    WriteRegisterByte(RegisterType::D, 0x4F);
    WriteRegisterByte(RegisterType::E, 0xDC);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xA3);
    WriteRegisterByte(RegisterType::L, 0xEB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7FF7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x11);
    CheckRegisterByte(RegisterType::B, 0x44);
    CheckRegisterByte(RegisterType::C, 0x59);
    CheckRegisterByte(RegisterType::D, 0x4F);
    CheckRegisterByte(RegisterType::E, 0xDC);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xA3);
    CheckRegisterByte(RegisterType::L, 0xEB);
    WriteRegisterWord(RegisterType::PC, 0x7FF8);
    WriteRegisterWord(RegisterType::SP, 0xDE72);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7FF7, 0x40);
}

void test_40_0275()
{
    if (skip_test_40_0275)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD66E);
    WriteRegisterWord(RegisterType::SP, 0x70A0);
    WriteRegisterByte(RegisterType::A, 0x7E);
    WriteRegisterByte(RegisterType::B, 0xB7);
    WriteRegisterByte(RegisterType::C, 0x53);
    WriteRegisterByte(RegisterType::D, 0x82);
    WriteRegisterByte(RegisterType::E, 0x9A);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x45);
    WriteRegisterByte(RegisterType::L, 0xE2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD66E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7E);
    CheckRegisterByte(RegisterType::B, 0xB7);
    CheckRegisterByte(RegisterType::C, 0x53);
    CheckRegisterByte(RegisterType::D, 0x82);
    CheckRegisterByte(RegisterType::E, 0x9A);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x45);
    CheckRegisterByte(RegisterType::L, 0xE2);
    WriteRegisterWord(RegisterType::PC, 0xD66F);
    WriteRegisterWord(RegisterType::SP, 0x70A0);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD66E, 0x40);
}

void test_40_0276()
{
    if (skip_test_40_0276)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC895);
    WriteRegisterWord(RegisterType::SP, 0x701F);
    WriteRegisterByte(RegisterType::A, 0x75);
    WriteRegisterByte(RegisterType::B, 0x8E);
    WriteRegisterByte(RegisterType::C, 0xE2);
    WriteRegisterByte(RegisterType::D, 0x1A);
    WriteRegisterByte(RegisterType::E, 0x52);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x6D);
    WriteRegisterByte(RegisterType::L, 0xA4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC895, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x75);
    CheckRegisterByte(RegisterType::B, 0x8E);
    CheckRegisterByte(RegisterType::C, 0xE2);
    CheckRegisterByte(RegisterType::D, 0x1A);
    CheckRegisterByte(RegisterType::E, 0x52);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x6D);
    CheckRegisterByte(RegisterType::L, 0xA4);
    WriteRegisterWord(RegisterType::PC, 0xC896);
    WriteRegisterWord(RegisterType::SP, 0x701F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC895, 0x40);
}

void test_40_0277()
{
    if (skip_test_40_0277)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x89EE);
    WriteRegisterWord(RegisterType::SP, 0x3C43);
    WriteRegisterByte(RegisterType::A, 0xCD);
    WriteRegisterByte(RegisterType::B, 0x80);
    WriteRegisterByte(RegisterType::C, 0x62);
    WriteRegisterByte(RegisterType::D, 0xC2);
    WriteRegisterByte(RegisterType::E, 0x79);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xD1);
    WriteRegisterByte(RegisterType::L, 0x1F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x89EE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCD);
    CheckRegisterByte(RegisterType::B, 0x80);
    CheckRegisterByte(RegisterType::C, 0x62);
    CheckRegisterByte(RegisterType::D, 0xC2);
    CheckRegisterByte(RegisterType::E, 0x79);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xD1);
    CheckRegisterByte(RegisterType::L, 0x1F);
    WriteRegisterWord(RegisterType::PC, 0x89EF);
    WriteRegisterWord(RegisterType::SP, 0x3C43);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x89EE, 0x40);
}

void test_40_0278()
{
    if (skip_test_40_0278)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA811);
    WriteRegisterWord(RegisterType::SP, 0x6413);
    WriteRegisterByte(RegisterType::A, 0x52);
    WriteRegisterByte(RegisterType::B, 0x0F);
    WriteRegisterByte(RegisterType::C, 0x5E);
    WriteRegisterByte(RegisterType::D, 0x55);
    WriteRegisterByte(RegisterType::E, 0x72);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xA6);
    WriteRegisterByte(RegisterType::L, 0xE6);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA811, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x52);
    CheckRegisterByte(RegisterType::B, 0x0F);
    CheckRegisterByte(RegisterType::C, 0x5E);
    CheckRegisterByte(RegisterType::D, 0x55);
    CheckRegisterByte(RegisterType::E, 0x72);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xA6);
    CheckRegisterByte(RegisterType::L, 0xE6);
    WriteRegisterWord(RegisterType::PC, 0xA812);
    WriteRegisterWord(RegisterType::SP, 0x6413);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA811, 0x40);
}

void test_40_0279()
{
    if (skip_test_40_0279)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7A5D);
    WriteRegisterWord(RegisterType::SP, 0xEF48);
    WriteRegisterByte(RegisterType::A, 0xDE);
    WriteRegisterByte(RegisterType::B, 0xAF);
    WriteRegisterByte(RegisterType::C, 0xED);
    WriteRegisterByte(RegisterType::D, 0x80);
    WriteRegisterByte(RegisterType::E, 0xE6);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x84);
    WriteRegisterByte(RegisterType::L, 0x43);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7A5D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDE);
    CheckRegisterByte(RegisterType::B, 0xAF);
    CheckRegisterByte(RegisterType::C, 0xED);
    CheckRegisterByte(RegisterType::D, 0x80);
    CheckRegisterByte(RegisterType::E, 0xE6);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x84);
    CheckRegisterByte(RegisterType::L, 0x43);
    WriteRegisterWord(RegisterType::PC, 0x7A5E);
    WriteRegisterWord(RegisterType::SP, 0xEF48);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7A5D, 0x40);
}

void test_40_027A()
{
    if (skip_test_40_027A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB9F9);
    WriteRegisterWord(RegisterType::SP, 0x0483);
    WriteRegisterByte(RegisterType::A, 0xA0);
    WriteRegisterByte(RegisterType::B, 0x7D);
    WriteRegisterByte(RegisterType::C, 0x6C);
    WriteRegisterByte(RegisterType::D, 0x60);
    WriteRegisterByte(RegisterType::E, 0xF0);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x5D);
    WriteRegisterByte(RegisterType::L, 0x64);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB9F9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA0);
    CheckRegisterByte(RegisterType::B, 0x7D);
    CheckRegisterByte(RegisterType::C, 0x6C);
    CheckRegisterByte(RegisterType::D, 0x60);
    CheckRegisterByte(RegisterType::E, 0xF0);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x5D);
    CheckRegisterByte(RegisterType::L, 0x64);
    WriteRegisterWord(RegisterType::PC, 0xB9FA);
    WriteRegisterWord(RegisterType::SP, 0x0483);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB9F9, 0x40);
}

void test_40_027B()
{
    if (skip_test_40_027B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8DC9);
    WriteRegisterWord(RegisterType::SP, 0xDDF5);
    WriteRegisterByte(RegisterType::A, 0x56);
    WriteRegisterByte(RegisterType::B, 0xE2);
    WriteRegisterByte(RegisterType::C, 0xC0);
    WriteRegisterByte(RegisterType::D, 0x44);
    WriteRegisterByte(RegisterType::E, 0x17);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xFE);
    WriteRegisterByte(RegisterType::L, 0x50);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8DC9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x56);
    CheckRegisterByte(RegisterType::B, 0xE2);
    CheckRegisterByte(RegisterType::C, 0xC0);
    CheckRegisterByte(RegisterType::D, 0x44);
    CheckRegisterByte(RegisterType::E, 0x17);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xFE);
    CheckRegisterByte(RegisterType::L, 0x50);
    WriteRegisterWord(RegisterType::PC, 0x8DCA);
    WriteRegisterWord(RegisterType::SP, 0xDDF5);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8DC9, 0x40);
}

void test_40_027C()
{
    if (skip_test_40_027C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x82B2);
    WriteRegisterWord(RegisterType::SP, 0xD56D);
    WriteRegisterByte(RegisterType::A, 0xC7);
    WriteRegisterByte(RegisterType::B, 0x95);
    WriteRegisterByte(RegisterType::C, 0x5D);
    WriteRegisterByte(RegisterType::D, 0x72);
    WriteRegisterByte(RegisterType::E, 0xC3);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x52);
    WriteRegisterByte(RegisterType::L, 0x29);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x82B2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC7);
    CheckRegisterByte(RegisterType::B, 0x95);
    CheckRegisterByte(RegisterType::C, 0x5D);
    CheckRegisterByte(RegisterType::D, 0x72);
    CheckRegisterByte(RegisterType::E, 0xC3);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x52);
    CheckRegisterByte(RegisterType::L, 0x29);
    WriteRegisterWord(RegisterType::PC, 0x82B3);
    WriteRegisterWord(RegisterType::SP, 0xD56D);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x82B2, 0x40);
}

void test_40_027D()
{
    if (skip_test_40_027D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC6E0);
    WriteRegisterWord(RegisterType::SP, 0x1800);
    WriteRegisterByte(RegisterType::A, 0xE6);
    WriteRegisterByte(RegisterType::B, 0x78);
    WriteRegisterByte(RegisterType::C, 0xDC);
    WriteRegisterByte(RegisterType::D, 0x29);
    WriteRegisterByte(RegisterType::E, 0xDE);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x4B);
    WriteRegisterByte(RegisterType::L, 0x24);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC6E0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE6);
    CheckRegisterByte(RegisterType::B, 0x78);
    CheckRegisterByte(RegisterType::C, 0xDC);
    CheckRegisterByte(RegisterType::D, 0x29);
    CheckRegisterByte(RegisterType::E, 0xDE);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x4B);
    CheckRegisterByte(RegisterType::L, 0x24);
    WriteRegisterWord(RegisterType::PC, 0xC6E1);
    WriteRegisterWord(RegisterType::SP, 0x1800);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC6E0, 0x40);
}

void test_40_027E()
{
    if (skip_test_40_027E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDCDE);
    WriteRegisterWord(RegisterType::SP, 0xBD9F);
    WriteRegisterByte(RegisterType::A, 0x2D);
    WriteRegisterByte(RegisterType::B, 0x39);
    WriteRegisterByte(RegisterType::C, 0x4F);
    WriteRegisterByte(RegisterType::D, 0x0C);
    WriteRegisterByte(RegisterType::E, 0xE3);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xB4);
    WriteRegisterByte(RegisterType::L, 0x99);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDCDE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2D);
    CheckRegisterByte(RegisterType::B, 0x39);
    CheckRegisterByte(RegisterType::C, 0x4F);
    CheckRegisterByte(RegisterType::D, 0x0C);
    CheckRegisterByte(RegisterType::E, 0xE3);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xB4);
    CheckRegisterByte(RegisterType::L, 0x99);
    WriteRegisterWord(RegisterType::PC, 0xDCDF);
    WriteRegisterWord(RegisterType::SP, 0xBD9F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xDCDE, 0x40);
}

void test_40_027F()
{
    if (skip_test_40_027F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x24D8);
    WriteRegisterWord(RegisterType::SP, 0x60FA);
    WriteRegisterByte(RegisterType::A, 0xC3);
    WriteRegisterByte(RegisterType::B, 0x8A);
    WriteRegisterByte(RegisterType::C, 0xAB);
    WriteRegisterByte(RegisterType::D, 0x75);
    WriteRegisterByte(RegisterType::E, 0x65);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x75);
    WriteRegisterByte(RegisterType::L, 0x16);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x24D8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC3);
    CheckRegisterByte(RegisterType::B, 0x8A);
    CheckRegisterByte(RegisterType::C, 0xAB);
    CheckRegisterByte(RegisterType::D, 0x75);
    CheckRegisterByte(RegisterType::E, 0x65);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x75);
    CheckRegisterByte(RegisterType::L, 0x16);
    WriteRegisterWord(RegisterType::PC, 0x24D9);
    WriteRegisterWord(RegisterType::SP, 0x60FA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x24D8, 0x40);
}

void test_40_0280()
{
    if (skip_test_40_0280)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3FEA);
    WriteRegisterWord(RegisterType::SP, 0xAEA4);
    WriteRegisterByte(RegisterType::A, 0xA6);
    WriteRegisterByte(RegisterType::B, 0xDC);
    WriteRegisterByte(RegisterType::C, 0x9F);
    WriteRegisterByte(RegisterType::D, 0xE8);
    WriteRegisterByte(RegisterType::E, 0x44);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x5B);
    WriteRegisterByte(RegisterType::L, 0x38);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3FEA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA6);
    CheckRegisterByte(RegisterType::B, 0xDC);
    CheckRegisterByte(RegisterType::C, 0x9F);
    CheckRegisterByte(RegisterType::D, 0xE8);
    CheckRegisterByte(RegisterType::E, 0x44);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x5B);
    CheckRegisterByte(RegisterType::L, 0x38);
    WriteRegisterWord(RegisterType::PC, 0x3FEB);
    WriteRegisterWord(RegisterType::SP, 0xAEA4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3FEA, 0x40);
}

void test_40_0281()
{
    if (skip_test_40_0281)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2AD4);
    WriteRegisterWord(RegisterType::SP, 0xEF80);
    WriteRegisterByte(RegisterType::A, 0x48);
    WriteRegisterByte(RegisterType::B, 0xDF);
    WriteRegisterByte(RegisterType::C, 0xEE);
    WriteRegisterByte(RegisterType::D, 0x2E);
    WriteRegisterByte(RegisterType::E, 0xC2);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x6C);
    WriteRegisterByte(RegisterType::L, 0xB8);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2AD4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x48);
    CheckRegisterByte(RegisterType::B, 0xDF);
    CheckRegisterByte(RegisterType::C, 0xEE);
    CheckRegisterByte(RegisterType::D, 0x2E);
    CheckRegisterByte(RegisterType::E, 0xC2);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x6C);
    CheckRegisterByte(RegisterType::L, 0xB8);
    WriteRegisterWord(RegisterType::PC, 0x2AD5);
    WriteRegisterWord(RegisterType::SP, 0xEF80);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2AD4, 0x40);
}

void test_40_0282()
{
    if (skip_test_40_0282)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x819A);
    WriteRegisterWord(RegisterType::SP, 0x99F1);
    WriteRegisterByte(RegisterType::A, 0x53);
    WriteRegisterByte(RegisterType::B, 0x50);
    WriteRegisterByte(RegisterType::C, 0x3C);
    WriteRegisterByte(RegisterType::D, 0x05);
    WriteRegisterByte(RegisterType::E, 0xE7);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x1A);
    WriteRegisterByte(RegisterType::L, 0x3B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x819A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x53);
    CheckRegisterByte(RegisterType::B, 0x50);
    CheckRegisterByte(RegisterType::C, 0x3C);
    CheckRegisterByte(RegisterType::D, 0x05);
    CheckRegisterByte(RegisterType::E, 0xE7);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x1A);
    CheckRegisterByte(RegisterType::L, 0x3B);
    WriteRegisterWord(RegisterType::PC, 0x819B);
    WriteRegisterWord(RegisterType::SP, 0x99F1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x819A, 0x40);
}

void test_40_0283()
{
    if (skip_test_40_0283)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0E22);
    WriteRegisterWord(RegisterType::SP, 0x1373);
    WriteRegisterByte(RegisterType::A, 0x11);
    WriteRegisterByte(RegisterType::B, 0xF8);
    WriteRegisterByte(RegisterType::C, 0xCC);
    WriteRegisterByte(RegisterType::D, 0x22);
    WriteRegisterByte(RegisterType::E, 0xF1);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xD9);
    WriteRegisterByte(RegisterType::L, 0x64);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0E22, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x11);
    CheckRegisterByte(RegisterType::B, 0xF8);
    CheckRegisterByte(RegisterType::C, 0xCC);
    CheckRegisterByte(RegisterType::D, 0x22);
    CheckRegisterByte(RegisterType::E, 0xF1);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xD9);
    CheckRegisterByte(RegisterType::L, 0x64);
    WriteRegisterWord(RegisterType::PC, 0x0E23);
    WriteRegisterWord(RegisterType::SP, 0x1373);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0E22, 0x40);
}

void test_40_0284()
{
    if (skip_test_40_0284)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1DE4);
    WriteRegisterWord(RegisterType::SP, 0x7A1E);
    WriteRegisterByte(RegisterType::A, 0x48);
    WriteRegisterByte(RegisterType::B, 0xA0);
    WriteRegisterByte(RegisterType::C, 0xD4);
    WriteRegisterByte(RegisterType::D, 0x34);
    WriteRegisterByte(RegisterType::E, 0xAB);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xE8);
    WriteRegisterByte(RegisterType::L, 0x54);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1DE4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x48);
    CheckRegisterByte(RegisterType::B, 0xA0);
    CheckRegisterByte(RegisterType::C, 0xD4);
    CheckRegisterByte(RegisterType::D, 0x34);
    CheckRegisterByte(RegisterType::E, 0xAB);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xE8);
    CheckRegisterByte(RegisterType::L, 0x54);
    WriteRegisterWord(RegisterType::PC, 0x1DE5);
    WriteRegisterWord(RegisterType::SP, 0x7A1E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1DE4, 0x40);
}

void test_40_0285()
{
    if (skip_test_40_0285)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3841);
    WriteRegisterWord(RegisterType::SP, 0xCEC0);
    WriteRegisterByte(RegisterType::A, 0xA2);
    WriteRegisterByte(RegisterType::B, 0x12);
    WriteRegisterByte(RegisterType::C, 0x03);
    WriteRegisterByte(RegisterType::D, 0x39);
    WriteRegisterByte(RegisterType::E, 0x12);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x65);
    WriteRegisterByte(RegisterType::L, 0x5B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3841, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA2);
    CheckRegisterByte(RegisterType::B, 0x12);
    CheckRegisterByte(RegisterType::C, 0x03);
    CheckRegisterByte(RegisterType::D, 0x39);
    CheckRegisterByte(RegisterType::E, 0x12);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x65);
    CheckRegisterByte(RegisterType::L, 0x5B);
    WriteRegisterWord(RegisterType::PC, 0x3842);
    WriteRegisterWord(RegisterType::SP, 0xCEC0);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3841, 0x40);
}

void test_40_0286()
{
    if (skip_test_40_0286)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF95E);
    WriteRegisterWord(RegisterType::SP, 0x8B1E);
    WriteRegisterByte(RegisterType::A, 0xC3);
    WriteRegisterByte(RegisterType::B, 0x0C);
    WriteRegisterByte(RegisterType::C, 0x3E);
    WriteRegisterByte(RegisterType::D, 0xF8);
    WriteRegisterByte(RegisterType::E, 0xB2);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x91);
    WriteRegisterByte(RegisterType::L, 0xCC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF95E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC3);
    CheckRegisterByte(RegisterType::B, 0x0C);
    CheckRegisterByte(RegisterType::C, 0x3E);
    CheckRegisterByte(RegisterType::D, 0xF8);
    CheckRegisterByte(RegisterType::E, 0xB2);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x91);
    CheckRegisterByte(RegisterType::L, 0xCC);
    WriteRegisterWord(RegisterType::PC, 0xF95F);
    WriteRegisterWord(RegisterType::SP, 0x8B1E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF95E, 0x40);
}

void test_40_0287()
{
    if (skip_test_40_0287)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x111B);
    WriteRegisterWord(RegisterType::SP, 0x57E1);
    WriteRegisterByte(RegisterType::A, 0xD1);
    WriteRegisterByte(RegisterType::B, 0xA9);
    WriteRegisterByte(RegisterType::C, 0xE0);
    WriteRegisterByte(RegisterType::D, 0xBC);
    WriteRegisterByte(RegisterType::E, 0xF3);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xF8);
    WriteRegisterByte(RegisterType::L, 0x49);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x111B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD1);
    CheckRegisterByte(RegisterType::B, 0xA9);
    CheckRegisterByte(RegisterType::C, 0xE0);
    CheckRegisterByte(RegisterType::D, 0xBC);
    CheckRegisterByte(RegisterType::E, 0xF3);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xF8);
    CheckRegisterByte(RegisterType::L, 0x49);
    WriteRegisterWord(RegisterType::PC, 0x111C);
    WriteRegisterWord(RegisterType::SP, 0x57E1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x111B, 0x40);
}

void test_40_0288()
{
    if (skip_test_40_0288)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB81A);
    WriteRegisterWord(RegisterType::SP, 0x070A);
    WriteRegisterByte(RegisterType::A, 0x9E);
    WriteRegisterByte(RegisterType::B, 0x1B);
    WriteRegisterByte(RegisterType::C, 0x12);
    WriteRegisterByte(RegisterType::D, 0x84);
    WriteRegisterByte(RegisterType::E, 0x71);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x9F);
    WriteRegisterByte(RegisterType::L, 0xD8);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB81A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9E);
    CheckRegisterByte(RegisterType::B, 0x1B);
    CheckRegisterByte(RegisterType::C, 0x12);
    CheckRegisterByte(RegisterType::D, 0x84);
    CheckRegisterByte(RegisterType::E, 0x71);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x9F);
    CheckRegisterByte(RegisterType::L, 0xD8);
    WriteRegisterWord(RegisterType::PC, 0xB81B);
    WriteRegisterWord(RegisterType::SP, 0x070A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB81A, 0x40);
}

void test_40_0289()
{
    if (skip_test_40_0289)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB92B);
    WriteRegisterWord(RegisterType::SP, 0xCDEA);
    WriteRegisterByte(RegisterType::A, 0x51);
    WriteRegisterByte(RegisterType::B, 0xF3);
    WriteRegisterByte(RegisterType::C, 0x1B);
    WriteRegisterByte(RegisterType::D, 0x55);
    WriteRegisterByte(RegisterType::E, 0x92);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x04);
    WriteRegisterByte(RegisterType::L, 0x4F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB92B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x51);
    CheckRegisterByte(RegisterType::B, 0xF3);
    CheckRegisterByte(RegisterType::C, 0x1B);
    CheckRegisterByte(RegisterType::D, 0x55);
    CheckRegisterByte(RegisterType::E, 0x92);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x04);
    CheckRegisterByte(RegisterType::L, 0x4F);
    WriteRegisterWord(RegisterType::PC, 0xB92C);
    WriteRegisterWord(RegisterType::SP, 0xCDEA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB92B, 0x40);
}

void test_40_028A()
{
    if (skip_test_40_028A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x917D);
    WriteRegisterWord(RegisterType::SP, 0x74DB);
    WriteRegisterByte(RegisterType::A, 0xBC);
    WriteRegisterByte(RegisterType::B, 0x1C);
    WriteRegisterByte(RegisterType::C, 0x58);
    WriteRegisterByte(RegisterType::D, 0xC5);
    WriteRegisterByte(RegisterType::E, 0x33);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x66);
    WriteRegisterByte(RegisterType::L, 0x91);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x917D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBC);
    CheckRegisterByte(RegisterType::B, 0x1C);
    CheckRegisterByte(RegisterType::C, 0x58);
    CheckRegisterByte(RegisterType::D, 0xC5);
    CheckRegisterByte(RegisterType::E, 0x33);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x66);
    CheckRegisterByte(RegisterType::L, 0x91);
    WriteRegisterWord(RegisterType::PC, 0x917E);
    WriteRegisterWord(RegisterType::SP, 0x74DB);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x917D, 0x40);
}

void test_40_028B()
{
    if (skip_test_40_028B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDE6D);
    WriteRegisterWord(RegisterType::SP, 0x66B6);
    WriteRegisterByte(RegisterType::A, 0x64);
    WriteRegisterByte(RegisterType::B, 0xD3);
    WriteRegisterByte(RegisterType::C, 0x2C);
    WriteRegisterByte(RegisterType::D, 0xB5);
    WriteRegisterByte(RegisterType::E, 0xF9);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x0E);
    WriteRegisterByte(RegisterType::L, 0xE2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDE6D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x64);
    CheckRegisterByte(RegisterType::B, 0xD3);
    CheckRegisterByte(RegisterType::C, 0x2C);
    CheckRegisterByte(RegisterType::D, 0xB5);
    CheckRegisterByte(RegisterType::E, 0xF9);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x0E);
    CheckRegisterByte(RegisterType::L, 0xE2);
    WriteRegisterWord(RegisterType::PC, 0xDE6E);
    WriteRegisterWord(RegisterType::SP, 0x66B6);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDE6D, 0x40);
}

void test_40_028C()
{
    if (skip_test_40_028C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDBE1);
    WriteRegisterWord(RegisterType::SP, 0xE0E4);
    WriteRegisterByte(RegisterType::A, 0x23);
    WriteRegisterByte(RegisterType::B, 0x9F);
    WriteRegisterByte(RegisterType::C, 0xE7);
    WriteRegisterByte(RegisterType::D, 0x1F);
    WriteRegisterByte(RegisterType::E, 0xD2);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xDC);
    WriteRegisterByte(RegisterType::L, 0xFA);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDBE1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x23);
    CheckRegisterByte(RegisterType::B, 0x9F);
    CheckRegisterByte(RegisterType::C, 0xE7);
    CheckRegisterByte(RegisterType::D, 0x1F);
    CheckRegisterByte(RegisterType::E, 0xD2);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xDC);
    CheckRegisterByte(RegisterType::L, 0xFA);
    WriteRegisterWord(RegisterType::PC, 0xDBE2);
    WriteRegisterWord(RegisterType::SP, 0xE0E4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDBE1, 0x40);
}

void test_40_028D()
{
    if (skip_test_40_028D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA73F);
    WriteRegisterWord(RegisterType::SP, 0xEA4B);
    WriteRegisterByte(RegisterType::A, 0x00);
    WriteRegisterByte(RegisterType::B, 0xB1);
    WriteRegisterByte(RegisterType::C, 0x21);
    WriteRegisterByte(RegisterType::D, 0xE7);
    WriteRegisterByte(RegisterType::E, 0x18);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x6B);
    WriteRegisterByte(RegisterType::L, 0x5C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA73F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x00);
    CheckRegisterByte(RegisterType::B, 0xB1);
    CheckRegisterByte(RegisterType::C, 0x21);
    CheckRegisterByte(RegisterType::D, 0xE7);
    CheckRegisterByte(RegisterType::E, 0x18);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x6B);
    CheckRegisterByte(RegisterType::L, 0x5C);
    WriteRegisterWord(RegisterType::PC, 0xA740);
    WriteRegisterWord(RegisterType::SP, 0xEA4B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA73F, 0x40);
}

void test_40_028E()
{
    if (skip_test_40_028E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xACB2);
    WriteRegisterWord(RegisterType::SP, 0xBE6E);
    WriteRegisterByte(RegisterType::A, 0xD4);
    WriteRegisterByte(RegisterType::B, 0x44);
    WriteRegisterByte(RegisterType::C, 0xA2);
    WriteRegisterByte(RegisterType::D, 0xC7);
    WriteRegisterByte(RegisterType::E, 0x07);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x00);
    WriteRegisterByte(RegisterType::L, 0x15);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xACB2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD4);
    CheckRegisterByte(RegisterType::B, 0x44);
    CheckRegisterByte(RegisterType::C, 0xA2);
    CheckRegisterByte(RegisterType::D, 0xC7);
    CheckRegisterByte(RegisterType::E, 0x07);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x00);
    CheckRegisterByte(RegisterType::L, 0x15);
    WriteRegisterWord(RegisterType::PC, 0xACB3);
    WriteRegisterWord(RegisterType::SP, 0xBE6E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xACB2, 0x40);
}

void test_40_028F()
{
    if (skip_test_40_028F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2BA0);
    WriteRegisterWord(RegisterType::SP, 0xB6A2);
    WriteRegisterByte(RegisterType::A, 0xA8);
    WriteRegisterByte(RegisterType::B, 0x88);
    WriteRegisterByte(RegisterType::C, 0x91);
    WriteRegisterByte(RegisterType::D, 0x58);
    WriteRegisterByte(RegisterType::E, 0xF2);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x7E);
    WriteRegisterByte(RegisterType::L, 0xDE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2BA0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA8);
    CheckRegisterByte(RegisterType::B, 0x88);
    CheckRegisterByte(RegisterType::C, 0x91);
    CheckRegisterByte(RegisterType::D, 0x58);
    CheckRegisterByte(RegisterType::E, 0xF2);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x7E);
    CheckRegisterByte(RegisterType::L, 0xDE);
    WriteRegisterWord(RegisterType::PC, 0x2BA1);
    WriteRegisterWord(RegisterType::SP, 0xB6A2);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2BA0, 0x40);
}

void test_40_0290()
{
    if (skip_test_40_0290)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFB62);
    WriteRegisterWord(RegisterType::SP, 0x95C1);
    WriteRegisterByte(RegisterType::A, 0xF6);
    WriteRegisterByte(RegisterType::B, 0x4A);
    WriteRegisterByte(RegisterType::C, 0x28);
    WriteRegisterByte(RegisterType::D, 0xE4);
    WriteRegisterByte(RegisterType::E, 0x2D);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x0E);
    WriteRegisterByte(RegisterType::L, 0xB1);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xFB62, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF6);
    CheckRegisterByte(RegisterType::B, 0x4A);
    CheckRegisterByte(RegisterType::C, 0x28);
    CheckRegisterByte(RegisterType::D, 0xE4);
    CheckRegisterByte(RegisterType::E, 0x2D);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x0E);
    CheckRegisterByte(RegisterType::L, 0xB1);
    WriteRegisterWord(RegisterType::PC, 0xFB63);
    WriteRegisterWord(RegisterType::SP, 0x95C1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFB62, 0x40);
}

void test_40_0291()
{
    if (skip_test_40_0291)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x85BE);
    WriteRegisterWord(RegisterType::SP, 0xBAE1);
    WriteRegisterByte(RegisterType::A, 0x4D);
    WriteRegisterByte(RegisterType::B, 0x82);
    WriteRegisterByte(RegisterType::C, 0x1B);
    WriteRegisterByte(RegisterType::D, 0xC2);
    WriteRegisterByte(RegisterType::E, 0x96);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x45);
    WriteRegisterByte(RegisterType::L, 0x66);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x85BE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4D);
    CheckRegisterByte(RegisterType::B, 0x82);
    CheckRegisterByte(RegisterType::C, 0x1B);
    CheckRegisterByte(RegisterType::D, 0xC2);
    CheckRegisterByte(RegisterType::E, 0x96);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x45);
    CheckRegisterByte(RegisterType::L, 0x66);
    WriteRegisterWord(RegisterType::PC, 0x85BF);
    WriteRegisterWord(RegisterType::SP, 0xBAE1);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x85BE, 0x40);
}

void test_40_0292()
{
    if (skip_test_40_0292)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAC59);
    WriteRegisterWord(RegisterType::SP, 0xB211);
    WriteRegisterByte(RegisterType::A, 0x1F);
    WriteRegisterByte(RegisterType::B, 0xD4);
    WriteRegisterByte(RegisterType::C, 0x4C);
    WriteRegisterByte(RegisterType::D, 0x45);
    WriteRegisterByte(RegisterType::E, 0xA7);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x2A);
    WriteRegisterByte(RegisterType::L, 0xFD);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xAC59, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1F);
    CheckRegisterByte(RegisterType::B, 0xD4);
    CheckRegisterByte(RegisterType::C, 0x4C);
    CheckRegisterByte(RegisterType::D, 0x45);
    CheckRegisterByte(RegisterType::E, 0xA7);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x2A);
    CheckRegisterByte(RegisterType::L, 0xFD);
    WriteRegisterWord(RegisterType::PC, 0xAC5A);
    WriteRegisterWord(RegisterType::SP, 0xB211);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAC59, 0x40);
}

void test_40_0293()
{
    if (skip_test_40_0293)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7B22);
    WriteRegisterWord(RegisterType::SP, 0x4453);
    WriteRegisterByte(RegisterType::A, 0x27);
    WriteRegisterByte(RegisterType::B, 0x87);
    WriteRegisterByte(RegisterType::C, 0xB4);
    WriteRegisterByte(RegisterType::D, 0xFC);
    WriteRegisterByte(RegisterType::E, 0x46);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xEE);
    WriteRegisterByte(RegisterType::L, 0xC9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7B22, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x27);
    CheckRegisterByte(RegisterType::B, 0x87);
    CheckRegisterByte(RegisterType::C, 0xB4);
    CheckRegisterByte(RegisterType::D, 0xFC);
    CheckRegisterByte(RegisterType::E, 0x46);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xEE);
    CheckRegisterByte(RegisterType::L, 0xC9);
    WriteRegisterWord(RegisterType::PC, 0x7B23);
    WriteRegisterWord(RegisterType::SP, 0x4453);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7B22, 0x40);
}

void test_40_0294()
{
    if (skip_test_40_0294)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0B7D);
    WriteRegisterWord(RegisterType::SP, 0x3A39);
    WriteRegisterByte(RegisterType::A, 0x5C);
    WriteRegisterByte(RegisterType::B, 0x30);
    WriteRegisterByte(RegisterType::C, 0x42);
    WriteRegisterByte(RegisterType::D, 0xA3);
    WriteRegisterByte(RegisterType::E, 0xAD);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x2B);
    WriteRegisterByte(RegisterType::L, 0x68);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0B7D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5C);
    CheckRegisterByte(RegisterType::B, 0x30);
    CheckRegisterByte(RegisterType::C, 0x42);
    CheckRegisterByte(RegisterType::D, 0xA3);
    CheckRegisterByte(RegisterType::E, 0xAD);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x2B);
    CheckRegisterByte(RegisterType::L, 0x68);
    WriteRegisterWord(RegisterType::PC, 0x0B7E);
    WriteRegisterWord(RegisterType::SP, 0x3A39);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0B7D, 0x40);
}

void test_40_0295()
{
    if (skip_test_40_0295)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8948);
    WriteRegisterWord(RegisterType::SP, 0xADF1);
    WriteRegisterByte(RegisterType::A, 0x25);
    WriteRegisterByte(RegisterType::B, 0x05);
    WriteRegisterByte(RegisterType::C, 0x4D);
    WriteRegisterByte(RegisterType::D, 0xBF);
    WriteRegisterByte(RegisterType::E, 0x4C);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x46);
    WriteRegisterByte(RegisterType::L, 0x68);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8948, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x25);
    CheckRegisterByte(RegisterType::B, 0x05);
    CheckRegisterByte(RegisterType::C, 0x4D);
    CheckRegisterByte(RegisterType::D, 0xBF);
    CheckRegisterByte(RegisterType::E, 0x4C);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x46);
    CheckRegisterByte(RegisterType::L, 0x68);
    WriteRegisterWord(RegisterType::PC, 0x8949);
    WriteRegisterWord(RegisterType::SP, 0xADF1);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8948, 0x40);
}

void test_40_0296()
{
    if (skip_test_40_0296)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6F9A);
    WriteRegisterWord(RegisterType::SP, 0xF56A);
    WriteRegisterByte(RegisterType::A, 0x7F);
    WriteRegisterByte(RegisterType::B, 0x0F);
    WriteRegisterByte(RegisterType::C, 0xCF);
    WriteRegisterByte(RegisterType::D, 0x2B);
    WriteRegisterByte(RegisterType::E, 0x92);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xB3);
    WriteRegisterByte(RegisterType::L, 0x7F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6F9A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7F);
    CheckRegisterByte(RegisterType::B, 0x0F);
    CheckRegisterByte(RegisterType::C, 0xCF);
    CheckRegisterByte(RegisterType::D, 0x2B);
    CheckRegisterByte(RegisterType::E, 0x92);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xB3);
    CheckRegisterByte(RegisterType::L, 0x7F);
    WriteRegisterWord(RegisterType::PC, 0x6F9B);
    WriteRegisterWord(RegisterType::SP, 0xF56A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6F9A, 0x40);
}

void test_40_0297()
{
    if (skip_test_40_0297)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAC05);
    WriteRegisterWord(RegisterType::SP, 0xF61C);
    WriteRegisterByte(RegisterType::A, 0xE7);
    WriteRegisterByte(RegisterType::B, 0x82);
    WriteRegisterByte(RegisterType::C, 0xA4);
    WriteRegisterByte(RegisterType::D, 0x20);
    WriteRegisterByte(RegisterType::E, 0xFD);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x66);
    WriteRegisterByte(RegisterType::L, 0x98);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xAC05, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE7);
    CheckRegisterByte(RegisterType::B, 0x82);
    CheckRegisterByte(RegisterType::C, 0xA4);
    CheckRegisterByte(RegisterType::D, 0x20);
    CheckRegisterByte(RegisterType::E, 0xFD);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x66);
    CheckRegisterByte(RegisterType::L, 0x98);
    WriteRegisterWord(RegisterType::PC, 0xAC06);
    WriteRegisterWord(RegisterType::SP, 0xF61C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAC05, 0x40);
}

void test_40_0298()
{
    if (skip_test_40_0298)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x85A3);
    WriteRegisterWord(RegisterType::SP, 0xD4A4);
    WriteRegisterByte(RegisterType::A, 0x03);
    WriteRegisterByte(RegisterType::B, 0x4F);
    WriteRegisterByte(RegisterType::C, 0x28);
    WriteRegisterByte(RegisterType::D, 0xC4);
    WriteRegisterByte(RegisterType::E, 0xCA);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x73);
    WriteRegisterByte(RegisterType::L, 0xEB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x85A3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x03);
    CheckRegisterByte(RegisterType::B, 0x4F);
    CheckRegisterByte(RegisterType::C, 0x28);
    CheckRegisterByte(RegisterType::D, 0xC4);
    CheckRegisterByte(RegisterType::E, 0xCA);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x73);
    CheckRegisterByte(RegisterType::L, 0xEB);
    WriteRegisterWord(RegisterType::PC, 0x85A4);
    WriteRegisterWord(RegisterType::SP, 0xD4A4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x85A3, 0x40);
}

void test_40_0299()
{
    if (skip_test_40_0299)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6F1C);
    WriteRegisterWord(RegisterType::SP, 0xC08F);
    WriteRegisterByte(RegisterType::A, 0x7F);
    WriteRegisterByte(RegisterType::B, 0x10);
    WriteRegisterByte(RegisterType::C, 0x2F);
    WriteRegisterByte(RegisterType::D, 0x12);
    WriteRegisterByte(RegisterType::E, 0xE6);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xDE);
    WriteRegisterByte(RegisterType::L, 0xFE);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6F1C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7F);
    CheckRegisterByte(RegisterType::B, 0x10);
    CheckRegisterByte(RegisterType::C, 0x2F);
    CheckRegisterByte(RegisterType::D, 0x12);
    CheckRegisterByte(RegisterType::E, 0xE6);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xDE);
    CheckRegisterByte(RegisterType::L, 0xFE);
    WriteRegisterWord(RegisterType::PC, 0x6F1D);
    WriteRegisterWord(RegisterType::SP, 0xC08F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6F1C, 0x40);
}

void test_40_029A()
{
    if (skip_test_40_029A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x57F1);
    WriteRegisterWord(RegisterType::SP, 0xC770);
    WriteRegisterByte(RegisterType::A, 0x88);
    WriteRegisterByte(RegisterType::B, 0x7C);
    WriteRegisterByte(RegisterType::C, 0x5A);
    WriteRegisterByte(RegisterType::D, 0x35);
    WriteRegisterByte(RegisterType::E, 0x58);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x8B);
    WriteRegisterByte(RegisterType::L, 0x9E);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x57F1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x88);
    CheckRegisterByte(RegisterType::B, 0x7C);
    CheckRegisterByte(RegisterType::C, 0x5A);
    CheckRegisterByte(RegisterType::D, 0x35);
    CheckRegisterByte(RegisterType::E, 0x58);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x8B);
    CheckRegisterByte(RegisterType::L, 0x9E);
    WriteRegisterWord(RegisterType::PC, 0x57F2);
    WriteRegisterWord(RegisterType::SP, 0xC770);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x57F1, 0x40);
}

void test_40_029B()
{
    if (skip_test_40_029B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBB7E);
    WriteRegisterWord(RegisterType::SP, 0x5888);
    WriteRegisterByte(RegisterType::A, 0x4F);
    WriteRegisterByte(RegisterType::B, 0xF8);
    WriteRegisterByte(RegisterType::C, 0x1E);
    WriteRegisterByte(RegisterType::D, 0xB2);
    WriteRegisterByte(RegisterType::E, 0xED);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x27);
    WriteRegisterByte(RegisterType::L, 0x19);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xBB7E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4F);
    CheckRegisterByte(RegisterType::B, 0xF8);
    CheckRegisterByte(RegisterType::C, 0x1E);
    CheckRegisterByte(RegisterType::D, 0xB2);
    CheckRegisterByte(RegisterType::E, 0xED);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x27);
    CheckRegisterByte(RegisterType::L, 0x19);
    WriteRegisterWord(RegisterType::PC, 0xBB7F);
    WriteRegisterWord(RegisterType::SP, 0x5888);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xBB7E, 0x40);
}

void test_40_029C()
{
    if (skip_test_40_029C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5FDD);
    WriteRegisterWord(RegisterType::SP, 0x8474);
    WriteRegisterByte(RegisterType::A, 0xEB);
    WriteRegisterByte(RegisterType::B, 0x31);
    WriteRegisterByte(RegisterType::C, 0x93);
    WriteRegisterByte(RegisterType::D, 0xCC);
    WriteRegisterByte(RegisterType::E, 0x40);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xF8);
    WriteRegisterByte(RegisterType::L, 0x19);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5FDD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEB);
    CheckRegisterByte(RegisterType::B, 0x31);
    CheckRegisterByte(RegisterType::C, 0x93);
    CheckRegisterByte(RegisterType::D, 0xCC);
    CheckRegisterByte(RegisterType::E, 0x40);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xF8);
    CheckRegisterByte(RegisterType::L, 0x19);
    WriteRegisterWord(RegisterType::PC, 0x5FDE);
    WriteRegisterWord(RegisterType::SP, 0x8474);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5FDD, 0x40);
}

void test_40_029D()
{
    if (skip_test_40_029D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2C52);
    WriteRegisterWord(RegisterType::SP, 0x4731);
    WriteRegisterByte(RegisterType::A, 0x22);
    WriteRegisterByte(RegisterType::B, 0xBA);
    WriteRegisterByte(RegisterType::C, 0x70);
    WriteRegisterByte(RegisterType::D, 0xCB);
    WriteRegisterByte(RegisterType::E, 0x0D);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x32);
    WriteRegisterByte(RegisterType::L, 0x74);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2C52, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x22);
    CheckRegisterByte(RegisterType::B, 0xBA);
    CheckRegisterByte(RegisterType::C, 0x70);
    CheckRegisterByte(RegisterType::D, 0xCB);
    CheckRegisterByte(RegisterType::E, 0x0D);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x32);
    CheckRegisterByte(RegisterType::L, 0x74);
    WriteRegisterWord(RegisterType::PC, 0x2C53);
    WriteRegisterWord(RegisterType::SP, 0x4731);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2C52, 0x40);
}

void test_40_029E()
{
    if (skip_test_40_029E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8B1F);
    WriteRegisterWord(RegisterType::SP, 0x8BFE);
    WriteRegisterByte(RegisterType::A, 0xF1);
    WriteRegisterByte(RegisterType::B, 0x8B);
    WriteRegisterByte(RegisterType::C, 0x12);
    WriteRegisterByte(RegisterType::D, 0x29);
    WriteRegisterByte(RegisterType::E, 0x4A);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x6B);
    WriteRegisterByte(RegisterType::L, 0xEB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8B1F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF1);
    CheckRegisterByte(RegisterType::B, 0x8B);
    CheckRegisterByte(RegisterType::C, 0x12);
    CheckRegisterByte(RegisterType::D, 0x29);
    CheckRegisterByte(RegisterType::E, 0x4A);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x6B);
    CheckRegisterByte(RegisterType::L, 0xEB);
    WriteRegisterWord(RegisterType::PC, 0x8B20);
    WriteRegisterWord(RegisterType::SP, 0x8BFE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8B1F, 0x40);
}

void test_40_029F()
{
    if (skip_test_40_029F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9D07);
    WriteRegisterWord(RegisterType::SP, 0x8BDB);
    WriteRegisterByte(RegisterType::A, 0x4B);
    WriteRegisterByte(RegisterType::B, 0x50);
    WriteRegisterByte(RegisterType::C, 0x34);
    WriteRegisterByte(RegisterType::D, 0xBD);
    WriteRegisterByte(RegisterType::E, 0xDE);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xC8);
    WriteRegisterByte(RegisterType::L, 0x89);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x9D07, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4B);
    CheckRegisterByte(RegisterType::B, 0x50);
    CheckRegisterByte(RegisterType::C, 0x34);
    CheckRegisterByte(RegisterType::D, 0xBD);
    CheckRegisterByte(RegisterType::E, 0xDE);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xC8);
    CheckRegisterByte(RegisterType::L, 0x89);
    WriteRegisterWord(RegisterType::PC, 0x9D08);
    WriteRegisterWord(RegisterType::SP, 0x8BDB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x9D07, 0x40);
}

void test_40_02A0()
{
    if (skip_test_40_02A0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD42E);
    WriteRegisterWord(RegisterType::SP, 0xFAD1);
    WriteRegisterByte(RegisterType::A, 0xF2);
    WriteRegisterByte(RegisterType::B, 0xE3);
    WriteRegisterByte(RegisterType::C, 0xB1);
    WriteRegisterByte(RegisterType::D, 0x2A);
    WriteRegisterByte(RegisterType::E, 0x43);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xFF);
    WriteRegisterByte(RegisterType::L, 0x01);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD42E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF2);
    CheckRegisterByte(RegisterType::B, 0xE3);
    CheckRegisterByte(RegisterType::C, 0xB1);
    CheckRegisterByte(RegisterType::D, 0x2A);
    CheckRegisterByte(RegisterType::E, 0x43);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xFF);
    CheckRegisterByte(RegisterType::L, 0x01);
    WriteRegisterWord(RegisterType::PC, 0xD42F);
    WriteRegisterWord(RegisterType::SP, 0xFAD1);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD42E, 0x40);
}

void test_40_02A1()
{
    if (skip_test_40_02A1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA332);
    WriteRegisterWord(RegisterType::SP, 0x2FCA);
    WriteRegisterByte(RegisterType::A, 0x42);
    WriteRegisterByte(RegisterType::B, 0x1F);
    WriteRegisterByte(RegisterType::C, 0x10);
    WriteRegisterByte(RegisterType::D, 0x35);
    WriteRegisterByte(RegisterType::E, 0xD6);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xC6);
    WriteRegisterByte(RegisterType::L, 0x57);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA332, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x42);
    CheckRegisterByte(RegisterType::B, 0x1F);
    CheckRegisterByte(RegisterType::C, 0x10);
    CheckRegisterByte(RegisterType::D, 0x35);
    CheckRegisterByte(RegisterType::E, 0xD6);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xC6);
    CheckRegisterByte(RegisterType::L, 0x57);
    WriteRegisterWord(RegisterType::PC, 0xA333);
    WriteRegisterWord(RegisterType::SP, 0x2FCA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA332, 0x40);
}

void test_40_02A2()
{
    if (skip_test_40_02A2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF4EE);
    WriteRegisterWord(RegisterType::SP, 0x4CDA);
    WriteRegisterByte(RegisterType::A, 0x72);
    WriteRegisterByte(RegisterType::B, 0x30);
    WriteRegisterByte(RegisterType::C, 0x81);
    WriteRegisterByte(RegisterType::D, 0xBB);
    WriteRegisterByte(RegisterType::E, 0xB6);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x4E);
    WriteRegisterByte(RegisterType::L, 0x5A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF4EE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x72);
    CheckRegisterByte(RegisterType::B, 0x30);
    CheckRegisterByte(RegisterType::C, 0x81);
    CheckRegisterByte(RegisterType::D, 0xBB);
    CheckRegisterByte(RegisterType::E, 0xB6);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x4E);
    CheckRegisterByte(RegisterType::L, 0x5A);
    WriteRegisterWord(RegisterType::PC, 0xF4EF);
    WriteRegisterWord(RegisterType::SP, 0x4CDA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF4EE, 0x40);
}

void test_40_02A3()
{
    if (skip_test_40_02A3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB4A8);
    WriteRegisterWord(RegisterType::SP, 0x3570);
    WriteRegisterByte(RegisterType::A, 0x43);
    WriteRegisterByte(RegisterType::B, 0x3B);
    WriteRegisterByte(RegisterType::C, 0x4A);
    WriteRegisterByte(RegisterType::D, 0x43);
    WriteRegisterByte(RegisterType::E, 0xD2);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x29);
    WriteRegisterByte(RegisterType::L, 0xE0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB4A8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x43);
    CheckRegisterByte(RegisterType::B, 0x3B);
    CheckRegisterByte(RegisterType::C, 0x4A);
    CheckRegisterByte(RegisterType::D, 0x43);
    CheckRegisterByte(RegisterType::E, 0xD2);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x29);
    CheckRegisterByte(RegisterType::L, 0xE0);
    WriteRegisterWord(RegisterType::PC, 0xB4A9);
    WriteRegisterWord(RegisterType::SP, 0x3570);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB4A8, 0x40);
}

void test_40_02A4()
{
    if (skip_test_40_02A4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF5A3);
    WriteRegisterWord(RegisterType::SP, 0xF29E);
    WriteRegisterByte(RegisterType::A, 0x52);
    WriteRegisterByte(RegisterType::B, 0x9B);
    WriteRegisterByte(RegisterType::C, 0x40);
    WriteRegisterByte(RegisterType::D, 0x5B);
    WriteRegisterByte(RegisterType::E, 0xA9);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x3C);
    WriteRegisterByte(RegisterType::L, 0x94);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF5A3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x52);
    CheckRegisterByte(RegisterType::B, 0x9B);
    CheckRegisterByte(RegisterType::C, 0x40);
    CheckRegisterByte(RegisterType::D, 0x5B);
    CheckRegisterByte(RegisterType::E, 0xA9);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x3C);
    CheckRegisterByte(RegisterType::L, 0x94);
    WriteRegisterWord(RegisterType::PC, 0xF5A4);
    WriteRegisterWord(RegisterType::SP, 0xF29E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF5A3, 0x40);
}

void test_40_02A5()
{
    if (skip_test_40_02A5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDCB9);
    WriteRegisterWord(RegisterType::SP, 0x235E);
    WriteRegisterByte(RegisterType::A, 0x9F);
    WriteRegisterByte(RegisterType::B, 0xD4);
    WriteRegisterByte(RegisterType::C, 0x8C);
    WriteRegisterByte(RegisterType::D, 0x7A);
    WriteRegisterByte(RegisterType::E, 0x86);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x37);
    WriteRegisterByte(RegisterType::L, 0xC9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDCB9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9F);
    CheckRegisterByte(RegisterType::B, 0xD4);
    CheckRegisterByte(RegisterType::C, 0x8C);
    CheckRegisterByte(RegisterType::D, 0x7A);
    CheckRegisterByte(RegisterType::E, 0x86);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x37);
    CheckRegisterByte(RegisterType::L, 0xC9);
    WriteRegisterWord(RegisterType::PC, 0xDCBA);
    WriteRegisterWord(RegisterType::SP, 0x235E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDCB9, 0x40);
}

void test_40_02A6()
{
    if (skip_test_40_02A6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEC2B);
    WriteRegisterWord(RegisterType::SP, 0x8B8D);
    WriteRegisterByte(RegisterType::A, 0xA7);
    WriteRegisterByte(RegisterType::B, 0xA4);
    WriteRegisterByte(RegisterType::C, 0xA5);
    WriteRegisterByte(RegisterType::D, 0x33);
    WriteRegisterByte(RegisterType::E, 0x74);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xA2);
    WriteRegisterByte(RegisterType::L, 0x8E);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEC2B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA7);
    CheckRegisterByte(RegisterType::B, 0xA4);
    CheckRegisterByte(RegisterType::C, 0xA5);
    CheckRegisterByte(RegisterType::D, 0x33);
    CheckRegisterByte(RegisterType::E, 0x74);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xA2);
    CheckRegisterByte(RegisterType::L, 0x8E);
    WriteRegisterWord(RegisterType::PC, 0xEC2C);
    WriteRegisterWord(RegisterType::SP, 0x8B8D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEC2B, 0x40);
}

void test_40_02A7()
{
    if (skip_test_40_02A7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9D61);
    WriteRegisterWord(RegisterType::SP, 0x19B2);
    WriteRegisterByte(RegisterType::A, 0x87);
    WriteRegisterByte(RegisterType::B, 0xA3);
    WriteRegisterByte(RegisterType::C, 0x43);
    WriteRegisterByte(RegisterType::D, 0x78);
    WriteRegisterByte(RegisterType::E, 0x96);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x7C);
    WriteRegisterByte(RegisterType::L, 0x10);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9D61, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x87);
    CheckRegisterByte(RegisterType::B, 0xA3);
    CheckRegisterByte(RegisterType::C, 0x43);
    CheckRegisterByte(RegisterType::D, 0x78);
    CheckRegisterByte(RegisterType::E, 0x96);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x7C);
    CheckRegisterByte(RegisterType::L, 0x10);
    WriteRegisterWord(RegisterType::PC, 0x9D62);
    WriteRegisterWord(RegisterType::SP, 0x19B2);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9D61, 0x40);
}

void test_40_02A8()
{
    if (skip_test_40_02A8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1AED);
    WriteRegisterWord(RegisterType::SP, 0xCBBF);
    WriteRegisterByte(RegisterType::A, 0x6F);
    WriteRegisterByte(RegisterType::B, 0x13);
    WriteRegisterByte(RegisterType::C, 0x90);
    WriteRegisterByte(RegisterType::D, 0xBE);
    WriteRegisterByte(RegisterType::E, 0x32);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x38);
    WriteRegisterByte(RegisterType::L, 0x06);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1AED, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6F);
    CheckRegisterByte(RegisterType::B, 0x13);
    CheckRegisterByte(RegisterType::C, 0x90);
    CheckRegisterByte(RegisterType::D, 0xBE);
    CheckRegisterByte(RegisterType::E, 0x32);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x38);
    CheckRegisterByte(RegisterType::L, 0x06);
    WriteRegisterWord(RegisterType::PC, 0x1AEE);
    WriteRegisterWord(RegisterType::SP, 0xCBBF);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1AED, 0x40);
}

void test_40_02A9()
{
    if (skip_test_40_02A9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5A95);
    WriteRegisterWord(RegisterType::SP, 0xC468);
    WriteRegisterByte(RegisterType::A, 0xC4);
    WriteRegisterByte(RegisterType::B, 0x22);
    WriteRegisterByte(RegisterType::C, 0x2F);
    WriteRegisterByte(RegisterType::D, 0x0A);
    WriteRegisterByte(RegisterType::E, 0x9E);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x3A);
    WriteRegisterByte(RegisterType::L, 0x8D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5A95, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC4);
    CheckRegisterByte(RegisterType::B, 0x22);
    CheckRegisterByte(RegisterType::C, 0x2F);
    CheckRegisterByte(RegisterType::D, 0x0A);
    CheckRegisterByte(RegisterType::E, 0x9E);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x3A);
    CheckRegisterByte(RegisterType::L, 0x8D);
    WriteRegisterWord(RegisterType::PC, 0x5A96);
    WriteRegisterWord(RegisterType::SP, 0xC468);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5A95, 0x40);
}

void test_40_02AA()
{
    if (skip_test_40_02AA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAC5F);
    WriteRegisterWord(RegisterType::SP, 0x5E4A);
    WriteRegisterByte(RegisterType::A, 0xB6);
    WriteRegisterByte(RegisterType::B, 0x69);
    WriteRegisterByte(RegisterType::C, 0x19);
    WriteRegisterByte(RegisterType::D, 0x7E);
    WriteRegisterByte(RegisterType::E, 0x40);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x16);
    WriteRegisterByte(RegisterType::L, 0xE0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xAC5F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB6);
    CheckRegisterByte(RegisterType::B, 0x69);
    CheckRegisterByte(RegisterType::C, 0x19);
    CheckRegisterByte(RegisterType::D, 0x7E);
    CheckRegisterByte(RegisterType::E, 0x40);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x16);
    CheckRegisterByte(RegisterType::L, 0xE0);
    WriteRegisterWord(RegisterType::PC, 0xAC60);
    WriteRegisterWord(RegisterType::SP, 0x5E4A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAC5F, 0x40);
}

void test_40_02AB()
{
    if (skip_test_40_02AB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3A1A);
    WriteRegisterWord(RegisterType::SP, 0xF636);
    WriteRegisterByte(RegisterType::A, 0x2C);
    WriteRegisterByte(RegisterType::B, 0x44);
    WriteRegisterByte(RegisterType::C, 0xD6);
    WriteRegisterByte(RegisterType::D, 0xFA);
    WriteRegisterByte(RegisterType::E, 0xD3);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x3B);
    WriteRegisterByte(RegisterType::L, 0xC5);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3A1A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2C);
    CheckRegisterByte(RegisterType::B, 0x44);
    CheckRegisterByte(RegisterType::C, 0xD6);
    CheckRegisterByte(RegisterType::D, 0xFA);
    CheckRegisterByte(RegisterType::E, 0xD3);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x3B);
    CheckRegisterByte(RegisterType::L, 0xC5);
    WriteRegisterWord(RegisterType::PC, 0x3A1B);
    WriteRegisterWord(RegisterType::SP, 0xF636);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3A1A, 0x40);
}

void test_40_02AC()
{
    if (skip_test_40_02AC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0821);
    WriteRegisterWord(RegisterType::SP, 0x7236);
    WriteRegisterByte(RegisterType::A, 0x6C);
    WriteRegisterByte(RegisterType::B, 0xC9);
    WriteRegisterByte(RegisterType::C, 0x62);
    WriteRegisterByte(RegisterType::D, 0x12);
    WriteRegisterByte(RegisterType::E, 0xD9);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xF3);
    WriteRegisterByte(RegisterType::L, 0x71);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0821, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6C);
    CheckRegisterByte(RegisterType::B, 0xC9);
    CheckRegisterByte(RegisterType::C, 0x62);
    CheckRegisterByte(RegisterType::D, 0x12);
    CheckRegisterByte(RegisterType::E, 0xD9);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xF3);
    CheckRegisterByte(RegisterType::L, 0x71);
    WriteRegisterWord(RegisterType::PC, 0x0822);
    WriteRegisterWord(RegisterType::SP, 0x7236);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0821, 0x40);
}

void test_40_02AD()
{
    if (skip_test_40_02AD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5A31);
    WriteRegisterWord(RegisterType::SP, 0x60B9);
    WriteRegisterByte(RegisterType::A, 0xE0);
    WriteRegisterByte(RegisterType::B, 0xD8);
    WriteRegisterByte(RegisterType::C, 0x82);
    WriteRegisterByte(RegisterType::D, 0xA5);
    WriteRegisterByte(RegisterType::E, 0xED);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xC1);
    WriteRegisterByte(RegisterType::L, 0xFE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5A31, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE0);
    CheckRegisterByte(RegisterType::B, 0xD8);
    CheckRegisterByte(RegisterType::C, 0x82);
    CheckRegisterByte(RegisterType::D, 0xA5);
    CheckRegisterByte(RegisterType::E, 0xED);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xC1);
    CheckRegisterByte(RegisterType::L, 0xFE);
    WriteRegisterWord(RegisterType::PC, 0x5A32);
    WriteRegisterWord(RegisterType::SP, 0x60B9);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5A31, 0x40);
}

void test_40_02AE()
{
    if (skip_test_40_02AE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3B25);
    WriteRegisterWord(RegisterType::SP, 0x3696);
    WriteRegisterByte(RegisterType::A, 0x54);
    WriteRegisterByte(RegisterType::B, 0x21);
    WriteRegisterByte(RegisterType::C, 0x7A);
    WriteRegisterByte(RegisterType::D, 0x37);
    WriteRegisterByte(RegisterType::E, 0x17);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xA9);
    WriteRegisterByte(RegisterType::L, 0x45);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3B25, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x54);
    CheckRegisterByte(RegisterType::B, 0x21);
    CheckRegisterByte(RegisterType::C, 0x7A);
    CheckRegisterByte(RegisterType::D, 0x37);
    CheckRegisterByte(RegisterType::E, 0x17);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xA9);
    CheckRegisterByte(RegisterType::L, 0x45);
    WriteRegisterWord(RegisterType::PC, 0x3B26);
    WriteRegisterWord(RegisterType::SP, 0x3696);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3B25, 0x40);
}

void test_40_02AF()
{
    if (skip_test_40_02AF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF86B);
    WriteRegisterWord(RegisterType::SP, 0xE373);
    WriteRegisterByte(RegisterType::A, 0x02);
    WriteRegisterByte(RegisterType::B, 0xB6);
    WriteRegisterByte(RegisterType::C, 0x75);
    WriteRegisterByte(RegisterType::D, 0xED);
    WriteRegisterByte(RegisterType::E, 0x8B);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x26);
    WriteRegisterByte(RegisterType::L, 0x95);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF86B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x02);
    CheckRegisterByte(RegisterType::B, 0xB6);
    CheckRegisterByte(RegisterType::C, 0x75);
    CheckRegisterByte(RegisterType::D, 0xED);
    CheckRegisterByte(RegisterType::E, 0x8B);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x26);
    CheckRegisterByte(RegisterType::L, 0x95);
    WriteRegisterWord(RegisterType::PC, 0xF86C);
    WriteRegisterWord(RegisterType::SP, 0xE373);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF86B, 0x40);
}

void test_40_02B0()
{
    if (skip_test_40_02B0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD99B);
    WriteRegisterWord(RegisterType::SP, 0x9A44);
    WriteRegisterByte(RegisterType::A, 0xC8);
    WriteRegisterByte(RegisterType::B, 0xF2);
    WriteRegisterByte(RegisterType::C, 0x09);
    WriteRegisterByte(RegisterType::D, 0xFF);
    WriteRegisterByte(RegisterType::E, 0x63);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xCE);
    WriteRegisterByte(RegisterType::L, 0x43);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD99B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC8);
    CheckRegisterByte(RegisterType::B, 0xF2);
    CheckRegisterByte(RegisterType::C, 0x09);
    CheckRegisterByte(RegisterType::D, 0xFF);
    CheckRegisterByte(RegisterType::E, 0x63);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xCE);
    CheckRegisterByte(RegisterType::L, 0x43);
    WriteRegisterWord(RegisterType::PC, 0xD99C);
    WriteRegisterWord(RegisterType::SP, 0x9A44);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD99B, 0x40);
}

void test_40_02B1()
{
    if (skip_test_40_02B1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x89D7);
    WriteRegisterWord(RegisterType::SP, 0x3362);
    WriteRegisterByte(RegisterType::A, 0x82);
    WriteRegisterByte(RegisterType::B, 0xCE);
    WriteRegisterByte(RegisterType::C, 0xD7);
    WriteRegisterByte(RegisterType::D, 0xF1);
    WriteRegisterByte(RegisterType::E, 0xEE);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x3E);
    WriteRegisterByte(RegisterType::L, 0x7A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x89D7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x82);
    CheckRegisterByte(RegisterType::B, 0xCE);
    CheckRegisterByte(RegisterType::C, 0xD7);
    CheckRegisterByte(RegisterType::D, 0xF1);
    CheckRegisterByte(RegisterType::E, 0xEE);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x3E);
    CheckRegisterByte(RegisterType::L, 0x7A);
    WriteRegisterWord(RegisterType::PC, 0x89D8);
    WriteRegisterWord(RegisterType::SP, 0x3362);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x89D7, 0x40);
}

void test_40_02B2()
{
    if (skip_test_40_02B2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x12F5);
    WriteRegisterWord(RegisterType::SP, 0x41CE);
    WriteRegisterByte(RegisterType::A, 0xA8);
    WriteRegisterByte(RegisterType::B, 0x08);
    WriteRegisterByte(RegisterType::C, 0xD5);
    WriteRegisterByte(RegisterType::D, 0x47);
    WriteRegisterByte(RegisterType::E, 0x7F);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x69);
    WriteRegisterByte(RegisterType::L, 0xA4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x12F5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA8);
    CheckRegisterByte(RegisterType::B, 0x08);
    CheckRegisterByte(RegisterType::C, 0xD5);
    CheckRegisterByte(RegisterType::D, 0x47);
    CheckRegisterByte(RegisterType::E, 0x7F);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x69);
    CheckRegisterByte(RegisterType::L, 0xA4);
    WriteRegisterWord(RegisterType::PC, 0x12F6);
    WriteRegisterWord(RegisterType::SP, 0x41CE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x12F5, 0x40);
}

void test_40_02B3()
{
    if (skip_test_40_02B3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x071B);
    WriteRegisterWord(RegisterType::SP, 0x28F2);
    WriteRegisterByte(RegisterType::A, 0x89);
    WriteRegisterByte(RegisterType::B, 0xE6);
    WriteRegisterByte(RegisterType::C, 0xF8);
    WriteRegisterByte(RegisterType::D, 0x27);
    WriteRegisterByte(RegisterType::E, 0x99);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xB0);
    WriteRegisterByte(RegisterType::L, 0x27);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x071B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x89);
    CheckRegisterByte(RegisterType::B, 0xE6);
    CheckRegisterByte(RegisterType::C, 0xF8);
    CheckRegisterByte(RegisterType::D, 0x27);
    CheckRegisterByte(RegisterType::E, 0x99);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xB0);
    CheckRegisterByte(RegisterType::L, 0x27);
    WriteRegisterWord(RegisterType::PC, 0x071C);
    WriteRegisterWord(RegisterType::SP, 0x28F2);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x071B, 0x40);
}

void test_40_02B4()
{
    if (skip_test_40_02B4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5846);
    WriteRegisterWord(RegisterType::SP, 0x5B22);
    WriteRegisterByte(RegisterType::A, 0xA9);
    WriteRegisterByte(RegisterType::B, 0xF6);
    WriteRegisterByte(RegisterType::C, 0x07);
    WriteRegisterByte(RegisterType::D, 0x8B);
    WriteRegisterByte(RegisterType::E, 0x71);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x19);
    WriteRegisterByte(RegisterType::L, 0x9E);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5846, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA9);
    CheckRegisterByte(RegisterType::B, 0xF6);
    CheckRegisterByte(RegisterType::C, 0x07);
    CheckRegisterByte(RegisterType::D, 0x8B);
    CheckRegisterByte(RegisterType::E, 0x71);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x19);
    CheckRegisterByte(RegisterType::L, 0x9E);
    WriteRegisterWord(RegisterType::PC, 0x5847);
    WriteRegisterWord(RegisterType::SP, 0x5B22);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5846, 0x40);
}

void test_40_02B5()
{
    if (skip_test_40_02B5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4380);
    WriteRegisterWord(RegisterType::SP, 0x72F9);
    WriteRegisterByte(RegisterType::A, 0xF4);
    WriteRegisterByte(RegisterType::B, 0x63);
    WriteRegisterByte(RegisterType::C, 0x55);
    WriteRegisterByte(RegisterType::D, 0xDC);
    WriteRegisterByte(RegisterType::E, 0x97);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x07);
    WriteRegisterByte(RegisterType::L, 0xBA);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4380, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF4);
    CheckRegisterByte(RegisterType::B, 0x63);
    CheckRegisterByte(RegisterType::C, 0x55);
    CheckRegisterByte(RegisterType::D, 0xDC);
    CheckRegisterByte(RegisterType::E, 0x97);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x07);
    CheckRegisterByte(RegisterType::L, 0xBA);
    WriteRegisterWord(RegisterType::PC, 0x4381);
    WriteRegisterWord(RegisterType::SP, 0x72F9);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4380, 0x40);
}

void test_40_02B6()
{
    if (skip_test_40_02B6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF255);
    WriteRegisterWord(RegisterType::SP, 0xFC40);
    WriteRegisterByte(RegisterType::A, 0x44);
    WriteRegisterByte(RegisterType::B, 0x00);
    WriteRegisterByte(RegisterType::C, 0xD0);
    WriteRegisterByte(RegisterType::D, 0xF4);
    WriteRegisterByte(RegisterType::E, 0x95);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x84);
    WriteRegisterByte(RegisterType::L, 0x49);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF255, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x44);
    CheckRegisterByte(RegisterType::B, 0x00);
    CheckRegisterByte(RegisterType::C, 0xD0);
    CheckRegisterByte(RegisterType::D, 0xF4);
    CheckRegisterByte(RegisterType::E, 0x95);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x84);
    CheckRegisterByte(RegisterType::L, 0x49);
    WriteRegisterWord(RegisterType::PC, 0xF256);
    WriteRegisterWord(RegisterType::SP, 0xFC40);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF255, 0x40);
}

void test_40_02B7()
{
    if (skip_test_40_02B7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x00DF);
    WriteRegisterWord(RegisterType::SP, 0x44B0);
    WriteRegisterByte(RegisterType::A, 0xC6);
    WriteRegisterByte(RegisterType::B, 0x54);
    WriteRegisterByte(RegisterType::C, 0x0B);
    WriteRegisterByte(RegisterType::D, 0xC6);
    WriteRegisterByte(RegisterType::E, 0x32);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x89);
    WriteRegisterByte(RegisterType::L, 0x31);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x00DF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC6);
    CheckRegisterByte(RegisterType::B, 0x54);
    CheckRegisterByte(RegisterType::C, 0x0B);
    CheckRegisterByte(RegisterType::D, 0xC6);
    CheckRegisterByte(RegisterType::E, 0x32);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x89);
    CheckRegisterByte(RegisterType::L, 0x31);
    WriteRegisterWord(RegisterType::PC, 0x00E0);
    WriteRegisterWord(RegisterType::SP, 0x44B0);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x00DF, 0x40);
}

void test_40_02B8()
{
    if (skip_test_40_02B8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB9F3);
    WriteRegisterWord(RegisterType::SP, 0x5205);
    WriteRegisterByte(RegisterType::A, 0xB3);
    WriteRegisterByte(RegisterType::B, 0xBB);
    WriteRegisterByte(RegisterType::C, 0x17);
    WriteRegisterByte(RegisterType::D, 0xFD);
    WriteRegisterByte(RegisterType::E, 0x96);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xC1);
    WriteRegisterByte(RegisterType::L, 0x72);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB9F3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB3);
    CheckRegisterByte(RegisterType::B, 0xBB);
    CheckRegisterByte(RegisterType::C, 0x17);
    CheckRegisterByte(RegisterType::D, 0xFD);
    CheckRegisterByte(RegisterType::E, 0x96);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xC1);
    CheckRegisterByte(RegisterType::L, 0x72);
    WriteRegisterWord(RegisterType::PC, 0xB9F4);
    WriteRegisterWord(RegisterType::SP, 0x5205);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB9F3, 0x40);
}

void test_40_02B9()
{
    if (skip_test_40_02B9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA261);
    WriteRegisterWord(RegisterType::SP, 0x8CEF);
    WriteRegisterByte(RegisterType::A, 0x25);
    WriteRegisterByte(RegisterType::B, 0x84);
    WriteRegisterByte(RegisterType::C, 0x1E);
    WriteRegisterByte(RegisterType::D, 0x54);
    WriteRegisterByte(RegisterType::E, 0xFB);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x86);
    WriteRegisterByte(RegisterType::L, 0x6A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA261, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x25);
    CheckRegisterByte(RegisterType::B, 0x84);
    CheckRegisterByte(RegisterType::C, 0x1E);
    CheckRegisterByte(RegisterType::D, 0x54);
    CheckRegisterByte(RegisterType::E, 0xFB);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x86);
    CheckRegisterByte(RegisterType::L, 0x6A);
    WriteRegisterWord(RegisterType::PC, 0xA262);
    WriteRegisterWord(RegisterType::SP, 0x8CEF);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA261, 0x40);
}

void test_40_02BA()
{
    if (skip_test_40_02BA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2612);
    WriteRegisterWord(RegisterType::SP, 0xB37C);
    WriteRegisterByte(RegisterType::A, 0xC6);
    WriteRegisterByte(RegisterType::B, 0x58);
    WriteRegisterByte(RegisterType::C, 0xF4);
    WriteRegisterByte(RegisterType::D, 0xCC);
    WriteRegisterByte(RegisterType::E, 0xCA);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xC0);
    WriteRegisterByte(RegisterType::L, 0xDF);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2612, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC6);
    CheckRegisterByte(RegisterType::B, 0x58);
    CheckRegisterByte(RegisterType::C, 0xF4);
    CheckRegisterByte(RegisterType::D, 0xCC);
    CheckRegisterByte(RegisterType::E, 0xCA);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xC0);
    CheckRegisterByte(RegisterType::L, 0xDF);
    WriteRegisterWord(RegisterType::PC, 0x2613);
    WriteRegisterWord(RegisterType::SP, 0xB37C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2612, 0x40);
}

void test_40_02BB()
{
    if (skip_test_40_02BB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xED8E);
    WriteRegisterWord(RegisterType::SP, 0x8F98);
    WriteRegisterByte(RegisterType::A, 0x33);
    WriteRegisterByte(RegisterType::B, 0xAB);
    WriteRegisterByte(RegisterType::C, 0x08);
    WriteRegisterByte(RegisterType::D, 0x96);
    WriteRegisterByte(RegisterType::E, 0x3A);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xE4);
    WriteRegisterByte(RegisterType::L, 0x91);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xED8E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x33);
    CheckRegisterByte(RegisterType::B, 0xAB);
    CheckRegisterByte(RegisterType::C, 0x08);
    CheckRegisterByte(RegisterType::D, 0x96);
    CheckRegisterByte(RegisterType::E, 0x3A);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xE4);
    CheckRegisterByte(RegisterType::L, 0x91);
    WriteRegisterWord(RegisterType::PC, 0xED8F);
    WriteRegisterWord(RegisterType::SP, 0x8F98);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xED8E, 0x40);
}

void test_40_02BC()
{
    if (skip_test_40_02BC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5263);
    WriteRegisterWord(RegisterType::SP, 0x9369);
    WriteRegisterByte(RegisterType::A, 0x07);
    WriteRegisterByte(RegisterType::B, 0x08);
    WriteRegisterByte(RegisterType::C, 0x69);
    WriteRegisterByte(RegisterType::D, 0x44);
    WriteRegisterByte(RegisterType::E, 0x81);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x5F);
    WriteRegisterByte(RegisterType::L, 0xA4);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5263, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x07);
    CheckRegisterByte(RegisterType::B, 0x08);
    CheckRegisterByte(RegisterType::C, 0x69);
    CheckRegisterByte(RegisterType::D, 0x44);
    CheckRegisterByte(RegisterType::E, 0x81);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x5F);
    CheckRegisterByte(RegisterType::L, 0xA4);
    WriteRegisterWord(RegisterType::PC, 0x5264);
    WriteRegisterWord(RegisterType::SP, 0x9369);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5263, 0x40);
}

void test_40_02BD()
{
    if (skip_test_40_02BD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB4F0);
    WriteRegisterWord(RegisterType::SP, 0x2A59);
    WriteRegisterByte(RegisterType::A, 0x82);
    WriteRegisterByte(RegisterType::B, 0xA8);
    WriteRegisterByte(RegisterType::C, 0x01);
    WriteRegisterByte(RegisterType::D, 0x92);
    WriteRegisterByte(RegisterType::E, 0x35);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xE4);
    WriteRegisterByte(RegisterType::L, 0x73);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB4F0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x82);
    CheckRegisterByte(RegisterType::B, 0xA8);
    CheckRegisterByte(RegisterType::C, 0x01);
    CheckRegisterByte(RegisterType::D, 0x92);
    CheckRegisterByte(RegisterType::E, 0x35);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xE4);
    CheckRegisterByte(RegisterType::L, 0x73);
    WriteRegisterWord(RegisterType::PC, 0xB4F1);
    WriteRegisterWord(RegisterType::SP, 0x2A59);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB4F0, 0x40);
}

void test_40_02BE()
{
    if (skip_test_40_02BE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8985);
    WriteRegisterWord(RegisterType::SP, 0x99F3);
    WriteRegisterByte(RegisterType::A, 0x17);
    WriteRegisterByte(RegisterType::B, 0xB2);
    WriteRegisterByte(RegisterType::C, 0x82);
    WriteRegisterByte(RegisterType::D, 0x32);
    WriteRegisterByte(RegisterType::E, 0x37);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xD0);
    WriteRegisterByte(RegisterType::L, 0x9D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8985, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x17);
    CheckRegisterByte(RegisterType::B, 0xB2);
    CheckRegisterByte(RegisterType::C, 0x82);
    CheckRegisterByte(RegisterType::D, 0x32);
    CheckRegisterByte(RegisterType::E, 0x37);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xD0);
    CheckRegisterByte(RegisterType::L, 0x9D);
    WriteRegisterWord(RegisterType::PC, 0x8986);
    WriteRegisterWord(RegisterType::SP, 0x99F3);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8985, 0x40);
}

void test_40_02BF()
{
    if (skip_test_40_02BF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF07D);
    WriteRegisterWord(RegisterType::SP, 0x01FA);
    WriteRegisterByte(RegisterType::A, 0xED);
    WriteRegisterByte(RegisterType::B, 0xE1);
    WriteRegisterByte(RegisterType::C, 0xC1);
    WriteRegisterByte(RegisterType::D, 0x20);
    WriteRegisterByte(RegisterType::E, 0x82);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x7B);
    WriteRegisterByte(RegisterType::L, 0x63);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF07D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xED);
    CheckRegisterByte(RegisterType::B, 0xE1);
    CheckRegisterByte(RegisterType::C, 0xC1);
    CheckRegisterByte(RegisterType::D, 0x20);
    CheckRegisterByte(RegisterType::E, 0x82);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x7B);
    CheckRegisterByte(RegisterType::L, 0x63);
    WriteRegisterWord(RegisterType::PC, 0xF07E);
    WriteRegisterWord(RegisterType::SP, 0x01FA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xF07D, 0x40);
}

void test_40_02C0()
{
    if (skip_test_40_02C0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE6E6);
    WriteRegisterWord(RegisterType::SP, 0x4B29);
    WriteRegisterByte(RegisterType::A, 0xCC);
    WriteRegisterByte(RegisterType::B, 0x81);
    WriteRegisterByte(RegisterType::C, 0x86);
    WriteRegisterByte(RegisterType::D, 0x40);
    WriteRegisterByte(RegisterType::E, 0x32);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xC9);
    WriteRegisterByte(RegisterType::L, 0x6A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE6E6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCC);
    CheckRegisterByte(RegisterType::B, 0x81);
    CheckRegisterByte(RegisterType::C, 0x86);
    CheckRegisterByte(RegisterType::D, 0x40);
    CheckRegisterByte(RegisterType::E, 0x32);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xC9);
    CheckRegisterByte(RegisterType::L, 0x6A);
    WriteRegisterWord(RegisterType::PC, 0xE6E7);
    WriteRegisterWord(RegisterType::SP, 0x4B29);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE6E6, 0x40);
}

void test_40_02C1()
{
    if (skip_test_40_02C1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0570);
    WriteRegisterWord(RegisterType::SP, 0x1F42);
    WriteRegisterByte(RegisterType::A, 0x46);
    WriteRegisterByte(RegisterType::B, 0x53);
    WriteRegisterByte(RegisterType::C, 0x21);
    WriteRegisterByte(RegisterType::D, 0xCF);
    WriteRegisterByte(RegisterType::E, 0x2A);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xAE);
    WriteRegisterByte(RegisterType::L, 0xFF);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0570, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x46);
    CheckRegisterByte(RegisterType::B, 0x53);
    CheckRegisterByte(RegisterType::C, 0x21);
    CheckRegisterByte(RegisterType::D, 0xCF);
    CheckRegisterByte(RegisterType::E, 0x2A);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xAE);
    CheckRegisterByte(RegisterType::L, 0xFF);
    WriteRegisterWord(RegisterType::PC, 0x0571);
    WriteRegisterWord(RegisterType::SP, 0x1F42);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0570, 0x40);
}

void test_40_02C2()
{
    if (skip_test_40_02C2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x91C4);
    WriteRegisterWord(RegisterType::SP, 0xE40F);
    WriteRegisterByte(RegisterType::A, 0x3D);
    WriteRegisterByte(RegisterType::B, 0x01);
    WriteRegisterByte(RegisterType::C, 0x06);
    WriteRegisterByte(RegisterType::D, 0x24);
    WriteRegisterByte(RegisterType::E, 0xC5);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x76);
    WriteRegisterByte(RegisterType::L, 0xF6);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x91C4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3D);
    CheckRegisterByte(RegisterType::B, 0x01);
    CheckRegisterByte(RegisterType::C, 0x06);
    CheckRegisterByte(RegisterType::D, 0x24);
    CheckRegisterByte(RegisterType::E, 0xC5);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x76);
    CheckRegisterByte(RegisterType::L, 0xF6);
    WriteRegisterWord(RegisterType::PC, 0x91C5);
    WriteRegisterWord(RegisterType::SP, 0xE40F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x91C4, 0x40);
}

void test_40_02C3()
{
    if (skip_test_40_02C3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3BB0);
    WriteRegisterWord(RegisterType::SP, 0x8FED);
    WriteRegisterByte(RegisterType::A, 0x26);
    WriteRegisterByte(RegisterType::B, 0xEE);
    WriteRegisterByte(RegisterType::C, 0x3D);
    WriteRegisterByte(RegisterType::D, 0xE9);
    WriteRegisterByte(RegisterType::E, 0xD9);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xC7);
    WriteRegisterByte(RegisterType::L, 0x10);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3BB0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x26);
    CheckRegisterByte(RegisterType::B, 0xEE);
    CheckRegisterByte(RegisterType::C, 0x3D);
    CheckRegisterByte(RegisterType::D, 0xE9);
    CheckRegisterByte(RegisterType::E, 0xD9);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xC7);
    CheckRegisterByte(RegisterType::L, 0x10);
    WriteRegisterWord(RegisterType::PC, 0x3BB1);
    WriteRegisterWord(RegisterType::SP, 0x8FED);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3BB0, 0x40);
}

void test_40_02C4()
{
    if (skip_test_40_02C4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF7E3);
    WriteRegisterWord(RegisterType::SP, 0x5229);
    WriteRegisterByte(RegisterType::A, 0xAD);
    WriteRegisterByte(RegisterType::B, 0x12);
    WriteRegisterByte(RegisterType::C, 0x16);
    WriteRegisterByte(RegisterType::D, 0x6A);
    WriteRegisterByte(RegisterType::E, 0xA8);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x9A);
    WriteRegisterByte(RegisterType::L, 0xDF);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF7E3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAD);
    CheckRegisterByte(RegisterType::B, 0x12);
    CheckRegisterByte(RegisterType::C, 0x16);
    CheckRegisterByte(RegisterType::D, 0x6A);
    CheckRegisterByte(RegisterType::E, 0xA8);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x9A);
    CheckRegisterByte(RegisterType::L, 0xDF);
    WriteRegisterWord(RegisterType::PC, 0xF7E4);
    WriteRegisterWord(RegisterType::SP, 0x5229);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF7E3, 0x40);
}

void test_40_02C5()
{
    if (skip_test_40_02C5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x252B);
    WriteRegisterWord(RegisterType::SP, 0xE3A7);
    WriteRegisterByte(RegisterType::A, 0x61);
    WriteRegisterByte(RegisterType::B, 0x3F);
    WriteRegisterByte(RegisterType::C, 0x84);
    WriteRegisterByte(RegisterType::D, 0x6E);
    WriteRegisterByte(RegisterType::E, 0xE1);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xC9);
    WriteRegisterByte(RegisterType::L, 0x18);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x252B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x61);
    CheckRegisterByte(RegisterType::B, 0x3F);
    CheckRegisterByte(RegisterType::C, 0x84);
    CheckRegisterByte(RegisterType::D, 0x6E);
    CheckRegisterByte(RegisterType::E, 0xE1);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xC9);
    CheckRegisterByte(RegisterType::L, 0x18);
    WriteRegisterWord(RegisterType::PC, 0x252C);
    WriteRegisterWord(RegisterType::SP, 0xE3A7);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x252B, 0x40);
}

void test_40_02C6()
{
    if (skip_test_40_02C6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x23C6);
    WriteRegisterWord(RegisterType::SP, 0x77CB);
    WriteRegisterByte(RegisterType::A, 0xB1);
    WriteRegisterByte(RegisterType::B, 0xF9);
    WriteRegisterByte(RegisterType::C, 0x3D);
    WriteRegisterByte(RegisterType::D, 0x65);
    WriteRegisterByte(RegisterType::E, 0xAC);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x5F);
    WriteRegisterByte(RegisterType::L, 0x22);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x23C6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB1);
    CheckRegisterByte(RegisterType::B, 0xF9);
    CheckRegisterByte(RegisterType::C, 0x3D);
    CheckRegisterByte(RegisterType::D, 0x65);
    CheckRegisterByte(RegisterType::E, 0xAC);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x5F);
    CheckRegisterByte(RegisterType::L, 0x22);
    WriteRegisterWord(RegisterType::PC, 0x23C7);
    WriteRegisterWord(RegisterType::SP, 0x77CB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x23C6, 0x40);
}

void test_40_02C7()
{
    if (skip_test_40_02C7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAE76);
    WriteRegisterWord(RegisterType::SP, 0xC31C);
    WriteRegisterByte(RegisterType::A, 0x95);
    WriteRegisterByte(RegisterType::B, 0xDC);
    WriteRegisterByte(RegisterType::C, 0x53);
    WriteRegisterByte(RegisterType::D, 0xCF);
    WriteRegisterByte(RegisterType::E, 0xC8);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x24);
    WriteRegisterByte(RegisterType::L, 0xFA);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xAE76, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x95);
    CheckRegisterByte(RegisterType::B, 0xDC);
    CheckRegisterByte(RegisterType::C, 0x53);
    CheckRegisterByte(RegisterType::D, 0xCF);
    CheckRegisterByte(RegisterType::E, 0xC8);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x24);
    CheckRegisterByte(RegisterType::L, 0xFA);
    WriteRegisterWord(RegisterType::PC, 0xAE77);
    WriteRegisterWord(RegisterType::SP, 0xC31C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAE76, 0x40);
}

void test_40_02C8()
{
    if (skip_test_40_02C8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1AFB);
    WriteRegisterWord(RegisterType::SP, 0xC0B8);
    WriteRegisterByte(RegisterType::A, 0x42);
    WriteRegisterByte(RegisterType::B, 0xBD);
    WriteRegisterByte(RegisterType::C, 0x93);
    WriteRegisterByte(RegisterType::D, 0xEC);
    WriteRegisterByte(RegisterType::E, 0x17);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x4F);
    WriteRegisterByte(RegisterType::L, 0xD8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1AFB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x42);
    CheckRegisterByte(RegisterType::B, 0xBD);
    CheckRegisterByte(RegisterType::C, 0x93);
    CheckRegisterByte(RegisterType::D, 0xEC);
    CheckRegisterByte(RegisterType::E, 0x17);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x4F);
    CheckRegisterByte(RegisterType::L, 0xD8);
    WriteRegisterWord(RegisterType::PC, 0x1AFC);
    WriteRegisterWord(RegisterType::SP, 0xC0B8);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1AFB, 0x40);
}

void test_40_02C9()
{
    if (skip_test_40_02C9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x63D9);
    WriteRegisterWord(RegisterType::SP, 0x698C);
    WriteRegisterByte(RegisterType::A, 0xD2);
    WriteRegisterByte(RegisterType::B, 0x50);
    WriteRegisterByte(RegisterType::C, 0xA4);
    WriteRegisterByte(RegisterType::D, 0x50);
    WriteRegisterByte(RegisterType::E, 0x47);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x7E);
    WriteRegisterByte(RegisterType::L, 0xA5);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x63D9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD2);
    CheckRegisterByte(RegisterType::B, 0x50);
    CheckRegisterByte(RegisterType::C, 0xA4);
    CheckRegisterByte(RegisterType::D, 0x50);
    CheckRegisterByte(RegisterType::E, 0x47);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x7E);
    CheckRegisterByte(RegisterType::L, 0xA5);
    WriteRegisterWord(RegisterType::PC, 0x63DA);
    WriteRegisterWord(RegisterType::SP, 0x698C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x63D9, 0x40);
}

void test_40_02CA()
{
    if (skip_test_40_02CA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xACCF);
    WriteRegisterWord(RegisterType::SP, 0xD107);
    WriteRegisterByte(RegisterType::A, 0x9D);
    WriteRegisterByte(RegisterType::B, 0xD0);
    WriteRegisterByte(RegisterType::C, 0xC7);
    WriteRegisterByte(RegisterType::D, 0xE1);
    WriteRegisterByte(RegisterType::E, 0xA3);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x11);
    WriteRegisterByte(RegisterType::L, 0x6E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xACCF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9D);
    CheckRegisterByte(RegisterType::B, 0xD0);
    CheckRegisterByte(RegisterType::C, 0xC7);
    CheckRegisterByte(RegisterType::D, 0xE1);
    CheckRegisterByte(RegisterType::E, 0xA3);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x11);
    CheckRegisterByte(RegisterType::L, 0x6E);
    WriteRegisterWord(RegisterType::PC, 0xACD0);
    WriteRegisterWord(RegisterType::SP, 0xD107);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xACCF, 0x40);
}

void test_40_02CB()
{
    if (skip_test_40_02CB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6FC5);
    WriteRegisterWord(RegisterType::SP, 0x4B0F);
    WriteRegisterByte(RegisterType::A, 0x98);
    WriteRegisterByte(RegisterType::B, 0x79);
    WriteRegisterByte(RegisterType::C, 0x58);
    WriteRegisterByte(RegisterType::D, 0x50);
    WriteRegisterByte(RegisterType::E, 0x3D);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xF7);
    WriteRegisterByte(RegisterType::L, 0x64);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6FC5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x98);
    CheckRegisterByte(RegisterType::B, 0x79);
    CheckRegisterByte(RegisterType::C, 0x58);
    CheckRegisterByte(RegisterType::D, 0x50);
    CheckRegisterByte(RegisterType::E, 0x3D);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xF7);
    CheckRegisterByte(RegisterType::L, 0x64);
    WriteRegisterWord(RegisterType::PC, 0x6FC6);
    WriteRegisterWord(RegisterType::SP, 0x4B0F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6FC5, 0x40);
}

void test_40_02CC()
{
    if (skip_test_40_02CC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4D2E);
    WriteRegisterWord(RegisterType::SP, 0xF971);
    WriteRegisterByte(RegisterType::A, 0x1A);
    WriteRegisterByte(RegisterType::B, 0xE0);
    WriteRegisterByte(RegisterType::C, 0xBA);
    WriteRegisterByte(RegisterType::D, 0x7C);
    WriteRegisterByte(RegisterType::E, 0x41);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x5C);
    WriteRegisterByte(RegisterType::L, 0xF0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4D2E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1A);
    CheckRegisterByte(RegisterType::B, 0xE0);
    CheckRegisterByte(RegisterType::C, 0xBA);
    CheckRegisterByte(RegisterType::D, 0x7C);
    CheckRegisterByte(RegisterType::E, 0x41);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x5C);
    CheckRegisterByte(RegisterType::L, 0xF0);
    WriteRegisterWord(RegisterType::PC, 0x4D2F);
    WriteRegisterWord(RegisterType::SP, 0xF971);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4D2E, 0x40);
}

void test_40_02CD()
{
    if (skip_test_40_02CD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4076);
    WriteRegisterWord(RegisterType::SP, 0x8659);
    WriteRegisterByte(RegisterType::A, 0x63);
    WriteRegisterByte(RegisterType::B, 0x04);
    WriteRegisterByte(RegisterType::C, 0x90);
    WriteRegisterByte(RegisterType::D, 0x6E);
    WriteRegisterByte(RegisterType::E, 0x1B);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x87);
    WriteRegisterByte(RegisterType::L, 0x0D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4076, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x63);
    CheckRegisterByte(RegisterType::B, 0x04);
    CheckRegisterByte(RegisterType::C, 0x90);
    CheckRegisterByte(RegisterType::D, 0x6E);
    CheckRegisterByte(RegisterType::E, 0x1B);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x87);
    CheckRegisterByte(RegisterType::L, 0x0D);
    WriteRegisterWord(RegisterType::PC, 0x4077);
    WriteRegisterWord(RegisterType::SP, 0x8659);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4076, 0x40);
}

void test_40_02CE()
{
    if (skip_test_40_02CE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x838C);
    WriteRegisterWord(RegisterType::SP, 0x267D);
    WriteRegisterByte(RegisterType::A, 0xC1);
    WriteRegisterByte(RegisterType::B, 0x1F);
    WriteRegisterByte(RegisterType::C, 0xFF);
    WriteRegisterByte(RegisterType::D, 0x6A);
    WriteRegisterByte(RegisterType::E, 0x8E);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xCC);
    WriteRegisterByte(RegisterType::L, 0xD3);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x838C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC1);
    CheckRegisterByte(RegisterType::B, 0x1F);
    CheckRegisterByte(RegisterType::C, 0xFF);
    CheckRegisterByte(RegisterType::D, 0x6A);
    CheckRegisterByte(RegisterType::E, 0x8E);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xCC);
    CheckRegisterByte(RegisterType::L, 0xD3);
    WriteRegisterWord(RegisterType::PC, 0x838D);
    WriteRegisterWord(RegisterType::SP, 0x267D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x838C, 0x40);
}

void test_40_02CF()
{
    if (skip_test_40_02CF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6D80);
    WriteRegisterWord(RegisterType::SP, 0xFEFB);
    WriteRegisterByte(RegisterType::A, 0xC0);
    WriteRegisterByte(RegisterType::B, 0xEC);
    WriteRegisterByte(RegisterType::C, 0x8D);
    WriteRegisterByte(RegisterType::D, 0x5D);
    WriteRegisterByte(RegisterType::E, 0xB1);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x80);
    WriteRegisterByte(RegisterType::L, 0xCF);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6D80, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC0);
    CheckRegisterByte(RegisterType::B, 0xEC);
    CheckRegisterByte(RegisterType::C, 0x8D);
    CheckRegisterByte(RegisterType::D, 0x5D);
    CheckRegisterByte(RegisterType::E, 0xB1);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x80);
    CheckRegisterByte(RegisterType::L, 0xCF);
    WriteRegisterWord(RegisterType::PC, 0x6D81);
    WriteRegisterWord(RegisterType::SP, 0xFEFB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6D80, 0x40);
}

void test_40_02D0()
{
    if (skip_test_40_02D0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD3C1);
    WriteRegisterWord(RegisterType::SP, 0xB29B);
    WriteRegisterByte(RegisterType::A, 0x90);
    WriteRegisterByte(RegisterType::B, 0x39);
    WriteRegisterByte(RegisterType::C, 0xAE);
    WriteRegisterByte(RegisterType::D, 0xAF);
    WriteRegisterByte(RegisterType::E, 0x1E);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x4E);
    WriteRegisterByte(RegisterType::L, 0xF2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD3C1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x90);
    CheckRegisterByte(RegisterType::B, 0x39);
    CheckRegisterByte(RegisterType::C, 0xAE);
    CheckRegisterByte(RegisterType::D, 0xAF);
    CheckRegisterByte(RegisterType::E, 0x1E);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x4E);
    CheckRegisterByte(RegisterType::L, 0xF2);
    WriteRegisterWord(RegisterType::PC, 0xD3C2);
    WriteRegisterWord(RegisterType::SP, 0xB29B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD3C1, 0x40);
}

void test_40_02D1()
{
    if (skip_test_40_02D1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5AC9);
    WriteRegisterWord(RegisterType::SP, 0x5D41);
    WriteRegisterByte(RegisterType::A, 0x62);
    WriteRegisterByte(RegisterType::B, 0xE9);
    WriteRegisterByte(RegisterType::C, 0x71);
    WriteRegisterByte(RegisterType::D, 0x26);
    WriteRegisterByte(RegisterType::E, 0xF0);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x4E);
    WriteRegisterByte(RegisterType::L, 0x98);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5AC9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x62);
    CheckRegisterByte(RegisterType::B, 0xE9);
    CheckRegisterByte(RegisterType::C, 0x71);
    CheckRegisterByte(RegisterType::D, 0x26);
    CheckRegisterByte(RegisterType::E, 0xF0);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x4E);
    CheckRegisterByte(RegisterType::L, 0x98);
    WriteRegisterWord(RegisterType::PC, 0x5ACA);
    WriteRegisterWord(RegisterType::SP, 0x5D41);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5AC9, 0x40);
}

void test_40_02D2()
{
    if (skip_test_40_02D2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x848E);
    WriteRegisterWord(RegisterType::SP, 0x7ADC);
    WriteRegisterByte(RegisterType::A, 0x5E);
    WriteRegisterByte(RegisterType::B, 0xDD);
    WriteRegisterByte(RegisterType::C, 0x8A);
    WriteRegisterByte(RegisterType::D, 0xF6);
    WriteRegisterByte(RegisterType::E, 0xF2);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x8B);
    WriteRegisterByte(RegisterType::L, 0x4D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x848E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5E);
    CheckRegisterByte(RegisterType::B, 0xDD);
    CheckRegisterByte(RegisterType::C, 0x8A);
    CheckRegisterByte(RegisterType::D, 0xF6);
    CheckRegisterByte(RegisterType::E, 0xF2);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x8B);
    CheckRegisterByte(RegisterType::L, 0x4D);
    WriteRegisterWord(RegisterType::PC, 0x848F);
    WriteRegisterWord(RegisterType::SP, 0x7ADC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x848E, 0x40);
}

void test_40_02D3()
{
    if (skip_test_40_02D3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5B4E);
    WriteRegisterWord(RegisterType::SP, 0xBCAE);
    WriteRegisterByte(RegisterType::A, 0x6D);
    WriteRegisterByte(RegisterType::B, 0x15);
    WriteRegisterByte(RegisterType::C, 0x80);
    WriteRegisterByte(RegisterType::D, 0x83);
    WriteRegisterByte(RegisterType::E, 0xDA);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xEB);
    WriteRegisterByte(RegisterType::L, 0x79);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5B4E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6D);
    CheckRegisterByte(RegisterType::B, 0x15);
    CheckRegisterByte(RegisterType::C, 0x80);
    CheckRegisterByte(RegisterType::D, 0x83);
    CheckRegisterByte(RegisterType::E, 0xDA);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xEB);
    CheckRegisterByte(RegisterType::L, 0x79);
    WriteRegisterWord(RegisterType::PC, 0x5B4F);
    WriteRegisterWord(RegisterType::SP, 0xBCAE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5B4E, 0x40);
}

void test_40_02D4()
{
    if (skip_test_40_02D4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBB00);
    WriteRegisterWord(RegisterType::SP, 0x6A05);
    WriteRegisterByte(RegisterType::A, 0xE8);
    WriteRegisterByte(RegisterType::B, 0xC6);
    WriteRegisterByte(RegisterType::C, 0x6E);
    WriteRegisterByte(RegisterType::D, 0xA7);
    WriteRegisterByte(RegisterType::E, 0xAC);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xD9);
    WriteRegisterByte(RegisterType::L, 0x97);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBB00, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE8);
    CheckRegisterByte(RegisterType::B, 0xC6);
    CheckRegisterByte(RegisterType::C, 0x6E);
    CheckRegisterByte(RegisterType::D, 0xA7);
    CheckRegisterByte(RegisterType::E, 0xAC);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xD9);
    CheckRegisterByte(RegisterType::L, 0x97);
    WriteRegisterWord(RegisterType::PC, 0xBB01);
    WriteRegisterWord(RegisterType::SP, 0x6A05);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xBB00, 0x40);
}

void test_40_02D5()
{
    if (skip_test_40_02D5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD243);
    WriteRegisterWord(RegisterType::SP, 0x9222);
    WriteRegisterByte(RegisterType::A, 0xCC);
    WriteRegisterByte(RegisterType::B, 0x02);
    WriteRegisterByte(RegisterType::C, 0xBA);
    WriteRegisterByte(RegisterType::D, 0x88);
    WriteRegisterByte(RegisterType::E, 0x0B);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x52);
    WriteRegisterByte(RegisterType::L, 0x8D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD243, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCC);
    CheckRegisterByte(RegisterType::B, 0x02);
    CheckRegisterByte(RegisterType::C, 0xBA);
    CheckRegisterByte(RegisterType::D, 0x88);
    CheckRegisterByte(RegisterType::E, 0x0B);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x52);
    CheckRegisterByte(RegisterType::L, 0x8D);
    WriteRegisterWord(RegisterType::PC, 0xD244);
    WriteRegisterWord(RegisterType::SP, 0x9222);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD243, 0x40);
}

void test_40_02D6()
{
    if (skip_test_40_02D6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEBBD);
    WriteRegisterWord(RegisterType::SP, 0x1A2D);
    WriteRegisterByte(RegisterType::A, 0x8C);
    WriteRegisterByte(RegisterType::B, 0xC1);
    WriteRegisterByte(RegisterType::C, 0x15);
    WriteRegisterByte(RegisterType::D, 0xCE);
    WriteRegisterByte(RegisterType::E, 0x4C);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x6B);
    WriteRegisterByte(RegisterType::L, 0x12);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEBBD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8C);
    CheckRegisterByte(RegisterType::B, 0xC1);
    CheckRegisterByte(RegisterType::C, 0x15);
    CheckRegisterByte(RegisterType::D, 0xCE);
    CheckRegisterByte(RegisterType::E, 0x4C);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x6B);
    CheckRegisterByte(RegisterType::L, 0x12);
    WriteRegisterWord(RegisterType::PC, 0xEBBE);
    WriteRegisterWord(RegisterType::SP, 0x1A2D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEBBD, 0x40);
}

void test_40_02D7()
{
    if (skip_test_40_02D7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x12C9);
    WriteRegisterWord(RegisterType::SP, 0xC769);
    WriteRegisterByte(RegisterType::A, 0x55);
    WriteRegisterByte(RegisterType::B, 0x3D);
    WriteRegisterByte(RegisterType::C, 0x19);
    WriteRegisterByte(RegisterType::D, 0xBF);
    WriteRegisterByte(RegisterType::E, 0xF3);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x41);
    WriteRegisterByte(RegisterType::L, 0x01);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x12C9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x55);
    CheckRegisterByte(RegisterType::B, 0x3D);
    CheckRegisterByte(RegisterType::C, 0x19);
    CheckRegisterByte(RegisterType::D, 0xBF);
    CheckRegisterByte(RegisterType::E, 0xF3);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x41);
    CheckRegisterByte(RegisterType::L, 0x01);
    WriteRegisterWord(RegisterType::PC, 0x12CA);
    WriteRegisterWord(RegisterType::SP, 0xC769);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x12C9, 0x40);
}

void test_40_02D8()
{
    if (skip_test_40_02D8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5E37);
    WriteRegisterWord(RegisterType::SP, 0x1E5B);
    WriteRegisterByte(RegisterType::A, 0x0C);
    WriteRegisterByte(RegisterType::B, 0xDB);
    WriteRegisterByte(RegisterType::C, 0xF4);
    WriteRegisterByte(RegisterType::D, 0x0B);
    WriteRegisterByte(RegisterType::E, 0xC9);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xA3);
    WriteRegisterByte(RegisterType::L, 0xAC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5E37, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0C);
    CheckRegisterByte(RegisterType::B, 0xDB);
    CheckRegisterByte(RegisterType::C, 0xF4);
    CheckRegisterByte(RegisterType::D, 0x0B);
    CheckRegisterByte(RegisterType::E, 0xC9);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xA3);
    CheckRegisterByte(RegisterType::L, 0xAC);
    WriteRegisterWord(RegisterType::PC, 0x5E38);
    WriteRegisterWord(RegisterType::SP, 0x1E5B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5E37, 0x40);
}

void test_40_02D9()
{
    if (skip_test_40_02D9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4244);
    WriteRegisterWord(RegisterType::SP, 0x36F9);
    WriteRegisterByte(RegisterType::A, 0x58);
    WriteRegisterByte(RegisterType::B, 0x91);
    WriteRegisterByte(RegisterType::C, 0xD9);
    WriteRegisterByte(RegisterType::D, 0x4D);
    WriteRegisterByte(RegisterType::E, 0x8B);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x2D);
    WriteRegisterByte(RegisterType::L, 0x03);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4244, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x58);
    CheckRegisterByte(RegisterType::B, 0x91);
    CheckRegisterByte(RegisterType::C, 0xD9);
    CheckRegisterByte(RegisterType::D, 0x4D);
    CheckRegisterByte(RegisterType::E, 0x8B);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x2D);
    CheckRegisterByte(RegisterType::L, 0x03);
    WriteRegisterWord(RegisterType::PC, 0x4245);
    WriteRegisterWord(RegisterType::SP, 0x36F9);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4244, 0x40);
}

void test_40_02DA()
{
    if (skip_test_40_02DA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6526);
    WriteRegisterWord(RegisterType::SP, 0x1717);
    WriteRegisterByte(RegisterType::A, 0x11);
    WriteRegisterByte(RegisterType::B, 0x19);
    WriteRegisterByte(RegisterType::C, 0x38);
    WriteRegisterByte(RegisterType::D, 0x0D);
    WriteRegisterByte(RegisterType::E, 0x25);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xAE);
    WriteRegisterByte(RegisterType::L, 0xEC);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6526, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x11);
    CheckRegisterByte(RegisterType::B, 0x19);
    CheckRegisterByte(RegisterType::C, 0x38);
    CheckRegisterByte(RegisterType::D, 0x0D);
    CheckRegisterByte(RegisterType::E, 0x25);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xAE);
    CheckRegisterByte(RegisterType::L, 0xEC);
    WriteRegisterWord(RegisterType::PC, 0x6527);
    WriteRegisterWord(RegisterType::SP, 0x1717);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6526, 0x40);
}

void test_40_02DB()
{
    if (skip_test_40_02DB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC6D0);
    WriteRegisterWord(RegisterType::SP, 0xC235);
    WriteRegisterByte(RegisterType::A, 0x50);
    WriteRegisterByte(RegisterType::B, 0xA5);
    WriteRegisterByte(RegisterType::C, 0x4B);
    WriteRegisterByte(RegisterType::D, 0x48);
    WriteRegisterByte(RegisterType::E, 0x3A);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xAE);
    WriteRegisterByte(RegisterType::L, 0x4B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC6D0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x50);
    CheckRegisterByte(RegisterType::B, 0xA5);
    CheckRegisterByte(RegisterType::C, 0x4B);
    CheckRegisterByte(RegisterType::D, 0x48);
    CheckRegisterByte(RegisterType::E, 0x3A);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xAE);
    CheckRegisterByte(RegisterType::L, 0x4B);
    WriteRegisterWord(RegisterType::PC, 0xC6D1);
    WriteRegisterWord(RegisterType::SP, 0xC235);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC6D0, 0x40);
}

void test_40_02DC()
{
    if (skip_test_40_02DC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB22D);
    WriteRegisterWord(RegisterType::SP, 0xE462);
    WriteRegisterByte(RegisterType::A, 0x27);
    WriteRegisterByte(RegisterType::B, 0x27);
    WriteRegisterByte(RegisterType::C, 0x28);
    WriteRegisterByte(RegisterType::D, 0xCE);
    WriteRegisterByte(RegisterType::E, 0x86);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x38);
    WriteRegisterByte(RegisterType::L, 0x48);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB22D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x27);
    CheckRegisterByte(RegisterType::B, 0x27);
    CheckRegisterByte(RegisterType::C, 0x28);
    CheckRegisterByte(RegisterType::D, 0xCE);
    CheckRegisterByte(RegisterType::E, 0x86);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x38);
    CheckRegisterByte(RegisterType::L, 0x48);
    WriteRegisterWord(RegisterType::PC, 0xB22E);
    WriteRegisterWord(RegisterType::SP, 0xE462);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB22D, 0x40);
}

void test_40_02DD()
{
    if (skip_test_40_02DD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEBA2);
    WriteRegisterWord(RegisterType::SP, 0x4708);
    WriteRegisterByte(RegisterType::A, 0x9E);
    WriteRegisterByte(RegisterType::B, 0xF7);
    WriteRegisterByte(RegisterType::C, 0x47);
    WriteRegisterByte(RegisterType::D, 0x29);
    WriteRegisterByte(RegisterType::E, 0x11);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x9F);
    WriteRegisterByte(RegisterType::L, 0x64);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xEBA2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9E);
    CheckRegisterByte(RegisterType::B, 0xF7);
    CheckRegisterByte(RegisterType::C, 0x47);
    CheckRegisterByte(RegisterType::D, 0x29);
    CheckRegisterByte(RegisterType::E, 0x11);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x9F);
    CheckRegisterByte(RegisterType::L, 0x64);
    WriteRegisterWord(RegisterType::PC, 0xEBA3);
    WriteRegisterWord(RegisterType::SP, 0x4708);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xEBA2, 0x40);
}

void test_40_02DE()
{
    if (skip_test_40_02DE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2C8F);
    WriteRegisterWord(RegisterType::SP, 0xE853);
    WriteRegisterByte(RegisterType::A, 0x0E);
    WriteRegisterByte(RegisterType::B, 0xB2);
    WriteRegisterByte(RegisterType::C, 0x9B);
    WriteRegisterByte(RegisterType::D, 0xBB);
    WriteRegisterByte(RegisterType::E, 0x0B);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x82);
    WriteRegisterByte(RegisterType::L, 0x59);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2C8F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0E);
    CheckRegisterByte(RegisterType::B, 0xB2);
    CheckRegisterByte(RegisterType::C, 0x9B);
    CheckRegisterByte(RegisterType::D, 0xBB);
    CheckRegisterByte(RegisterType::E, 0x0B);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x82);
    CheckRegisterByte(RegisterType::L, 0x59);
    WriteRegisterWord(RegisterType::PC, 0x2C90);
    WriteRegisterWord(RegisterType::SP, 0xE853);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2C8F, 0x40);
}

void test_40_02DF()
{
    if (skip_test_40_02DF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x384D);
    WriteRegisterWord(RegisterType::SP, 0x5C87);
    WriteRegisterByte(RegisterType::A, 0xE7);
    WriteRegisterByte(RegisterType::B, 0xAF);
    WriteRegisterByte(RegisterType::C, 0xFE);
    WriteRegisterByte(RegisterType::D, 0x66);
    WriteRegisterByte(RegisterType::E, 0x5C);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x85);
    WriteRegisterByte(RegisterType::L, 0xBD);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x384D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE7);
    CheckRegisterByte(RegisterType::B, 0xAF);
    CheckRegisterByte(RegisterType::C, 0xFE);
    CheckRegisterByte(RegisterType::D, 0x66);
    CheckRegisterByte(RegisterType::E, 0x5C);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x85);
    CheckRegisterByte(RegisterType::L, 0xBD);
    WriteRegisterWord(RegisterType::PC, 0x384E);
    WriteRegisterWord(RegisterType::SP, 0x5C87);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x384D, 0x40);
}

void test_40_02E0()
{
    if (skip_test_40_02E0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1610);
    WriteRegisterWord(RegisterType::SP, 0x8C6B);
    WriteRegisterByte(RegisterType::A, 0xE0);
    WriteRegisterByte(RegisterType::B, 0xAB);
    WriteRegisterByte(RegisterType::C, 0xF4);
    WriteRegisterByte(RegisterType::D, 0x1D);
    WriteRegisterByte(RegisterType::E, 0x4E);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x27);
    WriteRegisterByte(RegisterType::L, 0x5F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1610, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE0);
    CheckRegisterByte(RegisterType::B, 0xAB);
    CheckRegisterByte(RegisterType::C, 0xF4);
    CheckRegisterByte(RegisterType::D, 0x1D);
    CheckRegisterByte(RegisterType::E, 0x4E);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x27);
    CheckRegisterByte(RegisterType::L, 0x5F);
    WriteRegisterWord(RegisterType::PC, 0x1611);
    WriteRegisterWord(RegisterType::SP, 0x8C6B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1610, 0x40);
}

void test_40_02E1()
{
    if (skip_test_40_02E1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC3CE);
    WriteRegisterWord(RegisterType::SP, 0xEF73);
    WriteRegisterByte(RegisterType::A, 0x1D);
    WriteRegisterByte(RegisterType::B, 0x29);
    WriteRegisterByte(RegisterType::C, 0x33);
    WriteRegisterByte(RegisterType::D, 0x0C);
    WriteRegisterByte(RegisterType::E, 0xA8);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x01);
    WriteRegisterByte(RegisterType::L, 0x3C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC3CE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1D);
    CheckRegisterByte(RegisterType::B, 0x29);
    CheckRegisterByte(RegisterType::C, 0x33);
    CheckRegisterByte(RegisterType::D, 0x0C);
    CheckRegisterByte(RegisterType::E, 0xA8);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x01);
    CheckRegisterByte(RegisterType::L, 0x3C);
    WriteRegisterWord(RegisterType::PC, 0xC3CF);
    WriteRegisterWord(RegisterType::SP, 0xEF73);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC3CE, 0x40);
}

void test_40_02E2()
{
    if (skip_test_40_02E2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4E32);
    WriteRegisterWord(RegisterType::SP, 0x0584);
    WriteRegisterByte(RegisterType::A, 0xE8);
    WriteRegisterByte(RegisterType::B, 0xE2);
    WriteRegisterByte(RegisterType::C, 0x93);
    WriteRegisterByte(RegisterType::D, 0xB4);
    WriteRegisterByte(RegisterType::E, 0x4A);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x0C);
    WriteRegisterByte(RegisterType::L, 0x5E);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4E32, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE8);
    CheckRegisterByte(RegisterType::B, 0xE2);
    CheckRegisterByte(RegisterType::C, 0x93);
    CheckRegisterByte(RegisterType::D, 0xB4);
    CheckRegisterByte(RegisterType::E, 0x4A);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x0C);
    CheckRegisterByte(RegisterType::L, 0x5E);
    WriteRegisterWord(RegisterType::PC, 0x4E33);
    WriteRegisterWord(RegisterType::SP, 0x0584);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4E32, 0x40);
}

void test_40_02E3()
{
    if (skip_test_40_02E3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCE24);
    WriteRegisterWord(RegisterType::SP, 0xC3AB);
    WriteRegisterByte(RegisterType::A, 0x04);
    WriteRegisterByte(RegisterType::B, 0x3B);
    WriteRegisterByte(RegisterType::C, 0xEB);
    WriteRegisterByte(RegisterType::D, 0x79);
    WriteRegisterByte(RegisterType::E, 0xB0);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x7B);
    WriteRegisterByte(RegisterType::L, 0xC9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCE24, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x04);
    CheckRegisterByte(RegisterType::B, 0x3B);
    CheckRegisterByte(RegisterType::C, 0xEB);
    CheckRegisterByte(RegisterType::D, 0x79);
    CheckRegisterByte(RegisterType::E, 0xB0);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x7B);
    CheckRegisterByte(RegisterType::L, 0xC9);
    WriteRegisterWord(RegisterType::PC, 0xCE25);
    WriteRegisterWord(RegisterType::SP, 0xC3AB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xCE24, 0x40);
}

void test_40_02E4()
{
    if (skip_test_40_02E4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2D37);
    WriteRegisterWord(RegisterType::SP, 0x30A1);
    WriteRegisterByte(RegisterType::A, 0x4D);
    WriteRegisterByte(RegisterType::B, 0xA7);
    WriteRegisterByte(RegisterType::C, 0xCE);
    WriteRegisterByte(RegisterType::D, 0x4C);
    WriteRegisterByte(RegisterType::E, 0xE1);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xBE);
    WriteRegisterByte(RegisterType::L, 0x32);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2D37, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4D);
    CheckRegisterByte(RegisterType::B, 0xA7);
    CheckRegisterByte(RegisterType::C, 0xCE);
    CheckRegisterByte(RegisterType::D, 0x4C);
    CheckRegisterByte(RegisterType::E, 0xE1);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xBE);
    CheckRegisterByte(RegisterType::L, 0x32);
    WriteRegisterWord(RegisterType::PC, 0x2D38);
    WriteRegisterWord(RegisterType::SP, 0x30A1);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2D37, 0x40);
}

void test_40_02E5()
{
    if (skip_test_40_02E5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7CB5);
    WriteRegisterWord(RegisterType::SP, 0xE5FE);
    WriteRegisterByte(RegisterType::A, 0x9E);
    WriteRegisterByte(RegisterType::B, 0xE4);
    WriteRegisterByte(RegisterType::C, 0xC6);
    WriteRegisterByte(RegisterType::D, 0x7E);
    WriteRegisterByte(RegisterType::E, 0xA1);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x8C);
    WriteRegisterByte(RegisterType::L, 0x35);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7CB5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9E);
    CheckRegisterByte(RegisterType::B, 0xE4);
    CheckRegisterByte(RegisterType::C, 0xC6);
    CheckRegisterByte(RegisterType::D, 0x7E);
    CheckRegisterByte(RegisterType::E, 0xA1);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x8C);
    CheckRegisterByte(RegisterType::L, 0x35);
    WriteRegisterWord(RegisterType::PC, 0x7CB6);
    WriteRegisterWord(RegisterType::SP, 0xE5FE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7CB5, 0x40);
}

void test_40_02E6()
{
    if (skip_test_40_02E6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8B02);
    WriteRegisterWord(RegisterType::SP, 0xB937);
    WriteRegisterByte(RegisterType::A, 0x64);
    WriteRegisterByte(RegisterType::B, 0xC6);
    WriteRegisterByte(RegisterType::C, 0xA1);
    WriteRegisterByte(RegisterType::D, 0xEE);
    WriteRegisterByte(RegisterType::E, 0xC5);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x88);
    WriteRegisterByte(RegisterType::L, 0xE0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8B02, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x64);
    CheckRegisterByte(RegisterType::B, 0xC6);
    CheckRegisterByte(RegisterType::C, 0xA1);
    CheckRegisterByte(RegisterType::D, 0xEE);
    CheckRegisterByte(RegisterType::E, 0xC5);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x88);
    CheckRegisterByte(RegisterType::L, 0xE0);
    WriteRegisterWord(RegisterType::PC, 0x8B03);
    WriteRegisterWord(RegisterType::SP, 0xB937);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8B02, 0x40);
}

void test_40_02E7()
{
    if (skip_test_40_02E7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x888E);
    WriteRegisterWord(RegisterType::SP, 0xF582);
    WriteRegisterByte(RegisterType::A, 0x10);
    WriteRegisterByte(RegisterType::B, 0xD4);
    WriteRegisterByte(RegisterType::C, 0x47);
    WriteRegisterByte(RegisterType::D, 0x6A);
    WriteRegisterByte(RegisterType::E, 0x21);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x21);
    WriteRegisterByte(RegisterType::L, 0x7A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x888E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x10);
    CheckRegisterByte(RegisterType::B, 0xD4);
    CheckRegisterByte(RegisterType::C, 0x47);
    CheckRegisterByte(RegisterType::D, 0x6A);
    CheckRegisterByte(RegisterType::E, 0x21);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x21);
    CheckRegisterByte(RegisterType::L, 0x7A);
    WriteRegisterWord(RegisterType::PC, 0x888F);
    WriteRegisterWord(RegisterType::SP, 0xF582);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x888E, 0x40);
}

void test_40_02E8()
{
    if (skip_test_40_02E8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8194);
    WriteRegisterWord(RegisterType::SP, 0xCC9A);
    WriteRegisterByte(RegisterType::A, 0xF5);
    WriteRegisterByte(RegisterType::B, 0xF5);
    WriteRegisterByte(RegisterType::C, 0xB2);
    WriteRegisterByte(RegisterType::D, 0x6D);
    WriteRegisterByte(RegisterType::E, 0x7A);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x9D);
    WriteRegisterByte(RegisterType::L, 0xC6);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8194, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF5);
    CheckRegisterByte(RegisterType::B, 0xF5);
    CheckRegisterByte(RegisterType::C, 0xB2);
    CheckRegisterByte(RegisterType::D, 0x6D);
    CheckRegisterByte(RegisterType::E, 0x7A);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x9D);
    CheckRegisterByte(RegisterType::L, 0xC6);
    WriteRegisterWord(RegisterType::PC, 0x8195);
    WriteRegisterWord(RegisterType::SP, 0xCC9A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8194, 0x40);
}

void test_40_02E9()
{
    if (skip_test_40_02E9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFD8A);
    WriteRegisterWord(RegisterType::SP, 0x9A90);
    WriteRegisterByte(RegisterType::A, 0x06);
    WriteRegisterByte(RegisterType::B, 0x2D);
    WriteRegisterByte(RegisterType::C, 0x31);
    WriteRegisterByte(RegisterType::D, 0xD6);
    WriteRegisterByte(RegisterType::E, 0x17);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x49);
    WriteRegisterByte(RegisterType::L, 0x34);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFD8A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x06);
    CheckRegisterByte(RegisterType::B, 0x2D);
    CheckRegisterByte(RegisterType::C, 0x31);
    CheckRegisterByte(RegisterType::D, 0xD6);
    CheckRegisterByte(RegisterType::E, 0x17);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x49);
    CheckRegisterByte(RegisterType::L, 0x34);
    WriteRegisterWord(RegisterType::PC, 0xFD8B);
    WriteRegisterWord(RegisterType::SP, 0x9A90);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFD8A, 0x40);
}

void test_40_02EA()
{
    if (skip_test_40_02EA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x39B7);
    WriteRegisterWord(RegisterType::SP, 0xA3F8);
    WriteRegisterByte(RegisterType::A, 0xAE);
    WriteRegisterByte(RegisterType::B, 0x08);
    WriteRegisterByte(RegisterType::C, 0xEF);
    WriteRegisterByte(RegisterType::D, 0x59);
    WriteRegisterByte(RegisterType::E, 0x4D);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xA9);
    WriteRegisterByte(RegisterType::L, 0xA4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x39B7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAE);
    CheckRegisterByte(RegisterType::B, 0x08);
    CheckRegisterByte(RegisterType::C, 0xEF);
    CheckRegisterByte(RegisterType::D, 0x59);
    CheckRegisterByte(RegisterType::E, 0x4D);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xA9);
    CheckRegisterByte(RegisterType::L, 0xA4);
    WriteRegisterWord(RegisterType::PC, 0x39B8);
    WriteRegisterWord(RegisterType::SP, 0xA3F8);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x39B7, 0x40);
}

void test_40_02EB()
{
    if (skip_test_40_02EB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x822A);
    WriteRegisterWord(RegisterType::SP, 0xAA7F);
    WriteRegisterByte(RegisterType::A, 0x71);
    WriteRegisterByte(RegisterType::B, 0x9B);
    WriteRegisterByte(RegisterType::C, 0x48);
    WriteRegisterByte(RegisterType::D, 0x7D);
    WriteRegisterByte(RegisterType::E, 0x87);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x2B);
    WriteRegisterByte(RegisterType::L, 0x44);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x822A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x71);
    CheckRegisterByte(RegisterType::B, 0x9B);
    CheckRegisterByte(RegisterType::C, 0x48);
    CheckRegisterByte(RegisterType::D, 0x7D);
    CheckRegisterByte(RegisterType::E, 0x87);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x2B);
    CheckRegisterByte(RegisterType::L, 0x44);
    WriteRegisterWord(RegisterType::PC, 0x822B);
    WriteRegisterWord(RegisterType::SP, 0xAA7F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x822A, 0x40);
}

void test_40_02EC()
{
    if (skip_test_40_02EC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0B5A);
    WriteRegisterWord(RegisterType::SP, 0x9B02);
    WriteRegisterByte(RegisterType::A, 0x1B);
    WriteRegisterByte(RegisterType::B, 0x2F);
    WriteRegisterByte(RegisterType::C, 0xD7);
    WriteRegisterByte(RegisterType::D, 0x49);
    WriteRegisterByte(RegisterType::E, 0x8B);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xEE);
    WriteRegisterByte(RegisterType::L, 0x33);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0B5A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1B);
    CheckRegisterByte(RegisterType::B, 0x2F);
    CheckRegisterByte(RegisterType::C, 0xD7);
    CheckRegisterByte(RegisterType::D, 0x49);
    CheckRegisterByte(RegisterType::E, 0x8B);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xEE);
    CheckRegisterByte(RegisterType::L, 0x33);
    WriteRegisterWord(RegisterType::PC, 0x0B5B);
    WriteRegisterWord(RegisterType::SP, 0x9B02);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0B5A, 0x40);
}

void test_40_02ED()
{
    if (skip_test_40_02ED)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCFC9);
    WriteRegisterWord(RegisterType::SP, 0x5150);
    WriteRegisterByte(RegisterType::A, 0x16);
    WriteRegisterByte(RegisterType::B, 0x3E);
    WriteRegisterByte(RegisterType::C, 0x8B);
    WriteRegisterByte(RegisterType::D, 0xD1);
    WriteRegisterByte(RegisterType::E, 0x89);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xCD);
    WriteRegisterByte(RegisterType::L, 0xE0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCFC9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x16);
    CheckRegisterByte(RegisterType::B, 0x3E);
    CheckRegisterByte(RegisterType::C, 0x8B);
    CheckRegisterByte(RegisterType::D, 0xD1);
    CheckRegisterByte(RegisterType::E, 0x89);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xCD);
    CheckRegisterByte(RegisterType::L, 0xE0);
    WriteRegisterWord(RegisterType::PC, 0xCFCA);
    WriteRegisterWord(RegisterType::SP, 0x5150);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCFC9, 0x40);
}

void test_40_02EE()
{
    if (skip_test_40_02EE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1201);
    WriteRegisterWord(RegisterType::SP, 0xBBD0);
    WriteRegisterByte(RegisterType::A, 0x69);
    WriteRegisterByte(RegisterType::B, 0x2C);
    WriteRegisterByte(RegisterType::C, 0x65);
    WriteRegisterByte(RegisterType::D, 0x7D);
    WriteRegisterByte(RegisterType::E, 0xD3);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x71);
    WriteRegisterByte(RegisterType::L, 0x61);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1201, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x69);
    CheckRegisterByte(RegisterType::B, 0x2C);
    CheckRegisterByte(RegisterType::C, 0x65);
    CheckRegisterByte(RegisterType::D, 0x7D);
    CheckRegisterByte(RegisterType::E, 0xD3);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x71);
    CheckRegisterByte(RegisterType::L, 0x61);
    WriteRegisterWord(RegisterType::PC, 0x1202);
    WriteRegisterWord(RegisterType::SP, 0xBBD0);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1201, 0x40);
}

void test_40_02EF()
{
    if (skip_test_40_02EF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x083E);
    WriteRegisterWord(RegisterType::SP, 0xEC28);
    WriteRegisterByte(RegisterType::A, 0xF8);
    WriteRegisterByte(RegisterType::B, 0x94);
    WriteRegisterByte(RegisterType::C, 0x96);
    WriteRegisterByte(RegisterType::D, 0x70);
    WriteRegisterByte(RegisterType::E, 0x9B);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x6D);
    WriteRegisterByte(RegisterType::L, 0x68);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x083E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF8);
    CheckRegisterByte(RegisterType::B, 0x94);
    CheckRegisterByte(RegisterType::C, 0x96);
    CheckRegisterByte(RegisterType::D, 0x70);
    CheckRegisterByte(RegisterType::E, 0x9B);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x6D);
    CheckRegisterByte(RegisterType::L, 0x68);
    WriteRegisterWord(RegisterType::PC, 0x083F);
    WriteRegisterWord(RegisterType::SP, 0xEC28);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x083E, 0x40);
}

void test_40_02F0()
{
    if (skip_test_40_02F0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x36C4);
    WriteRegisterWord(RegisterType::SP, 0xD51D);
    WriteRegisterByte(RegisterType::A, 0xDA);
    WriteRegisterByte(RegisterType::B, 0xA1);
    WriteRegisterByte(RegisterType::C, 0xC5);
    WriteRegisterByte(RegisterType::D, 0xF1);
    WriteRegisterByte(RegisterType::E, 0x6D);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x21);
    WriteRegisterByte(RegisterType::L, 0x67);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x36C4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDA);
    CheckRegisterByte(RegisterType::B, 0xA1);
    CheckRegisterByte(RegisterType::C, 0xC5);
    CheckRegisterByte(RegisterType::D, 0xF1);
    CheckRegisterByte(RegisterType::E, 0x6D);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x21);
    CheckRegisterByte(RegisterType::L, 0x67);
    WriteRegisterWord(RegisterType::PC, 0x36C5);
    WriteRegisterWord(RegisterType::SP, 0xD51D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x36C4, 0x40);
}

void test_40_02F1()
{
    if (skip_test_40_02F1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x61B5);
    WriteRegisterWord(RegisterType::SP, 0x7AE2);
    WriteRegisterByte(RegisterType::A, 0x53);
    WriteRegisterByte(RegisterType::B, 0x07);
    WriteRegisterByte(RegisterType::C, 0xAB);
    WriteRegisterByte(RegisterType::D, 0x51);
    WriteRegisterByte(RegisterType::E, 0xA6);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x62);
    WriteRegisterByte(RegisterType::L, 0x4F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x61B5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x53);
    CheckRegisterByte(RegisterType::B, 0x07);
    CheckRegisterByte(RegisterType::C, 0xAB);
    CheckRegisterByte(RegisterType::D, 0x51);
    CheckRegisterByte(RegisterType::E, 0xA6);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x62);
    CheckRegisterByte(RegisterType::L, 0x4F);
    WriteRegisterWord(RegisterType::PC, 0x61B6);
    WriteRegisterWord(RegisterType::SP, 0x7AE2);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x61B5, 0x40);
}

void test_40_02F2()
{
    if (skip_test_40_02F2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1B77);
    WriteRegisterWord(RegisterType::SP, 0x5C2A);
    WriteRegisterByte(RegisterType::A, 0xEE);
    WriteRegisterByte(RegisterType::B, 0xBA);
    WriteRegisterByte(RegisterType::C, 0xF4);
    WriteRegisterByte(RegisterType::D, 0xEB);
    WriteRegisterByte(RegisterType::E, 0x87);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x99);
    WriteRegisterByte(RegisterType::L, 0xB4);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x1B77, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEE);
    CheckRegisterByte(RegisterType::B, 0xBA);
    CheckRegisterByte(RegisterType::C, 0xF4);
    CheckRegisterByte(RegisterType::D, 0xEB);
    CheckRegisterByte(RegisterType::E, 0x87);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x99);
    CheckRegisterByte(RegisterType::L, 0xB4);
    WriteRegisterWord(RegisterType::PC, 0x1B78);
    WriteRegisterWord(RegisterType::SP, 0x5C2A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x1B77, 0x40);
}

void test_40_02F3()
{
    if (skip_test_40_02F3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0823);
    WriteRegisterWord(RegisterType::SP, 0xE32B);
    WriteRegisterByte(RegisterType::A, 0x17);
    WriteRegisterByte(RegisterType::B, 0xA5);
    WriteRegisterByte(RegisterType::C, 0x87);
    WriteRegisterByte(RegisterType::D, 0x80);
    WriteRegisterByte(RegisterType::E, 0xE5);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x4D);
    WriteRegisterByte(RegisterType::L, 0x6B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0823, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x17);
    CheckRegisterByte(RegisterType::B, 0xA5);
    CheckRegisterByte(RegisterType::C, 0x87);
    CheckRegisterByte(RegisterType::D, 0x80);
    CheckRegisterByte(RegisterType::E, 0xE5);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x4D);
    CheckRegisterByte(RegisterType::L, 0x6B);
    WriteRegisterWord(RegisterType::PC, 0x0824);
    WriteRegisterWord(RegisterType::SP, 0xE32B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0823, 0x40);
}

void test_40_02F4()
{
    if (skip_test_40_02F4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD9E4);
    WriteRegisterWord(RegisterType::SP, 0xA8D7);
    WriteRegisterByte(RegisterType::A, 0xEB);
    WriteRegisterByte(RegisterType::B, 0x48);
    WriteRegisterByte(RegisterType::C, 0x18);
    WriteRegisterByte(RegisterType::D, 0x73);
    WriteRegisterByte(RegisterType::E, 0x67);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xFF);
    WriteRegisterByte(RegisterType::L, 0x64);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD9E4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEB);
    CheckRegisterByte(RegisterType::B, 0x48);
    CheckRegisterByte(RegisterType::C, 0x18);
    CheckRegisterByte(RegisterType::D, 0x73);
    CheckRegisterByte(RegisterType::E, 0x67);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xFF);
    CheckRegisterByte(RegisterType::L, 0x64);
    WriteRegisterWord(RegisterType::PC, 0xD9E5);
    WriteRegisterWord(RegisterType::SP, 0xA8D7);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD9E4, 0x40);
}

void test_40_02F5()
{
    if (skip_test_40_02F5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEBA7);
    WriteRegisterWord(RegisterType::SP, 0x486C);
    WriteRegisterByte(RegisterType::A, 0xDD);
    WriteRegisterByte(RegisterType::B, 0xD6);
    WriteRegisterByte(RegisterType::C, 0xAD);
    WriteRegisterByte(RegisterType::D, 0x3D);
    WriteRegisterByte(RegisterType::E, 0xDD);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xD6);
    WriteRegisterByte(RegisterType::L, 0x52);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEBA7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDD);
    CheckRegisterByte(RegisterType::B, 0xD6);
    CheckRegisterByte(RegisterType::C, 0xAD);
    CheckRegisterByte(RegisterType::D, 0x3D);
    CheckRegisterByte(RegisterType::E, 0xDD);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xD6);
    CheckRegisterByte(RegisterType::L, 0x52);
    WriteRegisterWord(RegisterType::PC, 0xEBA8);
    WriteRegisterWord(RegisterType::SP, 0x486C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xEBA7, 0x40);
}

void test_40_02F6()
{
    if (skip_test_40_02F6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x741F);
    WriteRegisterWord(RegisterType::SP, 0x115F);
    WriteRegisterByte(RegisterType::A, 0xAB);
    WriteRegisterByte(RegisterType::B, 0x97);
    WriteRegisterByte(RegisterType::C, 0xB1);
    WriteRegisterByte(RegisterType::D, 0x23);
    WriteRegisterByte(RegisterType::E, 0x7C);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xE6);
    WriteRegisterByte(RegisterType::L, 0xBC);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x741F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAB);
    CheckRegisterByte(RegisterType::B, 0x97);
    CheckRegisterByte(RegisterType::C, 0xB1);
    CheckRegisterByte(RegisterType::D, 0x23);
    CheckRegisterByte(RegisterType::E, 0x7C);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xE6);
    CheckRegisterByte(RegisterType::L, 0xBC);
    WriteRegisterWord(RegisterType::PC, 0x7420);
    WriteRegisterWord(RegisterType::SP, 0x115F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x741F, 0x40);
}

void test_40_02F7()
{
    if (skip_test_40_02F7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE3A6);
    WriteRegisterWord(RegisterType::SP, 0x1035);
    WriteRegisterByte(RegisterType::A, 0xC3);
    WriteRegisterByte(RegisterType::B, 0x39);
    WriteRegisterByte(RegisterType::C, 0x33);
    WriteRegisterByte(RegisterType::D, 0x05);
    WriteRegisterByte(RegisterType::E, 0x6A);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x67);
    WriteRegisterByte(RegisterType::L, 0x26);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xE3A6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC3);
    CheckRegisterByte(RegisterType::B, 0x39);
    CheckRegisterByte(RegisterType::C, 0x33);
    CheckRegisterByte(RegisterType::D, 0x05);
    CheckRegisterByte(RegisterType::E, 0x6A);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x67);
    CheckRegisterByte(RegisterType::L, 0x26);
    WriteRegisterWord(RegisterType::PC, 0xE3A7);
    WriteRegisterWord(RegisterType::SP, 0x1035);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE3A6, 0x40);
}

void test_40_02F8()
{
    if (skip_test_40_02F8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x56E2);
    WriteRegisterWord(RegisterType::SP, 0xE197);
    WriteRegisterByte(RegisterType::A, 0x0D);
    WriteRegisterByte(RegisterType::B, 0xAA);
    WriteRegisterByte(RegisterType::C, 0x59);
    WriteRegisterByte(RegisterType::D, 0xAA);
    WriteRegisterByte(RegisterType::E, 0x8C);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x41);
    WriteRegisterByte(RegisterType::L, 0x04);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x56E2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0D);
    CheckRegisterByte(RegisterType::B, 0xAA);
    CheckRegisterByte(RegisterType::C, 0x59);
    CheckRegisterByte(RegisterType::D, 0xAA);
    CheckRegisterByte(RegisterType::E, 0x8C);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x41);
    CheckRegisterByte(RegisterType::L, 0x04);
    WriteRegisterWord(RegisterType::PC, 0x56E3);
    WriteRegisterWord(RegisterType::SP, 0xE197);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x56E2, 0x40);
}

void test_40_02F9()
{
    if (skip_test_40_02F9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x05C7);
    WriteRegisterWord(RegisterType::SP, 0x08BC);
    WriteRegisterByte(RegisterType::A, 0x38);
    WriteRegisterByte(RegisterType::B, 0x37);
    WriteRegisterByte(RegisterType::C, 0x09);
    WriteRegisterByte(RegisterType::D, 0xB8);
    WriteRegisterByte(RegisterType::E, 0x2F);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x9E);
    WriteRegisterByte(RegisterType::L, 0x9B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x05C7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x38);
    CheckRegisterByte(RegisterType::B, 0x37);
    CheckRegisterByte(RegisterType::C, 0x09);
    CheckRegisterByte(RegisterType::D, 0xB8);
    CheckRegisterByte(RegisterType::E, 0x2F);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x9E);
    CheckRegisterByte(RegisterType::L, 0x9B);
    WriteRegisterWord(RegisterType::PC, 0x05C8);
    WriteRegisterWord(RegisterType::SP, 0x08BC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x05C7, 0x40);
}

void test_40_02FA()
{
    if (skip_test_40_02FA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0F2F);
    WriteRegisterWord(RegisterType::SP, 0x5A4B);
    WriteRegisterByte(RegisterType::A, 0x3F);
    WriteRegisterByte(RegisterType::B, 0x24);
    WriteRegisterByte(RegisterType::C, 0xE7);
    WriteRegisterByte(RegisterType::D, 0xD1);
    WriteRegisterByte(RegisterType::E, 0x5A);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x5D);
    WriteRegisterByte(RegisterType::L, 0x36);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0F2F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3F);
    CheckRegisterByte(RegisterType::B, 0x24);
    CheckRegisterByte(RegisterType::C, 0xE7);
    CheckRegisterByte(RegisterType::D, 0xD1);
    CheckRegisterByte(RegisterType::E, 0x5A);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x5D);
    CheckRegisterByte(RegisterType::L, 0x36);
    WriteRegisterWord(RegisterType::PC, 0x0F30);
    WriteRegisterWord(RegisterType::SP, 0x5A4B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0F2F, 0x40);
}

void test_40_02FB()
{
    if (skip_test_40_02FB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x69AF);
    WriteRegisterWord(RegisterType::SP, 0x9143);
    WriteRegisterByte(RegisterType::A, 0x96);
    WriteRegisterByte(RegisterType::B, 0x3C);
    WriteRegisterByte(RegisterType::C, 0x9B);
    WriteRegisterByte(RegisterType::D, 0xDD);
    WriteRegisterByte(RegisterType::E, 0x8A);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xB9);
    WriteRegisterByte(RegisterType::L, 0x33);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x69AF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x96);
    CheckRegisterByte(RegisterType::B, 0x3C);
    CheckRegisterByte(RegisterType::C, 0x9B);
    CheckRegisterByte(RegisterType::D, 0xDD);
    CheckRegisterByte(RegisterType::E, 0x8A);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xB9);
    CheckRegisterByte(RegisterType::L, 0x33);
    WriteRegisterWord(RegisterType::PC, 0x69B0);
    WriteRegisterWord(RegisterType::SP, 0x9143);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x69AF, 0x40);
}

void test_40_02FC()
{
    if (skip_test_40_02FC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEF3A);
    WriteRegisterWord(RegisterType::SP, 0x93D3);
    WriteRegisterByte(RegisterType::A, 0x01);
    WriteRegisterByte(RegisterType::B, 0x1A);
    WriteRegisterByte(RegisterType::C, 0xF3);
    WriteRegisterByte(RegisterType::D, 0x67);
    WriteRegisterByte(RegisterType::E, 0x9D);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xCC);
    WriteRegisterByte(RegisterType::L, 0xF9);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEF3A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x01);
    CheckRegisterByte(RegisterType::B, 0x1A);
    CheckRegisterByte(RegisterType::C, 0xF3);
    CheckRegisterByte(RegisterType::D, 0x67);
    CheckRegisterByte(RegisterType::E, 0x9D);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xCC);
    CheckRegisterByte(RegisterType::L, 0xF9);
    WriteRegisterWord(RegisterType::PC, 0xEF3B);
    WriteRegisterWord(RegisterType::SP, 0x93D3);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEF3A, 0x40);
}

void test_40_02FD()
{
    if (skip_test_40_02FD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBEE6);
    WriteRegisterWord(RegisterType::SP, 0xC4C9);
    WriteRegisterByte(RegisterType::A, 0x47);
    WriteRegisterByte(RegisterType::B, 0x2A);
    WriteRegisterByte(RegisterType::C, 0xF3);
    WriteRegisterByte(RegisterType::D, 0x59);
    WriteRegisterByte(RegisterType::E, 0xE5);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xA4);
    WriteRegisterByte(RegisterType::L, 0x88);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBEE6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x47);
    CheckRegisterByte(RegisterType::B, 0x2A);
    CheckRegisterByte(RegisterType::C, 0xF3);
    CheckRegisterByte(RegisterType::D, 0x59);
    CheckRegisterByte(RegisterType::E, 0xE5);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xA4);
    CheckRegisterByte(RegisterType::L, 0x88);
    WriteRegisterWord(RegisterType::PC, 0xBEE7);
    WriteRegisterWord(RegisterType::SP, 0xC4C9);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xBEE6, 0x40);
}

void test_40_02FE()
{
    if (skip_test_40_02FE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4A5A);
    WriteRegisterWord(RegisterType::SP, 0x38B5);
    WriteRegisterByte(RegisterType::A, 0x97);
    WriteRegisterByte(RegisterType::B, 0x4F);
    WriteRegisterByte(RegisterType::C, 0xB2);
    WriteRegisterByte(RegisterType::D, 0x93);
    WriteRegisterByte(RegisterType::E, 0xC2);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x7A);
    WriteRegisterByte(RegisterType::L, 0x26);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4A5A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x97);
    CheckRegisterByte(RegisterType::B, 0x4F);
    CheckRegisterByte(RegisterType::C, 0xB2);
    CheckRegisterByte(RegisterType::D, 0x93);
    CheckRegisterByte(RegisterType::E, 0xC2);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x7A);
    CheckRegisterByte(RegisterType::L, 0x26);
    WriteRegisterWord(RegisterType::PC, 0x4A5B);
    WriteRegisterWord(RegisterType::SP, 0x38B5);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4A5A, 0x40);
}

void test_40_02FF()
{
    if (skip_test_40_02FF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x187D);
    WriteRegisterWord(RegisterType::SP, 0x5245);
    WriteRegisterByte(RegisterType::A, 0x48);
    WriteRegisterByte(RegisterType::B, 0x6A);
    WriteRegisterByte(RegisterType::C, 0x97);
    WriteRegisterByte(RegisterType::D, 0x6E);
    WriteRegisterByte(RegisterType::E, 0x44);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xAA);
    WriteRegisterByte(RegisterType::L, 0x7E);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x187D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x48);
    CheckRegisterByte(RegisterType::B, 0x6A);
    CheckRegisterByte(RegisterType::C, 0x97);
    CheckRegisterByte(RegisterType::D, 0x6E);
    CheckRegisterByte(RegisterType::E, 0x44);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xAA);
    CheckRegisterByte(RegisterType::L, 0x7E);
    WriteRegisterWord(RegisterType::PC, 0x187E);
    WriteRegisterWord(RegisterType::SP, 0x5245);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x187D, 0x40);
}

void test_40_0300()
{
    if (skip_test_40_0300)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x06C8);
    WriteRegisterWord(RegisterType::SP, 0xFE16);
    WriteRegisterByte(RegisterType::A, 0xD8);
    WriteRegisterByte(RegisterType::B, 0xEE);
    WriteRegisterByte(RegisterType::C, 0x5C);
    WriteRegisterByte(RegisterType::D, 0x22);
    WriteRegisterByte(RegisterType::E, 0xB0);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xE6);
    WriteRegisterByte(RegisterType::L, 0x08);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x06C8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD8);
    CheckRegisterByte(RegisterType::B, 0xEE);
    CheckRegisterByte(RegisterType::C, 0x5C);
    CheckRegisterByte(RegisterType::D, 0x22);
    CheckRegisterByte(RegisterType::E, 0xB0);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xE6);
    CheckRegisterByte(RegisterType::L, 0x08);
    WriteRegisterWord(RegisterType::PC, 0x06C9);
    WriteRegisterWord(RegisterType::SP, 0xFE16);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x06C8, 0x40);
}

void test_40_0301()
{
    if (skip_test_40_0301)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8E03);
    WriteRegisterWord(RegisterType::SP, 0xD2C6);
    WriteRegisterByte(RegisterType::A, 0x2F);
    WriteRegisterByte(RegisterType::B, 0x94);
    WriteRegisterByte(RegisterType::C, 0x53);
    WriteRegisterByte(RegisterType::D, 0x57);
    WriteRegisterByte(RegisterType::E, 0x92);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xD7);
    WriteRegisterByte(RegisterType::L, 0xBD);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8E03, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2F);
    CheckRegisterByte(RegisterType::B, 0x94);
    CheckRegisterByte(RegisterType::C, 0x53);
    CheckRegisterByte(RegisterType::D, 0x57);
    CheckRegisterByte(RegisterType::E, 0x92);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xD7);
    CheckRegisterByte(RegisterType::L, 0xBD);
    WriteRegisterWord(RegisterType::PC, 0x8E04);
    WriteRegisterWord(RegisterType::SP, 0xD2C6);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8E03, 0x40);
}

void test_40_0302()
{
    if (skip_test_40_0302)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4BDD);
    WriteRegisterWord(RegisterType::SP, 0x5B32);
    WriteRegisterByte(RegisterType::A, 0xC4);
    WriteRegisterByte(RegisterType::B, 0x22);
    WriteRegisterByte(RegisterType::C, 0xDF);
    WriteRegisterByte(RegisterType::D, 0x7E);
    WriteRegisterByte(RegisterType::E, 0x07);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xCA);
    WriteRegisterByte(RegisterType::L, 0x31);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4BDD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC4);
    CheckRegisterByte(RegisterType::B, 0x22);
    CheckRegisterByte(RegisterType::C, 0xDF);
    CheckRegisterByte(RegisterType::D, 0x7E);
    CheckRegisterByte(RegisterType::E, 0x07);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xCA);
    CheckRegisterByte(RegisterType::L, 0x31);
    WriteRegisterWord(RegisterType::PC, 0x4BDE);
    WriteRegisterWord(RegisterType::SP, 0x5B32);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4BDD, 0x40);
}

void test_40_0303()
{
    if (skip_test_40_0303)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC500);
    WriteRegisterWord(RegisterType::SP, 0x19FB);
    WriteRegisterByte(RegisterType::A, 0x08);
    WriteRegisterByte(RegisterType::B, 0x0F);
    WriteRegisterByte(RegisterType::C, 0xCC);
    WriteRegisterByte(RegisterType::D, 0xDF);
    WriteRegisterByte(RegisterType::E, 0xB2);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x28);
    WriteRegisterByte(RegisterType::L, 0xC4);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC500, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x08);
    CheckRegisterByte(RegisterType::B, 0x0F);
    CheckRegisterByte(RegisterType::C, 0xCC);
    CheckRegisterByte(RegisterType::D, 0xDF);
    CheckRegisterByte(RegisterType::E, 0xB2);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x28);
    CheckRegisterByte(RegisterType::L, 0xC4);
    WriteRegisterWord(RegisterType::PC, 0xC501);
    WriteRegisterWord(RegisterType::SP, 0x19FB);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC500, 0x40);
}

void test_40_0304()
{
    if (skip_test_40_0304)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0583);
    WriteRegisterWord(RegisterType::SP, 0xC818);
    WriteRegisterByte(RegisterType::A, 0x9C);
    WriteRegisterByte(RegisterType::B, 0x65);
    WriteRegisterByte(RegisterType::C, 0xB4);
    WriteRegisterByte(RegisterType::D, 0x4B);
    WriteRegisterByte(RegisterType::E, 0x07);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xAE);
    WriteRegisterByte(RegisterType::L, 0x41);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0583, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9C);
    CheckRegisterByte(RegisterType::B, 0x65);
    CheckRegisterByte(RegisterType::C, 0xB4);
    CheckRegisterByte(RegisterType::D, 0x4B);
    CheckRegisterByte(RegisterType::E, 0x07);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xAE);
    CheckRegisterByte(RegisterType::L, 0x41);
    WriteRegisterWord(RegisterType::PC, 0x0584);
    WriteRegisterWord(RegisterType::SP, 0xC818);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0583, 0x40);
}

void test_40_0305()
{
    if (skip_test_40_0305)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCBA7);
    WriteRegisterWord(RegisterType::SP, 0x2E2E);
    WriteRegisterByte(RegisterType::A, 0xF9);
    WriteRegisterByte(RegisterType::B, 0xD7);
    WriteRegisterByte(RegisterType::C, 0xDD);
    WriteRegisterByte(RegisterType::D, 0xF8);
    WriteRegisterByte(RegisterType::E, 0x0D);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xF2);
    WriteRegisterByte(RegisterType::L, 0xAC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xCBA7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF9);
    CheckRegisterByte(RegisterType::B, 0xD7);
    CheckRegisterByte(RegisterType::C, 0xDD);
    CheckRegisterByte(RegisterType::D, 0xF8);
    CheckRegisterByte(RegisterType::E, 0x0D);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xF2);
    CheckRegisterByte(RegisterType::L, 0xAC);
    WriteRegisterWord(RegisterType::PC, 0xCBA8);
    WriteRegisterWord(RegisterType::SP, 0x2E2E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xCBA7, 0x40);
}

void test_40_0306()
{
    if (skip_test_40_0306)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA362);
    WriteRegisterWord(RegisterType::SP, 0xB8C3);
    WriteRegisterByte(RegisterType::A, 0x46);
    WriteRegisterByte(RegisterType::B, 0xE6);
    WriteRegisterByte(RegisterType::C, 0xAF);
    WriteRegisterByte(RegisterType::D, 0xE6);
    WriteRegisterByte(RegisterType::E, 0x9E);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xD8);
    WriteRegisterByte(RegisterType::L, 0xFB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA362, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x46);
    CheckRegisterByte(RegisterType::B, 0xE6);
    CheckRegisterByte(RegisterType::C, 0xAF);
    CheckRegisterByte(RegisterType::D, 0xE6);
    CheckRegisterByte(RegisterType::E, 0x9E);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xD8);
    CheckRegisterByte(RegisterType::L, 0xFB);
    WriteRegisterWord(RegisterType::PC, 0xA363);
    WriteRegisterWord(RegisterType::SP, 0xB8C3);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA362, 0x40);
}

void test_40_0307()
{
    if (skip_test_40_0307)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x789C);
    WriteRegisterWord(RegisterType::SP, 0x367E);
    WriteRegisterByte(RegisterType::A, 0x08);
    WriteRegisterByte(RegisterType::B, 0x51);
    WriteRegisterByte(RegisterType::C, 0x5D);
    WriteRegisterByte(RegisterType::D, 0x4E);
    WriteRegisterByte(RegisterType::E, 0x5F);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x65);
    WriteRegisterByte(RegisterType::L, 0xD9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x789C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x08);
    CheckRegisterByte(RegisterType::B, 0x51);
    CheckRegisterByte(RegisterType::C, 0x5D);
    CheckRegisterByte(RegisterType::D, 0x4E);
    CheckRegisterByte(RegisterType::E, 0x5F);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x65);
    CheckRegisterByte(RegisterType::L, 0xD9);
    WriteRegisterWord(RegisterType::PC, 0x789D);
    WriteRegisterWord(RegisterType::SP, 0x367E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x789C, 0x40);
}

void test_40_0308()
{
    if (skip_test_40_0308)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x06FB);
    WriteRegisterWord(RegisterType::SP, 0xE04A);
    WriteRegisterByte(RegisterType::A, 0x53);
    WriteRegisterByte(RegisterType::B, 0xDC);
    WriteRegisterByte(RegisterType::C, 0x7F);
    WriteRegisterByte(RegisterType::D, 0x7C);
    WriteRegisterByte(RegisterType::E, 0x8F);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xA6);
    WriteRegisterByte(RegisterType::L, 0x32);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x06FB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x53);
    CheckRegisterByte(RegisterType::B, 0xDC);
    CheckRegisterByte(RegisterType::C, 0x7F);
    CheckRegisterByte(RegisterType::D, 0x7C);
    CheckRegisterByte(RegisterType::E, 0x8F);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xA6);
    CheckRegisterByte(RegisterType::L, 0x32);
    WriteRegisterWord(RegisterType::PC, 0x06FC);
    WriteRegisterWord(RegisterType::SP, 0xE04A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x06FB, 0x40);
}

void test_40_0309()
{
    if (skip_test_40_0309)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0E35);
    WriteRegisterWord(RegisterType::SP, 0x30CA);
    WriteRegisterByte(RegisterType::A, 0xB5);
    WriteRegisterByte(RegisterType::B, 0x18);
    WriteRegisterByte(RegisterType::C, 0xAE);
    WriteRegisterByte(RegisterType::D, 0x78);
    WriteRegisterByte(RegisterType::E, 0x07);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x14);
    WriteRegisterByte(RegisterType::L, 0x39);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0E35, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB5);
    CheckRegisterByte(RegisterType::B, 0x18);
    CheckRegisterByte(RegisterType::C, 0xAE);
    CheckRegisterByte(RegisterType::D, 0x78);
    CheckRegisterByte(RegisterType::E, 0x07);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x14);
    CheckRegisterByte(RegisterType::L, 0x39);
    WriteRegisterWord(RegisterType::PC, 0x0E36);
    WriteRegisterWord(RegisterType::SP, 0x30CA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0E35, 0x40);
}

void test_40_030A()
{
    if (skip_test_40_030A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFBEC);
    WriteRegisterWord(RegisterType::SP, 0x35C3);
    WriteRegisterByte(RegisterType::A, 0x51);
    WriteRegisterByte(RegisterType::B, 0x57);
    WriteRegisterByte(RegisterType::C, 0x06);
    WriteRegisterByte(RegisterType::D, 0x3E);
    WriteRegisterByte(RegisterType::E, 0xDF);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x49);
    WriteRegisterByte(RegisterType::L, 0x0D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFBEC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x51);
    CheckRegisterByte(RegisterType::B, 0x57);
    CheckRegisterByte(RegisterType::C, 0x06);
    CheckRegisterByte(RegisterType::D, 0x3E);
    CheckRegisterByte(RegisterType::E, 0xDF);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x49);
    CheckRegisterByte(RegisterType::L, 0x0D);
    WriteRegisterWord(RegisterType::PC, 0xFBED);
    WriteRegisterWord(RegisterType::SP, 0x35C3);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFBEC, 0x40);
}

void test_40_030B()
{
    if (skip_test_40_030B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x493A);
    WriteRegisterWord(RegisterType::SP, 0xA79C);
    WriteRegisterByte(RegisterType::A, 0x41);
    WriteRegisterByte(RegisterType::B, 0x83);
    WriteRegisterByte(RegisterType::C, 0x0B);
    WriteRegisterByte(RegisterType::D, 0xB3);
    WriteRegisterByte(RegisterType::E, 0xDB);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x72);
    WriteRegisterByte(RegisterType::L, 0xA9);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x493A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x41);
    CheckRegisterByte(RegisterType::B, 0x83);
    CheckRegisterByte(RegisterType::C, 0x0B);
    CheckRegisterByte(RegisterType::D, 0xB3);
    CheckRegisterByte(RegisterType::E, 0xDB);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x72);
    CheckRegisterByte(RegisterType::L, 0xA9);
    WriteRegisterWord(RegisterType::PC, 0x493B);
    WriteRegisterWord(RegisterType::SP, 0xA79C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x493A, 0x40);
}

void test_40_030C()
{
    if (skip_test_40_030C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x99F7);
    WriteRegisterWord(RegisterType::SP, 0x47D8);
    WriteRegisterByte(RegisterType::A, 0x5A);
    WriteRegisterByte(RegisterType::B, 0x76);
    WriteRegisterByte(RegisterType::C, 0x5D);
    WriteRegisterByte(RegisterType::D, 0xF9);
    WriteRegisterByte(RegisterType::E, 0xE7);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x8E);
    WriteRegisterByte(RegisterType::L, 0x98);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x99F7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5A);
    CheckRegisterByte(RegisterType::B, 0x76);
    CheckRegisterByte(RegisterType::C, 0x5D);
    CheckRegisterByte(RegisterType::D, 0xF9);
    CheckRegisterByte(RegisterType::E, 0xE7);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x8E);
    CheckRegisterByte(RegisterType::L, 0x98);
    WriteRegisterWord(RegisterType::PC, 0x99F8);
    WriteRegisterWord(RegisterType::SP, 0x47D8);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x99F7, 0x40);
}

void test_40_030D()
{
    if (skip_test_40_030D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFB72);
    WriteRegisterWord(RegisterType::SP, 0xB79D);
    WriteRegisterByte(RegisterType::A, 0xAC);
    WriteRegisterByte(RegisterType::B, 0x84);
    WriteRegisterByte(RegisterType::C, 0x02);
    WriteRegisterByte(RegisterType::D, 0x11);
    WriteRegisterByte(RegisterType::E, 0x7D);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x09);
    WriteRegisterByte(RegisterType::L, 0x7D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFB72, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAC);
    CheckRegisterByte(RegisterType::B, 0x84);
    CheckRegisterByte(RegisterType::C, 0x02);
    CheckRegisterByte(RegisterType::D, 0x11);
    CheckRegisterByte(RegisterType::E, 0x7D);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x09);
    CheckRegisterByte(RegisterType::L, 0x7D);
    WriteRegisterWord(RegisterType::PC, 0xFB73);
    WriteRegisterWord(RegisterType::SP, 0xB79D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFB72, 0x40);
}

void test_40_030E()
{
    if (skip_test_40_030E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCDFF);
    WriteRegisterWord(RegisterType::SP, 0x6F74);
    WriteRegisterByte(RegisterType::A, 0xE1);
    WriteRegisterByte(RegisterType::B, 0xE2);
    WriteRegisterByte(RegisterType::C, 0x7C);
    WriteRegisterByte(RegisterType::D, 0x0C);
    WriteRegisterByte(RegisterType::E, 0xA9);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x88);
    WriteRegisterByte(RegisterType::L, 0x16);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCDFF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE1);
    CheckRegisterByte(RegisterType::B, 0xE2);
    CheckRegisterByte(RegisterType::C, 0x7C);
    CheckRegisterByte(RegisterType::D, 0x0C);
    CheckRegisterByte(RegisterType::E, 0xA9);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x88);
    CheckRegisterByte(RegisterType::L, 0x16);
    WriteRegisterWord(RegisterType::PC, 0xCE00);
    WriteRegisterWord(RegisterType::SP, 0x6F74);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCDFF, 0x40);
}

void test_40_030F()
{
    if (skip_test_40_030F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x030A);
    WriteRegisterWord(RegisterType::SP, 0x4BD3);
    WriteRegisterByte(RegisterType::A, 0x96);
    WriteRegisterByte(RegisterType::B, 0x31);
    WriteRegisterByte(RegisterType::C, 0x45);
    WriteRegisterByte(RegisterType::D, 0xEF);
    WriteRegisterByte(RegisterType::E, 0x3D);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x02);
    WriteRegisterByte(RegisterType::L, 0xF9);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x030A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x96);
    CheckRegisterByte(RegisterType::B, 0x31);
    CheckRegisterByte(RegisterType::C, 0x45);
    CheckRegisterByte(RegisterType::D, 0xEF);
    CheckRegisterByte(RegisterType::E, 0x3D);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x02);
    CheckRegisterByte(RegisterType::L, 0xF9);
    WriteRegisterWord(RegisterType::PC, 0x030B);
    WriteRegisterWord(RegisterType::SP, 0x4BD3);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x030A, 0x40);
}

void test_40_0310()
{
    if (skip_test_40_0310)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC3A7);
    WriteRegisterWord(RegisterType::SP, 0x3538);
    WriteRegisterByte(RegisterType::A, 0x4C);
    WriteRegisterByte(RegisterType::B, 0xD4);
    WriteRegisterByte(RegisterType::C, 0xBC);
    WriteRegisterByte(RegisterType::D, 0x57);
    WriteRegisterByte(RegisterType::E, 0x0D);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x7C);
    WriteRegisterByte(RegisterType::L, 0x02);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC3A7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4C);
    CheckRegisterByte(RegisterType::B, 0xD4);
    CheckRegisterByte(RegisterType::C, 0xBC);
    CheckRegisterByte(RegisterType::D, 0x57);
    CheckRegisterByte(RegisterType::E, 0x0D);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x7C);
    CheckRegisterByte(RegisterType::L, 0x02);
    WriteRegisterWord(RegisterType::PC, 0xC3A8);
    WriteRegisterWord(RegisterType::SP, 0x3538);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC3A7, 0x40);
}

void test_40_0311()
{
    if (skip_test_40_0311)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9B61);
    WriteRegisterWord(RegisterType::SP, 0xF6FD);
    WriteRegisterByte(RegisterType::A, 0xEE);
    WriteRegisterByte(RegisterType::B, 0x6B);
    WriteRegisterByte(RegisterType::C, 0xAD);
    WriteRegisterByte(RegisterType::D, 0x3C);
    WriteRegisterByte(RegisterType::E, 0x01);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x7A);
    WriteRegisterByte(RegisterType::L, 0xBB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9B61, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEE);
    CheckRegisterByte(RegisterType::B, 0x6B);
    CheckRegisterByte(RegisterType::C, 0xAD);
    CheckRegisterByte(RegisterType::D, 0x3C);
    CheckRegisterByte(RegisterType::E, 0x01);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x7A);
    CheckRegisterByte(RegisterType::L, 0xBB);
    WriteRegisterWord(RegisterType::PC, 0x9B62);
    WriteRegisterWord(RegisterType::SP, 0xF6FD);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9B61, 0x40);
}

void test_40_0312()
{
    if (skip_test_40_0312)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3B03);
    WriteRegisterWord(RegisterType::SP, 0xD152);
    WriteRegisterByte(RegisterType::A, 0x44);
    WriteRegisterByte(RegisterType::B, 0x2B);
    WriteRegisterByte(RegisterType::C, 0x55);
    WriteRegisterByte(RegisterType::D, 0xC0);
    WriteRegisterByte(RegisterType::E, 0x89);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x7C);
    WriteRegisterByte(RegisterType::L, 0xA1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3B03, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x44);
    CheckRegisterByte(RegisterType::B, 0x2B);
    CheckRegisterByte(RegisterType::C, 0x55);
    CheckRegisterByte(RegisterType::D, 0xC0);
    CheckRegisterByte(RegisterType::E, 0x89);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x7C);
    CheckRegisterByte(RegisterType::L, 0xA1);
    WriteRegisterWord(RegisterType::PC, 0x3B04);
    WriteRegisterWord(RegisterType::SP, 0xD152);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3B03, 0x40);
}

void test_40_0313()
{
    if (skip_test_40_0313)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5CD7);
    WriteRegisterWord(RegisterType::SP, 0x8210);
    WriteRegisterByte(RegisterType::A, 0xE9);
    WriteRegisterByte(RegisterType::B, 0xC7);
    WriteRegisterByte(RegisterType::C, 0xE9);
    WriteRegisterByte(RegisterType::D, 0xEA);
    WriteRegisterByte(RegisterType::E, 0x8B);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x26);
    WriteRegisterByte(RegisterType::L, 0x7D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5CD7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE9);
    CheckRegisterByte(RegisterType::B, 0xC7);
    CheckRegisterByte(RegisterType::C, 0xE9);
    CheckRegisterByte(RegisterType::D, 0xEA);
    CheckRegisterByte(RegisterType::E, 0x8B);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x26);
    CheckRegisterByte(RegisterType::L, 0x7D);
    WriteRegisterWord(RegisterType::PC, 0x5CD8);
    WriteRegisterWord(RegisterType::SP, 0x8210);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5CD7, 0x40);
}

void test_40_0314()
{
    if (skip_test_40_0314)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC54A);
    WriteRegisterWord(RegisterType::SP, 0x7BC0);
    WriteRegisterByte(RegisterType::A, 0x7B);
    WriteRegisterByte(RegisterType::B, 0x8D);
    WriteRegisterByte(RegisterType::C, 0xE3);
    WriteRegisterByte(RegisterType::D, 0x52);
    WriteRegisterByte(RegisterType::E, 0xB2);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x70);
    WriteRegisterByte(RegisterType::L, 0xAB);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC54A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7B);
    CheckRegisterByte(RegisterType::B, 0x8D);
    CheckRegisterByte(RegisterType::C, 0xE3);
    CheckRegisterByte(RegisterType::D, 0x52);
    CheckRegisterByte(RegisterType::E, 0xB2);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x70);
    CheckRegisterByte(RegisterType::L, 0xAB);
    WriteRegisterWord(RegisterType::PC, 0xC54B);
    WriteRegisterWord(RegisterType::SP, 0x7BC0);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC54A, 0x40);
}

void test_40_0315()
{
    if (skip_test_40_0315)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x1486);
    WriteRegisterWord(RegisterType::SP, 0x0F6E);
    WriteRegisterByte(RegisterType::A, 0x3E);
    WriteRegisterByte(RegisterType::B, 0x06);
    WriteRegisterByte(RegisterType::C, 0xC7);
    WriteRegisterByte(RegisterType::D, 0x62);
    WriteRegisterByte(RegisterType::E, 0xE0);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x70);
    WriteRegisterByte(RegisterType::L, 0x48);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x1486, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3E);
    CheckRegisterByte(RegisterType::B, 0x06);
    CheckRegisterByte(RegisterType::C, 0xC7);
    CheckRegisterByte(RegisterType::D, 0x62);
    CheckRegisterByte(RegisterType::E, 0xE0);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x70);
    CheckRegisterByte(RegisterType::L, 0x48);
    WriteRegisterWord(RegisterType::PC, 0x1487);
    WriteRegisterWord(RegisterType::SP, 0x0F6E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x1486, 0x40);
}

void test_40_0316()
{
    if (skip_test_40_0316)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3DE2);
    WriteRegisterWord(RegisterType::SP, 0x1A12);
    WriteRegisterByte(RegisterType::A, 0x23);
    WriteRegisterByte(RegisterType::B, 0x8C);
    WriteRegisterByte(RegisterType::C, 0x24);
    WriteRegisterByte(RegisterType::D, 0xC7);
    WriteRegisterByte(RegisterType::E, 0xED);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x40);
    WriteRegisterByte(RegisterType::L, 0xB5);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3DE2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x23);
    CheckRegisterByte(RegisterType::B, 0x8C);
    CheckRegisterByte(RegisterType::C, 0x24);
    CheckRegisterByte(RegisterType::D, 0xC7);
    CheckRegisterByte(RegisterType::E, 0xED);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x40);
    CheckRegisterByte(RegisterType::L, 0xB5);
    WriteRegisterWord(RegisterType::PC, 0x3DE3);
    WriteRegisterWord(RegisterType::SP, 0x1A12);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3DE2, 0x40);
}

void test_40_0317()
{
    if (skip_test_40_0317)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6002);
    WriteRegisterWord(RegisterType::SP, 0x217A);
    WriteRegisterByte(RegisterType::A, 0xA6);
    WriteRegisterByte(RegisterType::B, 0x22);
    WriteRegisterByte(RegisterType::C, 0x57);
    WriteRegisterByte(RegisterType::D, 0x7B);
    WriteRegisterByte(RegisterType::E, 0x30);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x28);
    WriteRegisterByte(RegisterType::L, 0xFE);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6002, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA6);
    CheckRegisterByte(RegisterType::B, 0x22);
    CheckRegisterByte(RegisterType::C, 0x57);
    CheckRegisterByte(RegisterType::D, 0x7B);
    CheckRegisterByte(RegisterType::E, 0x30);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x28);
    CheckRegisterByte(RegisterType::L, 0xFE);
    WriteRegisterWord(RegisterType::PC, 0x6003);
    WriteRegisterWord(RegisterType::SP, 0x217A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6002, 0x40);
}

void test_40_0318()
{
    if (skip_test_40_0318)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8FC4);
    WriteRegisterWord(RegisterType::SP, 0x7175);
    WriteRegisterByte(RegisterType::A, 0x58);
    WriteRegisterByte(RegisterType::B, 0x6D);
    WriteRegisterByte(RegisterType::C, 0xA6);
    WriteRegisterByte(RegisterType::D, 0x84);
    WriteRegisterByte(RegisterType::E, 0x32);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xF9);
    WriteRegisterByte(RegisterType::L, 0x4C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8FC4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x58);
    CheckRegisterByte(RegisterType::B, 0x6D);
    CheckRegisterByte(RegisterType::C, 0xA6);
    CheckRegisterByte(RegisterType::D, 0x84);
    CheckRegisterByte(RegisterType::E, 0x32);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xF9);
    CheckRegisterByte(RegisterType::L, 0x4C);
    WriteRegisterWord(RegisterType::PC, 0x8FC5);
    WriteRegisterWord(RegisterType::SP, 0x7175);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8FC4, 0x40);
}

void test_40_0319()
{
    if (skip_test_40_0319)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x71A8);
    WriteRegisterWord(RegisterType::SP, 0x8FEE);
    WriteRegisterByte(RegisterType::A, 0x34);
    WriteRegisterByte(RegisterType::B, 0x96);
    WriteRegisterByte(RegisterType::C, 0x01);
    WriteRegisterByte(RegisterType::D, 0xC5);
    WriteRegisterByte(RegisterType::E, 0x14);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xB4);
    WriteRegisterByte(RegisterType::L, 0xEE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x71A8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x34);
    CheckRegisterByte(RegisterType::B, 0x96);
    CheckRegisterByte(RegisterType::C, 0x01);
    CheckRegisterByte(RegisterType::D, 0xC5);
    CheckRegisterByte(RegisterType::E, 0x14);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xB4);
    CheckRegisterByte(RegisterType::L, 0xEE);
    WriteRegisterWord(RegisterType::PC, 0x71A9);
    WriteRegisterWord(RegisterType::SP, 0x8FEE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x71A8, 0x40);
}

void test_40_031A()
{
    if (skip_test_40_031A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x532A);
    WriteRegisterWord(RegisterType::SP, 0x95B7);
    WriteRegisterByte(RegisterType::A, 0xDB);
    WriteRegisterByte(RegisterType::B, 0x3C);
    WriteRegisterByte(RegisterType::C, 0x18);
    WriteRegisterByte(RegisterType::D, 0x84);
    WriteRegisterByte(RegisterType::E, 0xCF);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x7E);
    WriteRegisterByte(RegisterType::L, 0xBA);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x532A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDB);
    CheckRegisterByte(RegisterType::B, 0x3C);
    CheckRegisterByte(RegisterType::C, 0x18);
    CheckRegisterByte(RegisterType::D, 0x84);
    CheckRegisterByte(RegisterType::E, 0xCF);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x7E);
    CheckRegisterByte(RegisterType::L, 0xBA);
    WriteRegisterWord(RegisterType::PC, 0x532B);
    WriteRegisterWord(RegisterType::SP, 0x95B7);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x532A, 0x40);
}

void test_40_031B()
{
    if (skip_test_40_031B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB9A8);
    WriteRegisterWord(RegisterType::SP, 0x8F73);
    WriteRegisterByte(RegisterType::A, 0x85);
    WriteRegisterByte(RegisterType::B, 0x76);
    WriteRegisterByte(RegisterType::C, 0xE6);
    WriteRegisterByte(RegisterType::D, 0x3C);
    WriteRegisterByte(RegisterType::E, 0x33);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x51);
    WriteRegisterByte(RegisterType::L, 0x63);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB9A8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x85);
    CheckRegisterByte(RegisterType::B, 0x76);
    CheckRegisterByte(RegisterType::C, 0xE6);
    CheckRegisterByte(RegisterType::D, 0x3C);
    CheckRegisterByte(RegisterType::E, 0x33);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x51);
    CheckRegisterByte(RegisterType::L, 0x63);
    WriteRegisterWord(RegisterType::PC, 0xB9A9);
    WriteRegisterWord(RegisterType::SP, 0x8F73);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB9A8, 0x40);
}

void test_40_031C()
{
    if (skip_test_40_031C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAC08);
    WriteRegisterWord(RegisterType::SP, 0xC71E);
    WriteRegisterByte(RegisterType::A, 0x25);
    WriteRegisterByte(RegisterType::B, 0x42);
    WriteRegisterByte(RegisterType::C, 0x85);
    WriteRegisterByte(RegisterType::D, 0xFD);
    WriteRegisterByte(RegisterType::E, 0xF8);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x06);
    WriteRegisterByte(RegisterType::L, 0x3A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xAC08, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x25);
    CheckRegisterByte(RegisterType::B, 0x42);
    CheckRegisterByte(RegisterType::C, 0x85);
    CheckRegisterByte(RegisterType::D, 0xFD);
    CheckRegisterByte(RegisterType::E, 0xF8);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x06);
    CheckRegisterByte(RegisterType::L, 0x3A);
    WriteRegisterWord(RegisterType::PC, 0xAC09);
    WriteRegisterWord(RegisterType::SP, 0xC71E);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xAC08, 0x40);
}

void test_40_031D()
{
    if (skip_test_40_031D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8666);
    WriteRegisterWord(RegisterType::SP, 0x77FA);
    WriteRegisterByte(RegisterType::A, 0xF2);
    WriteRegisterByte(RegisterType::B, 0x29);
    WriteRegisterByte(RegisterType::C, 0x30);
    WriteRegisterByte(RegisterType::D, 0x1B);
    WriteRegisterByte(RegisterType::E, 0xD9);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xC0);
    WriteRegisterByte(RegisterType::L, 0x1A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8666, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF2);
    CheckRegisterByte(RegisterType::B, 0x29);
    CheckRegisterByte(RegisterType::C, 0x30);
    CheckRegisterByte(RegisterType::D, 0x1B);
    CheckRegisterByte(RegisterType::E, 0xD9);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xC0);
    CheckRegisterByte(RegisterType::L, 0x1A);
    WriteRegisterWord(RegisterType::PC, 0x8667);
    WriteRegisterWord(RegisterType::SP, 0x77FA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8666, 0x40);
}

void test_40_031E()
{
    if (skip_test_40_031E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x676C);
    WriteRegisterWord(RegisterType::SP, 0x343B);
    WriteRegisterByte(RegisterType::A, 0xF9);
    WriteRegisterByte(RegisterType::B, 0x34);
    WriteRegisterByte(RegisterType::C, 0xE5);
    WriteRegisterByte(RegisterType::D, 0x52);
    WriteRegisterByte(RegisterType::E, 0xD0);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xD4);
    WriteRegisterByte(RegisterType::L, 0x8F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x676C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF9);
    CheckRegisterByte(RegisterType::B, 0x34);
    CheckRegisterByte(RegisterType::C, 0xE5);
    CheckRegisterByte(RegisterType::D, 0x52);
    CheckRegisterByte(RegisterType::E, 0xD0);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xD4);
    CheckRegisterByte(RegisterType::L, 0x8F);
    WriteRegisterWord(RegisterType::PC, 0x676D);
    WriteRegisterWord(RegisterType::SP, 0x343B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x676C, 0x40);
}

void test_40_031F()
{
    if (skip_test_40_031F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF4A7);
    WriteRegisterWord(RegisterType::SP, 0x54E1);
    WriteRegisterByte(RegisterType::A, 0xC6);
    WriteRegisterByte(RegisterType::B, 0x0F);
    WriteRegisterByte(RegisterType::C, 0x53);
    WriteRegisterByte(RegisterType::D, 0x52);
    WriteRegisterByte(RegisterType::E, 0x02);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x6A);
    WriteRegisterByte(RegisterType::L, 0x38);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF4A7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC6);
    CheckRegisterByte(RegisterType::B, 0x0F);
    CheckRegisterByte(RegisterType::C, 0x53);
    CheckRegisterByte(RegisterType::D, 0x52);
    CheckRegisterByte(RegisterType::E, 0x02);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x6A);
    CheckRegisterByte(RegisterType::L, 0x38);
    WriteRegisterWord(RegisterType::PC, 0xF4A8);
    WriteRegisterWord(RegisterType::SP, 0x54E1);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF4A7, 0x40);
}

void test_40_0320()
{
    if (skip_test_40_0320)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9CC1);
    WriteRegisterWord(RegisterType::SP, 0xB87C);
    WriteRegisterByte(RegisterType::A, 0x62);
    WriteRegisterByte(RegisterType::B, 0xFD);
    WriteRegisterByte(RegisterType::C, 0xD2);
    WriteRegisterByte(RegisterType::D, 0x42);
    WriteRegisterByte(RegisterType::E, 0x04);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xC8);
    WriteRegisterByte(RegisterType::L, 0x00);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9CC1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x62);
    CheckRegisterByte(RegisterType::B, 0xFD);
    CheckRegisterByte(RegisterType::C, 0xD2);
    CheckRegisterByte(RegisterType::D, 0x42);
    CheckRegisterByte(RegisterType::E, 0x04);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xC8);
    CheckRegisterByte(RegisterType::L, 0x00);
    WriteRegisterWord(RegisterType::PC, 0x9CC2);
    WriteRegisterWord(RegisterType::SP, 0xB87C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x9CC1, 0x40);
}

void test_40_0321()
{
    if (skip_test_40_0321)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE1DE);
    WriteRegisterWord(RegisterType::SP, 0x27FC);
    WriteRegisterByte(RegisterType::A, 0xD4);
    WriteRegisterByte(RegisterType::B, 0x3D);
    WriteRegisterByte(RegisterType::C, 0x5A);
    WriteRegisterByte(RegisterType::D, 0x3F);
    WriteRegisterByte(RegisterType::E, 0x44);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xCB);
    WriteRegisterByte(RegisterType::L, 0x0C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE1DE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD4);
    CheckRegisterByte(RegisterType::B, 0x3D);
    CheckRegisterByte(RegisterType::C, 0x5A);
    CheckRegisterByte(RegisterType::D, 0x3F);
    CheckRegisterByte(RegisterType::E, 0x44);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xCB);
    CheckRegisterByte(RegisterType::L, 0x0C);
    WriteRegisterWord(RegisterType::PC, 0xE1DF);
    WriteRegisterWord(RegisterType::SP, 0x27FC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE1DE, 0x40);
}

void test_40_0322()
{
    if (skip_test_40_0322)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB23A);
    WriteRegisterWord(RegisterType::SP, 0x7EC6);
    WriteRegisterByte(RegisterType::A, 0x0E);
    WriteRegisterByte(RegisterType::B, 0x7A);
    WriteRegisterByte(RegisterType::C, 0x82);
    WriteRegisterByte(RegisterType::D, 0xA8);
    WriteRegisterByte(RegisterType::E, 0x66);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xA0);
    WriteRegisterByte(RegisterType::L, 0xA3);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB23A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0E);
    CheckRegisterByte(RegisterType::B, 0x7A);
    CheckRegisterByte(RegisterType::C, 0x82);
    CheckRegisterByte(RegisterType::D, 0xA8);
    CheckRegisterByte(RegisterType::E, 0x66);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xA0);
    CheckRegisterByte(RegisterType::L, 0xA3);
    WriteRegisterWord(RegisterType::PC, 0xB23B);
    WriteRegisterWord(RegisterType::SP, 0x7EC6);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB23A, 0x40);
}

void test_40_0323()
{
    if (skip_test_40_0323)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD792);
    WriteRegisterWord(RegisterType::SP, 0xEED7);
    WriteRegisterByte(RegisterType::A, 0xDA);
    WriteRegisterByte(RegisterType::B, 0xEB);
    WriteRegisterByte(RegisterType::C, 0x09);
    WriteRegisterByte(RegisterType::D, 0xCA);
    WriteRegisterByte(RegisterType::E, 0x5B);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x0B);
    WriteRegisterByte(RegisterType::L, 0x5B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD792, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDA);
    CheckRegisterByte(RegisterType::B, 0xEB);
    CheckRegisterByte(RegisterType::C, 0x09);
    CheckRegisterByte(RegisterType::D, 0xCA);
    CheckRegisterByte(RegisterType::E, 0x5B);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x0B);
    CheckRegisterByte(RegisterType::L, 0x5B);
    WriteRegisterWord(RegisterType::PC, 0xD793);
    WriteRegisterWord(RegisterType::SP, 0xEED7);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD792, 0x40);
}

void test_40_0324()
{
    if (skip_test_40_0324)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0E58);
    WriteRegisterWord(RegisterType::SP, 0x7DE5);
    WriteRegisterByte(RegisterType::A, 0x18);
    WriteRegisterByte(RegisterType::B, 0x78);
    WriteRegisterByte(RegisterType::C, 0xB5);
    WriteRegisterByte(RegisterType::D, 0x43);
    WriteRegisterByte(RegisterType::E, 0xD8);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x24);
    WriteRegisterByte(RegisterType::L, 0x56);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0E58, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x18);
    CheckRegisterByte(RegisterType::B, 0x78);
    CheckRegisterByte(RegisterType::C, 0xB5);
    CheckRegisterByte(RegisterType::D, 0x43);
    CheckRegisterByte(RegisterType::E, 0xD8);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x24);
    CheckRegisterByte(RegisterType::L, 0x56);
    WriteRegisterWord(RegisterType::PC, 0x0E59);
    WriteRegisterWord(RegisterType::SP, 0x7DE5);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0E58, 0x40);
}

void test_40_0325()
{
    if (skip_test_40_0325)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3DFB);
    WriteRegisterWord(RegisterType::SP, 0x5C7C);
    WriteRegisterByte(RegisterType::A, 0x17);
    WriteRegisterByte(RegisterType::B, 0x9F);
    WriteRegisterByte(RegisterType::C, 0x5B);
    WriteRegisterByte(RegisterType::D, 0xCC);
    WriteRegisterByte(RegisterType::E, 0x1F);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xF9);
    WriteRegisterByte(RegisterType::L, 0x2B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3DFB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x17);
    CheckRegisterByte(RegisterType::B, 0x9F);
    CheckRegisterByte(RegisterType::C, 0x5B);
    CheckRegisterByte(RegisterType::D, 0xCC);
    CheckRegisterByte(RegisterType::E, 0x1F);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xF9);
    CheckRegisterByte(RegisterType::L, 0x2B);
    WriteRegisterWord(RegisterType::PC, 0x3DFC);
    WriteRegisterWord(RegisterType::SP, 0x5C7C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3DFB, 0x40);
}

void test_40_0326()
{
    if (skip_test_40_0326)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6E87);
    WriteRegisterWord(RegisterType::SP, 0x6768);
    WriteRegisterByte(RegisterType::A, 0xF2);
    WriteRegisterByte(RegisterType::B, 0xA0);
    WriteRegisterByte(RegisterType::C, 0x95);
    WriteRegisterByte(RegisterType::D, 0x80);
    WriteRegisterByte(RegisterType::E, 0x80);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x59);
    WriteRegisterByte(RegisterType::L, 0x44);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6E87, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF2);
    CheckRegisterByte(RegisterType::B, 0xA0);
    CheckRegisterByte(RegisterType::C, 0x95);
    CheckRegisterByte(RegisterType::D, 0x80);
    CheckRegisterByte(RegisterType::E, 0x80);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x59);
    CheckRegisterByte(RegisterType::L, 0x44);
    WriteRegisterWord(RegisterType::PC, 0x6E88);
    WriteRegisterWord(RegisterType::SP, 0x6768);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6E87, 0x40);
}

void test_40_0327()
{
    if (skip_test_40_0327)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x93D9);
    WriteRegisterWord(RegisterType::SP, 0x532F);
    WriteRegisterByte(RegisterType::A, 0x55);
    WriteRegisterByte(RegisterType::B, 0xFB);
    WriteRegisterByte(RegisterType::C, 0x15);
    WriteRegisterByte(RegisterType::D, 0xB2);
    WriteRegisterByte(RegisterType::E, 0x27);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x2B);
    WriteRegisterByte(RegisterType::L, 0xD0);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x93D9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x55);
    CheckRegisterByte(RegisterType::B, 0xFB);
    CheckRegisterByte(RegisterType::C, 0x15);
    CheckRegisterByte(RegisterType::D, 0xB2);
    CheckRegisterByte(RegisterType::E, 0x27);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x2B);
    CheckRegisterByte(RegisterType::L, 0xD0);
    WriteRegisterWord(RegisterType::PC, 0x93DA);
    WriteRegisterWord(RegisterType::SP, 0x532F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x93D9, 0x40);
}

void test_40_0328()
{
    if (skip_test_40_0328)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x994F);
    WriteRegisterWord(RegisterType::SP, 0xC3DA);
    WriteRegisterByte(RegisterType::A, 0x0B);
    WriteRegisterByte(RegisterType::B, 0x97);
    WriteRegisterByte(RegisterType::C, 0x09);
    WriteRegisterByte(RegisterType::D, 0x0F);
    WriteRegisterByte(RegisterType::E, 0x5F);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x25);
    WriteRegisterByte(RegisterType::L, 0xF1);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x994F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0B);
    CheckRegisterByte(RegisterType::B, 0x97);
    CheckRegisterByte(RegisterType::C, 0x09);
    CheckRegisterByte(RegisterType::D, 0x0F);
    CheckRegisterByte(RegisterType::E, 0x5F);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x25);
    CheckRegisterByte(RegisterType::L, 0xF1);
    WriteRegisterWord(RegisterType::PC, 0x9950);
    WriteRegisterWord(RegisterType::SP, 0xC3DA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x994F, 0x40);
}

void test_40_0329()
{
    if (skip_test_40_0329)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE07F);
    WriteRegisterWord(RegisterType::SP, 0x01AE);
    WriteRegisterByte(RegisterType::A, 0xA6);
    WriteRegisterByte(RegisterType::B, 0x73);
    WriteRegisterByte(RegisterType::C, 0x72);
    WriteRegisterByte(RegisterType::D, 0x19);
    WriteRegisterByte(RegisterType::E, 0xB8);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x16);
    WriteRegisterByte(RegisterType::L, 0xD5);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xE07F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA6);
    CheckRegisterByte(RegisterType::B, 0x73);
    CheckRegisterByte(RegisterType::C, 0x72);
    CheckRegisterByte(RegisterType::D, 0x19);
    CheckRegisterByte(RegisterType::E, 0xB8);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x16);
    CheckRegisterByte(RegisterType::L, 0xD5);
    WriteRegisterWord(RegisterType::PC, 0xE080);
    WriteRegisterWord(RegisterType::SP, 0x01AE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xE07F, 0x40);
}

void test_40_032A()
{
    if (skip_test_40_032A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3367);
    WriteRegisterWord(RegisterType::SP, 0xC884);
    WriteRegisterByte(RegisterType::A, 0xBC);
    WriteRegisterByte(RegisterType::B, 0x3D);
    WriteRegisterByte(RegisterType::C, 0xB5);
    WriteRegisterByte(RegisterType::D, 0x04);
    WriteRegisterByte(RegisterType::E, 0x76);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x2B);
    WriteRegisterByte(RegisterType::L, 0x83);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3367, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBC);
    CheckRegisterByte(RegisterType::B, 0x3D);
    CheckRegisterByte(RegisterType::C, 0xB5);
    CheckRegisterByte(RegisterType::D, 0x04);
    CheckRegisterByte(RegisterType::E, 0x76);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x2B);
    CheckRegisterByte(RegisterType::L, 0x83);
    WriteRegisterWord(RegisterType::PC, 0x3368);
    WriteRegisterWord(RegisterType::SP, 0xC884);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3367, 0x40);
}

void test_40_032B()
{
    if (skip_test_40_032B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7321);
    WriteRegisterWord(RegisterType::SP, 0xDB30);
    WriteRegisterByte(RegisterType::A, 0xDA);
    WriteRegisterByte(RegisterType::B, 0xFB);
    WriteRegisterByte(RegisterType::C, 0x3A);
    WriteRegisterByte(RegisterType::D, 0x52);
    WriteRegisterByte(RegisterType::E, 0x8B);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xB9);
    WriteRegisterByte(RegisterType::L, 0xDB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7321, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDA);
    CheckRegisterByte(RegisterType::B, 0xFB);
    CheckRegisterByte(RegisterType::C, 0x3A);
    CheckRegisterByte(RegisterType::D, 0x52);
    CheckRegisterByte(RegisterType::E, 0x8B);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xB9);
    CheckRegisterByte(RegisterType::L, 0xDB);
    WriteRegisterWord(RegisterType::PC, 0x7322);
    WriteRegisterWord(RegisterType::SP, 0xDB30);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7321, 0x40);
}

void test_40_032C()
{
    if (skip_test_40_032C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD04E);
    WriteRegisterWord(RegisterType::SP, 0x65EC);
    WriteRegisterByte(RegisterType::A, 0x47);
    WriteRegisterByte(RegisterType::B, 0x1C);
    WriteRegisterByte(RegisterType::C, 0x77);
    WriteRegisterByte(RegisterType::D, 0x81);
    WriteRegisterByte(RegisterType::E, 0xA6);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xA7);
    WriteRegisterByte(RegisterType::L, 0x50);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD04E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x47);
    CheckRegisterByte(RegisterType::B, 0x1C);
    CheckRegisterByte(RegisterType::C, 0x77);
    CheckRegisterByte(RegisterType::D, 0x81);
    CheckRegisterByte(RegisterType::E, 0xA6);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xA7);
    CheckRegisterByte(RegisterType::L, 0x50);
    WriteRegisterWord(RegisterType::PC, 0xD04F);
    WriteRegisterWord(RegisterType::SP, 0x65EC);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD04E, 0x40);
}

void test_40_032D()
{
    if (skip_test_40_032D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC7B1);
    WriteRegisterWord(RegisterType::SP, 0x31C3);
    WriteRegisterByte(RegisterType::A, 0x7C);
    WriteRegisterByte(RegisterType::B, 0xE1);
    WriteRegisterByte(RegisterType::C, 0xA6);
    WriteRegisterByte(RegisterType::D, 0xC5);
    WriteRegisterByte(RegisterType::E, 0x8E);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xAD);
    WriteRegisterByte(RegisterType::L, 0xC1);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC7B1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7C);
    CheckRegisterByte(RegisterType::B, 0xE1);
    CheckRegisterByte(RegisterType::C, 0xA6);
    CheckRegisterByte(RegisterType::D, 0xC5);
    CheckRegisterByte(RegisterType::E, 0x8E);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xAD);
    CheckRegisterByte(RegisterType::L, 0xC1);
    WriteRegisterWord(RegisterType::PC, 0xC7B2);
    WriteRegisterWord(RegisterType::SP, 0x31C3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC7B1, 0x40);
}

void test_40_032E()
{
    if (skip_test_40_032E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBBE6);
    WriteRegisterWord(RegisterType::SP, 0x79B1);
    WriteRegisterByte(RegisterType::A, 0x06);
    WriteRegisterByte(RegisterType::B, 0x3C);
    WriteRegisterByte(RegisterType::C, 0xC1);
    WriteRegisterByte(RegisterType::D, 0x8A);
    WriteRegisterByte(RegisterType::E, 0x79);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x94);
    WriteRegisterByte(RegisterType::L, 0x32);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBBE6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x06);
    CheckRegisterByte(RegisterType::B, 0x3C);
    CheckRegisterByte(RegisterType::C, 0xC1);
    CheckRegisterByte(RegisterType::D, 0x8A);
    CheckRegisterByte(RegisterType::E, 0x79);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x94);
    CheckRegisterByte(RegisterType::L, 0x32);
    WriteRegisterWord(RegisterType::PC, 0xBBE7);
    WriteRegisterWord(RegisterType::SP, 0x79B1);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xBBE6, 0x40);
}

void test_40_032F()
{
    if (skip_test_40_032F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x26C2);
    WriteRegisterWord(RegisterType::SP, 0xA65D);
    WriteRegisterByte(RegisterType::A, 0x67);
    WriteRegisterByte(RegisterType::B, 0x45);
    WriteRegisterByte(RegisterType::C, 0x51);
    WriteRegisterByte(RegisterType::D, 0x77);
    WriteRegisterByte(RegisterType::E, 0x0A);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x45);
    WriteRegisterByte(RegisterType::L, 0x3F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x26C2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x67);
    CheckRegisterByte(RegisterType::B, 0x45);
    CheckRegisterByte(RegisterType::C, 0x51);
    CheckRegisterByte(RegisterType::D, 0x77);
    CheckRegisterByte(RegisterType::E, 0x0A);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x45);
    CheckRegisterByte(RegisterType::L, 0x3F);
    WriteRegisterWord(RegisterType::PC, 0x26C3);
    WriteRegisterWord(RegisterType::SP, 0xA65D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x26C2, 0x40);
}

void test_40_0330()
{
    if (skip_test_40_0330)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB04A);
    WriteRegisterWord(RegisterType::SP, 0x2D2A);
    WriteRegisterByte(RegisterType::A, 0x42);
    WriteRegisterByte(RegisterType::B, 0x6E);
    WriteRegisterByte(RegisterType::C, 0xC2);
    WriteRegisterByte(RegisterType::D, 0xC8);
    WriteRegisterByte(RegisterType::E, 0x4F);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xC7);
    WriteRegisterByte(RegisterType::L, 0xF0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB04A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x42);
    CheckRegisterByte(RegisterType::B, 0x6E);
    CheckRegisterByte(RegisterType::C, 0xC2);
    CheckRegisterByte(RegisterType::D, 0xC8);
    CheckRegisterByte(RegisterType::E, 0x4F);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xC7);
    CheckRegisterByte(RegisterType::L, 0xF0);
    WriteRegisterWord(RegisterType::PC, 0xB04B);
    WriteRegisterWord(RegisterType::SP, 0x2D2A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB04A, 0x40);
}

void test_40_0331()
{
    if (skip_test_40_0331)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBB71);
    WriteRegisterWord(RegisterType::SP, 0xBD3C);
    WriteRegisterByte(RegisterType::A, 0xC3);
    WriteRegisterByte(RegisterType::B, 0x8A);
    WriteRegisterByte(RegisterType::C, 0x52);
    WriteRegisterByte(RegisterType::D, 0x9D);
    WriteRegisterByte(RegisterType::E, 0x05);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x39);
    WriteRegisterByte(RegisterType::L, 0xCB);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xBB71, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC3);
    CheckRegisterByte(RegisterType::B, 0x8A);
    CheckRegisterByte(RegisterType::C, 0x52);
    CheckRegisterByte(RegisterType::D, 0x9D);
    CheckRegisterByte(RegisterType::E, 0x05);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x39);
    CheckRegisterByte(RegisterType::L, 0xCB);
    WriteRegisterWord(RegisterType::PC, 0xBB72);
    WriteRegisterWord(RegisterType::SP, 0xBD3C);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xBB71, 0x40);
}

void test_40_0332()
{
    if (skip_test_40_0332)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x01A6);
    WriteRegisterWord(RegisterType::SP, 0x4E99);
    WriteRegisterByte(RegisterType::A, 0x6D);
    WriteRegisterByte(RegisterType::B, 0x00);
    WriteRegisterByte(RegisterType::C, 0x31);
    WriteRegisterByte(RegisterType::D, 0xCD);
    WriteRegisterByte(RegisterType::E, 0xA6);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x69);
    WriteRegisterByte(RegisterType::L, 0x01);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x01A6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6D);
    CheckRegisterByte(RegisterType::B, 0x00);
    CheckRegisterByte(RegisterType::C, 0x31);
    CheckRegisterByte(RegisterType::D, 0xCD);
    CheckRegisterByte(RegisterType::E, 0xA6);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x69);
    CheckRegisterByte(RegisterType::L, 0x01);
    WriteRegisterWord(RegisterType::PC, 0x01A7);
    WriteRegisterWord(RegisterType::SP, 0x4E99);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x01A6, 0x40);
}

void test_40_0333()
{
    if (skip_test_40_0333)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2554);
    WriteRegisterWord(RegisterType::SP, 0x7558);
    WriteRegisterByte(RegisterType::A, 0x77);
    WriteRegisterByte(RegisterType::B, 0xFE);
    WriteRegisterByte(RegisterType::C, 0x58);
    WriteRegisterByte(RegisterType::D, 0xDA);
    WriteRegisterByte(RegisterType::E, 0xA9);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x21);
    WriteRegisterByte(RegisterType::L, 0xA7);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2554, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x77);
    CheckRegisterByte(RegisterType::B, 0xFE);
    CheckRegisterByte(RegisterType::C, 0x58);
    CheckRegisterByte(RegisterType::D, 0xDA);
    CheckRegisterByte(RegisterType::E, 0xA9);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x21);
    CheckRegisterByte(RegisterType::L, 0xA7);
    WriteRegisterWord(RegisterType::PC, 0x2555);
    WriteRegisterWord(RegisterType::SP, 0x7558);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2554, 0x40);
}

void test_40_0334()
{
    if (skip_test_40_0334)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x54E6);
    WriteRegisterWord(RegisterType::SP, 0x45A0);
    WriteRegisterByte(RegisterType::A, 0x1D);
    WriteRegisterByte(RegisterType::B, 0xA5);
    WriteRegisterByte(RegisterType::C, 0x1E);
    WriteRegisterByte(RegisterType::D, 0x87);
    WriteRegisterByte(RegisterType::E, 0x31);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x87);
    WriteRegisterByte(RegisterType::L, 0x69);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x54E6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1D);
    CheckRegisterByte(RegisterType::B, 0xA5);
    CheckRegisterByte(RegisterType::C, 0x1E);
    CheckRegisterByte(RegisterType::D, 0x87);
    CheckRegisterByte(RegisterType::E, 0x31);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x87);
    CheckRegisterByte(RegisterType::L, 0x69);
    WriteRegisterWord(RegisterType::PC, 0x54E7);
    WriteRegisterWord(RegisterType::SP, 0x45A0);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x54E6, 0x40);
}

void test_40_0335()
{
    if (skip_test_40_0335)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBC50);
    WriteRegisterWord(RegisterType::SP, 0xD5CA);
    WriteRegisterByte(RegisterType::A, 0x73);
    WriteRegisterByte(RegisterType::B, 0xFE);
    WriteRegisterByte(RegisterType::C, 0x36);
    WriteRegisterByte(RegisterType::D, 0xE5);
    WriteRegisterByte(RegisterType::E, 0x56);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xB5);
    WriteRegisterByte(RegisterType::L, 0xC0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBC50, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x73);
    CheckRegisterByte(RegisterType::B, 0xFE);
    CheckRegisterByte(RegisterType::C, 0x36);
    CheckRegisterByte(RegisterType::D, 0xE5);
    CheckRegisterByte(RegisterType::E, 0x56);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xB5);
    CheckRegisterByte(RegisterType::L, 0xC0);
    WriteRegisterWord(RegisterType::PC, 0xBC51);
    WriteRegisterWord(RegisterType::SP, 0xD5CA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xBC50, 0x40);
}

void test_40_0336()
{
    if (skip_test_40_0336)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE057);
    WriteRegisterWord(RegisterType::SP, 0x2931);
    WriteRegisterByte(RegisterType::A, 0x92);
    WriteRegisterByte(RegisterType::B, 0x23);
    WriteRegisterByte(RegisterType::C, 0xAC);
    WriteRegisterByte(RegisterType::D, 0x72);
    WriteRegisterByte(RegisterType::E, 0x0B);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x62);
    WriteRegisterByte(RegisterType::L, 0xAD);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xE057, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x92);
    CheckRegisterByte(RegisterType::B, 0x23);
    CheckRegisterByte(RegisterType::C, 0xAC);
    CheckRegisterByte(RegisterType::D, 0x72);
    CheckRegisterByte(RegisterType::E, 0x0B);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x62);
    CheckRegisterByte(RegisterType::L, 0xAD);
    WriteRegisterWord(RegisterType::PC, 0xE058);
    WriteRegisterWord(RegisterType::SP, 0x2931);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xE057, 0x40);
}

void test_40_0337()
{
    if (skip_test_40_0337)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF54A);
    WriteRegisterWord(RegisterType::SP, 0x6A1B);
    WriteRegisterByte(RegisterType::A, 0x81);
    WriteRegisterByte(RegisterType::B, 0x3E);
    WriteRegisterByte(RegisterType::C, 0x7C);
    WriteRegisterByte(RegisterType::D, 0xFF);
    WriteRegisterByte(RegisterType::E, 0x23);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xB4);
    WriteRegisterByte(RegisterType::L, 0x44);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF54A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x81);
    CheckRegisterByte(RegisterType::B, 0x3E);
    CheckRegisterByte(RegisterType::C, 0x7C);
    CheckRegisterByte(RegisterType::D, 0xFF);
    CheckRegisterByte(RegisterType::E, 0x23);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xB4);
    CheckRegisterByte(RegisterType::L, 0x44);
    WriteRegisterWord(RegisterType::PC, 0xF54B);
    WriteRegisterWord(RegisterType::SP, 0x6A1B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF54A, 0x40);
}

void test_40_0338()
{
    if (skip_test_40_0338)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD632);
    WriteRegisterWord(RegisterType::SP, 0x8ACC);
    WriteRegisterByte(RegisterType::A, 0x63);
    WriteRegisterByte(RegisterType::B, 0xB5);
    WriteRegisterByte(RegisterType::C, 0x64);
    WriteRegisterByte(RegisterType::D, 0x3C);
    WriteRegisterByte(RegisterType::E, 0xF7);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x58);
    WriteRegisterByte(RegisterType::L, 0x46);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD632, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x63);
    CheckRegisterByte(RegisterType::B, 0xB5);
    CheckRegisterByte(RegisterType::C, 0x64);
    CheckRegisterByte(RegisterType::D, 0x3C);
    CheckRegisterByte(RegisterType::E, 0xF7);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x58);
    CheckRegisterByte(RegisterType::L, 0x46);
    WriteRegisterWord(RegisterType::PC, 0xD633);
    WriteRegisterWord(RegisterType::SP, 0x8ACC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD632, 0x40);
}

void test_40_0339()
{
    if (skip_test_40_0339)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0D62);
    WriteRegisterWord(RegisterType::SP, 0xD88A);
    WriteRegisterByte(RegisterType::A, 0xF6);
    WriteRegisterByte(RegisterType::B, 0xD0);
    WriteRegisterByte(RegisterType::C, 0xFC);
    WriteRegisterByte(RegisterType::D, 0x8A);
    WriteRegisterByte(RegisterType::E, 0xF5);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x90);
    WriteRegisterByte(RegisterType::L, 0x30);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0D62, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF6);
    CheckRegisterByte(RegisterType::B, 0xD0);
    CheckRegisterByte(RegisterType::C, 0xFC);
    CheckRegisterByte(RegisterType::D, 0x8A);
    CheckRegisterByte(RegisterType::E, 0xF5);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x90);
    CheckRegisterByte(RegisterType::L, 0x30);
    WriteRegisterWord(RegisterType::PC, 0x0D63);
    WriteRegisterWord(RegisterType::SP, 0xD88A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0D62, 0x40);
}

void test_40_033A()
{
    if (skip_test_40_033A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCFFB);
    WriteRegisterWord(RegisterType::SP, 0x7825);
    WriteRegisterByte(RegisterType::A, 0x42);
    WriteRegisterByte(RegisterType::B, 0x39);
    WriteRegisterByte(RegisterType::C, 0x78);
    WriteRegisterByte(RegisterType::D, 0x9B);
    WriteRegisterByte(RegisterType::E, 0x77);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x28);
    WriteRegisterByte(RegisterType::L, 0xA7);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCFFB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x42);
    CheckRegisterByte(RegisterType::B, 0x39);
    CheckRegisterByte(RegisterType::C, 0x78);
    CheckRegisterByte(RegisterType::D, 0x9B);
    CheckRegisterByte(RegisterType::E, 0x77);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x28);
    CheckRegisterByte(RegisterType::L, 0xA7);
    WriteRegisterWord(RegisterType::PC, 0xCFFC);
    WriteRegisterWord(RegisterType::SP, 0x7825);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCFFB, 0x40);
}

void test_40_033B()
{
    if (skip_test_40_033B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x22A0);
    WriteRegisterWord(RegisterType::SP, 0xB8C8);
    WriteRegisterByte(RegisterType::A, 0x8F);
    WriteRegisterByte(RegisterType::B, 0x12);
    WriteRegisterByte(RegisterType::C, 0x7D);
    WriteRegisterByte(RegisterType::D, 0xB7);
    WriteRegisterByte(RegisterType::E, 0xB5);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x97);
    WriteRegisterByte(RegisterType::L, 0x5C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x22A0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8F);
    CheckRegisterByte(RegisterType::B, 0x12);
    CheckRegisterByte(RegisterType::C, 0x7D);
    CheckRegisterByte(RegisterType::D, 0xB7);
    CheckRegisterByte(RegisterType::E, 0xB5);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x97);
    CheckRegisterByte(RegisterType::L, 0x5C);
    WriteRegisterWord(RegisterType::PC, 0x22A1);
    WriteRegisterWord(RegisterType::SP, 0xB8C8);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x22A0, 0x40);
}

void test_40_033C()
{
    if (skip_test_40_033C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6BA3);
    WriteRegisterWord(RegisterType::SP, 0xDB91);
    WriteRegisterByte(RegisterType::A, 0xC0);
    WriteRegisterByte(RegisterType::B, 0x0B);
    WriteRegisterByte(RegisterType::C, 0xC4);
    WriteRegisterByte(RegisterType::D, 0x80);
    WriteRegisterByte(RegisterType::E, 0x6E);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xA1);
    WriteRegisterByte(RegisterType::L, 0x79);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6BA3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC0);
    CheckRegisterByte(RegisterType::B, 0x0B);
    CheckRegisterByte(RegisterType::C, 0xC4);
    CheckRegisterByte(RegisterType::D, 0x80);
    CheckRegisterByte(RegisterType::E, 0x6E);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xA1);
    CheckRegisterByte(RegisterType::L, 0x79);
    WriteRegisterWord(RegisterType::PC, 0x6BA4);
    WriteRegisterWord(RegisterType::SP, 0xDB91);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6BA3, 0x40);
}

void test_40_033D()
{
    if (skip_test_40_033D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCB72);
    WriteRegisterWord(RegisterType::SP, 0x9664);
    WriteRegisterByte(RegisterType::A, 0x8E);
    WriteRegisterByte(RegisterType::B, 0x73);
    WriteRegisterByte(RegisterType::C, 0x07);
    WriteRegisterByte(RegisterType::D, 0x68);
    WriteRegisterByte(RegisterType::E, 0x60);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xA7);
    WriteRegisterByte(RegisterType::L, 0x7A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xCB72, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8E);
    CheckRegisterByte(RegisterType::B, 0x73);
    CheckRegisterByte(RegisterType::C, 0x07);
    CheckRegisterByte(RegisterType::D, 0x68);
    CheckRegisterByte(RegisterType::E, 0x60);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xA7);
    CheckRegisterByte(RegisterType::L, 0x7A);
    WriteRegisterWord(RegisterType::PC, 0xCB73);
    WriteRegisterWord(RegisterType::SP, 0x9664);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCB72, 0x40);
}

void test_40_033E()
{
    if (skip_test_40_033E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB681);
    WriteRegisterWord(RegisterType::SP, 0x9AF1);
    WriteRegisterByte(RegisterType::A, 0x50);
    WriteRegisterByte(RegisterType::B, 0xB7);
    WriteRegisterByte(RegisterType::C, 0x24);
    WriteRegisterByte(RegisterType::D, 0x09);
    WriteRegisterByte(RegisterType::E, 0x58);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xAC);
    WriteRegisterByte(RegisterType::L, 0x27);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB681, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x50);
    CheckRegisterByte(RegisterType::B, 0xB7);
    CheckRegisterByte(RegisterType::C, 0x24);
    CheckRegisterByte(RegisterType::D, 0x09);
    CheckRegisterByte(RegisterType::E, 0x58);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xAC);
    CheckRegisterByte(RegisterType::L, 0x27);
    WriteRegisterWord(RegisterType::PC, 0xB682);
    WriteRegisterWord(RegisterType::SP, 0x9AF1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB681, 0x40);
}

void test_40_033F()
{
    if (skip_test_40_033F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x64E7);
    WriteRegisterWord(RegisterType::SP, 0x8F63);
    WriteRegisterByte(RegisterType::A, 0x1A);
    WriteRegisterByte(RegisterType::B, 0x85);
    WriteRegisterByte(RegisterType::C, 0x0B);
    WriteRegisterByte(RegisterType::D, 0xEB);
    WriteRegisterByte(RegisterType::E, 0xFC);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xE0);
    WriteRegisterByte(RegisterType::L, 0xFB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x64E7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1A);
    CheckRegisterByte(RegisterType::B, 0x85);
    CheckRegisterByte(RegisterType::C, 0x0B);
    CheckRegisterByte(RegisterType::D, 0xEB);
    CheckRegisterByte(RegisterType::E, 0xFC);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xE0);
    CheckRegisterByte(RegisterType::L, 0xFB);
    WriteRegisterWord(RegisterType::PC, 0x64E8);
    WriteRegisterWord(RegisterType::SP, 0x8F63);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x64E7, 0x40);
}

void test_40_0340()
{
    if (skip_test_40_0340)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBE80);
    WriteRegisterWord(RegisterType::SP, 0xD671);
    WriteRegisterByte(RegisterType::A, 0x72);
    WriteRegisterByte(RegisterType::B, 0xDD);
    WriteRegisterByte(RegisterType::C, 0x28);
    WriteRegisterByte(RegisterType::D, 0xD0);
    WriteRegisterByte(RegisterType::E, 0x72);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x1F);
    WriteRegisterByte(RegisterType::L, 0x21);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBE80, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x72);
    CheckRegisterByte(RegisterType::B, 0xDD);
    CheckRegisterByte(RegisterType::C, 0x28);
    CheckRegisterByte(RegisterType::D, 0xD0);
    CheckRegisterByte(RegisterType::E, 0x72);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x1F);
    CheckRegisterByte(RegisterType::L, 0x21);
    WriteRegisterWord(RegisterType::PC, 0xBE81);
    WriteRegisterWord(RegisterType::SP, 0xD671);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xBE80, 0x40);
}

void test_40_0341()
{
    if (skip_test_40_0341)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3990);
    WriteRegisterWord(RegisterType::SP, 0xC4C6);
    WriteRegisterByte(RegisterType::A, 0x60);
    WriteRegisterByte(RegisterType::B, 0x16);
    WriteRegisterByte(RegisterType::C, 0x70);
    WriteRegisterByte(RegisterType::D, 0x4B);
    WriteRegisterByte(RegisterType::E, 0x2C);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x1F);
    WriteRegisterByte(RegisterType::L, 0x81);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3990, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x60);
    CheckRegisterByte(RegisterType::B, 0x16);
    CheckRegisterByte(RegisterType::C, 0x70);
    CheckRegisterByte(RegisterType::D, 0x4B);
    CheckRegisterByte(RegisterType::E, 0x2C);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x1F);
    CheckRegisterByte(RegisterType::L, 0x81);
    WriteRegisterWord(RegisterType::PC, 0x3991);
    WriteRegisterWord(RegisterType::SP, 0xC4C6);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3990, 0x40);
}

void test_40_0342()
{
    if (skip_test_40_0342)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC50A);
    WriteRegisterWord(RegisterType::SP, 0xF781);
    WriteRegisterByte(RegisterType::A, 0xB6);
    WriteRegisterByte(RegisterType::B, 0xC7);
    WriteRegisterByte(RegisterType::C, 0x33);
    WriteRegisterByte(RegisterType::D, 0xED);
    WriteRegisterByte(RegisterType::E, 0xA1);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x4A);
    WriteRegisterByte(RegisterType::L, 0xEB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC50A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB6);
    CheckRegisterByte(RegisterType::B, 0xC7);
    CheckRegisterByte(RegisterType::C, 0x33);
    CheckRegisterByte(RegisterType::D, 0xED);
    CheckRegisterByte(RegisterType::E, 0xA1);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x4A);
    CheckRegisterByte(RegisterType::L, 0xEB);
    WriteRegisterWord(RegisterType::PC, 0xC50B);
    WriteRegisterWord(RegisterType::SP, 0xF781);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC50A, 0x40);
}

void test_40_0343()
{
    if (skip_test_40_0343)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5AE6);
    WriteRegisterWord(RegisterType::SP, 0x8ECA);
    WriteRegisterByte(RegisterType::A, 0xE2);
    WriteRegisterByte(RegisterType::B, 0x2F);
    WriteRegisterByte(RegisterType::C, 0xA6);
    WriteRegisterByte(RegisterType::D, 0x09);
    WriteRegisterByte(RegisterType::E, 0xFC);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xC4);
    WriteRegisterByte(RegisterType::L, 0x24);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5AE6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE2);
    CheckRegisterByte(RegisterType::B, 0x2F);
    CheckRegisterByte(RegisterType::C, 0xA6);
    CheckRegisterByte(RegisterType::D, 0x09);
    CheckRegisterByte(RegisterType::E, 0xFC);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xC4);
    CheckRegisterByte(RegisterType::L, 0x24);
    WriteRegisterWord(RegisterType::PC, 0x5AE7);
    WriteRegisterWord(RegisterType::SP, 0x8ECA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5AE6, 0x40);
}

void test_40_0344()
{
    if (skip_test_40_0344)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9CEC);
    WriteRegisterWord(RegisterType::SP, 0xDAC0);
    WriteRegisterByte(RegisterType::A, 0xD4);
    WriteRegisterByte(RegisterType::B, 0x7E);
    WriteRegisterByte(RegisterType::C, 0x86);
    WriteRegisterByte(RegisterType::D, 0x5B);
    WriteRegisterByte(RegisterType::E, 0x07);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x1F);
    WriteRegisterByte(RegisterType::L, 0x87);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9CEC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD4);
    CheckRegisterByte(RegisterType::B, 0x7E);
    CheckRegisterByte(RegisterType::C, 0x86);
    CheckRegisterByte(RegisterType::D, 0x5B);
    CheckRegisterByte(RegisterType::E, 0x07);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x1F);
    CheckRegisterByte(RegisterType::L, 0x87);
    WriteRegisterWord(RegisterType::PC, 0x9CED);
    WriteRegisterWord(RegisterType::SP, 0xDAC0);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x9CEC, 0x40);
}

void test_40_0345()
{
    if (skip_test_40_0345)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x098F);
    WriteRegisterWord(RegisterType::SP, 0x2FAD);
    WriteRegisterByte(RegisterType::A, 0x7F);
    WriteRegisterByte(RegisterType::B, 0xA5);
    WriteRegisterByte(RegisterType::C, 0x67);
    WriteRegisterByte(RegisterType::D, 0x11);
    WriteRegisterByte(RegisterType::E, 0x89);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xDE);
    WriteRegisterByte(RegisterType::L, 0x86);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x098F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7F);
    CheckRegisterByte(RegisterType::B, 0xA5);
    CheckRegisterByte(RegisterType::C, 0x67);
    CheckRegisterByte(RegisterType::D, 0x11);
    CheckRegisterByte(RegisterType::E, 0x89);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xDE);
    CheckRegisterByte(RegisterType::L, 0x86);
    WriteRegisterWord(RegisterType::PC, 0x0990);
    WriteRegisterWord(RegisterType::SP, 0x2FAD);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x098F, 0x40);
}

void test_40_0346()
{
    if (skip_test_40_0346)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x352C);
    WriteRegisterWord(RegisterType::SP, 0x991E);
    WriteRegisterByte(RegisterType::A, 0xF1);
    WriteRegisterByte(RegisterType::B, 0xF6);
    WriteRegisterByte(RegisterType::C, 0x69);
    WriteRegisterByte(RegisterType::D, 0x13);
    WriteRegisterByte(RegisterType::E, 0xC0);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x38);
    WriteRegisterByte(RegisterType::L, 0xE2);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x352C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF1);
    CheckRegisterByte(RegisterType::B, 0xF6);
    CheckRegisterByte(RegisterType::C, 0x69);
    CheckRegisterByte(RegisterType::D, 0x13);
    CheckRegisterByte(RegisterType::E, 0xC0);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x38);
    CheckRegisterByte(RegisterType::L, 0xE2);
    WriteRegisterWord(RegisterType::PC, 0x352D);
    WriteRegisterWord(RegisterType::SP, 0x991E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x352C, 0x40);
}

void test_40_0347()
{
    if (skip_test_40_0347)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xBE91);
    WriteRegisterWord(RegisterType::SP, 0xDC25);
    WriteRegisterByte(RegisterType::A, 0xB3);
    WriteRegisterByte(RegisterType::B, 0xB0);
    WriteRegisterByte(RegisterType::C, 0x2C);
    WriteRegisterByte(RegisterType::D, 0xA2);
    WriteRegisterByte(RegisterType::E, 0xE2);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xCC);
    WriteRegisterByte(RegisterType::L, 0xFA);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xBE91, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB3);
    CheckRegisterByte(RegisterType::B, 0xB0);
    CheckRegisterByte(RegisterType::C, 0x2C);
    CheckRegisterByte(RegisterType::D, 0xA2);
    CheckRegisterByte(RegisterType::E, 0xE2);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xCC);
    CheckRegisterByte(RegisterType::L, 0xFA);
    WriteRegisterWord(RegisterType::PC, 0xBE92);
    WriteRegisterWord(RegisterType::SP, 0xDC25);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xBE91, 0x40);
}

void test_40_0348()
{
    if (skip_test_40_0348)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0BBA);
    WriteRegisterWord(RegisterType::SP, 0x5C2F);
    WriteRegisterByte(RegisterType::A, 0x1E);
    WriteRegisterByte(RegisterType::B, 0x86);
    WriteRegisterByte(RegisterType::C, 0x38);
    WriteRegisterByte(RegisterType::D, 0x45);
    WriteRegisterByte(RegisterType::E, 0x62);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x78);
    WriteRegisterByte(RegisterType::L, 0xFE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0BBA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1E);
    CheckRegisterByte(RegisterType::B, 0x86);
    CheckRegisterByte(RegisterType::C, 0x38);
    CheckRegisterByte(RegisterType::D, 0x45);
    CheckRegisterByte(RegisterType::E, 0x62);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x78);
    CheckRegisterByte(RegisterType::L, 0xFE);
    WriteRegisterWord(RegisterType::PC, 0x0BBB);
    WriteRegisterWord(RegisterType::SP, 0x5C2F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0BBA, 0x40);
}

void test_40_0349()
{
    if (skip_test_40_0349)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9BE4);
    WriteRegisterWord(RegisterType::SP, 0xFEAA);
    WriteRegisterByte(RegisterType::A, 0x79);
    WriteRegisterByte(RegisterType::B, 0x13);
    WriteRegisterByte(RegisterType::C, 0x16);
    WriteRegisterByte(RegisterType::D, 0xA5);
    WriteRegisterByte(RegisterType::E, 0x9D);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x42);
    WriteRegisterByte(RegisterType::L, 0xC9);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9BE4, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x79);
    CheckRegisterByte(RegisterType::B, 0x13);
    CheckRegisterByte(RegisterType::C, 0x16);
    CheckRegisterByte(RegisterType::D, 0xA5);
    CheckRegisterByte(RegisterType::E, 0x9D);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x42);
    CheckRegisterByte(RegisterType::L, 0xC9);
    WriteRegisterWord(RegisterType::PC, 0x9BE5);
    WriteRegisterWord(RegisterType::SP, 0xFEAA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9BE4, 0x40);
}

void test_40_034A()
{
    if (skip_test_40_034A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x91A2);
    WriteRegisterWord(RegisterType::SP, 0x7B50);
    WriteRegisterByte(RegisterType::A, 0xDD);
    WriteRegisterByte(RegisterType::B, 0x0E);
    WriteRegisterByte(RegisterType::C, 0x4F);
    WriteRegisterByte(RegisterType::D, 0x7D);
    WriteRegisterByte(RegisterType::E, 0xCB);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x60);
    WriteRegisterByte(RegisterType::L, 0x43);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x91A2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDD);
    CheckRegisterByte(RegisterType::B, 0x0E);
    CheckRegisterByte(RegisterType::C, 0x4F);
    CheckRegisterByte(RegisterType::D, 0x7D);
    CheckRegisterByte(RegisterType::E, 0xCB);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x60);
    CheckRegisterByte(RegisterType::L, 0x43);
    WriteRegisterWord(RegisterType::PC, 0x91A3);
    WriteRegisterWord(RegisterType::SP, 0x7B50);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x91A2, 0x40);
}

void test_40_034B()
{
    if (skip_test_40_034B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDBFF);
    WriteRegisterWord(RegisterType::SP, 0x5BDD);
    WriteRegisterByte(RegisterType::A, 0xEC);
    WriteRegisterByte(RegisterType::B, 0xC9);
    WriteRegisterByte(RegisterType::C, 0x9F);
    WriteRegisterByte(RegisterType::D, 0xCD);
    WriteRegisterByte(RegisterType::E, 0x54);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xD1);
    WriteRegisterByte(RegisterType::L, 0xF9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDBFF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEC);
    CheckRegisterByte(RegisterType::B, 0xC9);
    CheckRegisterByte(RegisterType::C, 0x9F);
    CheckRegisterByte(RegisterType::D, 0xCD);
    CheckRegisterByte(RegisterType::E, 0x54);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xD1);
    CheckRegisterByte(RegisterType::L, 0xF9);
    WriteRegisterWord(RegisterType::PC, 0xDC00);
    WriteRegisterWord(RegisterType::SP, 0x5BDD);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xDBFF, 0x40);
}

void test_40_034C()
{
    if (skip_test_40_034C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x439F);
    WriteRegisterWord(RegisterType::SP, 0x4E42);
    WriteRegisterByte(RegisterType::A, 0x26);
    WriteRegisterByte(RegisterType::B, 0x20);
    WriteRegisterByte(RegisterType::C, 0x91);
    WriteRegisterByte(RegisterType::D, 0xC6);
    WriteRegisterByte(RegisterType::E, 0xC5);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x66);
    WriteRegisterByte(RegisterType::L, 0x01);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x439F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x26);
    CheckRegisterByte(RegisterType::B, 0x20);
    CheckRegisterByte(RegisterType::C, 0x91);
    CheckRegisterByte(RegisterType::D, 0xC6);
    CheckRegisterByte(RegisterType::E, 0xC5);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x66);
    CheckRegisterByte(RegisterType::L, 0x01);
    WriteRegisterWord(RegisterType::PC, 0x43A0);
    WriteRegisterWord(RegisterType::SP, 0x4E42);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x439F, 0x40);
}

void test_40_034D()
{
    if (skip_test_40_034D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0E60);
    WriteRegisterWord(RegisterType::SP, 0x8866);
    WriteRegisterByte(RegisterType::A, 0x1C);
    WriteRegisterByte(RegisterType::B, 0x0F);
    WriteRegisterByte(RegisterType::C, 0x7D);
    WriteRegisterByte(RegisterType::D, 0x7E);
    WriteRegisterByte(RegisterType::E, 0x02);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x45);
    WriteRegisterByte(RegisterType::L, 0xCA);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0E60, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x1C);
    CheckRegisterByte(RegisterType::B, 0x0F);
    CheckRegisterByte(RegisterType::C, 0x7D);
    CheckRegisterByte(RegisterType::D, 0x7E);
    CheckRegisterByte(RegisterType::E, 0x02);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x45);
    CheckRegisterByte(RegisterType::L, 0xCA);
    WriteRegisterWord(RegisterType::PC, 0x0E61);
    WriteRegisterWord(RegisterType::SP, 0x8866);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0E60, 0x40);
}

void test_40_034E()
{
    if (skip_test_40_034E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB482);
    WriteRegisterWord(RegisterType::SP, 0x1BDE);
    WriteRegisterByte(RegisterType::A, 0x53);
    WriteRegisterByte(RegisterType::B, 0xA1);
    WriteRegisterByte(RegisterType::C, 0x86);
    WriteRegisterByte(RegisterType::D, 0xE5);
    WriteRegisterByte(RegisterType::E, 0x98);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xA3);
    WriteRegisterByte(RegisterType::L, 0x7F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB482, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x53);
    CheckRegisterByte(RegisterType::B, 0xA1);
    CheckRegisterByte(RegisterType::C, 0x86);
    CheckRegisterByte(RegisterType::D, 0xE5);
    CheckRegisterByte(RegisterType::E, 0x98);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xA3);
    CheckRegisterByte(RegisterType::L, 0x7F);
    WriteRegisterWord(RegisterType::PC, 0xB483);
    WriteRegisterWord(RegisterType::SP, 0x1BDE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB482, 0x40);
}

void test_40_034F()
{
    if (skip_test_40_034F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD203);
    WriteRegisterWord(RegisterType::SP, 0xBB60);
    WriteRegisterByte(RegisterType::A, 0xA3);
    WriteRegisterByte(RegisterType::B, 0x16);
    WriteRegisterByte(RegisterType::C, 0x81);
    WriteRegisterByte(RegisterType::D, 0x60);
    WriteRegisterByte(RegisterType::E, 0x30);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x0C);
    WriteRegisterByte(RegisterType::L, 0x12);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD203, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA3);
    CheckRegisterByte(RegisterType::B, 0x16);
    CheckRegisterByte(RegisterType::C, 0x81);
    CheckRegisterByte(RegisterType::D, 0x60);
    CheckRegisterByte(RegisterType::E, 0x30);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x0C);
    CheckRegisterByte(RegisterType::L, 0x12);
    WriteRegisterWord(RegisterType::PC, 0xD204);
    WriteRegisterWord(RegisterType::SP, 0xBB60);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD203, 0x40);
}

void test_40_0350()
{
    if (skip_test_40_0350)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4C30);
    WriteRegisterWord(RegisterType::SP, 0x1143);
    WriteRegisterByte(RegisterType::A, 0xD4);
    WriteRegisterByte(RegisterType::B, 0x67);
    WriteRegisterByte(RegisterType::C, 0x85);
    WriteRegisterByte(RegisterType::D, 0x7B);
    WriteRegisterByte(RegisterType::E, 0xF5);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xB6);
    WriteRegisterByte(RegisterType::L, 0x40);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4C30, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD4);
    CheckRegisterByte(RegisterType::B, 0x67);
    CheckRegisterByte(RegisterType::C, 0x85);
    CheckRegisterByte(RegisterType::D, 0x7B);
    CheckRegisterByte(RegisterType::E, 0xF5);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xB6);
    CheckRegisterByte(RegisterType::L, 0x40);
    WriteRegisterWord(RegisterType::PC, 0x4C31);
    WriteRegisterWord(RegisterType::SP, 0x1143);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4C30, 0x40);
}

void test_40_0351()
{
    if (skip_test_40_0351)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEA1F);
    WriteRegisterWord(RegisterType::SP, 0x2CA4);
    WriteRegisterByte(RegisterType::A, 0x57);
    WriteRegisterByte(RegisterType::B, 0x5B);
    WriteRegisterByte(RegisterType::C, 0x4F);
    WriteRegisterByte(RegisterType::D, 0x72);
    WriteRegisterByte(RegisterType::E, 0xBD);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xB9);
    WriteRegisterByte(RegisterType::L, 0x35);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xEA1F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x57);
    CheckRegisterByte(RegisterType::B, 0x5B);
    CheckRegisterByte(RegisterType::C, 0x4F);
    CheckRegisterByte(RegisterType::D, 0x72);
    CheckRegisterByte(RegisterType::E, 0xBD);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xB9);
    CheckRegisterByte(RegisterType::L, 0x35);
    WriteRegisterWord(RegisterType::PC, 0xEA20);
    WriteRegisterWord(RegisterType::SP, 0x2CA4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xEA1F, 0x40);
}

void test_40_0352()
{
    if (skip_test_40_0352)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9561);
    WriteRegisterWord(RegisterType::SP, 0x4EBE);
    WriteRegisterByte(RegisterType::A, 0xE5);
    WriteRegisterByte(RegisterType::B, 0x44);
    WriteRegisterByte(RegisterType::C, 0x81);
    WriteRegisterByte(RegisterType::D, 0x0A);
    WriteRegisterByte(RegisterType::E, 0x11);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x21);
    WriteRegisterByte(RegisterType::L, 0x9C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x9561, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE5);
    CheckRegisterByte(RegisterType::B, 0x44);
    CheckRegisterByte(RegisterType::C, 0x81);
    CheckRegisterByte(RegisterType::D, 0x0A);
    CheckRegisterByte(RegisterType::E, 0x11);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x21);
    CheckRegisterByte(RegisterType::L, 0x9C);
    WriteRegisterWord(RegisterType::PC, 0x9562);
    WriteRegisterWord(RegisterType::SP, 0x4EBE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9561, 0x40);
}

void test_40_0353()
{
    if (skip_test_40_0353)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7D84);
    WriteRegisterWord(RegisterType::SP, 0xCC73);
    WriteRegisterByte(RegisterType::A, 0x41);
    WriteRegisterByte(RegisterType::B, 0xB4);
    WriteRegisterByte(RegisterType::C, 0xF0);
    WriteRegisterByte(RegisterType::D, 0x52);
    WriteRegisterByte(RegisterType::E, 0x6E);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xE5);
    WriteRegisterByte(RegisterType::L, 0xD3);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7D84, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x41);
    CheckRegisterByte(RegisterType::B, 0xB4);
    CheckRegisterByte(RegisterType::C, 0xF0);
    CheckRegisterByte(RegisterType::D, 0x52);
    CheckRegisterByte(RegisterType::E, 0x6E);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xE5);
    CheckRegisterByte(RegisterType::L, 0xD3);
    WriteRegisterWord(RegisterType::PC, 0x7D85);
    WriteRegisterWord(RegisterType::SP, 0xCC73);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7D84, 0x40);
}

void test_40_0354()
{
    if (skip_test_40_0354)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAB5C);
    WriteRegisterWord(RegisterType::SP, 0xF8D1);
    WriteRegisterByte(RegisterType::A, 0xFF);
    WriteRegisterByte(RegisterType::B, 0x34);
    WriteRegisterByte(RegisterType::C, 0x90);
    WriteRegisterByte(RegisterType::D, 0x8B);
    WriteRegisterByte(RegisterType::E, 0xE9);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x62);
    WriteRegisterByte(RegisterType::L, 0x7A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xAB5C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFF);
    CheckRegisterByte(RegisterType::B, 0x34);
    CheckRegisterByte(RegisterType::C, 0x90);
    CheckRegisterByte(RegisterType::D, 0x8B);
    CheckRegisterByte(RegisterType::E, 0xE9);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x62);
    CheckRegisterByte(RegisterType::L, 0x7A);
    WriteRegisterWord(RegisterType::PC, 0xAB5D);
    WriteRegisterWord(RegisterType::SP, 0xF8D1);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xAB5C, 0x40);
}

void test_40_0355()
{
    if (skip_test_40_0355)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6780);
    WriteRegisterWord(RegisterType::SP, 0x877D);
    WriteRegisterByte(RegisterType::A, 0x88);
    WriteRegisterByte(RegisterType::B, 0x43);
    WriteRegisterByte(RegisterType::C, 0xF7);
    WriteRegisterByte(RegisterType::D, 0x46);
    WriteRegisterByte(RegisterType::E, 0xB3);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x2C);
    WriteRegisterByte(RegisterType::L, 0xE3);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6780, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x88);
    CheckRegisterByte(RegisterType::B, 0x43);
    CheckRegisterByte(RegisterType::C, 0xF7);
    CheckRegisterByte(RegisterType::D, 0x46);
    CheckRegisterByte(RegisterType::E, 0xB3);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x2C);
    CheckRegisterByte(RegisterType::L, 0xE3);
    WriteRegisterWord(RegisterType::PC, 0x6781);
    WriteRegisterWord(RegisterType::SP, 0x877D);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x6780, 0x40);
}

void test_40_0356()
{
    if (skip_test_40_0356)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA317);
    WriteRegisterWord(RegisterType::SP, 0x60F6);
    WriteRegisterByte(RegisterType::A, 0x87);
    WriteRegisterByte(RegisterType::B, 0xCB);
    WriteRegisterByte(RegisterType::C, 0x6C);
    WriteRegisterByte(RegisterType::D, 0x2D);
    WriteRegisterByte(RegisterType::E, 0xF0);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x33);
    WriteRegisterByte(RegisterType::L, 0x1A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA317, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x87);
    CheckRegisterByte(RegisterType::B, 0xCB);
    CheckRegisterByte(RegisterType::C, 0x6C);
    CheckRegisterByte(RegisterType::D, 0x2D);
    CheckRegisterByte(RegisterType::E, 0xF0);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x33);
    CheckRegisterByte(RegisterType::L, 0x1A);
    WriteRegisterWord(RegisterType::PC, 0xA318);
    WriteRegisterWord(RegisterType::SP, 0x60F6);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA317, 0x40);
}

void test_40_0357()
{
    if (skip_test_40_0357)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA7CE);
    WriteRegisterWord(RegisterType::SP, 0x84BA);
    WriteRegisterByte(RegisterType::A, 0xA1);
    WriteRegisterByte(RegisterType::B, 0x36);
    WriteRegisterByte(RegisterType::C, 0x29);
    WriteRegisterByte(RegisterType::D, 0x1A);
    WriteRegisterByte(RegisterType::E, 0xD4);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x84);
    WriteRegisterByte(RegisterType::L, 0xDB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA7CE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA1);
    CheckRegisterByte(RegisterType::B, 0x36);
    CheckRegisterByte(RegisterType::C, 0x29);
    CheckRegisterByte(RegisterType::D, 0x1A);
    CheckRegisterByte(RegisterType::E, 0xD4);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x84);
    CheckRegisterByte(RegisterType::L, 0xDB);
    WriteRegisterWord(RegisterType::PC, 0xA7CF);
    WriteRegisterWord(RegisterType::SP, 0x84BA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA7CE, 0x40);
}

void test_40_0358()
{
    if (skip_test_40_0358)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2F65);
    WriteRegisterWord(RegisterType::SP, 0xFFA4);
    WriteRegisterByte(RegisterType::A, 0x03);
    WriteRegisterByte(RegisterType::B, 0x4E);
    WriteRegisterByte(RegisterType::C, 0x85);
    WriteRegisterByte(RegisterType::D, 0x88);
    WriteRegisterByte(RegisterType::E, 0xDA);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x94);
    WriteRegisterByte(RegisterType::L, 0xFD);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2F65, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x03);
    CheckRegisterByte(RegisterType::B, 0x4E);
    CheckRegisterByte(RegisterType::C, 0x85);
    CheckRegisterByte(RegisterType::D, 0x88);
    CheckRegisterByte(RegisterType::E, 0xDA);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x94);
    CheckRegisterByte(RegisterType::L, 0xFD);
    WriteRegisterWord(RegisterType::PC, 0x2F66);
    WriteRegisterWord(RegisterType::SP, 0xFFA4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2F65, 0x40);
}

void test_40_0359()
{
    if (skip_test_40_0359)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDB01);
    WriteRegisterWord(RegisterType::SP, 0x828F);
    WriteRegisterByte(RegisterType::A, 0x9B);
    WriteRegisterByte(RegisterType::B, 0x13);
    WriteRegisterByte(RegisterType::C, 0xAA);
    WriteRegisterByte(RegisterType::D, 0x07);
    WriteRegisterByte(RegisterType::E, 0x31);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x62);
    WriteRegisterByte(RegisterType::L, 0x1B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xDB01, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9B);
    CheckRegisterByte(RegisterType::B, 0x13);
    CheckRegisterByte(RegisterType::C, 0xAA);
    CheckRegisterByte(RegisterType::D, 0x07);
    CheckRegisterByte(RegisterType::E, 0x31);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x62);
    CheckRegisterByte(RegisterType::L, 0x1B);
    WriteRegisterWord(RegisterType::PC, 0xDB02);
    WriteRegisterWord(RegisterType::SP, 0x828F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xDB01, 0x40);
}

void test_40_035A()
{
    if (skip_test_40_035A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCA0B);
    WriteRegisterWord(RegisterType::SP, 0xD08D);
    WriteRegisterByte(RegisterType::A, 0xCF);
    WriteRegisterByte(RegisterType::B, 0x35);
    WriteRegisterByte(RegisterType::C, 0xC1);
    WriteRegisterByte(RegisterType::D, 0x07);
    WriteRegisterByte(RegisterType::E, 0x19);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xBE);
    WriteRegisterByte(RegisterType::L, 0x77);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xCA0B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCF);
    CheckRegisterByte(RegisterType::B, 0x35);
    CheckRegisterByte(RegisterType::C, 0xC1);
    CheckRegisterByte(RegisterType::D, 0x07);
    CheckRegisterByte(RegisterType::E, 0x19);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xBE);
    CheckRegisterByte(RegisterType::L, 0x77);
    WriteRegisterWord(RegisterType::PC, 0xCA0C);
    WriteRegisterWord(RegisterType::SP, 0xD08D);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xCA0B, 0x40);
}

void test_40_035B()
{
    if (skip_test_40_035B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4F59);
    WriteRegisterWord(RegisterType::SP, 0x3CF9);
    WriteRegisterByte(RegisterType::A, 0xE8);
    WriteRegisterByte(RegisterType::B, 0x58);
    WriteRegisterByte(RegisterType::C, 0xFE);
    WriteRegisterByte(RegisterType::D, 0x3A);
    WriteRegisterByte(RegisterType::E, 0xC7);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x66);
    WriteRegisterByte(RegisterType::L, 0x17);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4F59, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE8);
    CheckRegisterByte(RegisterType::B, 0x58);
    CheckRegisterByte(RegisterType::C, 0xFE);
    CheckRegisterByte(RegisterType::D, 0x3A);
    CheckRegisterByte(RegisterType::E, 0xC7);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x66);
    CheckRegisterByte(RegisterType::L, 0x17);
    WriteRegisterWord(RegisterType::PC, 0x4F5A);
    WriteRegisterWord(RegisterType::SP, 0x3CF9);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4F59, 0x40);
}

void test_40_035C()
{
    if (skip_test_40_035C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA364);
    WriteRegisterWord(RegisterType::SP, 0xF552);
    WriteRegisterByte(RegisterType::A, 0xBB);
    WriteRegisterByte(RegisterType::B, 0x63);
    WriteRegisterByte(RegisterType::C, 0xC6);
    WriteRegisterByte(RegisterType::D, 0x68);
    WriteRegisterByte(RegisterType::E, 0x86);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x76);
    WriteRegisterByte(RegisterType::L, 0xAD);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA364, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBB);
    CheckRegisterByte(RegisterType::B, 0x63);
    CheckRegisterByte(RegisterType::C, 0xC6);
    CheckRegisterByte(RegisterType::D, 0x68);
    CheckRegisterByte(RegisterType::E, 0x86);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x76);
    CheckRegisterByte(RegisterType::L, 0xAD);
    WriteRegisterWord(RegisterType::PC, 0xA365);
    WriteRegisterWord(RegisterType::SP, 0xF552);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA364, 0x40);
}

void test_40_035D()
{
    if (skip_test_40_035D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x21A2);
    WriteRegisterWord(RegisterType::SP, 0x1B72);
    WriteRegisterByte(RegisterType::A, 0xD6);
    WriteRegisterByte(RegisterType::B, 0x73);
    WriteRegisterByte(RegisterType::C, 0x89);
    WriteRegisterByte(RegisterType::D, 0xC9);
    WriteRegisterByte(RegisterType::E, 0x73);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x8A);
    WriteRegisterByte(RegisterType::L, 0x26);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x21A2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD6);
    CheckRegisterByte(RegisterType::B, 0x73);
    CheckRegisterByte(RegisterType::C, 0x89);
    CheckRegisterByte(RegisterType::D, 0xC9);
    CheckRegisterByte(RegisterType::E, 0x73);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x8A);
    CheckRegisterByte(RegisterType::L, 0x26);
    WriteRegisterWord(RegisterType::PC, 0x21A3);
    WriteRegisterWord(RegisterType::SP, 0x1B72);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x21A2, 0x40);
}

void test_40_035E()
{
    if (skip_test_40_035E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5D29);
    WriteRegisterWord(RegisterType::SP, 0xFC86);
    WriteRegisterByte(RegisterType::A, 0x8F);
    WriteRegisterByte(RegisterType::B, 0xEF);
    WriteRegisterByte(RegisterType::C, 0xD7);
    WriteRegisterByte(RegisterType::D, 0x6A);
    WriteRegisterByte(RegisterType::E, 0x5B);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xEC);
    WriteRegisterByte(RegisterType::L, 0x33);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x5D29, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8F);
    CheckRegisterByte(RegisterType::B, 0xEF);
    CheckRegisterByte(RegisterType::C, 0xD7);
    CheckRegisterByte(RegisterType::D, 0x6A);
    CheckRegisterByte(RegisterType::E, 0x5B);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xEC);
    CheckRegisterByte(RegisterType::L, 0x33);
    WriteRegisterWord(RegisterType::PC, 0x5D2A);
    WriteRegisterWord(RegisterType::SP, 0xFC86);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x5D29, 0x40);
}

void test_40_035F()
{
    if (skip_test_40_035F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEC59);
    WriteRegisterWord(RegisterType::SP, 0x9650);
    WriteRegisterByte(RegisterType::A, 0xAF);
    WriteRegisterByte(RegisterType::B, 0xA5);
    WriteRegisterByte(RegisterType::C, 0x32);
    WriteRegisterByte(RegisterType::D, 0x68);
    WriteRegisterByte(RegisterType::E, 0xA1);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x8A);
    WriteRegisterByte(RegisterType::L, 0x22);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xEC59, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAF);
    CheckRegisterByte(RegisterType::B, 0xA5);
    CheckRegisterByte(RegisterType::C, 0x32);
    CheckRegisterByte(RegisterType::D, 0x68);
    CheckRegisterByte(RegisterType::E, 0xA1);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x8A);
    CheckRegisterByte(RegisterType::L, 0x22);
    WriteRegisterWord(RegisterType::PC, 0xEC5A);
    WriteRegisterWord(RegisterType::SP, 0x9650);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEC59, 0x40);
}

void test_40_0360()
{
    if (skip_test_40_0360)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x40E2);
    WriteRegisterWord(RegisterType::SP, 0x45ED);
    WriteRegisterByte(RegisterType::A, 0xBB);
    WriteRegisterByte(RegisterType::B, 0x51);
    WriteRegisterByte(RegisterType::C, 0x25);
    WriteRegisterByte(RegisterType::D, 0x5C);
    WriteRegisterByte(RegisterType::E, 0xC6);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xEF);
    WriteRegisterByte(RegisterType::L, 0xF6);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x40E2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBB);
    CheckRegisterByte(RegisterType::B, 0x51);
    CheckRegisterByte(RegisterType::C, 0x25);
    CheckRegisterByte(RegisterType::D, 0x5C);
    CheckRegisterByte(RegisterType::E, 0xC6);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xEF);
    CheckRegisterByte(RegisterType::L, 0xF6);
    WriteRegisterWord(RegisterType::PC, 0x40E3);
    WriteRegisterWord(RegisterType::SP, 0x45ED);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x40E2, 0x40);
}

void test_40_0361()
{
    if (skip_test_40_0361)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7A21);
    WriteRegisterWord(RegisterType::SP, 0xED30);
    WriteRegisterByte(RegisterType::A, 0x12);
    WriteRegisterByte(RegisterType::B, 0x4C);
    WriteRegisterByte(RegisterType::C, 0x9A);
    WriteRegisterByte(RegisterType::D, 0xA8);
    WriteRegisterByte(RegisterType::E, 0x62);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x82);
    WriteRegisterByte(RegisterType::L, 0x6C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7A21, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x12);
    CheckRegisterByte(RegisterType::B, 0x4C);
    CheckRegisterByte(RegisterType::C, 0x9A);
    CheckRegisterByte(RegisterType::D, 0xA8);
    CheckRegisterByte(RegisterType::E, 0x62);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x82);
    CheckRegisterByte(RegisterType::L, 0x6C);
    WriteRegisterWord(RegisterType::PC, 0x7A22);
    WriteRegisterWord(RegisterType::SP, 0xED30);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7A21, 0x40);
}

void test_40_0362()
{
    if (skip_test_40_0362)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4685);
    WriteRegisterWord(RegisterType::SP, 0x05DE);
    WriteRegisterByte(RegisterType::A, 0x32);
    WriteRegisterByte(RegisterType::B, 0x74);
    WriteRegisterByte(RegisterType::C, 0xEA);
    WriteRegisterByte(RegisterType::D, 0xA0);
    WriteRegisterByte(RegisterType::E, 0x0F);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xA9);
    WriteRegisterByte(RegisterType::L, 0x41);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4685, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x32);
    CheckRegisterByte(RegisterType::B, 0x74);
    CheckRegisterByte(RegisterType::C, 0xEA);
    CheckRegisterByte(RegisterType::D, 0xA0);
    CheckRegisterByte(RegisterType::E, 0x0F);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xA9);
    CheckRegisterByte(RegisterType::L, 0x41);
    WriteRegisterWord(RegisterType::PC, 0x4686);
    WriteRegisterWord(RegisterType::SP, 0x05DE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4685, 0x40);
}

void test_40_0363()
{
    if (skip_test_40_0363)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x47D0);
    WriteRegisterWord(RegisterType::SP, 0xBBB8);
    WriteRegisterByte(RegisterType::A, 0xEA);
    WriteRegisterByte(RegisterType::B, 0x12);
    WriteRegisterByte(RegisterType::C, 0xA9);
    WriteRegisterByte(RegisterType::D, 0x91);
    WriteRegisterByte(RegisterType::E, 0x01);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xCD);
    WriteRegisterByte(RegisterType::L, 0xFC);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x47D0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEA);
    CheckRegisterByte(RegisterType::B, 0x12);
    CheckRegisterByte(RegisterType::C, 0xA9);
    CheckRegisterByte(RegisterType::D, 0x91);
    CheckRegisterByte(RegisterType::E, 0x01);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xCD);
    CheckRegisterByte(RegisterType::L, 0xFC);
    WriteRegisterWord(RegisterType::PC, 0x47D1);
    WriteRegisterWord(RegisterType::SP, 0xBBB8);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x47D0, 0x40);
}

void test_40_0364()
{
    if (skip_test_40_0364)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2D87);
    WriteRegisterWord(RegisterType::SP, 0xEC3A);
    WriteRegisterByte(RegisterType::A, 0x73);
    WriteRegisterByte(RegisterType::B, 0x18);
    WriteRegisterByte(RegisterType::C, 0xD1);
    WriteRegisterByte(RegisterType::D, 0x41);
    WriteRegisterByte(RegisterType::E, 0x2C);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x8A);
    WriteRegisterByte(RegisterType::L, 0xA0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2D87, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x73);
    CheckRegisterByte(RegisterType::B, 0x18);
    CheckRegisterByte(RegisterType::C, 0xD1);
    CheckRegisterByte(RegisterType::D, 0x41);
    CheckRegisterByte(RegisterType::E, 0x2C);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x8A);
    CheckRegisterByte(RegisterType::L, 0xA0);
    WriteRegisterWord(RegisterType::PC, 0x2D88);
    WriteRegisterWord(RegisterType::SP, 0xEC3A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2D87, 0x40);
}

void test_40_0365()
{
    if (skip_test_40_0365)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB57B);
    WriteRegisterWord(RegisterType::SP, 0x002F);
    WriteRegisterByte(RegisterType::A, 0x4E);
    WriteRegisterByte(RegisterType::B, 0x40);
    WriteRegisterByte(RegisterType::C, 0x10);
    WriteRegisterByte(RegisterType::D, 0x05);
    WriteRegisterByte(RegisterType::E, 0x30);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xA2);
    WriteRegisterByte(RegisterType::L, 0x2A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB57B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4E);
    CheckRegisterByte(RegisterType::B, 0x40);
    CheckRegisterByte(RegisterType::C, 0x10);
    CheckRegisterByte(RegisterType::D, 0x05);
    CheckRegisterByte(RegisterType::E, 0x30);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xA2);
    CheckRegisterByte(RegisterType::L, 0x2A);
    WriteRegisterWord(RegisterType::PC, 0xB57C);
    WriteRegisterWord(RegisterType::SP, 0x002F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB57B, 0x40);
}

void test_40_0366()
{
    if (skip_test_40_0366)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x45B5);
    WriteRegisterWord(RegisterType::SP, 0x0145);
    WriteRegisterByte(RegisterType::A, 0x5D);
    WriteRegisterByte(RegisterType::B, 0xAA);
    WriteRegisterByte(RegisterType::C, 0x7A);
    WriteRegisterByte(RegisterType::D, 0x49);
    WriteRegisterByte(RegisterType::E, 0xA1);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x4E);
    WriteRegisterByte(RegisterType::L, 0x31);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x45B5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5D);
    CheckRegisterByte(RegisterType::B, 0xAA);
    CheckRegisterByte(RegisterType::C, 0x7A);
    CheckRegisterByte(RegisterType::D, 0x49);
    CheckRegisterByte(RegisterType::E, 0xA1);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x4E);
    CheckRegisterByte(RegisterType::L, 0x31);
    WriteRegisterWord(RegisterType::PC, 0x45B6);
    WriteRegisterWord(RegisterType::SP, 0x0145);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x45B5, 0x40);
}

void test_40_0367()
{
    if (skip_test_40_0367)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x08FB);
    WriteRegisterWord(RegisterType::SP, 0xFB09);
    WriteRegisterByte(RegisterType::A, 0x37);
    WriteRegisterByte(RegisterType::B, 0xF0);
    WriteRegisterByte(RegisterType::C, 0xCE);
    WriteRegisterByte(RegisterType::D, 0x5E);
    WriteRegisterByte(RegisterType::E, 0xE0);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xE3);
    WriteRegisterByte(RegisterType::L, 0x7D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x08FB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x37);
    CheckRegisterByte(RegisterType::B, 0xF0);
    CheckRegisterByte(RegisterType::C, 0xCE);
    CheckRegisterByte(RegisterType::D, 0x5E);
    CheckRegisterByte(RegisterType::E, 0xE0);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xE3);
    CheckRegisterByte(RegisterType::L, 0x7D);
    WriteRegisterWord(RegisterType::PC, 0x08FC);
    WriteRegisterWord(RegisterType::SP, 0xFB09);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x08FB, 0x40);
}

void test_40_0368()
{
    if (skip_test_40_0368)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x55FA);
    WriteRegisterWord(RegisterType::SP, 0x2E60);
    WriteRegisterByte(RegisterType::A, 0xB4);
    WriteRegisterByte(RegisterType::B, 0x40);
    WriteRegisterByte(RegisterType::C, 0x2F);
    WriteRegisterByte(RegisterType::D, 0x52);
    WriteRegisterByte(RegisterType::E, 0x71);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x56);
    WriteRegisterByte(RegisterType::L, 0x15);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x55FA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB4);
    CheckRegisterByte(RegisterType::B, 0x40);
    CheckRegisterByte(RegisterType::C, 0x2F);
    CheckRegisterByte(RegisterType::D, 0x52);
    CheckRegisterByte(RegisterType::E, 0x71);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x56);
    CheckRegisterByte(RegisterType::L, 0x15);
    WriteRegisterWord(RegisterType::PC, 0x55FB);
    WriteRegisterWord(RegisterType::SP, 0x2E60);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x55FA, 0x40);
}

void test_40_0369()
{
    if (skip_test_40_0369)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA318);
    WriteRegisterWord(RegisterType::SP, 0x3F1E);
    WriteRegisterByte(RegisterType::A, 0x2C);
    WriteRegisterByte(RegisterType::B, 0x4B);
    WriteRegisterByte(RegisterType::C, 0xE2);
    WriteRegisterByte(RegisterType::D, 0xF3);
    WriteRegisterByte(RegisterType::E, 0x58);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x1E);
    WriteRegisterByte(RegisterType::L, 0xDA);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xA318, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2C);
    CheckRegisterByte(RegisterType::B, 0x4B);
    CheckRegisterByte(RegisterType::C, 0xE2);
    CheckRegisterByte(RegisterType::D, 0xF3);
    CheckRegisterByte(RegisterType::E, 0x58);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x1E);
    CheckRegisterByte(RegisterType::L, 0xDA);
    WriteRegisterWord(RegisterType::PC, 0xA319);
    WriteRegisterWord(RegisterType::SP, 0x3F1E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA318, 0x40);
}

void test_40_036A()
{
    if (skip_test_40_036A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC239);
    WriteRegisterWord(RegisterType::SP, 0xA4FA);
    WriteRegisterByte(RegisterType::A, 0xE9);
    WriteRegisterByte(RegisterType::B, 0xA1);
    WriteRegisterByte(RegisterType::C, 0xF5);
    WriteRegisterByte(RegisterType::D, 0x43);
    WriteRegisterByte(RegisterType::E, 0xE9);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xA9);
    WriteRegisterByte(RegisterType::L, 0x94);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC239, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE9);
    CheckRegisterByte(RegisterType::B, 0xA1);
    CheckRegisterByte(RegisterType::C, 0xF5);
    CheckRegisterByte(RegisterType::D, 0x43);
    CheckRegisterByte(RegisterType::E, 0xE9);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xA9);
    CheckRegisterByte(RegisterType::L, 0x94);
    WriteRegisterWord(RegisterType::PC, 0xC23A);
    WriteRegisterWord(RegisterType::SP, 0xA4FA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC239, 0x40);
}

void test_40_036B()
{
    if (skip_test_40_036B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6CB9);
    WriteRegisterWord(RegisterType::SP, 0x9B4F);
    WriteRegisterByte(RegisterType::A, 0xC9);
    WriteRegisterByte(RegisterType::B, 0xC7);
    WriteRegisterByte(RegisterType::C, 0xD7);
    WriteRegisterByte(RegisterType::D, 0x0E);
    WriteRegisterByte(RegisterType::E, 0x94);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xA6);
    WriteRegisterByte(RegisterType::L, 0xDD);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6CB9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC9);
    CheckRegisterByte(RegisterType::B, 0xC7);
    CheckRegisterByte(RegisterType::C, 0xD7);
    CheckRegisterByte(RegisterType::D, 0x0E);
    CheckRegisterByte(RegisterType::E, 0x94);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xA6);
    CheckRegisterByte(RegisterType::L, 0xDD);
    WriteRegisterWord(RegisterType::PC, 0x6CBA);
    WriteRegisterWord(RegisterType::SP, 0x9B4F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6CB9, 0x40);
}

void test_40_036C()
{
    if (skip_test_40_036C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x08E6);
    WriteRegisterWord(RegisterType::SP, 0x02EA);
    WriteRegisterByte(RegisterType::A, 0xDF);
    WriteRegisterByte(RegisterType::B, 0xB7);
    WriteRegisterByte(RegisterType::C, 0x04);
    WriteRegisterByte(RegisterType::D, 0xA1);
    WriteRegisterByte(RegisterType::E, 0xDB);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x38);
    WriteRegisterByte(RegisterType::L, 0x19);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x08E6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDF);
    CheckRegisterByte(RegisterType::B, 0xB7);
    CheckRegisterByte(RegisterType::C, 0x04);
    CheckRegisterByte(RegisterType::D, 0xA1);
    CheckRegisterByte(RegisterType::E, 0xDB);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x38);
    CheckRegisterByte(RegisterType::L, 0x19);
    WriteRegisterWord(RegisterType::PC, 0x08E7);
    WriteRegisterWord(RegisterType::SP, 0x02EA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x08E6, 0x40);
}

void test_40_036D()
{
    if (skip_test_40_036D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8D70);
    WriteRegisterWord(RegisterType::SP, 0xF232);
    WriteRegisterByte(RegisterType::A, 0x61);
    WriteRegisterByte(RegisterType::B, 0x77);
    WriteRegisterByte(RegisterType::C, 0x30);
    WriteRegisterByte(RegisterType::D, 0xD1);
    WriteRegisterByte(RegisterType::E, 0xDC);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xE1);
    WriteRegisterByte(RegisterType::L, 0xE4);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8D70, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x61);
    CheckRegisterByte(RegisterType::B, 0x77);
    CheckRegisterByte(RegisterType::C, 0x30);
    CheckRegisterByte(RegisterType::D, 0xD1);
    CheckRegisterByte(RegisterType::E, 0xDC);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xE1);
    CheckRegisterByte(RegisterType::L, 0xE4);
    WriteRegisterWord(RegisterType::PC, 0x8D71);
    WriteRegisterWord(RegisterType::SP, 0xF232);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8D70, 0x40);
}

void test_40_036E()
{
    if (skip_test_40_036E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x06DD);
    WriteRegisterWord(RegisterType::SP, 0x4D33);
    WriteRegisterByte(RegisterType::A, 0xCF);
    WriteRegisterByte(RegisterType::B, 0x9A);
    WriteRegisterByte(RegisterType::C, 0x53);
    WriteRegisterByte(RegisterType::D, 0x09);
    WriteRegisterByte(RegisterType::E, 0x3E);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x2A);
    WriteRegisterByte(RegisterType::L, 0xD3);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x06DD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCF);
    CheckRegisterByte(RegisterType::B, 0x9A);
    CheckRegisterByte(RegisterType::C, 0x53);
    CheckRegisterByte(RegisterType::D, 0x09);
    CheckRegisterByte(RegisterType::E, 0x3E);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x2A);
    CheckRegisterByte(RegisterType::L, 0xD3);
    WriteRegisterWord(RegisterType::PC, 0x06DE);
    WriteRegisterWord(RegisterType::SP, 0x4D33);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x06DD, 0x40);
}

void test_40_036F()
{
    if (skip_test_40_036F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x52A2);
    WriteRegisterWord(RegisterType::SP, 0xE4A0);
    WriteRegisterByte(RegisterType::A, 0x59);
    WriteRegisterByte(RegisterType::B, 0x3C);
    WriteRegisterByte(RegisterType::C, 0xD2);
    WriteRegisterByte(RegisterType::D, 0x39);
    WriteRegisterByte(RegisterType::E, 0xF4);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x92);
    WriteRegisterByte(RegisterType::L, 0x92);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x52A2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x59);
    CheckRegisterByte(RegisterType::B, 0x3C);
    CheckRegisterByte(RegisterType::C, 0xD2);
    CheckRegisterByte(RegisterType::D, 0x39);
    CheckRegisterByte(RegisterType::E, 0xF4);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x92);
    CheckRegisterByte(RegisterType::L, 0x92);
    WriteRegisterWord(RegisterType::PC, 0x52A3);
    WriteRegisterWord(RegisterType::SP, 0xE4A0);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x52A2, 0x40);
}

void test_40_0370()
{
    if (skip_test_40_0370)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x83DC);
    WriteRegisterWord(RegisterType::SP, 0x7FBD);
    WriteRegisterByte(RegisterType::A, 0x3C);
    WriteRegisterByte(RegisterType::B, 0x02);
    WriteRegisterByte(RegisterType::C, 0x53);
    WriteRegisterByte(RegisterType::D, 0xE5);
    WriteRegisterByte(RegisterType::E, 0xD6);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x2F);
    WriteRegisterByte(RegisterType::L, 0xD9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x83DC, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3C);
    CheckRegisterByte(RegisterType::B, 0x02);
    CheckRegisterByte(RegisterType::C, 0x53);
    CheckRegisterByte(RegisterType::D, 0xE5);
    CheckRegisterByte(RegisterType::E, 0xD6);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x2F);
    CheckRegisterByte(RegisterType::L, 0xD9);
    WriteRegisterWord(RegisterType::PC, 0x83DD);
    WriteRegisterWord(RegisterType::SP, 0x7FBD);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x83DC, 0x40);
}

void test_40_0371()
{
    if (skip_test_40_0371)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x23F7);
    WriteRegisterWord(RegisterType::SP, 0x716E);
    WriteRegisterByte(RegisterType::A, 0x11);
    WriteRegisterByte(RegisterType::B, 0xCE);
    WriteRegisterByte(RegisterType::C, 0xFD);
    WriteRegisterByte(RegisterType::D, 0x37);
    WriteRegisterByte(RegisterType::E, 0xA5);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0xA7);
    WriteRegisterByte(RegisterType::L, 0xD5);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x23F7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x11);
    CheckRegisterByte(RegisterType::B, 0xCE);
    CheckRegisterByte(RegisterType::C, 0xFD);
    CheckRegisterByte(RegisterType::D, 0x37);
    CheckRegisterByte(RegisterType::E, 0xA5);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0xA7);
    CheckRegisterByte(RegisterType::L, 0xD5);
    WriteRegisterWord(RegisterType::PC, 0x23F8);
    WriteRegisterWord(RegisterType::SP, 0x716E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x23F7, 0x40);
}

void test_40_0372()
{
    if (skip_test_40_0372)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAFAD);
    WriteRegisterWord(RegisterType::SP, 0x0CF3);
    WriteRegisterByte(RegisterType::A, 0x5F);
    WriteRegisterByte(RegisterType::B, 0xEA);
    WriteRegisterByte(RegisterType::C, 0x30);
    WriteRegisterByte(RegisterType::D, 0x0B);
    WriteRegisterByte(RegisterType::E, 0x9E);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x6D);
    WriteRegisterByte(RegisterType::L, 0xEE);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xAFAD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5F);
    CheckRegisterByte(RegisterType::B, 0xEA);
    CheckRegisterByte(RegisterType::C, 0x30);
    CheckRegisterByte(RegisterType::D, 0x0B);
    CheckRegisterByte(RegisterType::E, 0x9E);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x6D);
    CheckRegisterByte(RegisterType::L, 0xEE);
    WriteRegisterWord(RegisterType::PC, 0xAFAE);
    WriteRegisterWord(RegisterType::SP, 0x0CF3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xAFAD, 0x40);
}

void test_40_0373()
{
    if (skip_test_40_0373)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9740);
    WriteRegisterWord(RegisterType::SP, 0x9641);
    WriteRegisterByte(RegisterType::A, 0x61);
    WriteRegisterByte(RegisterType::B, 0xCC);
    WriteRegisterByte(RegisterType::C, 0xCE);
    WriteRegisterByte(RegisterType::D, 0x73);
    WriteRegisterByte(RegisterType::E, 0xC1);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x64);
    WriteRegisterByte(RegisterType::L, 0x9F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9740, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x61);
    CheckRegisterByte(RegisterType::B, 0xCC);
    CheckRegisterByte(RegisterType::C, 0xCE);
    CheckRegisterByte(RegisterType::D, 0x73);
    CheckRegisterByte(RegisterType::E, 0xC1);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x64);
    CheckRegisterByte(RegisterType::L, 0x9F);
    WriteRegisterWord(RegisterType::PC, 0x9741);
    WriteRegisterWord(RegisterType::SP, 0x9641);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9740, 0x40);
}

void test_40_0374()
{
    if (skip_test_40_0374)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB5C5);
    WriteRegisterWord(RegisterType::SP, 0xB7E4);
    WriteRegisterByte(RegisterType::A, 0x43);
    WriteRegisterByte(RegisterType::B, 0xC4);
    WriteRegisterByte(RegisterType::C, 0xF1);
    WriteRegisterByte(RegisterType::D, 0x01);
    WriteRegisterByte(RegisterType::E, 0xD2);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x32);
    WriteRegisterByte(RegisterType::L, 0x91);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB5C5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x43);
    CheckRegisterByte(RegisterType::B, 0xC4);
    CheckRegisterByte(RegisterType::C, 0xF1);
    CheckRegisterByte(RegisterType::D, 0x01);
    CheckRegisterByte(RegisterType::E, 0xD2);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x32);
    CheckRegisterByte(RegisterType::L, 0x91);
    WriteRegisterWord(RegisterType::PC, 0xB5C6);
    WriteRegisterWord(RegisterType::SP, 0xB7E4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB5C5, 0x40);
}

void test_40_0375()
{
    if (skip_test_40_0375)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4BE5);
    WriteRegisterWord(RegisterType::SP, 0x55C8);
    WriteRegisterByte(RegisterType::A, 0x5E);
    WriteRegisterByte(RegisterType::B, 0x66);
    WriteRegisterByte(RegisterType::C, 0x03);
    WriteRegisterByte(RegisterType::D, 0xFB);
    WriteRegisterByte(RegisterType::E, 0x66);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xD9);
    WriteRegisterByte(RegisterType::L, 0x42);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4BE5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5E);
    CheckRegisterByte(RegisterType::B, 0x66);
    CheckRegisterByte(RegisterType::C, 0x03);
    CheckRegisterByte(RegisterType::D, 0xFB);
    CheckRegisterByte(RegisterType::E, 0x66);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xD9);
    CheckRegisterByte(RegisterType::L, 0x42);
    WriteRegisterWord(RegisterType::PC, 0x4BE6);
    WriteRegisterWord(RegisterType::SP, 0x55C8);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4BE5, 0x40);
}

void test_40_0376()
{
    if (skip_test_40_0376)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC9A8);
    WriteRegisterWord(RegisterType::SP, 0x67C4);
    WriteRegisterByte(RegisterType::A, 0x83);
    WriteRegisterByte(RegisterType::B, 0xCB);
    WriteRegisterByte(RegisterType::C, 0xE6);
    WriteRegisterByte(RegisterType::D, 0xEC);
    WriteRegisterByte(RegisterType::E, 0x0D);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x0B);
    WriteRegisterByte(RegisterType::L, 0xF6);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xC9A8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x83);
    CheckRegisterByte(RegisterType::B, 0xCB);
    CheckRegisterByte(RegisterType::C, 0xE6);
    CheckRegisterByte(RegisterType::D, 0xEC);
    CheckRegisterByte(RegisterType::E, 0x0D);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x0B);
    CheckRegisterByte(RegisterType::L, 0xF6);
    WriteRegisterWord(RegisterType::PC, 0xC9A9);
    WriteRegisterWord(RegisterType::SP, 0x67C4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC9A8, 0x40);
}

void test_40_0377()
{
    if (skip_test_40_0377)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2F68);
    WriteRegisterWord(RegisterType::SP, 0xB82D);
    WriteRegisterByte(RegisterType::A, 0xC0);
    WriteRegisterByte(RegisterType::B, 0x5E);
    WriteRegisterByte(RegisterType::C, 0x4F);
    WriteRegisterByte(RegisterType::D, 0xAC);
    WriteRegisterByte(RegisterType::E, 0x23);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x6C);
    WriteRegisterByte(RegisterType::L, 0x52);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2F68, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC0);
    CheckRegisterByte(RegisterType::B, 0x5E);
    CheckRegisterByte(RegisterType::C, 0x4F);
    CheckRegisterByte(RegisterType::D, 0xAC);
    CheckRegisterByte(RegisterType::E, 0x23);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x6C);
    CheckRegisterByte(RegisterType::L, 0x52);
    WriteRegisterWord(RegisterType::PC, 0x2F69);
    WriteRegisterWord(RegisterType::SP, 0xB82D);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2F68, 0x40);
}

void test_40_0378()
{
    if (skip_test_40_0378)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCD0E);
    WriteRegisterWord(RegisterType::SP, 0x5409);
    WriteRegisterByte(RegisterType::A, 0x17);
    WriteRegisterByte(RegisterType::B, 0x91);
    WriteRegisterByte(RegisterType::C, 0xE7);
    WriteRegisterByte(RegisterType::D, 0x7B);
    WriteRegisterByte(RegisterType::E, 0xCB);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x33);
    WriteRegisterByte(RegisterType::L, 0xB3);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCD0E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x17);
    CheckRegisterByte(RegisterType::B, 0x91);
    CheckRegisterByte(RegisterType::C, 0xE7);
    CheckRegisterByte(RegisterType::D, 0x7B);
    CheckRegisterByte(RegisterType::E, 0xCB);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x33);
    CheckRegisterByte(RegisterType::L, 0xB3);
    WriteRegisterWord(RegisterType::PC, 0xCD0F);
    WriteRegisterWord(RegisterType::SP, 0x5409);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xCD0E, 0x40);
}

void test_40_0379()
{
    if (skip_test_40_0379)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0983);
    WriteRegisterWord(RegisterType::SP, 0x5EF7);
    WriteRegisterByte(RegisterType::A, 0x6E);
    WriteRegisterByte(RegisterType::B, 0xDC);
    WriteRegisterByte(RegisterType::C, 0x0A);
    WriteRegisterByte(RegisterType::D, 0xA7);
    WriteRegisterByte(RegisterType::E, 0xA9);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x78);
    WriteRegisterByte(RegisterType::L, 0x6E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0983, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6E);
    CheckRegisterByte(RegisterType::B, 0xDC);
    CheckRegisterByte(RegisterType::C, 0x0A);
    CheckRegisterByte(RegisterType::D, 0xA7);
    CheckRegisterByte(RegisterType::E, 0xA9);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x78);
    CheckRegisterByte(RegisterType::L, 0x6E);
    WriteRegisterWord(RegisterType::PC, 0x0984);
    WriteRegisterWord(RegisterType::SP, 0x5EF7);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0983, 0x40);
}

void test_40_037A()
{
    if (skip_test_40_037A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x067D);
    WriteRegisterWord(RegisterType::SP, 0xB88F);
    WriteRegisterByte(RegisterType::A, 0xF0);
    WriteRegisterByte(RegisterType::B, 0x3B);
    WriteRegisterByte(RegisterType::C, 0x9D);
    WriteRegisterByte(RegisterType::D, 0xC8);
    WriteRegisterByte(RegisterType::E, 0xB7);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x9E);
    WriteRegisterByte(RegisterType::L, 0x6E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x067D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF0);
    CheckRegisterByte(RegisterType::B, 0x3B);
    CheckRegisterByte(RegisterType::C, 0x9D);
    CheckRegisterByte(RegisterType::D, 0xC8);
    CheckRegisterByte(RegisterType::E, 0xB7);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x9E);
    CheckRegisterByte(RegisterType::L, 0x6E);
    WriteRegisterWord(RegisterType::PC, 0x067E);
    WriteRegisterWord(RegisterType::SP, 0xB88F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x067D, 0x40);
}

void test_40_037B()
{
    if (skip_test_40_037B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2335);
    WriteRegisterWord(RegisterType::SP, 0x3408);
    WriteRegisterByte(RegisterType::A, 0xC6);
    WriteRegisterByte(RegisterType::B, 0x97);
    WriteRegisterByte(RegisterType::C, 0x41);
    WriteRegisterByte(RegisterType::D, 0xB3);
    WriteRegisterByte(RegisterType::E, 0xE1);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xCE);
    WriteRegisterByte(RegisterType::L, 0xB9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2335, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC6);
    CheckRegisterByte(RegisterType::B, 0x97);
    CheckRegisterByte(RegisterType::C, 0x41);
    CheckRegisterByte(RegisterType::D, 0xB3);
    CheckRegisterByte(RegisterType::E, 0xE1);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xCE);
    CheckRegisterByte(RegisterType::L, 0xB9);
    WriteRegisterWord(RegisterType::PC, 0x2336);
    WriteRegisterWord(RegisterType::SP, 0x3408);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2335, 0x40);
}

void test_40_037C()
{
    if (skip_test_40_037C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC759);
    WriteRegisterWord(RegisterType::SP, 0xAB15);
    WriteRegisterByte(RegisterType::A, 0x07);
    WriteRegisterByte(RegisterType::B, 0x37);
    WriteRegisterByte(RegisterType::C, 0x37);
    WriteRegisterByte(RegisterType::D, 0x7B);
    WriteRegisterByte(RegisterType::E, 0x50);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xEE);
    WriteRegisterByte(RegisterType::L, 0xD9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC759, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x07);
    CheckRegisterByte(RegisterType::B, 0x37);
    CheckRegisterByte(RegisterType::C, 0x37);
    CheckRegisterByte(RegisterType::D, 0x7B);
    CheckRegisterByte(RegisterType::E, 0x50);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xEE);
    CheckRegisterByte(RegisterType::L, 0xD9);
    WriteRegisterWord(RegisterType::PC, 0xC75A);
    WriteRegisterWord(RegisterType::SP, 0xAB15);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xC759, 0x40);
}

void test_40_037D()
{
    if (skip_test_40_037D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x18D6);
    WriteRegisterWord(RegisterType::SP, 0x3B9B);
    WriteRegisterByte(RegisterType::A, 0x48);
    WriteRegisterByte(RegisterType::B, 0x21);
    WriteRegisterByte(RegisterType::C, 0x3B);
    WriteRegisterByte(RegisterType::D, 0x5B);
    WriteRegisterByte(RegisterType::E, 0x7A);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x47);
    WriteRegisterByte(RegisterType::L, 0x22);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x18D6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x48);
    CheckRegisterByte(RegisterType::B, 0x21);
    CheckRegisterByte(RegisterType::C, 0x3B);
    CheckRegisterByte(RegisterType::D, 0x5B);
    CheckRegisterByte(RegisterType::E, 0x7A);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x47);
    CheckRegisterByte(RegisterType::L, 0x22);
    WriteRegisterWord(RegisterType::PC, 0x18D7);
    WriteRegisterWord(RegisterType::SP, 0x3B9B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x18D6, 0x40);
}

void test_40_037E()
{
    if (skip_test_40_037E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0F17);
    WriteRegisterWord(RegisterType::SP, 0xB64D);
    WriteRegisterByte(RegisterType::A, 0xCF);
    WriteRegisterByte(RegisterType::B, 0xCC);
    WriteRegisterByte(RegisterType::C, 0x00);
    WriteRegisterByte(RegisterType::D, 0xA8);
    WriteRegisterByte(RegisterType::E, 0xBE);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x08);
    WriteRegisterByte(RegisterType::L, 0x92);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0F17, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCF);
    CheckRegisterByte(RegisterType::B, 0xCC);
    CheckRegisterByte(RegisterType::C, 0x00);
    CheckRegisterByte(RegisterType::D, 0xA8);
    CheckRegisterByte(RegisterType::E, 0xBE);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x08);
    CheckRegisterByte(RegisterType::L, 0x92);
    WriteRegisterWord(RegisterType::PC, 0x0F18);
    WriteRegisterWord(RegisterType::SP, 0xB64D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0F17, 0x40);
}

void test_40_037F()
{
    if (skip_test_40_037F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD771);
    WriteRegisterWord(RegisterType::SP, 0xDE26);
    WriteRegisterByte(RegisterType::A, 0x07);
    WriteRegisterByte(RegisterType::B, 0xE7);
    WriteRegisterByte(RegisterType::C, 0x29);
    WriteRegisterByte(RegisterType::D, 0x13);
    WriteRegisterByte(RegisterType::E, 0xE5);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xFA);
    WriteRegisterByte(RegisterType::L, 0x1E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD771, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x07);
    CheckRegisterByte(RegisterType::B, 0xE7);
    CheckRegisterByte(RegisterType::C, 0x29);
    CheckRegisterByte(RegisterType::D, 0x13);
    CheckRegisterByte(RegisterType::E, 0xE5);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xFA);
    CheckRegisterByte(RegisterType::L, 0x1E);
    WriteRegisterWord(RegisterType::PC, 0xD772);
    WriteRegisterWord(RegisterType::SP, 0xDE26);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD771, 0x40);
}

void test_40_0380()
{
    if (skip_test_40_0380)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB864);
    WriteRegisterWord(RegisterType::SP, 0xBB0B);
    WriteRegisterByte(RegisterType::A, 0x6B);
    WriteRegisterByte(RegisterType::B, 0xDC);
    WriteRegisterByte(RegisterType::C, 0x55);
    WriteRegisterByte(RegisterType::D, 0x4F);
    WriteRegisterByte(RegisterType::E, 0x3C);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xC8);
    WriteRegisterByte(RegisterType::L, 0x46);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB864, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6B);
    CheckRegisterByte(RegisterType::B, 0xDC);
    CheckRegisterByte(RegisterType::C, 0x55);
    CheckRegisterByte(RegisterType::D, 0x4F);
    CheckRegisterByte(RegisterType::E, 0x3C);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xC8);
    CheckRegisterByte(RegisterType::L, 0x46);
    WriteRegisterWord(RegisterType::PC, 0xB865);
    WriteRegisterWord(RegisterType::SP, 0xBB0B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB864, 0x40);
}

void test_40_0381()
{
    if (skip_test_40_0381)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD69D);
    WriteRegisterWord(RegisterType::SP, 0xFBDA);
    WriteRegisterByte(RegisterType::A, 0xA7);
    WriteRegisterByte(RegisterType::B, 0x03);
    WriteRegisterByte(RegisterType::C, 0xAD);
    WriteRegisterByte(RegisterType::D, 0x34);
    WriteRegisterByte(RegisterType::E, 0xEB);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xEC);
    WriteRegisterByte(RegisterType::L, 0x6A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD69D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA7);
    CheckRegisterByte(RegisterType::B, 0x03);
    CheckRegisterByte(RegisterType::C, 0xAD);
    CheckRegisterByte(RegisterType::D, 0x34);
    CheckRegisterByte(RegisterType::E, 0xEB);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xEC);
    CheckRegisterByte(RegisterType::L, 0x6A);
    WriteRegisterWord(RegisterType::PC, 0xD69E);
    WriteRegisterWord(RegisterType::SP, 0xFBDA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD69D, 0x40);
}

void test_40_0382()
{
    if (skip_test_40_0382)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD772);
    WriteRegisterWord(RegisterType::SP, 0x56DD);
    WriteRegisterByte(RegisterType::A, 0x32);
    WriteRegisterByte(RegisterType::B, 0xCD);
    WriteRegisterByte(RegisterType::C, 0x84);
    WriteRegisterByte(RegisterType::D, 0xB4);
    WriteRegisterByte(RegisterType::E, 0x03);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xC4);
    WriteRegisterByte(RegisterType::L, 0x5D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD772, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x32);
    CheckRegisterByte(RegisterType::B, 0xCD);
    CheckRegisterByte(RegisterType::C, 0x84);
    CheckRegisterByte(RegisterType::D, 0xB4);
    CheckRegisterByte(RegisterType::E, 0x03);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xC4);
    CheckRegisterByte(RegisterType::L, 0x5D);
    WriteRegisterWord(RegisterType::PC, 0xD773);
    WriteRegisterWord(RegisterType::SP, 0x56DD);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD772, 0x40);
}

void test_40_0383()
{
    if (skip_test_40_0383)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF271);
    WriteRegisterWord(RegisterType::SP, 0xA062);
    WriteRegisterByte(RegisterType::A, 0x2E);
    WriteRegisterByte(RegisterType::B, 0x5B);
    WriteRegisterByte(RegisterType::C, 0xB7);
    WriteRegisterByte(RegisterType::D, 0xC4);
    WriteRegisterByte(RegisterType::E, 0xA7);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x6B);
    WriteRegisterByte(RegisterType::L, 0xD8);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF271, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2E);
    CheckRegisterByte(RegisterType::B, 0x5B);
    CheckRegisterByte(RegisterType::C, 0xB7);
    CheckRegisterByte(RegisterType::D, 0xC4);
    CheckRegisterByte(RegisterType::E, 0xA7);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x6B);
    CheckRegisterByte(RegisterType::L, 0xD8);
    WriteRegisterWord(RegisterType::PC, 0xF272);
    WriteRegisterWord(RegisterType::SP, 0xA062);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF271, 0x40);
}

void test_40_0384()
{
    if (skip_test_40_0384)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEA43);
    WriteRegisterWord(RegisterType::SP, 0xE66F);
    WriteRegisterByte(RegisterType::A, 0xEA);
    WriteRegisterByte(RegisterType::B, 0xB4);
    WriteRegisterByte(RegisterType::C, 0x21);
    WriteRegisterByte(RegisterType::D, 0xE9);
    WriteRegisterByte(RegisterType::E, 0x33);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xC3);
    WriteRegisterByte(RegisterType::L, 0xCF);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEA43, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xEA);
    CheckRegisterByte(RegisterType::B, 0xB4);
    CheckRegisterByte(RegisterType::C, 0x21);
    CheckRegisterByte(RegisterType::D, 0xE9);
    CheckRegisterByte(RegisterType::E, 0x33);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xC3);
    CheckRegisterByte(RegisterType::L, 0xCF);
    WriteRegisterWord(RegisterType::PC, 0xEA44);
    WriteRegisterWord(RegisterType::SP, 0xE66F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEA43, 0x40);
}

void test_40_0385()
{
    if (skip_test_40_0385)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD165);
    WriteRegisterWord(RegisterType::SP, 0xFB1A);
    WriteRegisterByte(RegisterType::A, 0x0A);
    WriteRegisterByte(RegisterType::B, 0xE6);
    WriteRegisterByte(RegisterType::C, 0xDD);
    WriteRegisterByte(RegisterType::D, 0x0D);
    WriteRegisterByte(RegisterType::E, 0x61);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0xCA);
    WriteRegisterByte(RegisterType::L, 0x13);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD165, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0A);
    CheckRegisterByte(RegisterType::B, 0xE6);
    CheckRegisterByte(RegisterType::C, 0xDD);
    CheckRegisterByte(RegisterType::D, 0x0D);
    CheckRegisterByte(RegisterType::E, 0x61);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0xCA);
    CheckRegisterByte(RegisterType::L, 0x13);
    WriteRegisterWord(RegisterType::PC, 0xD166);
    WriteRegisterWord(RegisterType::SP, 0xFB1A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD165, 0x40);
}

void test_40_0386()
{
    if (skip_test_40_0386)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4EE3);
    WriteRegisterWord(RegisterType::SP, 0xD117);
    WriteRegisterByte(RegisterType::A, 0x08);
    WriteRegisterByte(RegisterType::B, 0x73);
    WriteRegisterByte(RegisterType::C, 0x3B);
    WriteRegisterByte(RegisterType::D, 0x5D);
    WriteRegisterByte(RegisterType::E, 0xC2);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x87);
    WriteRegisterByte(RegisterType::L, 0x04);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x4EE3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x08);
    CheckRegisterByte(RegisterType::B, 0x73);
    CheckRegisterByte(RegisterType::C, 0x3B);
    CheckRegisterByte(RegisterType::D, 0x5D);
    CheckRegisterByte(RegisterType::E, 0xC2);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x87);
    CheckRegisterByte(RegisterType::L, 0x04);
    WriteRegisterWord(RegisterType::PC, 0x4EE4);
    WriteRegisterWord(RegisterType::SP, 0xD117);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4EE3, 0x40);
}

void test_40_0387()
{
    if (skip_test_40_0387)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF42A);
    WriteRegisterWord(RegisterType::SP, 0xC3CD);
    WriteRegisterByte(RegisterType::A, 0xD5);
    WriteRegisterByte(RegisterType::B, 0xD9);
    WriteRegisterByte(RegisterType::C, 0x39);
    WriteRegisterByte(RegisterType::D, 0x7E);
    WriteRegisterByte(RegisterType::E, 0x43);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x26);
    WriteRegisterByte(RegisterType::L, 0x8D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xF42A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD5);
    CheckRegisterByte(RegisterType::B, 0xD9);
    CheckRegisterByte(RegisterType::C, 0x39);
    CheckRegisterByte(RegisterType::D, 0x7E);
    CheckRegisterByte(RegisterType::E, 0x43);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x26);
    CheckRegisterByte(RegisterType::L, 0x8D);
    WriteRegisterWord(RegisterType::PC, 0xF42B);
    WriteRegisterWord(RegisterType::SP, 0xC3CD);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF42A, 0x40);
}

void test_40_0388()
{
    if (skip_test_40_0388)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA3D7);
    WriteRegisterWord(RegisterType::SP, 0xE162);
    WriteRegisterByte(RegisterType::A, 0xAD);
    WriteRegisterByte(RegisterType::B, 0x1A);
    WriteRegisterByte(RegisterType::C, 0xDA);
    WriteRegisterByte(RegisterType::D, 0x3E);
    WriteRegisterByte(RegisterType::E, 0x70);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x79);
    WriteRegisterByte(RegisterType::L, 0x7F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA3D7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAD);
    CheckRegisterByte(RegisterType::B, 0x1A);
    CheckRegisterByte(RegisterType::C, 0xDA);
    CheckRegisterByte(RegisterType::D, 0x3E);
    CheckRegisterByte(RegisterType::E, 0x70);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x79);
    CheckRegisterByte(RegisterType::L, 0x7F);
    WriteRegisterWord(RegisterType::PC, 0xA3D8);
    WriteRegisterWord(RegisterType::SP, 0xE162);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xA3D7, 0x40);
}

void test_40_0389()
{
    if (skip_test_40_0389)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x39F8);
    WriteRegisterWord(RegisterType::SP, 0x4B29);
    WriteRegisterByte(RegisterType::A, 0xD1);
    WriteRegisterByte(RegisterType::B, 0x97);
    WriteRegisterByte(RegisterType::C, 0x53);
    WriteRegisterByte(RegisterType::D, 0x27);
    WriteRegisterByte(RegisterType::E, 0xD2);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x2D);
    WriteRegisterByte(RegisterType::L, 0xB0);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x39F8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD1);
    CheckRegisterByte(RegisterType::B, 0x97);
    CheckRegisterByte(RegisterType::C, 0x53);
    CheckRegisterByte(RegisterType::D, 0x27);
    CheckRegisterByte(RegisterType::E, 0xD2);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x2D);
    CheckRegisterByte(RegisterType::L, 0xB0);
    WriteRegisterWord(RegisterType::PC, 0x39F9);
    WriteRegisterWord(RegisterType::SP, 0x4B29);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x39F8, 0x40);
}

void test_40_038A()
{
    if (skip_test_40_038A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x766C);
    WriteRegisterWord(RegisterType::SP, 0x3F26);
    WriteRegisterByte(RegisterType::A, 0x5E);
    WriteRegisterByte(RegisterType::B, 0xFA);
    WriteRegisterByte(RegisterType::C, 0xD2);
    WriteRegisterByte(RegisterType::D, 0x32);
    WriteRegisterByte(RegisterType::E, 0xBB);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x47);
    WriteRegisterByte(RegisterType::L, 0xC8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x766C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5E);
    CheckRegisterByte(RegisterType::B, 0xFA);
    CheckRegisterByte(RegisterType::C, 0xD2);
    CheckRegisterByte(RegisterType::D, 0x32);
    CheckRegisterByte(RegisterType::E, 0xBB);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x47);
    CheckRegisterByte(RegisterType::L, 0xC8);
    WriteRegisterWord(RegisterType::PC, 0x766D);
    WriteRegisterWord(RegisterType::SP, 0x3F26);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x766C, 0x40);
}

void test_40_038B()
{
    if (skip_test_40_038B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x867C);
    WriteRegisterWord(RegisterType::SP, 0x2608);
    WriteRegisterByte(RegisterType::A, 0x86);
    WriteRegisterByte(RegisterType::B, 0xBF);
    WriteRegisterByte(RegisterType::C, 0xB4);
    WriteRegisterByte(RegisterType::D, 0x16);
    WriteRegisterByte(RegisterType::E, 0xC7);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xBB);
    WriteRegisterByte(RegisterType::L, 0x42);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x867C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x86);
    CheckRegisterByte(RegisterType::B, 0xBF);
    CheckRegisterByte(RegisterType::C, 0xB4);
    CheckRegisterByte(RegisterType::D, 0x16);
    CheckRegisterByte(RegisterType::E, 0xC7);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xBB);
    CheckRegisterByte(RegisterType::L, 0x42);
    WriteRegisterWord(RegisterType::PC, 0x867D);
    WriteRegisterWord(RegisterType::SP, 0x2608);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x867C, 0x40);
}

void test_40_038C()
{
    if (skip_test_40_038C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xED8E);
    WriteRegisterWord(RegisterType::SP, 0x5E2F);
    WriteRegisterByte(RegisterType::A, 0x8D);
    WriteRegisterByte(RegisterType::B, 0x4B);
    WriteRegisterByte(RegisterType::C, 0xDB);
    WriteRegisterByte(RegisterType::D, 0x4D);
    WriteRegisterByte(RegisterType::E, 0x97);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x9D);
    WriteRegisterByte(RegisterType::L, 0x0F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xED8E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8D);
    CheckRegisterByte(RegisterType::B, 0x4B);
    CheckRegisterByte(RegisterType::C, 0xDB);
    CheckRegisterByte(RegisterType::D, 0x4D);
    CheckRegisterByte(RegisterType::E, 0x97);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x9D);
    CheckRegisterByte(RegisterType::L, 0x0F);
    WriteRegisterWord(RegisterType::PC, 0xED8F);
    WriteRegisterWord(RegisterType::SP, 0x5E2F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xED8E, 0x40);
}

void test_40_038D()
{
    if (skip_test_40_038D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEC1B);
    WriteRegisterWord(RegisterType::SP, 0x135A);
    WriteRegisterByte(RegisterType::A, 0xAE);
    WriteRegisterByte(RegisterType::B, 0xC8);
    WriteRegisterByte(RegisterType::C, 0xED);
    WriteRegisterByte(RegisterType::D, 0x4B);
    WriteRegisterByte(RegisterType::E, 0x06);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x2C);
    WriteRegisterByte(RegisterType::L, 0x25);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xEC1B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAE);
    CheckRegisterByte(RegisterType::B, 0xC8);
    CheckRegisterByte(RegisterType::C, 0xED);
    CheckRegisterByte(RegisterType::D, 0x4B);
    CheckRegisterByte(RegisterType::E, 0x06);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x2C);
    CheckRegisterByte(RegisterType::L, 0x25);
    WriteRegisterWord(RegisterType::PC, 0xEC1C);
    WriteRegisterWord(RegisterType::SP, 0x135A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEC1B, 0x40);
}

void test_40_038E()
{
    if (skip_test_40_038E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x09FE);
    WriteRegisterWord(RegisterType::SP, 0xD77A);
    WriteRegisterByte(RegisterType::A, 0x2F);
    WriteRegisterByte(RegisterType::B, 0x72);
    WriteRegisterByte(RegisterType::C, 0xB0);
    WriteRegisterByte(RegisterType::D, 0x6E);
    WriteRegisterByte(RegisterType::E, 0x15);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x19);
    WriteRegisterByte(RegisterType::L, 0x89);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x09FE, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2F);
    CheckRegisterByte(RegisterType::B, 0x72);
    CheckRegisterByte(RegisterType::C, 0xB0);
    CheckRegisterByte(RegisterType::D, 0x6E);
    CheckRegisterByte(RegisterType::E, 0x15);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x19);
    CheckRegisterByte(RegisterType::L, 0x89);
    WriteRegisterWord(RegisterType::PC, 0x09FF);
    WriteRegisterWord(RegisterType::SP, 0xD77A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x09FE, 0x40);
}

void test_40_038F()
{
    if (skip_test_40_038F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2E13);
    WriteRegisterWord(RegisterType::SP, 0x8F24);
    WriteRegisterByte(RegisterType::A, 0x62);
    WriteRegisterByte(RegisterType::B, 0x2C);
    WriteRegisterByte(RegisterType::C, 0x78);
    WriteRegisterByte(RegisterType::D, 0xA4);
    WriteRegisterByte(RegisterType::E, 0xFC);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x28);
    WriteRegisterByte(RegisterType::L, 0x53);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2E13, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x62);
    CheckRegisterByte(RegisterType::B, 0x2C);
    CheckRegisterByte(RegisterType::C, 0x78);
    CheckRegisterByte(RegisterType::D, 0xA4);
    CheckRegisterByte(RegisterType::E, 0xFC);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x28);
    CheckRegisterByte(RegisterType::L, 0x53);
    WriteRegisterWord(RegisterType::PC, 0x2E14);
    WriteRegisterWord(RegisterType::SP, 0x8F24);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2E13, 0x40);
}

void test_40_0390()
{
    if (skip_test_40_0390)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x50A2);
    WriteRegisterWord(RegisterType::SP, 0x3E73);
    WriteRegisterByte(RegisterType::A, 0xE4);
    WriteRegisterByte(RegisterType::B, 0x73);
    WriteRegisterByte(RegisterType::C, 0xE3);
    WriteRegisterByte(RegisterType::D, 0xA4);
    WriteRegisterByte(RegisterType::E, 0x7B);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x0F);
    WriteRegisterByte(RegisterType::L, 0x02);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x50A2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE4);
    CheckRegisterByte(RegisterType::B, 0x73);
    CheckRegisterByte(RegisterType::C, 0xE3);
    CheckRegisterByte(RegisterType::D, 0xA4);
    CheckRegisterByte(RegisterType::E, 0x7B);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x0F);
    CheckRegisterByte(RegisterType::L, 0x02);
    WriteRegisterWord(RegisterType::PC, 0x50A3);
    WriteRegisterWord(RegisterType::SP, 0x3E73);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x50A2, 0x40);
}

void test_40_0391()
{
    if (skip_test_40_0391)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4044);
    WriteRegisterWord(RegisterType::SP, 0x82B6);
    WriteRegisterByte(RegisterType::A, 0x92);
    WriteRegisterByte(RegisterType::B, 0x91);
    WriteRegisterByte(RegisterType::C, 0x2A);
    WriteRegisterByte(RegisterType::D, 0xA7);
    WriteRegisterByte(RegisterType::E, 0xC1);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xDC);
    WriteRegisterByte(RegisterType::L, 0x5F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4044, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x92);
    CheckRegisterByte(RegisterType::B, 0x91);
    CheckRegisterByte(RegisterType::C, 0x2A);
    CheckRegisterByte(RegisterType::D, 0xA7);
    CheckRegisterByte(RegisterType::E, 0xC1);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xDC);
    CheckRegisterByte(RegisterType::L, 0x5F);
    WriteRegisterWord(RegisterType::PC, 0x4045);
    WriteRegisterWord(RegisterType::SP, 0x82B6);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4044, 0x40);
}

void test_40_0392()
{
    if (skip_test_40_0392)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x17C1);
    WriteRegisterWord(RegisterType::SP, 0xFFDA);
    WriteRegisterByte(RegisterType::A, 0x19);
    WriteRegisterByte(RegisterType::B, 0x3F);
    WriteRegisterByte(RegisterType::C, 0x7F);
    WriteRegisterByte(RegisterType::D, 0x02);
    WriteRegisterByte(RegisterType::E, 0x5D);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xCB);
    WriteRegisterByte(RegisterType::L, 0x96);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x17C1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x19);
    CheckRegisterByte(RegisterType::B, 0x3F);
    CheckRegisterByte(RegisterType::C, 0x7F);
    CheckRegisterByte(RegisterType::D, 0x02);
    CheckRegisterByte(RegisterType::E, 0x5D);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xCB);
    CheckRegisterByte(RegisterType::L, 0x96);
    WriteRegisterWord(RegisterType::PC, 0x17C2);
    WriteRegisterWord(RegisterType::SP, 0xFFDA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x17C1, 0x40);
}

void test_40_0393()
{
    if (skip_test_40_0393)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7F7A);
    WriteRegisterWord(RegisterType::SP, 0x2169);
    WriteRegisterByte(RegisterType::A, 0xCA);
    WriteRegisterByte(RegisterType::B, 0xA1);
    WriteRegisterByte(RegisterType::C, 0x3C);
    WriteRegisterByte(RegisterType::D, 0x02);
    WriteRegisterByte(RegisterType::E, 0x83);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xAF);
    WriteRegisterByte(RegisterType::L, 0xAF);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7F7A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCA);
    CheckRegisterByte(RegisterType::B, 0xA1);
    CheckRegisterByte(RegisterType::C, 0x3C);
    CheckRegisterByte(RegisterType::D, 0x02);
    CheckRegisterByte(RegisterType::E, 0x83);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xAF);
    CheckRegisterByte(RegisterType::L, 0xAF);
    WriteRegisterWord(RegisterType::PC, 0x7F7B);
    WriteRegisterWord(RegisterType::SP, 0x2169);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7F7A, 0x40);
}

void test_40_0394()
{
    if (skip_test_40_0394)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB157);
    WriteRegisterWord(RegisterType::SP, 0xC7F6);
    WriteRegisterByte(RegisterType::A, 0xAB);
    WriteRegisterByte(RegisterType::B, 0x55);
    WriteRegisterByte(RegisterType::C, 0xB5);
    WriteRegisterByte(RegisterType::D, 0x57);
    WriteRegisterByte(RegisterType::E, 0x75);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x43);
    WriteRegisterByte(RegisterType::L, 0x01);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB157, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAB);
    CheckRegisterByte(RegisterType::B, 0x55);
    CheckRegisterByte(RegisterType::C, 0xB5);
    CheckRegisterByte(RegisterType::D, 0x57);
    CheckRegisterByte(RegisterType::E, 0x75);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x43);
    CheckRegisterByte(RegisterType::L, 0x01);
    WriteRegisterWord(RegisterType::PC, 0xB158);
    WriteRegisterWord(RegisterType::SP, 0xC7F6);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB157, 0x40);
}

void test_40_0395()
{
    if (skip_test_40_0395)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3447);
    WriteRegisterWord(RegisterType::SP, 0x171B);
    WriteRegisterByte(RegisterType::A, 0xCC);
    WriteRegisterByte(RegisterType::B, 0x17);
    WriteRegisterByte(RegisterType::C, 0x72);
    WriteRegisterByte(RegisterType::D, 0xEE);
    WriteRegisterByte(RegisterType::E, 0x29);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x60);
    WriteRegisterByte(RegisterType::L, 0xB6);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3447, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xCC);
    CheckRegisterByte(RegisterType::B, 0x17);
    CheckRegisterByte(RegisterType::C, 0x72);
    CheckRegisterByte(RegisterType::D, 0xEE);
    CheckRegisterByte(RegisterType::E, 0x29);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x60);
    CheckRegisterByte(RegisterType::L, 0xB6);
    WriteRegisterWord(RegisterType::PC, 0x3448);
    WriteRegisterWord(RegisterType::SP, 0x171B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3447, 0x40);
}

void test_40_0396()
{
    if (skip_test_40_0396)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2940);
    WriteRegisterWord(RegisterType::SP, 0x4F89);
    WriteRegisterByte(RegisterType::A, 0xF2);
    WriteRegisterByte(RegisterType::B, 0x79);
    WriteRegisterByte(RegisterType::C, 0xA8);
    WriteRegisterByte(RegisterType::D, 0x9D);
    WriteRegisterByte(RegisterType::E, 0x04);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xFA);
    WriteRegisterByte(RegisterType::L, 0x4E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x2940, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF2);
    CheckRegisterByte(RegisterType::B, 0x79);
    CheckRegisterByte(RegisterType::C, 0xA8);
    CheckRegisterByte(RegisterType::D, 0x9D);
    CheckRegisterByte(RegisterType::E, 0x04);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xFA);
    CheckRegisterByte(RegisterType::L, 0x4E);
    WriteRegisterWord(RegisterType::PC, 0x2941);
    WriteRegisterWord(RegisterType::SP, 0x4F89);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x2940, 0x40);
}

void test_40_0397()
{
    if (skip_test_40_0397)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x82E6);
    WriteRegisterWord(RegisterType::SP, 0x590A);
    WriteRegisterByte(RegisterType::A, 0x21);
    WriteRegisterByte(RegisterType::B, 0x65);
    WriteRegisterByte(RegisterType::C, 0x6E);
    WriteRegisterByte(RegisterType::D, 0x84);
    WriteRegisterByte(RegisterType::E, 0xF0);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x01);
    WriteRegisterByte(RegisterType::L, 0x2E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x82E6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x21);
    CheckRegisterByte(RegisterType::B, 0x65);
    CheckRegisterByte(RegisterType::C, 0x6E);
    CheckRegisterByte(RegisterType::D, 0x84);
    CheckRegisterByte(RegisterType::E, 0xF0);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x01);
    CheckRegisterByte(RegisterType::L, 0x2E);
    WriteRegisterWord(RegisterType::PC, 0x82E7);
    WriteRegisterWord(RegisterType::SP, 0x590A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x82E6, 0x40);
}

void test_40_0398()
{
    if (skip_test_40_0398)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFDFA);
    WriteRegisterWord(RegisterType::SP, 0x9FB7);
    WriteRegisterByte(RegisterType::A, 0x4E);
    WriteRegisterByte(RegisterType::B, 0x90);
    WriteRegisterByte(RegisterType::C, 0x3D);
    WriteRegisterByte(RegisterType::D, 0xF2);
    WriteRegisterByte(RegisterType::E, 0x0C);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x93);
    WriteRegisterByte(RegisterType::L, 0x40);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFDFA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4E);
    CheckRegisterByte(RegisterType::B, 0x90);
    CheckRegisterByte(RegisterType::C, 0x3D);
    CheckRegisterByte(RegisterType::D, 0xF2);
    CheckRegisterByte(RegisterType::E, 0x0C);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x93);
    CheckRegisterByte(RegisterType::L, 0x40);
    WriteRegisterWord(RegisterType::PC, 0xFDFB);
    WriteRegisterWord(RegisterType::SP, 0x9FB7);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFDFA, 0x40);
}

void test_40_0399()
{
    if (skip_test_40_0399)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0975);
    WriteRegisterWord(RegisterType::SP, 0x8193);
    WriteRegisterByte(RegisterType::A, 0x9E);
    WriteRegisterByte(RegisterType::B, 0x58);
    WriteRegisterByte(RegisterType::C, 0xCC);
    WriteRegisterByte(RegisterType::D, 0xDB);
    WriteRegisterByte(RegisterType::E, 0x38);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xF8);
    WriteRegisterByte(RegisterType::L, 0x56);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0975, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x9E);
    CheckRegisterByte(RegisterType::B, 0x58);
    CheckRegisterByte(RegisterType::C, 0xCC);
    CheckRegisterByte(RegisterType::D, 0xDB);
    CheckRegisterByte(RegisterType::E, 0x38);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xF8);
    CheckRegisterByte(RegisterType::L, 0x56);
    WriteRegisterWord(RegisterType::PC, 0x0976);
    WriteRegisterWord(RegisterType::SP, 0x8193);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0975, 0x40);
}

void test_40_039A()
{
    if (skip_test_40_039A)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x05EA);
    WriteRegisterWord(RegisterType::SP, 0xBE2D);
    WriteRegisterByte(RegisterType::A, 0xFA);
    WriteRegisterByte(RegisterType::B, 0x42);
    WriteRegisterByte(RegisterType::C, 0x39);
    WriteRegisterByte(RegisterType::D, 0x98);
    WriteRegisterByte(RegisterType::E, 0x8E);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x3D);
    WriteRegisterByte(RegisterType::L, 0x2E);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x05EA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFA);
    CheckRegisterByte(RegisterType::B, 0x42);
    CheckRegisterByte(RegisterType::C, 0x39);
    CheckRegisterByte(RegisterType::D, 0x98);
    CheckRegisterByte(RegisterType::E, 0x8E);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x3D);
    CheckRegisterByte(RegisterType::L, 0x2E);
    WriteRegisterWord(RegisterType::PC, 0x05EB);
    WriteRegisterWord(RegisterType::SP, 0xBE2D);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x05EA, 0x40);
}

void test_40_039B()
{
    if (skip_test_40_039B)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4410);
    WriteRegisterWord(RegisterType::SP, 0x9DD6);
    WriteRegisterByte(RegisterType::A, 0xA5);
    WriteRegisterByte(RegisterType::B, 0xE1);
    WriteRegisterByte(RegisterType::C, 0x4C);
    WriteRegisterByte(RegisterType::D, 0xC2);
    WriteRegisterByte(RegisterType::E, 0xF1);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xCC);
    WriteRegisterByte(RegisterType::L, 0x24);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4410, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA5);
    CheckRegisterByte(RegisterType::B, 0xE1);
    CheckRegisterByte(RegisterType::C, 0x4C);
    CheckRegisterByte(RegisterType::D, 0xC2);
    CheckRegisterByte(RegisterType::E, 0xF1);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xCC);
    CheckRegisterByte(RegisterType::L, 0x24);
    WriteRegisterWord(RegisterType::PC, 0x4411);
    WriteRegisterWord(RegisterType::SP, 0x9DD6);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x4410, 0x40);
}

void test_40_039C()
{
    if (skip_test_40_039C)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB4DA);
    WriteRegisterWord(RegisterType::SP, 0xD82F);
    WriteRegisterByte(RegisterType::A, 0x8E);
    WriteRegisterByte(RegisterType::B, 0xDD);
    WriteRegisterByte(RegisterType::C, 0x8A);
    WriteRegisterByte(RegisterType::D, 0xB6);
    WriteRegisterByte(RegisterType::E, 0xC7);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x83);
    WriteRegisterByte(RegisterType::L, 0x88);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB4DA, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8E);
    CheckRegisterByte(RegisterType::B, 0xDD);
    CheckRegisterByte(RegisterType::C, 0x8A);
    CheckRegisterByte(RegisterType::D, 0xB6);
    CheckRegisterByte(RegisterType::E, 0xC7);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x83);
    CheckRegisterByte(RegisterType::L, 0x88);
    WriteRegisterWord(RegisterType::PC, 0xB4DB);
    WriteRegisterWord(RegisterType::SP, 0xD82F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB4DA, 0x40);
}

void test_40_039D()
{
    if (skip_test_40_039D)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFBA7);
    WriteRegisterWord(RegisterType::SP, 0x6E4A);
    WriteRegisterByte(RegisterType::A, 0xC5);
    WriteRegisterByte(RegisterType::B, 0x8B);
    WriteRegisterByte(RegisterType::C, 0x5A);
    WriteRegisterByte(RegisterType::D, 0xFE);
    WriteRegisterByte(RegisterType::E, 0x34);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0x91);
    WriteRegisterByte(RegisterType::L, 0xA4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFBA7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xC5);
    CheckRegisterByte(RegisterType::B, 0x8B);
    CheckRegisterByte(RegisterType::C, 0x5A);
    CheckRegisterByte(RegisterType::D, 0xFE);
    CheckRegisterByte(RegisterType::E, 0x34);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0x91);
    CheckRegisterByte(RegisterType::L, 0xA4);
    WriteRegisterWord(RegisterType::PC, 0xFBA8);
    WriteRegisterWord(RegisterType::SP, 0x6E4A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xFBA7, 0x40);
}

void test_40_039E()
{
    if (skip_test_40_039E)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB525);
    WriteRegisterWord(RegisterType::SP, 0xB482);
    WriteRegisterByte(RegisterType::A, 0xAC);
    WriteRegisterByte(RegisterType::B, 0x91);
    WriteRegisterByte(RegisterType::C, 0x46);
    WriteRegisterByte(RegisterType::D, 0x39);
    WriteRegisterByte(RegisterType::E, 0x30);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x3C);
    WriteRegisterByte(RegisterType::L, 0xED);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB525, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAC);
    CheckRegisterByte(RegisterType::B, 0x91);
    CheckRegisterByte(RegisterType::C, 0x46);
    CheckRegisterByte(RegisterType::D, 0x39);
    CheckRegisterByte(RegisterType::E, 0x30);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x3C);
    CheckRegisterByte(RegisterType::L, 0xED);
    WriteRegisterWord(RegisterType::PC, 0xB526);
    WriteRegisterWord(RegisterType::SP, 0xB482);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB525, 0x40);
}

void test_40_039F()
{
    if (skip_test_40_039F)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x612C);
    WriteRegisterWord(RegisterType::SP, 0x4F81);
    WriteRegisterByte(RegisterType::A, 0xBC);
    WriteRegisterByte(RegisterType::B, 0x78);
    WriteRegisterByte(RegisterType::C, 0xD8);
    WriteRegisterByte(RegisterType::D, 0x7E);
    WriteRegisterByte(RegisterType::E, 0xFF);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x33);
    WriteRegisterByte(RegisterType::L, 0xE9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x612C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBC);
    CheckRegisterByte(RegisterType::B, 0x78);
    CheckRegisterByte(RegisterType::C, 0xD8);
    CheckRegisterByte(RegisterType::D, 0x7E);
    CheckRegisterByte(RegisterType::E, 0xFF);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x33);
    CheckRegisterByte(RegisterType::L, 0xE9);
    WriteRegisterWord(RegisterType::PC, 0x612D);
    WriteRegisterWord(RegisterType::SP, 0x4F81);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x612C, 0x40);
}

void test_40_03A0()
{
    if (skip_test_40_03A0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC469);
    WriteRegisterWord(RegisterType::SP, 0xE0AF);
    WriteRegisterByte(RegisterType::A, 0x68);
    WriteRegisterByte(RegisterType::B, 0xCA);
    WriteRegisterByte(RegisterType::C, 0x7E);
    WriteRegisterByte(RegisterType::D, 0xDE);
    WriteRegisterByte(RegisterType::E, 0x30);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xB6);
    WriteRegisterByte(RegisterType::L, 0xE6);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC469, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x68);
    CheckRegisterByte(RegisterType::B, 0xCA);
    CheckRegisterByte(RegisterType::C, 0x7E);
    CheckRegisterByte(RegisterType::D, 0xDE);
    CheckRegisterByte(RegisterType::E, 0x30);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xB6);
    CheckRegisterByte(RegisterType::L, 0xE6);
    WriteRegisterWord(RegisterType::PC, 0xC46A);
    WriteRegisterWord(RegisterType::SP, 0xE0AF);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC469, 0x40);
}

void test_40_03A1()
{
    if (skip_test_40_03A1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD473);
    WriteRegisterWord(RegisterType::SP, 0x7827);
    WriteRegisterByte(RegisterType::A, 0xD8);
    WriteRegisterByte(RegisterType::B, 0xDF);
    WriteRegisterByte(RegisterType::C, 0xAB);
    WriteRegisterByte(RegisterType::D, 0x28);
    WriteRegisterByte(RegisterType::E, 0x43);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0x5F);
    WriteRegisterByte(RegisterType::L, 0xC4);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD473, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD8);
    CheckRegisterByte(RegisterType::B, 0xDF);
    CheckRegisterByte(RegisterType::C, 0xAB);
    CheckRegisterByte(RegisterType::D, 0x28);
    CheckRegisterByte(RegisterType::E, 0x43);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0x5F);
    CheckRegisterByte(RegisterType::L, 0xC4);
    WriteRegisterWord(RegisterType::PC, 0xD474);
    WriteRegisterWord(RegisterType::SP, 0x7827);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD473, 0x40);
}

void test_40_03A2()
{
    if (skip_test_40_03A2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xCF42);
    WriteRegisterWord(RegisterType::SP, 0xE49D);
    WriteRegisterByte(RegisterType::A, 0xF4);
    WriteRegisterByte(RegisterType::B, 0xB5);
    WriteRegisterByte(RegisterType::C, 0x8E);
    WriteRegisterByte(RegisterType::D, 0xF1);
    WriteRegisterByte(RegisterType::E, 0xBC);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xD6);
    WriteRegisterByte(RegisterType::L, 0x8B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xCF42, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF4);
    CheckRegisterByte(RegisterType::B, 0xB5);
    CheckRegisterByte(RegisterType::C, 0x8E);
    CheckRegisterByte(RegisterType::D, 0xF1);
    CheckRegisterByte(RegisterType::E, 0xBC);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xD6);
    CheckRegisterByte(RegisterType::L, 0x8B);
    WriteRegisterWord(RegisterType::PC, 0xCF43);
    WriteRegisterWord(RegisterType::SP, 0xE49D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xCF42, 0x40);
}

void test_40_03A3()
{
    if (skip_test_40_03A3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDDC5);
    WriteRegisterWord(RegisterType::SP, 0x83C6);
    WriteRegisterByte(RegisterType::A, 0xD0);
    WriteRegisterByte(RegisterType::B, 0x49);
    WriteRegisterByte(RegisterType::C, 0xBF);
    WriteRegisterByte(RegisterType::D, 0x6D);
    WriteRegisterByte(RegisterType::E, 0x0D);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x6B);
    WriteRegisterByte(RegisterType::L, 0x70);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDDC5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD0);
    CheckRegisterByte(RegisterType::B, 0x49);
    CheckRegisterByte(RegisterType::C, 0xBF);
    CheckRegisterByte(RegisterType::D, 0x6D);
    CheckRegisterByte(RegisterType::E, 0x0D);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x6B);
    CheckRegisterByte(RegisterType::L, 0x70);
    WriteRegisterWord(RegisterType::PC, 0xDDC6);
    WriteRegisterWord(RegisterType::SP, 0x83C6);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xDDC5, 0x40);
}

void test_40_03A4()
{
    if (skip_test_40_03A4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9879);
    WriteRegisterWord(RegisterType::SP, 0x682F);
    WriteRegisterByte(RegisterType::A, 0xF5);
    WriteRegisterByte(RegisterType::B, 0x7E);
    WriteRegisterByte(RegisterType::C, 0xB2);
    WriteRegisterByte(RegisterType::D, 0xC9);
    WriteRegisterByte(RegisterType::E, 0xE9);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xDC);
    WriteRegisterByte(RegisterType::L, 0x96);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9879, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF5);
    CheckRegisterByte(RegisterType::B, 0x7E);
    CheckRegisterByte(RegisterType::C, 0xB2);
    CheckRegisterByte(RegisterType::D, 0xC9);
    CheckRegisterByte(RegisterType::E, 0xE9);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xDC);
    CheckRegisterByte(RegisterType::L, 0x96);
    WriteRegisterWord(RegisterType::PC, 0x987A);
    WriteRegisterWord(RegisterType::SP, 0x682F);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x9879, 0x40);
}

void test_40_03A5()
{
    if (skip_test_40_03A5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x62A2);
    WriteRegisterWord(RegisterType::SP, 0xB24D);
    WriteRegisterByte(RegisterType::A, 0xB9);
    WriteRegisterByte(RegisterType::B, 0x0A);
    WriteRegisterByte(RegisterType::C, 0xAB);
    WriteRegisterByte(RegisterType::D, 0xC2);
    WriteRegisterByte(RegisterType::E, 0x6E);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x2B);
    WriteRegisterByte(RegisterType::L, 0x00);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x62A2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB9);
    CheckRegisterByte(RegisterType::B, 0x0A);
    CheckRegisterByte(RegisterType::C, 0xAB);
    CheckRegisterByte(RegisterType::D, 0xC2);
    CheckRegisterByte(RegisterType::E, 0x6E);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x2B);
    CheckRegisterByte(RegisterType::L, 0x00);
    WriteRegisterWord(RegisterType::PC, 0x62A3);
    WriteRegisterWord(RegisterType::SP, 0xB24D);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x62A2, 0x40);
}

void test_40_03A6()
{
    if (skip_test_40_03A6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB1CD);
    WriteRegisterWord(RegisterType::SP, 0xB40B);
    WriteRegisterByte(RegisterType::A, 0xDD);
    WriteRegisterByte(RegisterType::B, 0xB7);
    WriteRegisterByte(RegisterType::C, 0x11);
    WriteRegisterByte(RegisterType::D, 0x61);
    WriteRegisterByte(RegisterType::E, 0xA5);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xEA);
    WriteRegisterByte(RegisterType::L, 0xA9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xB1CD, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDD);
    CheckRegisterByte(RegisterType::B, 0xB7);
    CheckRegisterByte(RegisterType::C, 0x11);
    CheckRegisterByte(RegisterType::D, 0x61);
    CheckRegisterByte(RegisterType::E, 0xA5);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xEA);
    CheckRegisterByte(RegisterType::L, 0xA9);
    WriteRegisterWord(RegisterType::PC, 0xB1CE);
    WriteRegisterWord(RegisterType::SP, 0xB40B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xB1CD, 0x40);
}

void test_40_03A7()
{
    if (skip_test_40_03A7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7F5E);
    WriteRegisterWord(RegisterType::SP, 0xA7CE);
    WriteRegisterByte(RegisterType::A, 0xAC);
    WriteRegisterByte(RegisterType::B, 0x44);
    WriteRegisterByte(RegisterType::C, 0xC2);
    WriteRegisterByte(RegisterType::D, 0x6E);
    WriteRegisterByte(RegisterType::E, 0xED);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xEE);
    WriteRegisterByte(RegisterType::L, 0x8A);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7F5E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAC);
    CheckRegisterByte(RegisterType::B, 0x44);
    CheckRegisterByte(RegisterType::C, 0xC2);
    CheckRegisterByte(RegisterType::D, 0x6E);
    CheckRegisterByte(RegisterType::E, 0xED);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xEE);
    CheckRegisterByte(RegisterType::L, 0x8A);
    WriteRegisterWord(RegisterType::PC, 0x7F5F);
    WriteRegisterWord(RegisterType::SP, 0xA7CE);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7F5E, 0x40);
}

void test_40_03A8()
{
    if (skip_test_40_03A8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x5FC5);
    WriteRegisterWord(RegisterType::SP, 0x9FE3);
    WriteRegisterByte(RegisterType::A, 0x38);
    WriteRegisterByte(RegisterType::B, 0xB1);
    WriteRegisterByte(RegisterType::C, 0x3B);
    WriteRegisterByte(RegisterType::D, 0xC3);
    WriteRegisterByte(RegisterType::E, 0x24);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x9D);
    WriteRegisterByte(RegisterType::L, 0x83);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x5FC5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x38);
    CheckRegisterByte(RegisterType::B, 0xB1);
    CheckRegisterByte(RegisterType::C, 0x3B);
    CheckRegisterByte(RegisterType::D, 0xC3);
    CheckRegisterByte(RegisterType::E, 0x24);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x9D);
    CheckRegisterByte(RegisterType::L, 0x83);
    WriteRegisterWord(RegisterType::PC, 0x5FC6);
    WriteRegisterWord(RegisterType::SP, 0x9FE3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x5FC5, 0x40);
}

void test_40_03A9()
{
    if (skip_test_40_03A9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAED0);
    WriteRegisterWord(RegisterType::SP, 0x6B0A);
    WriteRegisterByte(RegisterType::A, 0xD6);
    WriteRegisterByte(RegisterType::B, 0x9D);
    WriteRegisterByte(RegisterType::C, 0x6E);
    WriteRegisterByte(RegisterType::D, 0x26);
    WriteRegisterByte(RegisterType::E, 0x92);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x3B);
    WriteRegisterByte(RegisterType::L, 0x4C);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xAED0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xD6);
    CheckRegisterByte(RegisterType::B, 0x9D);
    CheckRegisterByte(RegisterType::C, 0x6E);
    CheckRegisterByte(RegisterType::D, 0x26);
    CheckRegisterByte(RegisterType::E, 0x92);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x3B);
    CheckRegisterByte(RegisterType::L, 0x4C);
    WriteRegisterWord(RegisterType::PC, 0xAED1);
    WriteRegisterWord(RegisterType::SP, 0x6B0A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xAED0, 0x40);
}

void test_40_03AA()
{
    if (skip_test_40_03AA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6DB7);
    WriteRegisterWord(RegisterType::SP, 0x5BCC);
    WriteRegisterByte(RegisterType::A, 0x7D);
    WriteRegisterByte(RegisterType::B, 0xA5);
    WriteRegisterByte(RegisterType::C, 0xFA);
    WriteRegisterByte(RegisterType::D, 0x20);
    WriteRegisterByte(RegisterType::E, 0x76);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xFE);
    WriteRegisterByte(RegisterType::L, 0x6B);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x6DB7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7D);
    CheckRegisterByte(RegisterType::B, 0xA5);
    CheckRegisterByte(RegisterType::C, 0xFA);
    CheckRegisterByte(RegisterType::D, 0x20);
    CheckRegisterByte(RegisterType::E, 0x76);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xFE);
    CheckRegisterByte(RegisterType::L, 0x6B);
    WriteRegisterWord(RegisterType::PC, 0x6DB8);
    WriteRegisterWord(RegisterType::SP, 0x5BCC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6DB7, 0x40);
}

void test_40_03AB()
{
    if (skip_test_40_03AB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xFF61);
    WriteRegisterWord(RegisterType::SP, 0x6BB6);
    WriteRegisterByte(RegisterType::A, 0x37);
    WriteRegisterByte(RegisterType::B, 0x9A);
    WriteRegisterByte(RegisterType::C, 0x61);
    WriteRegisterByte(RegisterType::D, 0x31);
    WriteRegisterByte(RegisterType::E, 0x73);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x02);
    WriteRegisterByte(RegisterType::L, 0xB4);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xFF61, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x37);
    CheckRegisterByte(RegisterType::B, 0x9A);
    CheckRegisterByte(RegisterType::C, 0x61);
    CheckRegisterByte(RegisterType::D, 0x31);
    CheckRegisterByte(RegisterType::E, 0x73);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x02);
    CheckRegisterByte(RegisterType::L, 0xB4);
    WriteRegisterWord(RegisterType::PC, 0xFF62);
    WriteRegisterWord(RegisterType::SP, 0x6BB6);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xFF61, 0x40);
}

void test_40_03AC()
{
    if (skip_test_40_03AC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x001F);
    WriteRegisterWord(RegisterType::SP, 0x5CB5);
    WriteRegisterByte(RegisterType::A, 0xF6);
    WriteRegisterByte(RegisterType::B, 0xD7);
    WriteRegisterByte(RegisterType::C, 0x32);
    WriteRegisterByte(RegisterType::D, 0xDA);
    WriteRegisterByte(RegisterType::E, 0x6A);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xBB);
    WriteRegisterByte(RegisterType::L, 0x38);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x001F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF6);
    CheckRegisterByte(RegisterType::B, 0xD7);
    CheckRegisterByte(RegisterType::C, 0x32);
    CheckRegisterByte(RegisterType::D, 0xDA);
    CheckRegisterByte(RegisterType::E, 0x6A);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xBB);
    CheckRegisterByte(RegisterType::L, 0x38);
    WriteRegisterWord(RegisterType::PC, 0x0020);
    WriteRegisterWord(RegisterType::SP, 0x5CB5);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x001F, 0x40);
}

void test_40_03AD()
{
    if (skip_test_40_03AD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x51CB);
    WriteRegisterWord(RegisterType::SP, 0xAAEA);
    WriteRegisterByte(RegisterType::A, 0x47);
    WriteRegisterByte(RegisterType::B, 0xF6);
    WriteRegisterByte(RegisterType::C, 0x65);
    WriteRegisterByte(RegisterType::D, 0xC4);
    WriteRegisterByte(RegisterType::E, 0x36);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x04);
    WriteRegisterByte(RegisterType::L, 0xE9);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x51CB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x47);
    CheckRegisterByte(RegisterType::B, 0xF6);
    CheckRegisterByte(RegisterType::C, 0x65);
    CheckRegisterByte(RegisterType::D, 0xC4);
    CheckRegisterByte(RegisterType::E, 0x36);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x04);
    CheckRegisterByte(RegisterType::L, 0xE9);
    WriteRegisterWord(RegisterType::PC, 0x51CC);
    WriteRegisterWord(RegisterType::SP, 0xAAEA);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x51CB, 0x40);
}

void test_40_03AE()
{
    if (skip_test_40_03AE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x20C3);
    WriteRegisterWord(RegisterType::SP, 0x225A);
    WriteRegisterByte(RegisterType::A, 0x25);
    WriteRegisterByte(RegisterType::B, 0x3B);
    WriteRegisterByte(RegisterType::C, 0xED);
    WriteRegisterByte(RegisterType::D, 0xE4);
    WriteRegisterByte(RegisterType::E, 0x13);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0x2F);
    WriteRegisterByte(RegisterType::L, 0x62);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x20C3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x25);
    CheckRegisterByte(RegisterType::B, 0x3B);
    CheckRegisterByte(RegisterType::C, 0xED);
    CheckRegisterByte(RegisterType::D, 0xE4);
    CheckRegisterByte(RegisterType::E, 0x13);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0x2F);
    CheckRegisterByte(RegisterType::L, 0x62);
    WriteRegisterWord(RegisterType::PC, 0x20C4);
    WriteRegisterWord(RegisterType::SP, 0x225A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x20C3, 0x40);
}

void test_40_03AF()
{
    if (skip_test_40_03AF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD0A6);
    WriteRegisterWord(RegisterType::SP, 0x724E);
    WriteRegisterByte(RegisterType::A, 0xFE);
    WriteRegisterByte(RegisterType::B, 0xD6);
    WriteRegisterByte(RegisterType::C, 0x9E);
    WriteRegisterByte(RegisterType::D, 0xC7);
    WriteRegisterByte(RegisterType::E, 0xB2);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x60);
    WriteRegisterByte(RegisterType::L, 0xCF);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD0A6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFE);
    CheckRegisterByte(RegisterType::B, 0xD6);
    CheckRegisterByte(RegisterType::C, 0x9E);
    CheckRegisterByte(RegisterType::D, 0xC7);
    CheckRegisterByte(RegisterType::E, 0xB2);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x60);
    CheckRegisterByte(RegisterType::L, 0xCF);
    WriteRegisterWord(RegisterType::PC, 0xD0A7);
    WriteRegisterWord(RegisterType::SP, 0x724E);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD0A6, 0x40);
}

void test_40_03B0()
{
    if (skip_test_40_03B0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x98C7);
    WriteRegisterWord(RegisterType::SP, 0x86A6);
    WriteRegisterByte(RegisterType::A, 0x3A);
    WriteRegisterByte(RegisterType::B, 0x67);
    WriteRegisterByte(RegisterType::C, 0x0C);
    WriteRegisterByte(RegisterType::D, 0xA1);
    WriteRegisterByte(RegisterType::E, 0x76);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xA0);
    WriteRegisterByte(RegisterType::L, 0x7D);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x98C7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3A);
    CheckRegisterByte(RegisterType::B, 0x67);
    CheckRegisterByte(RegisterType::C, 0x0C);
    CheckRegisterByte(RegisterType::D, 0xA1);
    CheckRegisterByte(RegisterType::E, 0x76);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xA0);
    CheckRegisterByte(RegisterType::L, 0x7D);
    WriteRegisterWord(RegisterType::PC, 0x98C8);
    WriteRegisterWord(RegisterType::SP, 0x86A6);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x98C7, 0x40);
}

void test_40_03B1()
{
    if (skip_test_40_03B1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x940B);
    WriteRegisterWord(RegisterType::SP, 0x8623);
    WriteRegisterByte(RegisterType::A, 0x4C);
    WriteRegisterByte(RegisterType::B, 0x80);
    WriteRegisterByte(RegisterType::C, 0xEC);
    WriteRegisterByte(RegisterType::D, 0xB2);
    WriteRegisterByte(RegisterType::E, 0x30);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0x09);
    WriteRegisterByte(RegisterType::L, 0xDB);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x940B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4C);
    CheckRegisterByte(RegisterType::B, 0x80);
    CheckRegisterByte(RegisterType::C, 0xEC);
    CheckRegisterByte(RegisterType::D, 0xB2);
    CheckRegisterByte(RegisterType::E, 0x30);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0x09);
    CheckRegisterByte(RegisterType::L, 0xDB);
    WriteRegisterWord(RegisterType::PC, 0x940C);
    WriteRegisterWord(RegisterType::SP, 0x8623);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x940B, 0x40);
}

void test_40_03B2()
{
    if (skip_test_40_03B2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4804);
    WriteRegisterWord(RegisterType::SP, 0x0C59);
    WriteRegisterByte(RegisterType::A, 0x3A);
    WriteRegisterByte(RegisterType::B, 0x4E);
    WriteRegisterByte(RegisterType::C, 0x1F);
    WriteRegisterByte(RegisterType::D, 0x66);
    WriteRegisterByte(RegisterType::E, 0x04);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xBC);
    WriteRegisterByte(RegisterType::L, 0x2F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4804, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3A);
    CheckRegisterByte(RegisterType::B, 0x4E);
    CheckRegisterByte(RegisterType::C, 0x1F);
    CheckRegisterByte(RegisterType::D, 0x66);
    CheckRegisterByte(RegisterType::E, 0x04);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xBC);
    CheckRegisterByte(RegisterType::L, 0x2F);
    WriteRegisterWord(RegisterType::PC, 0x4805);
    WriteRegisterWord(RegisterType::SP, 0x0C59);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4804, 0x40);
}

void test_40_03B3()
{
    if (skip_test_40_03B3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x826F);
    WriteRegisterWord(RegisterType::SP, 0x33C4);
    WriteRegisterByte(RegisterType::A, 0xF5);
    WriteRegisterByte(RegisterType::B, 0x52);
    WriteRegisterByte(RegisterType::C, 0xD9);
    WriteRegisterByte(RegisterType::D, 0xD1);
    WriteRegisterByte(RegisterType::E, 0x79);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xA2);
    WriteRegisterByte(RegisterType::L, 0x45);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x826F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF5);
    CheckRegisterByte(RegisterType::B, 0x52);
    CheckRegisterByte(RegisterType::C, 0xD9);
    CheckRegisterByte(RegisterType::D, 0xD1);
    CheckRegisterByte(RegisterType::E, 0x79);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xA2);
    CheckRegisterByte(RegisterType::L, 0x45);
    WriteRegisterWord(RegisterType::PC, 0x8270);
    WriteRegisterWord(RegisterType::SP, 0x33C4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x826F, 0x40);
}

void test_40_03B4()
{
    if (skip_test_40_03B4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7ED8);
    WriteRegisterWord(RegisterType::SP, 0xE653);
    WriteRegisterByte(RegisterType::A, 0x71);
    WriteRegisterByte(RegisterType::B, 0xA4);
    WriteRegisterByte(RegisterType::C, 0x22);
    WriteRegisterByte(RegisterType::D, 0x97);
    WriteRegisterByte(RegisterType::E, 0x00);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xFC);
    WriteRegisterByte(RegisterType::L, 0x05);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7ED8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x71);
    CheckRegisterByte(RegisterType::B, 0xA4);
    CheckRegisterByte(RegisterType::C, 0x22);
    CheckRegisterByte(RegisterType::D, 0x97);
    CheckRegisterByte(RegisterType::E, 0x00);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xFC);
    CheckRegisterByte(RegisterType::L, 0x05);
    WriteRegisterWord(RegisterType::PC, 0x7ED9);
    WriteRegisterWord(RegisterType::SP, 0xE653);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7ED8, 0x40);
}

void test_40_03B5()
{
    if (skip_test_40_03B5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7128);
    WriteRegisterWord(RegisterType::SP, 0x09AF);
    WriteRegisterByte(RegisterType::A, 0x8C);
    WriteRegisterByte(RegisterType::B, 0x6A);
    WriteRegisterByte(RegisterType::C, 0x8C);
    WriteRegisterByte(RegisterType::D, 0xEB);
    WriteRegisterByte(RegisterType::E, 0xDA);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x73);
    WriteRegisterByte(RegisterType::L, 0x89);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7128, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8C);
    CheckRegisterByte(RegisterType::B, 0x6A);
    CheckRegisterByte(RegisterType::C, 0x8C);
    CheckRegisterByte(RegisterType::D, 0xEB);
    CheckRegisterByte(RegisterType::E, 0xDA);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x73);
    CheckRegisterByte(RegisterType::L, 0x89);
    WriteRegisterWord(RegisterType::PC, 0x7129);
    WriteRegisterWord(RegisterType::SP, 0x09AF);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7128, 0x40);
}

void test_40_03B6()
{
    if (skip_test_40_03B6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xA3E5);
    WriteRegisterWord(RegisterType::SP, 0x47B0);
    WriteRegisterByte(RegisterType::A, 0xF3);
    WriteRegisterByte(RegisterType::B, 0xEE);
    WriteRegisterByte(RegisterType::C, 0x8B);
    WriteRegisterByte(RegisterType::D, 0x34);
    WriteRegisterByte(RegisterType::E, 0xF7);
    WriteRegisterFlag(0x00);
    WriteRegisterByte(RegisterType::H, 0x7C);
    WriteRegisterByte(RegisterType::L, 0x7C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xA3E5, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xF3);
    CheckRegisterByte(RegisterType::B, 0xEE);
    CheckRegisterByte(RegisterType::C, 0x8B);
    CheckRegisterByte(RegisterType::D, 0x34);
    CheckRegisterByte(RegisterType::E, 0xF7);
    CheckRegisterFlag(0x00);
    CheckRegisterByte(RegisterType::H, 0x7C);
    CheckRegisterByte(RegisterType::L, 0x7C);
    WriteRegisterWord(RegisterType::PC, 0xA3E6);
    WriteRegisterWord(RegisterType::SP, 0x47B0);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xA3E5, 0x40);
}

void test_40_03B7()
{
    if (skip_test_40_03B7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE115);
    WriteRegisterWord(RegisterType::SP, 0x9B1A);
    WriteRegisterByte(RegisterType::A, 0x56);
    WriteRegisterByte(RegisterType::B, 0xBA);
    WriteRegisterByte(RegisterType::C, 0xF7);
    WriteRegisterByte(RegisterType::D, 0x71);
    WriteRegisterByte(RegisterType::E, 0x9A);
    WriteRegisterFlag(0x60);
    WriteRegisterByte(RegisterType::H, 0xDF);
    WriteRegisterByte(RegisterType::L, 0x9F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xE115, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x56);
    CheckRegisterByte(RegisterType::B, 0xBA);
    CheckRegisterByte(RegisterType::C, 0xF7);
    CheckRegisterByte(RegisterType::D, 0x71);
    CheckRegisterByte(RegisterType::E, 0x9A);
    CheckRegisterFlag(0x60);
    CheckRegisterByte(RegisterType::H, 0xDF);
    CheckRegisterByte(RegisterType::L, 0x9F);
    WriteRegisterWord(RegisterType::PC, 0xE116);
    WriteRegisterWord(RegisterType::SP, 0x9B1A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xE115, 0x40);
}

void test_40_03B8()
{
    if (skip_test_40_03B8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3E61);
    WriteRegisterWord(RegisterType::SP, 0x5B8F);
    WriteRegisterByte(RegisterType::A, 0x63);
    WriteRegisterByte(RegisterType::B, 0x95);
    WriteRegisterByte(RegisterType::C, 0x59);
    WriteRegisterByte(RegisterType::D, 0x10);
    WriteRegisterByte(RegisterType::E, 0x28);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x10);
    WriteRegisterByte(RegisterType::L, 0x7D);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3E61, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x63);
    CheckRegisterByte(RegisterType::B, 0x95);
    CheckRegisterByte(RegisterType::C, 0x59);
    CheckRegisterByte(RegisterType::D, 0x10);
    CheckRegisterByte(RegisterType::E, 0x28);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x10);
    CheckRegisterByte(RegisterType::L, 0x7D);
    WriteRegisterWord(RegisterType::PC, 0x3E62);
    WriteRegisterWord(RegisterType::SP, 0x5B8F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3E61, 0x40);
}

void test_40_03B9()
{
    if (skip_test_40_03B9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xAE3B);
    WriteRegisterWord(RegisterType::SP, 0xBDCC);
    WriteRegisterByte(RegisterType::A, 0x00);
    WriteRegisterByte(RegisterType::B, 0x32);
    WriteRegisterByte(RegisterType::C, 0x7C);
    WriteRegisterByte(RegisterType::D, 0x8C);
    WriteRegisterByte(RegisterType::E, 0x82);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x61);
    WriteRegisterByte(RegisterType::L, 0xB6);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xAE3B, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x00);
    CheckRegisterByte(RegisterType::B, 0x32);
    CheckRegisterByte(RegisterType::C, 0x7C);
    CheckRegisterByte(RegisterType::D, 0x8C);
    CheckRegisterByte(RegisterType::E, 0x82);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x61);
    CheckRegisterByte(RegisterType::L, 0xB6);
    WriteRegisterWord(RegisterType::PC, 0xAE3C);
    WriteRegisterWord(RegisterType::SP, 0xBDCC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xAE3B, 0x40);
}

void test_40_03BA()
{
    if (skip_test_40_03BA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xEB6C);
    WriteRegisterWord(RegisterType::SP, 0xF575);
    WriteRegisterByte(RegisterType::A, 0xE9);
    WriteRegisterByte(RegisterType::B, 0x35);
    WriteRegisterByte(RegisterType::C, 0x0B);
    WriteRegisterByte(RegisterType::D, 0x7A);
    WriteRegisterByte(RegisterType::E, 0xED);
    WriteRegisterFlag(0x40);
    WriteRegisterByte(RegisterType::H, 0xBF);
    WriteRegisterByte(RegisterType::L, 0x61);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xEB6C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE9);
    CheckRegisterByte(RegisterType::B, 0x35);
    CheckRegisterByte(RegisterType::C, 0x0B);
    CheckRegisterByte(RegisterType::D, 0x7A);
    CheckRegisterByte(RegisterType::E, 0xED);
    CheckRegisterFlag(0x40);
    CheckRegisterByte(RegisterType::H, 0xBF);
    CheckRegisterByte(RegisterType::L, 0x61);
    WriteRegisterWord(RegisterType::PC, 0xEB6D);
    WriteRegisterWord(RegisterType::SP, 0xF575);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xEB6C, 0x40);
}

void test_40_03BB()
{
    if (skip_test_40_03BB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3B9D);
    WriteRegisterWord(RegisterType::SP, 0x7105);
    WriteRegisterByte(RegisterType::A, 0x58);
    WriteRegisterByte(RegisterType::B, 0x51);
    WriteRegisterByte(RegisterType::C, 0xD2);
    WriteRegisterByte(RegisterType::D, 0xD0);
    WriteRegisterByte(RegisterType::E, 0x72);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xCB);
    WriteRegisterByte(RegisterType::L, 0xFD);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3B9D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x58);
    CheckRegisterByte(RegisterType::B, 0x51);
    CheckRegisterByte(RegisterType::C, 0xD2);
    CheckRegisterByte(RegisterType::D, 0xD0);
    CheckRegisterByte(RegisterType::E, 0x72);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xCB);
    CheckRegisterByte(RegisterType::L, 0xFD);
    WriteRegisterWord(RegisterType::PC, 0x3B9E);
    WriteRegisterWord(RegisterType::SP, 0x7105);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3B9D, 0x40);
}

void test_40_03BC()
{
    if (skip_test_40_03BC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0462);
    WriteRegisterWord(RegisterType::SP, 0xF3C3);
    WriteRegisterByte(RegisterType::A, 0x27);
    WriteRegisterByte(RegisterType::B, 0x36);
    WriteRegisterByte(RegisterType::C, 0xC4);
    WriteRegisterByte(RegisterType::D, 0x9A);
    WriteRegisterByte(RegisterType::E, 0xA7);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x6E);
    WriteRegisterByte(RegisterType::L, 0xB5);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0462, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x27);
    CheckRegisterByte(RegisterType::B, 0x36);
    CheckRegisterByte(RegisterType::C, 0xC4);
    CheckRegisterByte(RegisterType::D, 0x9A);
    CheckRegisterByte(RegisterType::E, 0xA7);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x6E);
    CheckRegisterByte(RegisterType::L, 0xB5);
    WriteRegisterWord(RegisterType::PC, 0x0463);
    WriteRegisterWord(RegisterType::SP, 0xF3C3);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0462, 0x40);
}

void test_40_03BD()
{
    if (skip_test_40_03BD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xC3F3);
    WriteRegisterWord(RegisterType::SP, 0xBC4D);
    WriteRegisterByte(RegisterType::A, 0xA3);
    WriteRegisterByte(RegisterType::B, 0x61);
    WriteRegisterByte(RegisterType::C, 0xFA);
    WriteRegisterByte(RegisterType::D, 0x9E);
    WriteRegisterByte(RegisterType::E, 0x3B);
    WriteRegisterFlag(0xA0);
    WriteRegisterByte(RegisterType::H, 0xAB);
    WriteRegisterByte(RegisterType::L, 0x8E);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xC3F3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA3);
    CheckRegisterByte(RegisterType::B, 0x61);
    CheckRegisterByte(RegisterType::C, 0xFA);
    CheckRegisterByte(RegisterType::D, 0x9E);
    CheckRegisterByte(RegisterType::E, 0x3B);
    CheckRegisterFlag(0xA0);
    CheckRegisterByte(RegisterType::H, 0xAB);
    CheckRegisterByte(RegisterType::L, 0x8E);
    WriteRegisterWord(RegisterType::PC, 0xC3F4);
    WriteRegisterWord(RegisterType::SP, 0xBC4D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xC3F3, 0x40);
}

void test_40_03BE()
{
    if (skip_test_40_03BE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x79B3);
    WriteRegisterWord(RegisterType::SP, 0x6C3C);
    WriteRegisterByte(RegisterType::A, 0x4F);
    WriteRegisterByte(RegisterType::B, 0x3F);
    WriteRegisterByte(RegisterType::C, 0x9F);
    WriteRegisterByte(RegisterType::D, 0xB6);
    WriteRegisterByte(RegisterType::E, 0x3F);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xD5);
    WriteRegisterByte(RegisterType::L, 0xC1);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x79B3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4F);
    CheckRegisterByte(RegisterType::B, 0x3F);
    CheckRegisterByte(RegisterType::C, 0x9F);
    CheckRegisterByte(RegisterType::D, 0xB6);
    CheckRegisterByte(RegisterType::E, 0x3F);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xD5);
    CheckRegisterByte(RegisterType::L, 0xC1);
    WriteRegisterWord(RegisterType::PC, 0x79B4);
    WriteRegisterWord(RegisterType::SP, 0x6C3C);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x79B3, 0x40);
}

void test_40_03BF()
{
    if (skip_test_40_03BF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x6B30);
    WriteRegisterWord(RegisterType::SP, 0x5998);
    WriteRegisterByte(RegisterType::A, 0xA5);
    WriteRegisterByte(RegisterType::B, 0x2E);
    WriteRegisterByte(RegisterType::C, 0x69);
    WriteRegisterByte(RegisterType::D, 0x8A);
    WriteRegisterByte(RegisterType::E, 0x79);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x11);
    WriteRegisterByte(RegisterType::L, 0xFF);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x6B30, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xA5);
    CheckRegisterByte(RegisterType::B, 0x2E);
    CheckRegisterByte(RegisterType::C, 0x69);
    CheckRegisterByte(RegisterType::D, 0x8A);
    CheckRegisterByte(RegisterType::E, 0x79);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x11);
    CheckRegisterByte(RegisterType::L, 0xFF);
    WriteRegisterWord(RegisterType::PC, 0x6B31);
    WriteRegisterWord(RegisterType::SP, 0x5998);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x6B30, 0x40);
}

void test_40_03C0()
{
    if (skip_test_40_03C0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0437);
    WriteRegisterWord(RegisterType::SP, 0xEC54);
    WriteRegisterByte(RegisterType::A, 0xBC);
    WriteRegisterByte(RegisterType::B, 0x29);
    WriteRegisterByte(RegisterType::C, 0xF5);
    WriteRegisterByte(RegisterType::D, 0x7E);
    WriteRegisterByte(RegisterType::E, 0xB4);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0xB0);
    WriteRegisterByte(RegisterType::L, 0x77);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0437, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xBC);
    CheckRegisterByte(RegisterType::B, 0x29);
    CheckRegisterByte(RegisterType::C, 0xF5);
    CheckRegisterByte(RegisterType::D, 0x7E);
    CheckRegisterByte(RegisterType::E, 0xB4);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0xB0);
    CheckRegisterByte(RegisterType::L, 0x77);
    WriteRegisterWord(RegisterType::PC, 0x0438);
    WriteRegisterWord(RegisterType::SP, 0xEC54);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0437, 0x40);
}

void test_40_03C1()
{
    if (skip_test_40_03C1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8DCB);
    WriteRegisterWord(RegisterType::SP, 0x26AC);
    WriteRegisterByte(RegisterType::A, 0x99);
    WriteRegisterByte(RegisterType::B, 0x49);
    WriteRegisterByte(RegisterType::C, 0x87);
    WriteRegisterByte(RegisterType::D, 0xC2);
    WriteRegisterByte(RegisterType::E, 0xD4);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0xD0);
    WriteRegisterByte(RegisterType::L, 0xED);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8DCB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x99);
    CheckRegisterByte(RegisterType::B, 0x49);
    CheckRegisterByte(RegisterType::C, 0x87);
    CheckRegisterByte(RegisterType::D, 0xC2);
    CheckRegisterByte(RegisterType::E, 0xD4);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0xD0);
    CheckRegisterByte(RegisterType::L, 0xED);
    WriteRegisterWord(RegisterType::PC, 0x8DCC);
    WriteRegisterWord(RegisterType::SP, 0x26AC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8DCB, 0x40);
}

void test_40_03C2()
{
    if (skip_test_40_03C2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x86DF);
    WriteRegisterWord(RegisterType::SP, 0x244B);
    WriteRegisterByte(RegisterType::A, 0x09);
    WriteRegisterByte(RegisterType::B, 0x6F);
    WriteRegisterByte(RegisterType::C, 0x93);
    WriteRegisterByte(RegisterType::D, 0x3C);
    WriteRegisterByte(RegisterType::E, 0x29);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x26);
    WriteRegisterByte(RegisterType::L, 0x33);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x86DF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x09);
    CheckRegisterByte(RegisterType::B, 0x6F);
    CheckRegisterByte(RegisterType::C, 0x93);
    CheckRegisterByte(RegisterType::D, 0x3C);
    CheckRegisterByte(RegisterType::E, 0x29);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x26);
    CheckRegisterByte(RegisterType::L, 0x33);
    WriteRegisterWord(RegisterType::PC, 0x86E0);
    WriteRegisterWord(RegisterType::SP, 0x244B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x86DF, 0x40);
}

void test_40_03C3()
{
    if (skip_test_40_03C3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xF059);
    WriteRegisterWord(RegisterType::SP, 0x3D68);
    WriteRegisterByte(RegisterType::A, 0x39);
    WriteRegisterByte(RegisterType::B, 0xB9);
    WriteRegisterByte(RegisterType::C, 0x10);
    WriteRegisterByte(RegisterType::D, 0xB3);
    WriteRegisterByte(RegisterType::E, 0xA5);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x1F);
    WriteRegisterByte(RegisterType::L, 0x76);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xF059, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x39);
    CheckRegisterByte(RegisterType::B, 0xB9);
    CheckRegisterByte(RegisterType::C, 0x10);
    CheckRegisterByte(RegisterType::D, 0xB3);
    CheckRegisterByte(RegisterType::E, 0xA5);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x1F);
    CheckRegisterByte(RegisterType::L, 0x76);
    WriteRegisterWord(RegisterType::PC, 0xF05A);
    WriteRegisterWord(RegisterType::SP, 0x3D68);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xF059, 0x40);
}

void test_40_03C4()
{
    if (skip_test_40_03C4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3333);
    WriteRegisterWord(RegisterType::SP, 0x3881);
    WriteRegisterByte(RegisterType::A, 0x83);
    WriteRegisterByte(RegisterType::B, 0xB1);
    WriteRegisterByte(RegisterType::C, 0xFD);
    WriteRegisterByte(RegisterType::D, 0xF3);
    WriteRegisterByte(RegisterType::E, 0x9A);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xDF);
    WriteRegisterByte(RegisterType::L, 0xBF);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3333, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x83);
    CheckRegisterByte(RegisterType::B, 0xB1);
    CheckRegisterByte(RegisterType::C, 0xFD);
    CheckRegisterByte(RegisterType::D, 0xF3);
    CheckRegisterByte(RegisterType::E, 0x9A);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xDF);
    CheckRegisterByte(RegisterType::L, 0xBF);
    WriteRegisterWord(RegisterType::PC, 0x3334);
    WriteRegisterWord(RegisterType::SP, 0x3881);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3333, 0x40);
}

void test_40_03C5()
{
    if (skip_test_40_03C5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7BB6);
    WriteRegisterWord(RegisterType::SP, 0x4883);
    WriteRegisterByte(RegisterType::A, 0x2A);
    WriteRegisterByte(RegisterType::B, 0xB4);
    WriteRegisterByte(RegisterType::C, 0x00);
    WriteRegisterByte(RegisterType::D, 0xAD);
    WriteRegisterByte(RegisterType::E, 0x7A);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x0C);
    WriteRegisterByte(RegisterType::L, 0xF8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7BB6, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2A);
    CheckRegisterByte(RegisterType::B, 0xB4);
    CheckRegisterByte(RegisterType::C, 0x00);
    CheckRegisterByte(RegisterType::D, 0xAD);
    CheckRegisterByte(RegisterType::E, 0x7A);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x0C);
    CheckRegisterByte(RegisterType::L, 0xF8);
    WriteRegisterWord(RegisterType::PC, 0x7BB7);
    WriteRegisterWord(RegisterType::SP, 0x4883);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7BB6, 0x40);
}

void test_40_03C6()
{
    if (skip_test_40_03C6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9413);
    WriteRegisterWord(RegisterType::SP, 0x0ECE);
    WriteRegisterByte(RegisterType::A, 0x7A);
    WriteRegisterByte(RegisterType::B, 0xED);
    WriteRegisterByte(RegisterType::C, 0xA9);
    WriteRegisterByte(RegisterType::D, 0x36);
    WriteRegisterByte(RegisterType::E, 0xAC);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x3B);
    WriteRegisterByte(RegisterType::L, 0x9F);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9413, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x7A);
    CheckRegisterByte(RegisterType::B, 0xED);
    CheckRegisterByte(RegisterType::C, 0xA9);
    CheckRegisterByte(RegisterType::D, 0x36);
    CheckRegisterByte(RegisterType::E, 0xAC);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x3B);
    CheckRegisterByte(RegisterType::L, 0x9F);
    WriteRegisterWord(RegisterType::PC, 0x9414);
    WriteRegisterWord(RegisterType::SP, 0x0ECE);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9413, 0x40);
}

void test_40_03C7()
{
    if (skip_test_40_03C7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD0DB);
    WriteRegisterWord(RegisterType::SP, 0xC25B);
    WriteRegisterByte(RegisterType::A, 0xAC);
    WriteRegisterByte(RegisterType::B, 0x86);
    WriteRegisterByte(RegisterType::C, 0x47);
    WriteRegisterByte(RegisterType::D, 0x3E);
    WriteRegisterByte(RegisterType::E, 0xBB);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x71);
    WriteRegisterByte(RegisterType::L, 0xBE);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xD0DB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAC);
    CheckRegisterByte(RegisterType::B, 0x86);
    CheckRegisterByte(RegisterType::C, 0x47);
    CheckRegisterByte(RegisterType::D, 0x3E);
    CheckRegisterByte(RegisterType::E, 0xBB);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x71);
    CheckRegisterByte(RegisterType::L, 0xBE);
    WriteRegisterWord(RegisterType::PC, 0xD0DC);
    WriteRegisterWord(RegisterType::SP, 0xC25B);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xD0DB, 0x40);
}

void test_40_03C8()
{
    if (skip_test_40_03C8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xADC0);
    WriteRegisterWord(RegisterType::SP, 0x3109);
    WriteRegisterByte(RegisterType::A, 0x83);
    WriteRegisterByte(RegisterType::B, 0x6C);
    WriteRegisterByte(RegisterType::C, 0x77);
    WriteRegisterByte(RegisterType::D, 0xBF);
    WriteRegisterByte(RegisterType::E, 0x7A);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x42);
    WriteRegisterByte(RegisterType::L, 0x1F);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xADC0, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x83);
    CheckRegisterByte(RegisterType::B, 0x6C);
    CheckRegisterByte(RegisterType::C, 0x77);
    CheckRegisterByte(RegisterType::D, 0xBF);
    CheckRegisterByte(RegisterType::E, 0x7A);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x42);
    CheckRegisterByte(RegisterType::L, 0x1F);
    WriteRegisterWord(RegisterType::PC, 0xADC1);
    WriteRegisterWord(RegisterType::SP, 0x3109);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xADC0, 0x40);
}

void test_40_03C9()
{
    if (skip_test_40_03C9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8893);
    WriteRegisterWord(RegisterType::SP, 0xB276);
    WriteRegisterByte(RegisterType::A, 0x2F);
    WriteRegisterByte(RegisterType::B, 0xCE);
    WriteRegisterByte(RegisterType::C, 0x5D);
    WriteRegisterByte(RegisterType::D, 0xC2);
    WriteRegisterByte(RegisterType::E, 0xD8);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x26);
    WriteRegisterByte(RegisterType::L, 0x79);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8893, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2F);
    CheckRegisterByte(RegisterType::B, 0xCE);
    CheckRegisterByte(RegisterType::C, 0x5D);
    CheckRegisterByte(RegisterType::D, 0xC2);
    CheckRegisterByte(RegisterType::E, 0xD8);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x26);
    CheckRegisterByte(RegisterType::L, 0x79);
    WriteRegisterWord(RegisterType::PC, 0x8894);
    WriteRegisterWord(RegisterType::SP, 0xB276);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8893, 0x40);
}

void test_40_03CA()
{
    if (skip_test_40_03CA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xDFB7);
    WriteRegisterWord(RegisterType::SP, 0x4BE7);
    WriteRegisterByte(RegisterType::A, 0x4E);
    WriteRegisterByte(RegisterType::B, 0x0A);
    WriteRegisterByte(RegisterType::C, 0x04);
    WriteRegisterByte(RegisterType::D, 0xB3);
    WriteRegisterByte(RegisterType::E, 0x95);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x71);
    WriteRegisterByte(RegisterType::L, 0x23);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xDFB7, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4E);
    CheckRegisterByte(RegisterType::B, 0x0A);
    CheckRegisterByte(RegisterType::C, 0x04);
    CheckRegisterByte(RegisterType::D, 0xB3);
    CheckRegisterByte(RegisterType::E, 0x95);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x71);
    CheckRegisterByte(RegisterType::L, 0x23);
    WriteRegisterWord(RegisterType::PC, 0xDFB8);
    WriteRegisterWord(RegisterType::SP, 0x4BE7);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xDFB7, 0x40);
}

void test_40_03CB()
{
    if (skip_test_40_03CB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8688);
    WriteRegisterWord(RegisterType::SP, 0x48C4);
    WriteRegisterByte(RegisterType::A, 0x8F);
    WriteRegisterByte(RegisterType::B, 0x98);
    WriteRegisterByte(RegisterType::C, 0xA4);
    WriteRegisterByte(RegisterType::D, 0x99);
    WriteRegisterByte(RegisterType::E, 0x52);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x7E);
    WriteRegisterByte(RegisterType::L, 0xC3);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8688, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8F);
    CheckRegisterByte(RegisterType::B, 0x98);
    CheckRegisterByte(RegisterType::C, 0xA4);
    CheckRegisterByte(RegisterType::D, 0x99);
    CheckRegisterByte(RegisterType::E, 0x52);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x7E);
    CheckRegisterByte(RegisterType::L, 0xC3);
    WriteRegisterWord(RegisterType::PC, 0x8689);
    WriteRegisterWord(RegisterType::SP, 0x48C4);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8688, 0x40);
}

void test_40_03CC()
{
    if (skip_test_40_03CC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x727C);
    WriteRegisterWord(RegisterType::SP, 0x0B35);
    WriteRegisterByte(RegisterType::A, 0x2D);
    WriteRegisterByte(RegisterType::B, 0x68);
    WriteRegisterByte(RegisterType::C, 0x84);
    WriteRegisterByte(RegisterType::D, 0x42);
    WriteRegisterByte(RegisterType::E, 0xBE);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0x3D);
    WriteRegisterByte(RegisterType::L, 0xFA);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x727C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x2D);
    CheckRegisterByte(RegisterType::B, 0x68);
    CheckRegisterByte(RegisterType::C, 0x84);
    CheckRegisterByte(RegisterType::D, 0x42);
    CheckRegisterByte(RegisterType::E, 0xBE);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0x3D);
    CheckRegisterByte(RegisterType::L, 0xFA);
    WriteRegisterWord(RegisterType::PC, 0x727D);
    WriteRegisterWord(RegisterType::SP, 0x0B35);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x727C, 0x40);
}

void test_40_03CD()
{
    if (skip_test_40_03CD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x4065);
    WriteRegisterWord(RegisterType::SP, 0x9184);
    WriteRegisterByte(RegisterType::A, 0x6F);
    WriteRegisterByte(RegisterType::B, 0x54);
    WriteRegisterByte(RegisterType::C, 0x6D);
    WriteRegisterByte(RegisterType::D, 0xC3);
    WriteRegisterByte(RegisterType::E, 0x59);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0xF2);
    WriteRegisterByte(RegisterType::L, 0xA4);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x4065, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6F);
    CheckRegisterByte(RegisterType::B, 0x54);
    CheckRegisterByte(RegisterType::C, 0x6D);
    CheckRegisterByte(RegisterType::D, 0xC3);
    CheckRegisterByte(RegisterType::E, 0x59);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0xF2);
    CheckRegisterByte(RegisterType::L, 0xA4);
    WriteRegisterWord(RegisterType::PC, 0x4066);
    WriteRegisterWord(RegisterType::SP, 0x9184);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x4065, 0x40);
}

void test_40_03CE()
{
    if (skip_test_40_03CE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7A01);
    WriteRegisterWord(RegisterType::SP, 0x28EF);
    WriteRegisterByte(RegisterType::A, 0xAB);
    WriteRegisterByte(RegisterType::B, 0xE7);
    WriteRegisterByte(RegisterType::C, 0xB5);
    WriteRegisterByte(RegisterType::D, 0xFC);
    WriteRegisterByte(RegisterType::E, 0x4E);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0x27);
    WriteRegisterByte(RegisterType::L, 0xDF);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7A01, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAB);
    CheckRegisterByte(RegisterType::B, 0xE7);
    CheckRegisterByte(RegisterType::C, 0xB5);
    CheckRegisterByte(RegisterType::D, 0xFC);
    CheckRegisterByte(RegisterType::E, 0x4E);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0x27);
    CheckRegisterByte(RegisterType::L, 0xDF);
    WriteRegisterWord(RegisterType::PC, 0x7A02);
    WriteRegisterWord(RegisterType::SP, 0x28EF);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7A01, 0x40);
}

void test_40_03CF()
{
    if (skip_test_40_03CF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0CEF);
    WriteRegisterWord(RegisterType::SP, 0xD78D);
    WriteRegisterByte(RegisterType::A, 0xFE);
    WriteRegisterByte(RegisterType::B, 0xDE);
    WriteRegisterByte(RegisterType::C, 0x35);
    WriteRegisterByte(RegisterType::D, 0xF0);
    WriteRegisterByte(RegisterType::E, 0x7F);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0xAB);
    WriteRegisterByte(RegisterType::L, 0x2A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0CEF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFE);
    CheckRegisterByte(RegisterType::B, 0xDE);
    CheckRegisterByte(RegisterType::C, 0x35);
    CheckRegisterByte(RegisterType::D, 0xF0);
    CheckRegisterByte(RegisterType::E, 0x7F);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0xAB);
    CheckRegisterByte(RegisterType::L, 0x2A);
    WriteRegisterWord(RegisterType::PC, 0x0CF0);
    WriteRegisterWord(RegisterType::SP, 0xD78D);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x0CEF, 0x40);
}

void test_40_03D0()
{
    if (skip_test_40_03D0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x2E4C);
    WriteRegisterWord(RegisterType::SP, 0xE1D3);
    WriteRegisterByte(RegisterType::A, 0xE2);
    WriteRegisterByte(RegisterType::B, 0x9A);
    WriteRegisterByte(RegisterType::C, 0x8E);
    WriteRegisterByte(RegisterType::D, 0x8F);
    WriteRegisterByte(RegisterType::E, 0xFF);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x85);
    WriteRegisterByte(RegisterType::L, 0x64);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x2E4C, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xE2);
    CheckRegisterByte(RegisterType::B, 0x9A);
    CheckRegisterByte(RegisterType::C, 0x8E);
    CheckRegisterByte(RegisterType::D, 0x8F);
    CheckRegisterByte(RegisterType::E, 0xFF);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x85);
    CheckRegisterByte(RegisterType::L, 0x64);
    WriteRegisterWord(RegisterType::PC, 0x2E4D);
    WriteRegisterWord(RegisterType::SP, 0xE1D3);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x2E4C, 0x40);
}

void test_40_03D1()
{
    if (skip_test_40_03D1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x149E);
    WriteRegisterWord(RegisterType::SP, 0x94F3);
    WriteRegisterByte(RegisterType::A, 0x6A);
    WriteRegisterByte(RegisterType::B, 0x25);
    WriteRegisterByte(RegisterType::C, 0x8E);
    WriteRegisterByte(RegisterType::D, 0x74);
    WriteRegisterByte(RegisterType::E, 0x0A);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xC3);
    WriteRegisterByte(RegisterType::L, 0x0B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x149E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6A);
    CheckRegisterByte(RegisterType::B, 0x25);
    CheckRegisterByte(RegisterType::C, 0x8E);
    CheckRegisterByte(RegisterType::D, 0x74);
    CheckRegisterByte(RegisterType::E, 0x0A);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xC3);
    CheckRegisterByte(RegisterType::L, 0x0B);
    WriteRegisterWord(RegisterType::PC, 0x149F);
    WriteRegisterWord(RegisterType::SP, 0x94F3);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x149E, 0x40);
}

void test_40_03D2()
{
    if (skip_test_40_03D2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD568);
    WriteRegisterWord(RegisterType::SP, 0xEEE7);
    WriteRegisterByte(RegisterType::A, 0xFE);
    WriteRegisterByte(RegisterType::B, 0xE3);
    WriteRegisterByte(RegisterType::C, 0x3B);
    WriteRegisterByte(RegisterType::D, 0x56);
    WriteRegisterByte(RegisterType::E, 0x0A);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x7E);
    WriteRegisterByte(RegisterType::L, 0x32);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD568, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFE);
    CheckRegisterByte(RegisterType::B, 0xE3);
    CheckRegisterByte(RegisterType::C, 0x3B);
    CheckRegisterByte(RegisterType::D, 0x56);
    CheckRegisterByte(RegisterType::E, 0x0A);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x7E);
    CheckRegisterByte(RegisterType::L, 0x32);
    WriteRegisterWord(RegisterType::PC, 0xD569);
    WriteRegisterWord(RegisterType::SP, 0xEEE7);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD568, 0x40);
}

void test_40_03D3()
{
    if (skip_test_40_03D3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x709F);
    WriteRegisterWord(RegisterType::SP, 0x93D3);
    WriteRegisterByte(RegisterType::A, 0x03);
    WriteRegisterByte(RegisterType::B, 0x68);
    WriteRegisterByte(RegisterType::C, 0x08);
    WriteRegisterByte(RegisterType::D, 0x83);
    WriteRegisterByte(RegisterType::E, 0x0D);
    WriteRegisterFlag(0x30);
    WriteRegisterByte(RegisterType::H, 0x50);
    WriteRegisterByte(RegisterType::L, 0x8C);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x709F, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x03);
    CheckRegisterByte(RegisterType::B, 0x68);
    CheckRegisterByte(RegisterType::C, 0x08);
    CheckRegisterByte(RegisterType::D, 0x83);
    CheckRegisterByte(RegisterType::E, 0x0D);
    CheckRegisterFlag(0x30);
    CheckRegisterByte(RegisterType::H, 0x50);
    CheckRegisterByte(RegisterType::L, 0x8C);
    WriteRegisterWord(RegisterType::PC, 0x70A0);
    WriteRegisterWord(RegisterType::SP, 0x93D3);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x709F, 0x40);
}

void test_40_03D4()
{
    if (skip_test_40_03D4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x9D89);
    WriteRegisterWord(RegisterType::SP, 0xBE0F);
    WriteRegisterByte(RegisterType::A, 0xFE);
    WriteRegisterByte(RegisterType::B, 0x35);
    WriteRegisterByte(RegisterType::C, 0x26);
    WriteRegisterByte(RegisterType::D, 0xA2);
    WriteRegisterByte(RegisterType::E, 0x3A);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xAA);
    WriteRegisterByte(RegisterType::L, 0x52);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x9D89, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xFE);
    CheckRegisterByte(RegisterType::B, 0x35);
    CheckRegisterByte(RegisterType::C, 0x26);
    CheckRegisterByte(RegisterType::D, 0xA2);
    CheckRegisterByte(RegisterType::E, 0x3A);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xAA);
    CheckRegisterByte(RegisterType::L, 0x52);
    WriteRegisterWord(RegisterType::PC, 0x9D8A);
    WriteRegisterWord(RegisterType::SP, 0xBE0F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x9D89, 0x40);
}

void test_40_03D5()
{
    if (skip_test_40_03D5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x29E3);
    WriteRegisterWord(RegisterType::SP, 0xC1F0);
    WriteRegisterByte(RegisterType::A, 0x5C);
    WriteRegisterByte(RegisterType::B, 0x81);
    WriteRegisterByte(RegisterType::C, 0x32);
    WriteRegisterByte(RegisterType::D, 0x35);
    WriteRegisterByte(RegisterType::E, 0xDD);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x19);
    WriteRegisterByte(RegisterType::L, 0x9A);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x29E3, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x5C);
    CheckRegisterByte(RegisterType::B, 0x81);
    CheckRegisterByte(RegisterType::C, 0x32);
    CheckRegisterByte(RegisterType::D, 0x35);
    CheckRegisterByte(RegisterType::E, 0xDD);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x19);
    CheckRegisterByte(RegisterType::L, 0x9A);
    WriteRegisterWord(RegisterType::PC, 0x29E4);
    WriteRegisterWord(RegisterType::SP, 0xC1F0);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x29E3, 0x40);
}

void test_40_03D6()
{
    if (skip_test_40_03D6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x53EF);
    WriteRegisterWord(RegisterType::SP, 0xF01A);
    WriteRegisterByte(RegisterType::A, 0x3D);
    WriteRegisterByte(RegisterType::B, 0x67);
    WriteRegisterByte(RegisterType::C, 0xAB);
    WriteRegisterByte(RegisterType::D, 0x63);
    WriteRegisterByte(RegisterType::E, 0x34);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0xA2);
    WriteRegisterByte(RegisterType::L, 0x35);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x53EF, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x3D);
    CheckRegisterByte(RegisterType::B, 0x67);
    CheckRegisterByte(RegisterType::C, 0xAB);
    CheckRegisterByte(RegisterType::D, 0x63);
    CheckRegisterByte(RegisterType::E, 0x34);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0xA2);
    CheckRegisterByte(RegisterType::L, 0x35);
    WriteRegisterWord(RegisterType::PC, 0x53F0);
    WriteRegisterWord(RegisterType::SP, 0xF01A);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x53EF, 0x40);
}

void test_40_03D7()
{
    if (skip_test_40_03D7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3B5D);
    WriteRegisterWord(RegisterType::SP, 0x8229);
    WriteRegisterByte(RegisterType::A, 0xDB);
    WriteRegisterByte(RegisterType::B, 0x6B);
    WriteRegisterByte(RegisterType::C, 0x9C);
    WriteRegisterByte(RegisterType::D, 0x2F);
    WriteRegisterByte(RegisterType::E, 0x64);
    WriteRegisterFlag(0xC0);
    WriteRegisterByte(RegisterType::H, 0x21);
    WriteRegisterByte(RegisterType::L, 0x27);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3B5D, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xDB);
    CheckRegisterByte(RegisterType::B, 0x6B);
    CheckRegisterByte(RegisterType::C, 0x9C);
    CheckRegisterByte(RegisterType::D, 0x2F);
    CheckRegisterByte(RegisterType::E, 0x64);
    CheckRegisterFlag(0xC0);
    CheckRegisterByte(RegisterType::H, 0x21);
    CheckRegisterByte(RegisterType::L, 0x27);
    WriteRegisterWord(RegisterType::PC, 0x3B5E);
    WriteRegisterWord(RegisterType::SP, 0x8229);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3B5D, 0x40);
}

void test_40_03D8()
{
    if (skip_test_40_03D8)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xB149);
    WriteRegisterWord(RegisterType::SP, 0x4BE4);
    WriteRegisterByte(RegisterType::A, 0xAE);
    WriteRegisterByte(RegisterType::B, 0xF0);
    WriteRegisterByte(RegisterType::C, 0x3B);
    WriteRegisterByte(RegisterType::D, 0x41);
    WriteRegisterByte(RegisterType::E, 0x43);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0x0A);
    WriteRegisterByte(RegisterType::L, 0x69);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xB149, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xAE);
    CheckRegisterByte(RegisterType::B, 0xF0);
    CheckRegisterByte(RegisterType::C, 0x3B);
    CheckRegisterByte(RegisterType::D, 0x41);
    CheckRegisterByte(RegisterType::E, 0x43);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0x0A);
    CheckRegisterByte(RegisterType::L, 0x69);
    WriteRegisterWord(RegisterType::PC, 0xB14A);
    WriteRegisterWord(RegisterType::SP, 0x4BE4);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0xB149, 0x40);
}

void test_40_03D9()
{
    if (skip_test_40_03D9)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3EF9);
    WriteRegisterWord(RegisterType::SP, 0xA243);
    WriteRegisterByte(RegisterType::A, 0x6C);
    WriteRegisterByte(RegisterType::B, 0x64);
    WriteRegisterByte(RegisterType::C, 0x6E);
    WriteRegisterByte(RegisterType::D, 0xA8);
    WriteRegisterByte(RegisterType::E, 0xEC);
    WriteRegisterFlag(0xD0);
    WriteRegisterByte(RegisterType::H, 0x13);
    WriteRegisterByte(RegisterType::L, 0x76);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x3EF9, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x6C);
    CheckRegisterByte(RegisterType::B, 0x64);
    CheckRegisterByte(RegisterType::C, 0x6E);
    CheckRegisterByte(RegisterType::D, 0xA8);
    CheckRegisterByte(RegisterType::E, 0xEC);
    CheckRegisterFlag(0xD0);
    CheckRegisterByte(RegisterType::H, 0x13);
    CheckRegisterByte(RegisterType::L, 0x76);
    WriteRegisterWord(RegisterType::PC, 0x3EFA);
    WriteRegisterWord(RegisterType::SP, 0xA243);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x3EF9, 0x40);
}

void test_40_03DA()
{
    if (skip_test_40_03DA)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8289);
    WriteRegisterWord(RegisterType::SP, 0xB6DD);
    WriteRegisterByte(RegisterType::A, 0x8F);
    WriteRegisterByte(RegisterType::B, 0x5B);
    WriteRegisterByte(RegisterType::C, 0xC4);
    WriteRegisterByte(RegisterType::D, 0x46);
    WriteRegisterByte(RegisterType::E, 0xE6);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xC9);
    WriteRegisterByte(RegisterType::L, 0xF2);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x8289, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x8F);
    CheckRegisterByte(RegisterType::B, 0x5B);
    CheckRegisterByte(RegisterType::C, 0xC4);
    CheckRegisterByte(RegisterType::D, 0x46);
    CheckRegisterByte(RegisterType::E, 0xE6);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xC9);
    CheckRegisterByte(RegisterType::L, 0xF2);
    WriteRegisterWord(RegisterType::PC, 0x828A);
    WriteRegisterWord(RegisterType::SP, 0xB6DD);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8289, 0x40);
}

void test_40_03DB()
{
    if (skip_test_40_03DB)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8824);
    WriteRegisterWord(RegisterType::SP, 0x4346);
    WriteRegisterByte(RegisterType::A, 0xB2);
    WriteRegisterByte(RegisterType::B, 0xD3);
    WriteRegisterByte(RegisterType::C, 0x04);
    WriteRegisterByte(RegisterType::D, 0x08);
    WriteRegisterByte(RegisterType::E, 0x06);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0x49);
    WriteRegisterByte(RegisterType::L, 0x89);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8824, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB2);
    CheckRegisterByte(RegisterType::B, 0xD3);
    CheckRegisterByte(RegisterType::C, 0x04);
    CheckRegisterByte(RegisterType::D, 0x08);
    CheckRegisterByte(RegisterType::E, 0x06);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0x49);
    CheckRegisterByte(RegisterType::L, 0x89);
    WriteRegisterWord(RegisterType::PC, 0x8825);
    WriteRegisterWord(RegisterType::SP, 0x4346);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x8824, 0x40);
}

void test_40_03DC()
{
    if (skip_test_40_03DC)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7D22);
    WriteRegisterWord(RegisterType::SP, 0x9E6B);
    WriteRegisterByte(RegisterType::A, 0x21);
    WriteRegisterByte(RegisterType::B, 0x27);
    WriteRegisterByte(RegisterType::C, 0x36);
    WriteRegisterByte(RegisterType::D, 0x88);
    WriteRegisterByte(RegisterType::E, 0x7E);
    WriteRegisterFlag(0xE0);
    WriteRegisterByte(RegisterType::H, 0xFC);
    WriteRegisterByte(RegisterType::L, 0x74);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x7D22, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x21);
    CheckRegisterByte(RegisterType::B, 0x27);
    CheckRegisterByte(RegisterType::C, 0x36);
    CheckRegisterByte(RegisterType::D, 0x88);
    CheckRegisterByte(RegisterType::E, 0x7E);
    CheckRegisterFlag(0xE0);
    CheckRegisterByte(RegisterType::H, 0xFC);
    CheckRegisterByte(RegisterType::L, 0x74);
    WriteRegisterWord(RegisterType::PC, 0x7D23);
    WriteRegisterWord(RegisterType::SP, 0x9E6B);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x7D22, 0x40);
}

void test_40_03DD()
{
    if (skip_test_40_03DD)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xE502);
    WriteRegisterWord(RegisterType::SP, 0x1F2A);
    WriteRegisterByte(RegisterType::A, 0x80);
    WriteRegisterByte(RegisterType::B, 0x12);
    WriteRegisterByte(RegisterType::C, 0xA4);
    WriteRegisterByte(RegisterType::D, 0x9E);
    WriteRegisterByte(RegisterType::E, 0x01);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x09);
    WriteRegisterByte(RegisterType::L, 0xDB);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xE502, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x80);
    CheckRegisterByte(RegisterType::B, 0x12);
    CheckRegisterByte(RegisterType::C, 0xA4);
    CheckRegisterByte(RegisterType::D, 0x9E);
    CheckRegisterByte(RegisterType::E, 0x01);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x09);
    CheckRegisterByte(RegisterType::L, 0xDB);
    WriteRegisterWord(RegisterType::PC, 0xE503);
    WriteRegisterWord(RegisterType::SP, 0x1F2A);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xE502, 0x40);
}

void test_40_03DE()
{
    if (skip_test_40_03DE)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x7074);
    WriteRegisterWord(RegisterType::SP, 0x6B6F);
    WriteRegisterByte(RegisterType::A, 0x4F);
    WriteRegisterByte(RegisterType::B, 0x07);
    WriteRegisterByte(RegisterType::C, 0xD3);
    WriteRegisterByte(RegisterType::D, 0xD1);
    WriteRegisterByte(RegisterType::E, 0x0E);
    WriteRegisterFlag(0x20);
    WriteRegisterByte(RegisterType::H, 0xDA);
    WriteRegisterByte(RegisterType::L, 0xBF);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x7074, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4F);
    CheckRegisterByte(RegisterType::B, 0x07);
    CheckRegisterByte(RegisterType::C, 0xD3);
    CheckRegisterByte(RegisterType::D, 0xD1);
    CheckRegisterByte(RegisterType::E, 0x0E);
    CheckRegisterFlag(0x20);
    CheckRegisterByte(RegisterType::H, 0xDA);
    CheckRegisterByte(RegisterType::L, 0xBF);
    WriteRegisterWord(RegisterType::PC, 0x7075);
    WriteRegisterWord(RegisterType::SP, 0x6B6F);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x7074, 0x40);
}

void test_40_03DF()
{
    if (skip_test_40_03DF)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x8941);
    WriteRegisterWord(RegisterType::SP, 0xF9CC);
    WriteRegisterByte(RegisterType::A, 0x77);
    WriteRegisterByte(RegisterType::B, 0x2C);
    WriteRegisterByte(RegisterType::C, 0x22);
    WriteRegisterByte(RegisterType::D, 0x95);
    WriteRegisterByte(RegisterType::E, 0x87);
    WriteRegisterFlag(0x50);
    WriteRegisterByte(RegisterType::H, 0x66);
    WriteRegisterByte(RegisterType::L, 0xA7);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x8941, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x77);
    CheckRegisterByte(RegisterType::B, 0x2C);
    CheckRegisterByte(RegisterType::C, 0x22);
    CheckRegisterByte(RegisterType::D, 0x95);
    CheckRegisterByte(RegisterType::E, 0x87);
    CheckRegisterFlag(0x50);
    CheckRegisterByte(RegisterType::H, 0x66);
    CheckRegisterByte(RegisterType::L, 0xA7);
    WriteRegisterWord(RegisterType::PC, 0x8942);
    WriteRegisterWord(RegisterType::SP, 0xF9CC);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x8941, 0x40);
}

void test_40_03E0()
{
    if (skip_test_40_03E0)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xD7D2);
    WriteRegisterWord(RegisterType::SP, 0x0165);
    WriteRegisterByte(RegisterType::A, 0x15);
    WriteRegisterByte(RegisterType::B, 0x29);
    WriteRegisterByte(RegisterType::C, 0x87);
    WriteRegisterByte(RegisterType::D, 0xE4);
    WriteRegisterByte(RegisterType::E, 0x8C);
    WriteRegisterFlag(0xB0);
    WriteRegisterByte(RegisterType::H, 0x64);
    WriteRegisterByte(RegisterType::L, 0x9B);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0xD7D2, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x15);
    CheckRegisterByte(RegisterType::B, 0x29);
    CheckRegisterByte(RegisterType::C, 0x87);
    CheckRegisterByte(RegisterType::D, 0xE4);
    CheckRegisterByte(RegisterType::E, 0x8C);
    CheckRegisterFlag(0xB0);
    CheckRegisterByte(RegisterType::H, 0x64);
    CheckRegisterByte(RegisterType::L, 0x9B);
    WriteRegisterWord(RegisterType::PC, 0xD7D3);
    WriteRegisterWord(RegisterType::SP, 0x0165);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xD7D2, 0x40);
}

void test_40_03E1()
{
    if (skip_test_40_03E1)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0980);
    WriteRegisterWord(RegisterType::SP, 0x1E84);
    WriteRegisterByte(RegisterType::A, 0x81);
    WriteRegisterByte(RegisterType::B, 0xFB);
    WriteRegisterByte(RegisterType::C, 0x3B);
    WriteRegisterByte(RegisterType::D, 0x3E);
    WriteRegisterByte(RegisterType::E, 0xC3);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0x9C);
    WriteRegisterByte(RegisterType::L, 0x05);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x0980, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x81);
    CheckRegisterByte(RegisterType::B, 0xFB);
    CheckRegisterByte(RegisterType::C, 0x3B);
    CheckRegisterByte(RegisterType::D, 0x3E);
    CheckRegisterByte(RegisterType::E, 0xC3);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0x9C);
    CheckRegisterByte(RegisterType::L, 0x05);
    WriteRegisterWord(RegisterType::PC, 0x0981);
    WriteRegisterWord(RegisterType::SP, 0x1E84);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0980, 0x40);
}

void test_40_03E2()
{
    if (skip_test_40_03E2)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x0BF8);
    WriteRegisterWord(RegisterType::SP, 0x02B9);
    WriteRegisterByte(RegisterType::A, 0x07);
    WriteRegisterByte(RegisterType::B, 0x0A);
    WriteRegisterByte(RegisterType::C, 0x7D);
    WriteRegisterByte(RegisterType::D, 0xE7);
    WriteRegisterByte(RegisterType::E, 0x8D);
    WriteRegisterFlag(0xF0);
    WriteRegisterByte(RegisterType::H, 0xC7);
    WriteRegisterByte(RegisterType::L, 0xBB);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x0BF8, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x07);
    CheckRegisterByte(RegisterType::B, 0x0A);
    CheckRegisterByte(RegisterType::C, 0x7D);
    CheckRegisterByte(RegisterType::D, 0xE7);
    CheckRegisterByte(RegisterType::E, 0x8D);
    CheckRegisterFlag(0xF0);
    CheckRegisterByte(RegisterType::H, 0xC7);
    CheckRegisterByte(RegisterType::L, 0xBB);
    WriteRegisterWord(RegisterType::PC, 0x0BF9);
    WriteRegisterWord(RegisterType::SP, 0x02B9);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x0BF8, 0x40);
}

void test_40_03E3()
{
    if (skip_test_40_03E3)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x162A);
    WriteRegisterWord(RegisterType::SP, 0xD088);
    WriteRegisterByte(RegisterType::A, 0xB5);
    WriteRegisterByte(RegisterType::B, 0xDE);
    WriteRegisterByte(RegisterType::C, 0xCE);
    WriteRegisterByte(RegisterType::D, 0x54);
    WriteRegisterByte(RegisterType::E, 0x63);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xCB);
    WriteRegisterByte(RegisterType::L, 0x48);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x162A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB5);
    CheckRegisterByte(RegisterType::B, 0xDE);
    CheckRegisterByte(RegisterType::C, 0xCE);
    CheckRegisterByte(RegisterType::D, 0x54);
    CheckRegisterByte(RegisterType::E, 0x63);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xCB);
    CheckRegisterByte(RegisterType::L, 0x48);
    WriteRegisterWord(RegisterType::PC, 0x162B);
    WriteRegisterWord(RegisterType::SP, 0xD088);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x162A, 0x40);
}

void test_40_03E4()
{
    if (skip_test_40_03E4)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0xADC1);
    WriteRegisterWord(RegisterType::SP, 0x9FA6);
    WriteRegisterByte(RegisterType::A, 0x4B);
    WriteRegisterByte(RegisterType::B, 0x8E);
    WriteRegisterByte(RegisterType::C, 0x0E);
    WriteRegisterByte(RegisterType::D, 0x29);
    WriteRegisterByte(RegisterType::E, 0xFF);
    WriteRegisterFlag(0x90);
    WriteRegisterByte(RegisterType::H, 0xDD);
    WriteRegisterByte(RegisterType::L, 0x87);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0xADC1, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x4B);
    CheckRegisterByte(RegisterType::B, 0x8E);
    CheckRegisterByte(RegisterType::C, 0x0E);
    CheckRegisterByte(RegisterType::D, 0x29);
    CheckRegisterByte(RegisterType::E, 0xFF);
    CheckRegisterFlag(0x90);
    CheckRegisterByte(RegisterType::H, 0xDD);
    CheckRegisterByte(RegisterType::L, 0x87);
    WriteRegisterWord(RegisterType::PC, 0xADC2);
    WriteRegisterWord(RegisterType::SP, 0x9FA6);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0xADC1, 0x40);
}

void test_40_03E5()
{
    if (skip_test_40_03E5)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x880A);
    WriteRegisterWord(RegisterType::SP, 0x5B37);
    WriteRegisterByte(RegisterType::A, 0xB1);
    WriteRegisterByte(RegisterType::B, 0x04);
    WriteRegisterByte(RegisterType::C, 0x4D);
    WriteRegisterByte(RegisterType::D, 0x9F);
    WriteRegisterByte(RegisterType::E, 0x0B);
    WriteRegisterFlag(0x80);
    WriteRegisterByte(RegisterType::H, 0xE8);
    WriteRegisterByte(RegisterType::L, 0x21);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x880A, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0xB1);
    CheckRegisterByte(RegisterType::B, 0x04);
    CheckRegisterByte(RegisterType::C, 0x4D);
    CheckRegisterByte(RegisterType::D, 0x9F);
    CheckRegisterByte(RegisterType::E, 0x0B);
    CheckRegisterFlag(0x80);
    CheckRegisterByte(RegisterType::H, 0xE8);
    CheckRegisterByte(RegisterType::L, 0x21);
    WriteRegisterWord(RegisterType::PC, 0x880B);
    WriteRegisterWord(RegisterType::SP, 0x5B37);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x880A, 0x40);
}

void test_40_03E6()
{
    if (skip_test_40_03E6)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x014E);
    WriteRegisterWord(RegisterType::SP, 0xB8FA);
    WriteRegisterByte(RegisterType::A, 0x77);
    WriteRegisterByte(RegisterType::B, 0x07);
    WriteRegisterByte(RegisterType::C, 0xC6);
    WriteRegisterByte(RegisterType::D, 0x2C);
    WriteRegisterByte(RegisterType::E, 0x64);
    WriteRegisterFlag(0x10);
    WriteRegisterByte(RegisterType::H, 0x8B);
    WriteRegisterByte(RegisterType::L, 0x26);
    mmap.EnableIME();
    WriteRegisterByte(RegisterType::IE, 0x01);
    WriteMemory(0x014E, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x77);
    CheckRegisterByte(RegisterType::B, 0x07);
    CheckRegisterByte(RegisterType::C, 0xC6);
    CheckRegisterByte(RegisterType::D, 0x2C);
    CheckRegisterByte(RegisterType::E, 0x64);
    CheckRegisterFlag(0x10);
    CheckRegisterByte(RegisterType::H, 0x8B);
    CheckRegisterByte(RegisterType::L, 0x26);
    WriteRegisterWord(RegisterType::PC, 0x014F);
    WriteRegisterWord(RegisterType::SP, 0xB8FA);
    TEST_ASSERT(mmap.IMEEnabled());
    CheckMemory(0x014E, 0x40);
}

void test_40_03E7()
{
    if (skip_test_40_03E7)
    {
        TEST_SKIP("Skipping");
        return;
    }
    mmap.Reset();
    TEST_ASSERT(mmap.Initialize(MaxRomBankCount, MaxVramBankCount, MaxEramBankCount, MaxWramBankCount).IsSuccess());

    // Initial state

    WriteRegisterWord(RegisterType::PC, 0x3BEB);
    WriteRegisterWord(RegisterType::SP, 0xB684);
    WriteRegisterByte(RegisterType::A, 0x0F);
    WriteRegisterByte(RegisterType::B, 0x8A);
    WriteRegisterByte(RegisterType::C, 0x67);
    WriteRegisterByte(RegisterType::D, 0xC6);
    WriteRegisterByte(RegisterType::E, 0xD3);
    WriteRegisterFlag(0x70);
    WriteRegisterByte(RegisterType::H, 0xE9);
    WriteRegisterByte(RegisterType::L, 0xF8);
    mmap.DisableIME();
    WriteRegisterByte(RegisterType::IE, 0x00);
    WriteMemory(0x3BEB, 0x40);

    // Execute single step
    {
         auto resultByte = mmap.ReadByte(mmap.ReadPC());
         TEST_ASSERT(resultByte.IsSuccess());
         auto ticks = instruction::InstructionRegistryNoPrefix::Execute(static_cast<const Byte&>(resultByte), mmap);
         TEST_ASSERT(ticks == instruction::InstructionRegistryNoPrefix::Ticks[static_cast<const Byte&>(resultByte)]);
    }

    // Final state
            
    CheckRegisterByte(RegisterType::A, 0x0F);
    CheckRegisterByte(RegisterType::B, 0x8A);
    CheckRegisterByte(RegisterType::C, 0x67);
    CheckRegisterByte(RegisterType::D, 0xC6);
    CheckRegisterByte(RegisterType::E, 0xD3);
    CheckRegisterFlag(0x70);
    CheckRegisterByte(RegisterType::H, 0xE9);
    CheckRegisterByte(RegisterType::L, 0xF8);
    WriteRegisterWord(RegisterType::PC, 0x3BEC);
    WriteRegisterWord(RegisterType::SP, 0xB684);
    TEST_ASSERT(!mmap.IMEEnabled());
    CheckMemory(0x3BEB, 0x40);
}
